function r5(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function ll(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function wse(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){var i=!1;try{i=this instanceof r}catch{}return i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var e_={exports:{}},Rg={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vV;function Sse(){if(vV)return Rg;vV=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,s){var o=null;if(s!==void 0&&(o=""+s),i.key!==void 0&&(o=""+i.key),"key"in i){s={};for(var a in i)a!=="key"&&(s[a]=i[a])}else s=i;return i=s.ref,{$$typeof:t,type:r,key:o,ref:i!==void 0?i:null,props:s}}return Rg.Fragment=e,Rg.jsx=n,Rg.jsxs=n,Rg}var bV;function Tse(){return bV||(bV=1,e_.exports=Sse()),e_.exports}var se=Tse(),t_={exports:{}},ft={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xV;function Cse(){if(xV)return ft;xV=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.for("react.activity"),p=Symbol.iterator;function g(j){return j===null||typeof j!="object"?null:(j=p&&j[p]||j["@@iterator"],typeof j=="function"?j:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,x={};function w(j,Q,ie){this.props=j,this.context=Q,this.refs=x,this.updater=ie||y}w.prototype.isReactComponent={},w.prototype.setState=function(j,Q){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,Q,"setState")},w.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function C(){}C.prototype=w.prototype;function E(j,Q,ie){this.props=j,this.context=Q,this.refs=x,this.updater=ie||y}var _=E.prototype=new C;_.constructor=E,b(_,w.prototype),_.isPureReactComponent=!0;var A=Array.isArray;function P(){}var N={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function D(j,Q,ie){var me=ie.ref;return{$$typeof:t,type:j,key:Q,ref:me!==void 0?me:null,props:ie}}function O(j,Q){return D(j.type,Q,j.props)}function k(j){return typeof j=="object"&&j!==null&&j.$$typeof===t}function F(j){var Q={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(ie){return Q[ie]})}var L=/\/+/g;function q(j,Q){return typeof j=="object"&&j!==null&&j.key!=null?F(""+j.key):Q.toString(36)}function Y(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(P,P):(j.status="pending",j.then(function(Q){j.status==="pending"&&(j.status="fulfilled",j.value=Q)},function(Q){j.status==="pending"&&(j.status="rejected",j.reason=Q)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function W(j,Q,ie,me,ve){var _e=typeof j;(_e==="undefined"||_e==="boolean")&&(j=null);var De=!1;if(j===null)De=!0;else switch(_e){case"bigint":case"string":case"number":De=!0;break;case"object":switch(j.$$typeof){case t:case e:De=!0;break;case h:return De=j._init,W(De(j._payload),Q,ie,me,ve)}}if(De)return ve=ve(j),De=me===""?"."+q(j,0):me,A(ve)?(ie="",De!=null&&(ie=De.replace(L,"$&/")+"/"),W(ve,Q,ie,"",function(Oe){return Oe})):ve!=null&&(k(ve)&&(ve=O(ve,ie+(ve.key==null||j&&j.key===ve.key?"":(""+ve.key).replace(L,"$&/")+"/")+De)),Q.push(ve)),1;De=0;var Fe=me===""?".":me+":";if(A(j))for(var ue=0;ue<j.length;ue++)me=j[ue],_e=Fe+q(me,ue),De+=W(me,Q,ie,_e,ve);else if(ue=g(j),typeof ue=="function")for(j=ue.call(j),ue=0;!(me=j.next()).done;)me=me.value,_e=Fe+q(me,ue++),De+=W(me,Q,ie,_e,ve);else if(_e==="object"){if(typeof j.then=="function")return W(Y(j),Q,ie,me,ve);throw Q=String(j),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return De}function H(j,Q,ie){if(j==null)return j;var me=[],ve=0;return W(j,me,"","",function(_e){return Q.call(ie,_e,ve++)}),me}function X(j){if(j._status===-1){var Q=j._result;Q=Q(),Q.then(function(ie){(j._status===0||j._status===-1)&&(j._status=1,j._result=ie)},function(ie){(j._status===0||j._status===-1)&&(j._status=2,j._result=ie)}),j._status===-1&&(j._status=0,j._result=Q)}if(j._status===1)return j._result.default;throw j._result}var ee=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)},ce={map:H,forEach:function(j,Q,ie){H(j,function(){Q.apply(this,arguments)},ie)},count:function(j){var Q=0;return H(j,function(){Q++}),Q},toArray:function(j){return H(j,function(Q){return Q})||[]},only:function(j){if(!k(j))throw Error("React.Children.only expected to receive a single React element child.");return j}};return ft.Activity=d,ft.Children=ce,ft.Component=w,ft.Fragment=n,ft.Profiler=i,ft.PureComponent=E,ft.StrictMode=r,ft.Suspense=l,ft.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,ft.__COMPILER_RUNTIME={__proto__:null,c:function(j){return N.H.useMemoCache(j)}},ft.cache=function(j){return function(){return j.apply(null,arguments)}},ft.cacheSignal=function(){return null},ft.cloneElement=function(j,Q,ie){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var me=b({},j.props),ve=j.key;if(Q!=null)for(_e in Q.key!==void 0&&(ve=""+Q.key),Q)!R.call(Q,_e)||_e==="key"||_e==="__self"||_e==="__source"||_e==="ref"&&Q.ref===void 0||(me[_e]=Q[_e]);var _e=arguments.length-2;if(_e===1)me.children=ie;else if(1<_e){for(var De=Array(_e),Fe=0;Fe<_e;Fe++)De[Fe]=arguments[Fe+2];me.children=De}return D(j.type,ve,me)},ft.createContext=function(j){return j={$$typeof:o,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:s,_context:j},j},ft.createElement=function(j,Q,ie){var me,ve={},_e=null;if(Q!=null)for(me in Q.key!==void 0&&(_e=""+Q.key),Q)R.call(Q,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(ve[me]=Q[me]);var De=arguments.length-2;if(De===1)ve.children=ie;else if(1<De){for(var Fe=Array(De),ue=0;ue<De;ue++)Fe[ue]=arguments[ue+2];ve.children=Fe}if(j&&j.defaultProps)for(me in De=j.defaultProps,De)ve[me]===void 0&&(ve[me]=De[me]);return D(j,_e,ve)},ft.createRef=function(){return{current:null}},ft.forwardRef=function(j){return{$$typeof:a,render:j}},ft.isValidElement=k,ft.lazy=function(j){return{$$typeof:h,_payload:{_status:-1,_result:j},_init:X}},ft.memo=function(j,Q){return{$$typeof:u,type:j,compare:Q===void 0?null:Q}},ft.startTransition=function(j){var Q=N.T,ie={};N.T=ie;try{var me=j(),ve=N.S;ve!==null&&ve(ie,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(P,ee)}catch(_e){ee(_e)}finally{Q!==null&&ie.types!==null&&(Q.types=ie.types),N.T=Q}},ft.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},ft.use=function(j){return N.H.use(j)},ft.useActionState=function(j,Q,ie){return N.H.useActionState(j,Q,ie)},ft.useCallback=function(j,Q){return N.H.useCallback(j,Q)},ft.useContext=function(j){return N.H.useContext(j)},ft.useDebugValue=function(){},ft.useDeferredValue=function(j,Q){return N.H.useDeferredValue(j,Q)},ft.useEffect=function(j,Q){return N.H.useEffect(j,Q)},ft.useEffectEvent=function(j){return N.H.useEffectEvent(j)},ft.useId=function(){return N.H.useId()},ft.useImperativeHandle=function(j,Q,ie){return N.H.useImperativeHandle(j,Q,ie)},ft.useInsertionEffect=function(j,Q){return N.H.useInsertionEffect(j,Q)},ft.useLayoutEffect=function(j,Q){return N.H.useLayoutEffect(j,Q)},ft.useMemo=function(j,Q){return N.H.useMemo(j,Q)},ft.useOptimistic=function(j,Q){return N.H.useOptimistic(j,Q)},ft.useReducer=function(j,Q,ie){return N.H.useReducer(j,Q,ie)},ft.useRef=function(j){return N.H.useRef(j)},ft.useState=function(j){return N.H.useState(j)},ft.useSyncExternalStore=function(j,Q,ie){return N.H.useSyncExternalStore(j,Q,ie)},ft.useTransition=function(){return N.H.useTransition()},ft.version="19.2.0",ft}var wV;function Xp(){return wV||(wV=1,t_.exports=Cse()),t_.exports}var B=Xp();const Ese=ll(B),Ise=r5({__proto__:null,default:Ese},[B]);var n_={exports:{}},Dg={},r_={exports:{}},i_={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SV;function _se(){return SV||(SV=1,(function(t){function e(W,H){var X=W.length;W.push(H);e:for(;0<X;){var ee=X-1>>>1,ce=W[ee];if(0<i(ce,H))W[ee]=H,W[X]=ce,X=ee;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var H=W[0],X=W.pop();if(X!==H){W[0]=X;e:for(var ee=0,ce=W.length,j=ce>>>1;ee<j;){var Q=2*(ee+1)-1,ie=W[Q],me=Q+1,ve=W[me];if(0>i(ie,X))me<ce&&0>i(ve,ie)?(W[ee]=ve,W[me]=X,ee=me):(W[ee]=ie,W[Q]=X,ee=Q);else if(me<ce&&0>i(ve,X))W[ee]=ve,W[me]=X,ee=me;else break e}}return H}function i(W,H){var X=W.sortIndex-H.sortIndex;return X!==0?X:W.id-H.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,d=null,p=3,g=!1,y=!1,b=!1,x=!1,w=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function _(W){for(var H=n(u);H!==null;){if(H.callback===null)r(u);else if(H.startTime<=W)r(u),H.sortIndex=H.expirationTime,e(l,H);else break;H=n(u)}}function A(W){if(b=!1,_(W),!y)if(n(l)!==null)y=!0,P||(P=!0,F());else{var H=n(u);H!==null&&Y(A,H.startTime-W)}}var P=!1,N=-1,R=5,D=-1;function O(){return x?!0:!(t.unstable_now()-D<R)}function k(){if(x=!1,P){var W=t.unstable_now();D=W;var H=!0;try{e:{y=!1,b&&(b=!1,C(N),N=-1),g=!0;var X=p;try{t:{for(_(W),d=n(l);d!==null&&!(d.expirationTime>W&&O());){var ee=d.callback;if(typeof ee=="function"){d.callback=null,p=d.priorityLevel;var ce=ee(d.expirationTime<=W);if(W=t.unstable_now(),typeof ce=="function"){d.callback=ce,_(W),H=!0;break t}d===n(l)&&r(l),_(W)}else r(l);d=n(l)}if(d!==null)H=!0;else{var j=n(u);j!==null&&Y(A,j.startTime-W),H=!1}}break e}finally{d=null,p=X,g=!1}H=void 0}}finally{H?F():P=!1}}}var F;if(typeof E=="function")F=function(){E(k)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,q=L.port2;L.port1.onmessage=k,F=function(){q.postMessage(null)}}else F=function(){w(k,0)};function Y(W,H){N=w(function(){W(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(W){switch(p){case 1:case 2:case 3:var H=3;break;default:H=p}var X=p;p=H;try{return W()}finally{p=X}},t.unstable_requestPaint=function(){x=!0},t.unstable_runWithPriority=function(W,H){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var X=p;p=W;try{return H()}finally{p=X}},t.unstable_scheduleCallback=function(W,H,X){var ee=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ee+X:ee):X=ee,W){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=X+ce,W={id:h++,callback:H,priorityLevel:W,startTime:X,expirationTime:ce,sortIndex:-1},X>ee?(W.sortIndex=X,e(u,W),n(l)===null&&W===n(u)&&(b?(C(N),N=-1):b=!0,Y(A,X-ee))):(W.sortIndex=ce,e(l,W),y||g||(y=!0,P||(P=!0,F()))),W},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(W){var H=p;return function(){var X=p;p=H;try{return W.apply(this,arguments)}finally{p=X}}}})(i_)),i_}var TV;function Ase(){return TV||(TV=1,r_.exports=_se()),r_.exports}var s_={exports:{}},mi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CV;function kse(){if(CV)return mi;CV=1;var t=Xp();function e(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)u+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(l,u,h){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:d==null?null:""+d,children:l,containerInfo:u,implementation:h}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(l,u){if(l==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return mi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,mi.createPortal=function(l,u){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(e(299));return s(l,u,null,h)},mi.flushSync=function(l){var u=o.T,h=r.p;try{if(o.T=null,r.p=2,l)return l()}finally{o.T=u,r.p=h,r.d.f()}},mi.preconnect=function(l,u){typeof l=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,r.d.C(l,u))},mi.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},mi.preinit=function(l,u){if(typeof l=="string"&&u&&typeof u.as=="string"){var h=u.as,d=a(h,u.crossOrigin),p=typeof u.integrity=="string"?u.integrity:void 0,g=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;h==="style"?r.d.S(l,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:d,integrity:p,fetchPriority:g}):h==="script"&&r.d.X(l,{crossOrigin:d,integrity:p,fetchPriority:g,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},mi.preinitModule=function(l,u){if(typeof l=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var h=a(u.as,u.crossOrigin);r.d.M(l,{crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&r.d.M(l)},mi.preload=function(l,u){if(typeof l=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var h=u.as,d=a(h,u.crossOrigin);r.d.L(l,h,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},mi.preloadModule=function(l,u){if(typeof l=="string")if(u){var h=a(u.as,u.crossOrigin);r.d.m(l,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else r.d.m(l)},mi.requestFormReset=function(l){r.d.r(l)},mi.unstable_batchedUpdates=function(l,u){return l(u)},mi.useFormState=function(l,u,h){return o.H.useFormState(l,u,h)},mi.useFormStatus=function(){return o.H.useHostTransitionStatus()},mi.version="19.2.0",mi}var EV;function i5(){if(EV)return s_.exports;EV=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),s_.exports=kse(),s_.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IV;function Nse(){if(IV)return Dg;IV=1;var t=Ase(),e=Xp(),n=i5();function r(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function s(c){var f=c,m=c;if(c.alternate)for(;f.return;)f=f.return;else{c=f;do f=c,(f.flags&4098)!==0&&(m=f.return),c=f.return;while(c)}return f.tag===3?m:null}function o(c){if(c.tag===13){var f=c.memoizedState;if(f===null&&(c=c.alternate,c!==null&&(f=c.memoizedState)),f!==null)return f.dehydrated}return null}function a(c){if(c.tag===31){var f=c.memoizedState;if(f===null&&(c=c.alternate,c!==null&&(f=c.memoizedState)),f!==null)return f.dehydrated}return null}function l(c){if(s(c)!==c)throw Error(r(188))}function u(c){var f=c.alternate;if(!f){if(f=s(c),f===null)throw Error(r(188));return f!==c?null:c}for(var m=c,v=f;;){var T=m.return;if(T===null)break;var I=T.alternate;if(I===null){if(v=T.return,v!==null){m=v;continue}break}if(T.child===I.child){for(I=T.child;I;){if(I===m)return l(T),c;if(I===v)return l(T),f;I=I.sibling}throw Error(r(188))}if(m.return!==v.return)m=T,v=I;else{for(var M=!1,z=T.child;z;){if(z===m){M=!0,m=T,v=I;break}if(z===v){M=!0,v=T,m=I;break}z=z.sibling}if(!M){for(z=I.child;z;){if(z===m){M=!0,m=I,v=T;break}if(z===v){M=!0,v=I,m=T;break}z=z.sibling}if(!M)throw Error(r(189))}}if(m.alternate!==v)throw Error(r(190))}if(m.tag!==3)throw Error(r(188));return m.stateNode.current===m?c:f}function h(c){var f=c.tag;if(f===5||f===26||f===27||f===6)return c;for(c=c.child;c!==null;){if(f=h(c),f!==null)return f;c=c.sibling}return null}var d=Object.assign,p=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),E=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function F(c){return c===null||typeof c!="object"?null:(c=k&&c[k]||c["@@iterator"],typeof c=="function"?c:null)}var L=Symbol.for("react.client.reference");function q(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===L?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case b:return"Fragment";case w:return"Profiler";case x:return"StrictMode";case A:return"Suspense";case P:return"SuspenseList";case D:return"Activity"}if(typeof c=="object")switch(c.$$typeof){case y:return"Portal";case E:return c.displayName||"Context";case C:return(c._context.displayName||"Context")+".Consumer";case _:var f=c.render;return c=c.displayName,c||(c=f.displayName||f.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case N:return f=c.displayName||null,f!==null?f:q(c.type)||"Memo";case R:f=c._payload,c=c._init;try{return q(c(f))}catch{}}return null}var Y=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},ee=[],ce=-1;function j(c){return{current:c}}function Q(c){0>ce||(c.current=ee[ce],ee[ce]=null,ce--)}function ie(c,f){ce++,ee[ce]=c.current,c.current=f}var me=j(null),ve=j(null),_e=j(null),De=j(null);function Fe(c,f){switch(ie(_e,f),ie(ve,c),ie(me,null),f.nodeType){case 9:case 11:c=(c=f.documentElement)&&(c=c.namespaceURI)?z3(c):0;break;default:if(c=f.tagName,f=f.namespaceURI)f=z3(f),c=U3(f,c);else switch(c){case"svg":c=1;break;case"math":c=2;break;default:c=0}}Q(me),ie(me,c)}function ue(){Q(me),Q(ve),Q(_e)}function Oe(c){c.memoizedState!==null&&ie(De,c);var f=me.current,m=U3(f,c.type);f!==m&&(ie(ve,c),ie(me,m))}function Me(c){ve.current===c&&(Q(me),Q(ve)),De.current===c&&(Q(De),_g._currentValue=X)}var Ce,ot;function He(c){if(Ce===void 0)try{throw Error()}catch(m){var f=m.stack.trim().match(/\n( *(at )?)/);Ce=f&&f[1]||"",ot=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ce+c+ot}var ut=!1;function nt(c,f){if(!c||ut)return"";ut=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(f){var Ae=function(){throw Error()};if(Object.defineProperty(Ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ae,[])}catch(xe){var ye=xe}Reflect.construct(c,[],Ae)}else{try{Ae.call()}catch(xe){ye=xe}c.call(Ae.prototype)}}else{try{throw Error()}catch(xe){ye=xe}(Ae=c())&&typeof Ae.catch=="function"&&Ae.catch(function(){})}}catch(xe){if(xe&&ye&&typeof xe.stack=="string")return[xe.stack,ye.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var T=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");T&&T.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var I=v.DetermineComponentFrameRoot(),M=I[0],z=I[1];if(M&&z){var Z=M.split(`
`),pe=z.split(`
`);for(T=v=0;v<Z.length&&!Z[v].includes("DetermineComponentFrameRoot");)v++;for(;T<pe.length&&!pe[T].includes("DetermineComponentFrameRoot");)T++;if(v===Z.length||T===pe.length)for(v=Z.length-1,T=pe.length-1;1<=v&&0<=T&&Z[v]!==pe[T];)T--;for(;1<=v&&0<=T;v--,T--)if(Z[v]!==pe[T]){if(v!==1||T!==1)do if(v--,T--,0>T||Z[v]!==pe[T]){var Ee=`
`+Z[v].replace(" at new "," at ");return c.displayName&&Ee.includes("<anonymous>")&&(Ee=Ee.replace("<anonymous>",c.displayName)),Ee}while(1<=v&&0<=T);break}}}finally{ut=!1,Error.prepareStackTrace=m}return(m=c?c.displayName||c.name:"")?He(m):""}function Tt(c,f){switch(c.tag){case 26:case 27:case 5:return He(c.type);case 16:return He("Lazy");case 13:return c.child!==f&&f!==null?He("Suspense Fallback"):He("Suspense");case 19:return He("SuspenseList");case 0:case 15:return nt(c.type,!1);case 11:return nt(c.type.render,!1);case 1:return nt(c.type,!0);case 31:return He("Activity");default:return""}}function Mt(c){try{var f="",m=null;do f+=Tt(c,m),m=c,c=c.return;while(c);return f}catch(v){return`
Error generating stack: `+v.message+`
`+v.stack}}var qt=Object.prototype.hasOwnProperty,Ct=t.unstable_scheduleCallback,Gr=t.unstable_cancelCallback,Hr=t.unstable_shouldYield,Vs=t.unstable_requestPaint,cn=t.unstable_now,qr=t.unstable_getCurrentPriorityLevel,qi=t.unstable_ImmediatePriority,Ki=t.unstable_UserBlockingPriority,Kr=t.unstable_NormalPriority,hl=t.unstable_LowPriority,gu=t.unstable_IdlePriority,yu=t.log,Yf=t.unstable_setDisableYieldValue,pi=null,vr=null;function Xi(c){if(typeof yu=="function"&&Yf(c),vr&&typeof vr.setStrictMode=="function")try{vr.setStrictMode(pi,c)}catch{}}var jn=Math.clz32?Math.clz32:eb,J0=Math.log,Qf=Math.LN2;function eb(c){return c>>>=0,c===0?32:31-(J0(c)/Qf|0)|0}var la=256,Jc=262144,Jn=4194304;function ua(c){var f=c&42;if(f!==0)return f;switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return c&261888;case 262144:case 524288:case 1048576:case 2097152:return c&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return c&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return c}}function ca(c,f,m){var v=c.pendingLanes;if(v===0)return 0;var T=0,I=c.suspendedLanes,M=c.pingedLanes;c=c.warmLanes;var z=v&134217727;return z!==0?(v=z&~I,v!==0?T=ua(v):(M&=z,M!==0?T=ua(M):m||(m=z&~c,m!==0&&(T=ua(m))))):(z=v&~I,z!==0?T=ua(z):M!==0?T=ua(M):m||(m=v&~c,m!==0&&(T=ua(m)))),T===0?0:f!==0&&f!==T&&(f&I)===0&&(I=T&-T,m=f&-f,I>=m||I===32&&(m&4194048)!==0)?f:T}function ko(c,f){return(c.pendingLanes&~(c.suspendedLanes&~c.pingedLanes)&f)===0}function iE(c,f){switch(c){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tb(){var c=Jn;return Jn<<=1,(Jn&62914560)===0&&(Jn=4194304),c}function ha(c){for(var f=[],m=0;31>m;m++)f.push(c);return f}function eh(c,f){c.pendingLanes|=f,f!==268435456&&(c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0)}function sE(c,f,m,v,T,I){var M=c.pendingLanes;c.pendingLanes=m,c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0,c.expiredLanes&=m,c.entangledLanes&=m,c.errorRecoveryDisabledLanes&=m,c.shellSuspendCounter=0;var z=c.entanglements,Z=c.expirationTimes,pe=c.hiddenUpdates;for(m=M&~m;0<m;){var Ee=31-jn(m),Ae=1<<Ee;z[Ee]=0,Z[Ee]=-1;var ye=pe[Ee];if(ye!==null)for(pe[Ee]=null,Ee=0;Ee<ye.length;Ee++){var xe=ye[Ee];xe!==null&&(xe.lane&=-536870913)}m&=~Ae}v!==0&&th(c,v,0),I!==0&&T===0&&c.tag!==0&&(c.suspendedLanes|=I&~(M&~f))}function th(c,f,m){c.pendingLanes|=f,c.suspendedLanes&=~f;var v=31-jn(f);c.entangledLanes|=f,c.entanglements[v]=c.entanglements[v]|1073741824|m&261930}function Dm(c,f){var m=c.entangledLanes|=f;for(c=c.entanglements;m;){var v=31-jn(m),T=1<<v;T&f|c[v]&f&&(c[v]|=f),m&=~T}}function $m(c,f){var m=f&-f;return m=(m&42)!==0?1:nh(m),(m&(c.suspendedLanes|f))!==0?0:m}function nh(c){switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=128;break;case 268435456:c=134217728;break;default:c=0}return c}function fl(c){return c&=-c,2<c?8<c?(c&134217727)!==0?32:268435456:8:2}function nb(){var c=H.p;return c!==0?c:(c=window.event,c===void 0?32:hV(c.type))}function No(c,f){var m=H.p;try{return H.p=c,f()}finally{H.p=m}}var Ro=Math.random().toString(36).slice(2),er="__reactFiber$"+Ro,Dr="__reactProps$"+Ro,fa="__reactContainer$"+Ro,Zf="__reactEvents$"+Ro,oE="__reactListeners$"+Ro,rb="__reactHandles$"+Ro,ib="__reactResources$"+Ro,da="__reactMarker$"+Ro;function Jf(c){delete c[er],delete c[Dr],delete c[Zf],delete c[oE],delete c[rb]}function pa(c){var f=c[er];if(f)return f;for(var m=c.parentNode;m;){if(f=m[fa]||m[er]){if(m=f.alternate,f.child!==null||m!==null&&m.child!==null)for(c=X3(c);c!==null;){if(m=c[er])return m;c=X3(c)}return f}c=m,m=c.parentNode}return null}function Bs(c){if(c=c[er]||c[fa]){var f=c.tag;if(f===5||f===6||f===13||f===31||f===26||f===27||f===3)return c}return null}function ms(c){var f=c.tag;if(f===5||f===26||f===27||f===6)return c.stateNode;throw Error(r(33))}function ma(c){var f=c[ib];return f||(f=c[ib]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function tr(c){c[da]=!0}var Om=new Set,Pm={};function ga(c,f){ya(c,f),ya(c+"Capture",f)}function ya(c,f){for(Pm[c]=f,c=0;c<f.length;c++)Om.add(f[c])}var Mm=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Lm={},Fm={};function sb(c){return qt.call(Fm,c)?!0:qt.call(Lm,c)?!1:Mm.test(c)?Fm[c]=!0:(Lm[c]=!0,!1)}function ed(c,f,m){if(sb(f))if(m===null)c.removeAttribute(f);else{switch(typeof m){case"undefined":case"function":case"symbol":c.removeAttribute(f);return;case"boolean":var v=f.toLowerCase().slice(0,5);if(v!=="data-"&&v!=="aria-"){c.removeAttribute(f);return}}c.setAttribute(f,""+m)}}function gs(c,f,m){if(m===null)c.removeAttribute(f);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(f);return}c.setAttribute(f,""+m)}}function nr(c,f,m,v){if(v===null)c.removeAttribute(m);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(m);return}c.setAttributeNS(f,m,""+v)}}function $r(c){switch(typeof c){case"bigint":case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function vu(c){var f=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function Vm(c,f,m){var v=Object.getOwnPropertyDescriptor(c.constructor.prototype,f);if(!c.hasOwnProperty(f)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var T=v.get,I=v.set;return Object.defineProperty(c,f,{configurable:!0,get:function(){return T.call(this)},set:function(M){m=""+M,I.call(this,M)}}),Object.defineProperty(c,f,{enumerable:v.enumerable}),{getValue:function(){return m},setValue:function(M){m=""+M},stopTracking:function(){c._valueTracker=null,delete c[f]}}}}function Qt(c){if(!c._valueTracker){var f=vu(c)?"checked":"value";c._valueTracker=Vm(c,f,""+c[f])}}function rh(c){if(!c)return!1;var f=c._valueTracker;if(!f)return!0;var m=f.getValue(),v="";return c&&(v=vu(c)?c.checked?"true":"false":c.value),c=v,c!==m?(f.setValue(c),!0):!1}function va(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}var ih=/[\n"\\]/g;function Yi(c){return c.replace(ih,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function td(c,f,m,v,T,I,M,z){c.name="",M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?c.type=M:c.removeAttribute("type"),f!=null?M==="number"?(f===0&&c.value===""||c.value!=f)&&(c.value=""+$r(f)):c.value!==""+$r(f)&&(c.value=""+$r(f)):M!=="submit"&&M!=="reset"||c.removeAttribute("value"),f!=null?Bm(c,M,$r(f)):m!=null?Bm(c,M,$r(m)):v!=null&&c.removeAttribute("value"),T==null&&I!=null&&(c.defaultChecked=!!I),T!=null&&(c.checked=T&&typeof T!="function"&&typeof T!="symbol"),z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"?c.name=""+$r(z):c.removeAttribute("name")}function ob(c,f,m,v,T,I,M,z){if(I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"&&(c.type=I),f!=null||m!=null){if(!(I!=="submit"&&I!=="reset"||f!=null)){Qt(c);return}m=m!=null?""+$r(m):"",f=f!=null?""+$r(f):m,z||f===c.value||(c.value=f),c.defaultValue=f}v=v??T,v=typeof v!="function"&&typeof v!="symbol"&&!!v,c.checked=z?c.checked:!!v,c.defaultChecked=!!v,M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(c.name=M),Qt(c)}function Bm(c,f,m){f==="number"&&va(c.ownerDocument)===c||c.defaultValue===""+m||(c.defaultValue=""+m)}function bu(c,f,m,v){if(c=c.options,f){f={};for(var T=0;T<m.length;T++)f["$"+m[T]]=!0;for(m=0;m<c.length;m++)T=f.hasOwnProperty("$"+c[m].value),c[m].selected!==T&&(c[m].selected=T),T&&v&&(c[m].defaultSelected=!0)}else{for(m=""+$r(m),f=null,T=0;T<c.length;T++){if(c[T].value===m){c[T].selected=!0,v&&(c[T].defaultSelected=!0);return}f!==null||c[T].disabled||(f=c[T])}f!==null&&(f.selected=!0)}}function ab(c,f,m){if(f!=null&&(f=""+$r(f),f!==c.value&&(c.value=f),m==null)){c.defaultValue!==f&&(c.defaultValue=f);return}c.defaultValue=m!=null?""+$r(m):""}function xu(c,f,m,v){if(f==null){if(v!=null){if(m!=null)throw Error(r(92));if(Y(v)){if(1<v.length)throw Error(r(93));v=v[0]}m=v}m==null&&(m=""),f=m}m=$r(f),c.defaultValue=m,v=c.textContent,v===m&&v!==""&&v!==null&&(c.value=v),Qt(c)}function Qi(c,f){if(f){var m=c.firstChild;if(m&&m===c.lastChild&&m.nodeType===3){m.nodeValue=f;return}}c.textContent=f}var lb=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function zm(c,f,m){var v=f.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?v?c.setProperty(f,""):f==="float"?c.cssFloat="":c[f]="":v?c.setProperty(f,m):typeof m!="number"||m===0||lb.has(f)?f==="float"?c.cssFloat=m:c[f]=(""+m).trim():c[f]=m+"px"}function Um(c,f,m){if(f!=null&&typeof f!="object")throw Error(r(62));if(c=c.style,m!=null){for(var v in m)!m.hasOwnProperty(v)||f!=null&&f.hasOwnProperty(v)||(v.indexOf("--")===0?c.setProperty(v,""):v==="float"?c.cssFloat="":c[v]="");for(var T in f)v=f[T],f.hasOwnProperty(T)&&m[T]!==v&&zm(c,T,v)}else for(var I in f)f.hasOwnProperty(I)&&zm(c,I,f[I])}function nd(c){if(c.indexOf("-")===-1)return!1;switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ub=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),wu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function rd(c){return wu.test(""+c)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":c}function Do(){}var jm=null;function zs(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var Su=null,ba=null;function sh(c){var f=Bs(c);if(f&&(c=f.stateNode)){var m=c[Dr]||null;e:switch(c=f.stateNode,f.type){case"input":if(td(c,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),f=m.name,m.type==="radio"&&f!=null){for(m=c;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+Yi(""+f)+'"][type="radio"]'),f=0;f<m.length;f++){var v=m[f];if(v!==c&&v.form===c.form){var T=v[Dr]||null;if(!T)throw Error(r(90));td(v,T.value,T.defaultValue,T.defaultValue,T.checked,T.defaultChecked,T.type,T.name)}}for(f=0;f<m.length;f++)v=m[f],v.form===c.form&&rh(v)}break e;case"textarea":ab(c,m.value,m.defaultValue);break e;case"select":f=m.value,f!=null&&bu(c,!!m.multiple,f,!1)}}}var id=!1;function Tu(c,f,m){if(id)return c(f,m);id=!0;try{var v=c(f);return v}finally{if(id=!1,(Su!==null||ba!==null)&&(nx(),Su&&(f=Su,c=ba,ba=Su=null,sh(f),c)))for(f=0;f<c.length;f++)sh(c[f])}}function $o(c,f){var m=c.stateNode;if(m===null)return null;var v=m[Dr]||null;if(v===null)return null;m=v[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(c=c.type,v=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!v;break e;default:c=!1}if(c)return null;if(m&&typeof m!="function")throw Error(r(231,f,typeof m));return m}var Us=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),oh=!1;if(Us)try{var rn={};Object.defineProperty(rn,"passive",{get:function(){oh=!0}}),window.addEventListener("test",rn,rn),window.removeEventListener("test",rn,rn)}catch{oh=!1}var xa=null,Wm=null,ah=null;function Gm(){if(ah)return ah;var c,f=Wm,m=f.length,v,T="value"in xa?xa.value:xa.textContent,I=T.length;for(c=0;c<m&&f[c]===T[c];c++);var M=m-c;for(v=1;v<=M&&f[m-v]===T[I-v];v++);return ah=T.slice(c,1<v?1-v:void 0)}function lh(c){var f=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&f===13&&(c=13)):c=f,c===10&&(c=13),32<=c||c===13?c:0}function dl(){return!0}function Oo(){return!1}function Xr(c){function f(m,v,T,I,M){this._reactName=m,this._targetInst=T,this.type=v,this.nativeEvent=I,this.target=M,this.currentTarget=null;for(var z in c)c.hasOwnProperty(z)&&(m=c[z],this[z]=m?m(I):I[z]);return this.isDefaultPrevented=(I.defaultPrevented!=null?I.defaultPrevented:I.returnValue===!1)?dl:Oo,this.isPropagationStopped=Oo,this}return d(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=dl)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=dl)},persist:function(){},isPersistent:dl}),f}var pl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wa=Xr(pl),Cu=d({},pl,{view:0,detail:0}),Hm=Xr(Cu),Eu,sd,Sa,od=d({},Cu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Iu,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==Sa&&(Sa&&c.type==="mousemove"?(Eu=c.screenX-Sa.screenX,sd=c.screenY-Sa.screenY):sd=Eu=0,Sa=c),Eu)},movementY:function(c){return"movementY"in c?c.movementY:sd}}),qm=Xr(od),uh=d({},od,{dataTransfer:0}),cb=Xr(uh),hb=d({},Cu,{relatedTarget:0}),ch=Xr(hb),Km=d({},pl,{animationName:0,elapsedTime:0,pseudoElement:0}),fb=Xr(Km),ad=d({},pl,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),db=Xr(ad),pb=d({},pl,{data:0}),Ta=Xr(pb),mb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vb(c){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(c):(c=yb[c])?!!f[c]:!1}function Iu(){return vb}var Ni=d({},Cu,{key:function(c){if(c.key){var f=mb[c.key]||c.key;if(f!=="Unidentified")return f}return c.type==="keypress"?(c=lh(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?gb[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Iu,charCode:function(c){return c.type==="keypress"?lh(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?lh(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),bb=Xr(Ni),xb=d({},od,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ml=Xr(xb),S=d({},Cu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Iu}),$=Xr(S),V=d({},pl,{propertyName:0,elapsedTime:0,pseudoElement:0}),G=Xr(V),he=d({},od,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),be=Xr(he),Pe=d({},pl,{newState:0,oldState:0}),mt=Xr(Pe),Wn=[9,13,27,32],Gt=Us&&"CompositionEvent"in window,In=null;Us&&"documentMode"in document&&(In=document.documentMode);var js=Us&&"TextEvent"in window&&!In,Ca=Us&&(!Gt||In&&8<In&&11>=In),Po=" ",Mo=!1;function hh(c,f){switch(c){case"keyup":return Wn.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ld(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var ud=!1;function Gre(c,f){switch(c){case"compositionend":return ld(f);case"keypress":return f.which!==32?null:(Mo=!0,Po);case"textInput":return c=f.data,c===Po&&Mo?null:c;default:return null}}function Hre(c,f){if(ud)return c==="compositionend"||!Gt&&hh(c,f)?(c=Gm(),ah=Wm=xa=null,ud=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return Ca&&f.locale!=="ko"?null:f.data;default:return null}}var qre={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ZM(c){var f=c&&c.nodeName&&c.nodeName.toLowerCase();return f==="input"?!!qre[c.type]:f==="textarea"}function JM(c,f,m,v){Su?ba?ba.push(v):ba=[v]:Su=v,f=ux(f,"onChange"),0<f.length&&(m=new wa("onChange","change",null,m,v),c.push({event:m,listeners:f}))}var Xm=null,Ym=null;function Kre(c){P3(c,0)}function wb(c){var f=ms(c);if(rh(f))return c}function eL(c,f){if(c==="change")return f}var tL=!1;if(Us){var aE;if(Us){var lE="oninput"in document;if(!lE){var nL=document.createElement("div");nL.setAttribute("oninput","return;"),lE=typeof nL.oninput=="function"}aE=lE}else aE=!1;tL=aE&&(!document.documentMode||9<document.documentMode)}function rL(){Xm&&(Xm.detachEvent("onpropertychange",iL),Ym=Xm=null)}function iL(c){if(c.propertyName==="value"&&wb(Ym)){var f=[];JM(f,Ym,c,zs(c)),Tu(Kre,f)}}function Xre(c,f,m){c==="focusin"?(rL(),Xm=f,Ym=m,Xm.attachEvent("onpropertychange",iL)):c==="focusout"&&rL()}function Yre(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return wb(Ym)}function Qre(c,f){if(c==="click")return wb(f)}function Zre(c,f){if(c==="input"||c==="change")return wb(f)}function Jre(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var ys=typeof Object.is=="function"?Object.is:Jre;function Qm(c,f){if(ys(c,f))return!0;if(typeof c!="object"||c===null||typeof f!="object"||f===null)return!1;var m=Object.keys(c),v=Object.keys(f);if(m.length!==v.length)return!1;for(v=0;v<m.length;v++){var T=m[v];if(!qt.call(f,T)||!ys(c[T],f[T]))return!1}return!0}function sL(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function oL(c,f){var m=sL(c);c=0;for(var v;m;){if(m.nodeType===3){if(v=c+m.textContent.length,c<=f&&v>=f)return{node:m,offset:f-c};c=v}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=sL(m)}}function aL(c,f){return c&&f?c===f?!0:c&&c.nodeType===3?!1:f&&f.nodeType===3?aL(c,f.parentNode):"contains"in c?c.contains(f):c.compareDocumentPosition?!!(c.compareDocumentPosition(f)&16):!1:!1}function lL(c){c=c!=null&&c.ownerDocument!=null&&c.ownerDocument.defaultView!=null?c.ownerDocument.defaultView:window;for(var f=va(c.document);f instanceof c.HTMLIFrameElement;){try{var m=typeof f.contentWindow.location.href=="string"}catch{m=!1}if(m)c=f.contentWindow;else break;f=va(c.document)}return f}function uE(c){var f=c&&c.nodeName&&c.nodeName.toLowerCase();return f&&(f==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||f==="textarea"||c.contentEditable==="true")}var eie=Us&&"documentMode"in document&&11>=document.documentMode,cd=null,cE=null,Zm=null,hE=!1;function uL(c,f,m){var v=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;hE||cd==null||cd!==va(v)||(v=cd,"selectionStart"in v&&uE(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),Zm&&Qm(Zm,v)||(Zm=v,v=ux(cE,"onSelect"),0<v.length&&(f=new wa("onSelect","select",null,f,m),c.push({event:f,listeners:v}),f.target=cd)))}function fh(c,f){var m={};return m[c.toLowerCase()]=f.toLowerCase(),m["Webkit"+c]="webkit"+f,m["Moz"+c]="moz"+f,m}var hd={animationend:fh("Animation","AnimationEnd"),animationiteration:fh("Animation","AnimationIteration"),animationstart:fh("Animation","AnimationStart"),transitionrun:fh("Transition","TransitionRun"),transitionstart:fh("Transition","TransitionStart"),transitioncancel:fh("Transition","TransitionCancel"),transitionend:fh("Transition","TransitionEnd")},fE={},cL={};Us&&(cL=document.createElement("div").style,"AnimationEvent"in window||(delete hd.animationend.animation,delete hd.animationiteration.animation,delete hd.animationstart.animation),"TransitionEvent"in window||delete hd.transitionend.transition);function dh(c){if(fE[c])return fE[c];if(!hd[c])return c;var f=hd[c],m;for(m in f)if(f.hasOwnProperty(m)&&m in cL)return fE[c]=f[m];return c}var hL=dh("animationend"),fL=dh("animationiteration"),dL=dh("animationstart"),tie=dh("transitionrun"),nie=dh("transitionstart"),rie=dh("transitioncancel"),pL=dh("transitionend"),mL=new Map,dE="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");dE.push("scrollEnd");function Lo(c,f){mL.set(c,f),ga(f,[c])}var Sb=typeof reportError=="function"?reportError:function(c){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof c=="object"&&c!==null&&typeof c.message=="string"?String(c.message):String(c),error:c});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",c);return}console.error(c)},Ws=[],fd=0,pE=0;function Tb(){for(var c=fd,f=pE=fd=0;f<c;){var m=Ws[f];Ws[f++]=null;var v=Ws[f];Ws[f++]=null;var T=Ws[f];Ws[f++]=null;var I=Ws[f];if(Ws[f++]=null,v!==null&&T!==null){var M=v.pending;M===null?T.next=T:(T.next=M.next,M.next=T),v.pending=T}I!==0&&gL(m,T,I)}}function Cb(c,f,m,v){Ws[fd++]=c,Ws[fd++]=f,Ws[fd++]=m,Ws[fd++]=v,pE|=v,c.lanes|=v,c=c.alternate,c!==null&&(c.lanes|=v)}function mE(c,f,m,v){return Cb(c,f,m,v),Eb(c)}function ph(c,f){return Cb(c,null,null,f),Eb(c)}function gL(c,f,m){c.lanes|=m;var v=c.alternate;v!==null&&(v.lanes|=m);for(var T=!1,I=c.return;I!==null;)I.childLanes|=m,v=I.alternate,v!==null&&(v.childLanes|=m),I.tag===22&&(c=I.stateNode,c===null||c._visibility&1||(T=!0)),c=I,I=I.return;return c.tag===3?(I=c.stateNode,T&&f!==null&&(T=31-jn(m),c=I.hiddenUpdates,v=c[T],v===null?c[T]=[f]:v.push(f),f.lane=m|536870912),I):null}function Eb(c){if(50<xg)throw xg=0,CI=null,Error(r(185));for(var f=c.return;f!==null;)c=f,f=c.return;return c.tag===3?c.stateNode:null}var dd={};function iie(c,f,m,v){this.tag=c,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vs(c,f,m,v){return new iie(c,f,m,v)}function gE(c){return c=c.prototype,!(!c||!c.isReactComponent)}function gl(c,f){var m=c.alternate;return m===null?(m=vs(c.tag,f,c.key,c.mode),m.elementType=c.elementType,m.type=c.type,m.stateNode=c.stateNode,m.alternate=c,c.alternate=m):(m.pendingProps=f,m.type=c.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=c.flags&65011712,m.childLanes=c.childLanes,m.lanes=c.lanes,m.child=c.child,m.memoizedProps=c.memoizedProps,m.memoizedState=c.memoizedState,m.updateQueue=c.updateQueue,f=c.dependencies,m.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},m.sibling=c.sibling,m.index=c.index,m.ref=c.ref,m.refCleanup=c.refCleanup,m}function yL(c,f){c.flags&=65011714;var m=c.alternate;return m===null?(c.childLanes=0,c.lanes=f,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=m.childLanes,c.lanes=m.lanes,c.child=m.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=m.memoizedProps,c.memoizedState=m.memoizedState,c.updateQueue=m.updateQueue,c.type=m.type,f=m.dependencies,c.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),c}function Ib(c,f,m,v,T,I){var M=0;if(v=c,typeof c=="function")gE(c)&&(M=1);else if(typeof c=="string")M=use(c,m,me.current)?26:c==="html"||c==="head"||c==="body"?27:5;else e:switch(c){case D:return c=vs(31,m,f,T),c.elementType=D,c.lanes=I,c;case b:return mh(m.children,T,I,f);case x:M=8,T|=24;break;case w:return c=vs(12,m,f,T|2),c.elementType=w,c.lanes=I,c;case A:return c=vs(13,m,f,T),c.elementType=A,c.lanes=I,c;case P:return c=vs(19,m,f,T),c.elementType=P,c.lanes=I,c;default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case E:M=10;break e;case C:M=9;break e;case _:M=11;break e;case N:M=14;break e;case R:M=16,v=null;break e}M=29,m=Error(r(130,c===null?"null":typeof c,"")),v=null}return f=vs(M,m,f,T),f.elementType=c,f.type=v,f.lanes=I,f}function mh(c,f,m,v){return c=vs(7,c,v,f),c.lanes=m,c}function yE(c,f,m){return c=vs(6,c,null,f),c.lanes=m,c}function vL(c){var f=vs(18,null,null,0);return f.stateNode=c,f}function vE(c,f,m){return f=vs(4,c.children!==null?c.children:[],c.key,f),f.lanes=m,f.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},f}var bL=new WeakMap;function Gs(c,f){if(typeof c=="object"&&c!==null){var m=bL.get(c);return m!==void 0?m:(f={value:c,source:f,stack:Mt(f)},bL.set(c,f),f)}return{value:c,source:f,stack:Mt(f)}}var pd=[],md=0,_b=null,Jm=0,Hs=[],qs=0,_u=null,Ea=1,Ia="";function yl(c,f){pd[md++]=Jm,pd[md++]=_b,_b=c,Jm=f}function xL(c,f,m){Hs[qs++]=Ea,Hs[qs++]=Ia,Hs[qs++]=_u,_u=c;var v=Ea;c=Ia;var T=32-jn(v)-1;v&=~(1<<T),m+=1;var I=32-jn(f)+T;if(30<I){var M=T-T%5;I=(v&(1<<M)-1).toString(32),v>>=M,T-=M,Ea=1<<32-jn(f)+T|m<<T|v,Ia=I+c}else Ea=1<<I|m<<T|v,Ia=c}function bE(c){c.return!==null&&(yl(c,1),xL(c,1,0))}function xE(c){for(;c===_b;)_b=pd[--md],pd[md]=null,Jm=pd[--md],pd[md]=null;for(;c===_u;)_u=Hs[--qs],Hs[qs]=null,Ia=Hs[--qs],Hs[qs]=null,Ea=Hs[--qs],Hs[qs]=null}function wL(c,f){Hs[qs++]=Ea,Hs[qs++]=Ia,Hs[qs++]=_u,Ea=f.id,Ia=f.overflow,_u=c}var Yr=null,bn=null,Dt=!1,Au=null,Ks=!1,wE=Error(r(519));function ku(c){var f=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw eg(Gs(f,c)),wE}function SL(c){var f=c.stateNode,m=c.type,v=c.memoizedProps;switch(f[er]=c,f[Dr]=v,m){case"dialog":It("cancel",f),It("close",f);break;case"iframe":case"object":case"embed":It("load",f);break;case"video":case"audio":for(m=0;m<Sg.length;m++)It(Sg[m],f);break;case"source":It("error",f);break;case"img":case"image":case"link":It("error",f),It("load",f);break;case"details":It("toggle",f);break;case"input":It("invalid",f),ob(f,v.value,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name,!0);break;case"select":It("invalid",f);break;case"textarea":It("invalid",f),xu(f,v.value,v.defaultValue,v.children)}m=v.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||f.textContent===""+m||v.suppressHydrationWarning===!0||V3(f.textContent,m)?(v.popover!=null&&(It("beforetoggle",f),It("toggle",f)),v.onScroll!=null&&It("scroll",f),v.onScrollEnd!=null&&It("scrollend",f),v.onClick!=null&&(f.onclick=Do),f=!0):f=!1,f||ku(c,!0)}function TL(c){for(Yr=c.return;Yr;)switch(Yr.tag){case 5:case 31:case 13:Ks=!1;return;case 27:case 3:Ks=!0;return;default:Yr=Yr.return}}function gd(c){if(c!==Yr)return!1;if(!Dt)return TL(c),Dt=!0,!1;var f=c.tag,m;if((m=f!==3&&f!==27)&&((m=f===5)&&(m=c.type,m=!(m!=="form"&&m!=="button")||VI(c.type,c.memoizedProps)),m=!m),m&&bn&&ku(c),TL(c),f===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));bn=K3(c)}else if(f===31){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));bn=K3(c)}else f===27?(f=bn,ju(c.type)?(c=WI,WI=null,bn=c):bn=f):bn=Yr?Ys(c.stateNode.nextSibling):null;return!0}function gh(){bn=Yr=null,Dt=!1}function SE(){var c=Au;return c!==null&&(ts===null?ts=c:ts.push.apply(ts,c),Au=null),c}function eg(c){Au===null?Au=[c]:Au.push(c)}var TE=j(null),yh=null,vl=null;function Nu(c,f,m){ie(TE,f._currentValue),f._currentValue=m}function bl(c){c._currentValue=TE.current,Q(TE)}function CE(c,f,m){for(;c!==null;){var v=c.alternate;if((c.childLanes&f)!==f?(c.childLanes|=f,v!==null&&(v.childLanes|=f)):v!==null&&(v.childLanes&f)!==f&&(v.childLanes|=f),c===m)break;c=c.return}}function EE(c,f,m,v){var T=c.child;for(T!==null&&(T.return=c);T!==null;){var I=T.dependencies;if(I!==null){var M=T.child;I=I.firstContext;e:for(;I!==null;){var z=I;I=T;for(var Z=0;Z<f.length;Z++)if(z.context===f[Z]){I.lanes|=m,z=I.alternate,z!==null&&(z.lanes|=m),CE(I.return,m,c),v||(M=null);break e}I=z.next}}else if(T.tag===18){if(M=T.return,M===null)throw Error(r(341));M.lanes|=m,I=M.alternate,I!==null&&(I.lanes|=m),CE(M,m,c),M=null}else M=T.child;if(M!==null)M.return=T;else for(M=T;M!==null;){if(M===c){M=null;break}if(T=M.sibling,T!==null){T.return=M.return,M=T;break}M=M.return}T=M}}function yd(c,f,m,v){c=null;for(var T=f,I=!1;T!==null;){if(!I){if((T.flags&524288)!==0)I=!0;else if((T.flags&262144)!==0)break}if(T.tag===10){var M=T.alternate;if(M===null)throw Error(r(387));if(M=M.memoizedProps,M!==null){var z=T.type;ys(T.pendingProps.value,M.value)||(c!==null?c.push(z):c=[z])}}else if(T===De.current){if(M=T.alternate,M===null)throw Error(r(387));M.memoizedState.memoizedState!==T.memoizedState.memoizedState&&(c!==null?c.push(_g):c=[_g])}T=T.return}c!==null&&EE(f,c,m,v),f.flags|=262144}function Ab(c){for(c=c.firstContext;c!==null;){if(!ys(c.context._currentValue,c.memoizedValue))return!0;c=c.next}return!1}function vh(c){yh=c,vl=null,c=c.dependencies,c!==null&&(c.firstContext=null)}function Qr(c){return CL(yh,c)}function kb(c,f){return yh===null&&vh(c),CL(c,f)}function CL(c,f){var m=f._currentValue;if(f={context:f,memoizedValue:m,next:null},vl===null){if(c===null)throw Error(r(308));vl=f,c.dependencies={lanes:0,firstContext:f},c.flags|=524288}else vl=vl.next=f;return m}var sie=typeof AbortController<"u"?AbortController:function(){var c=[],f=this.signal={aborted:!1,addEventListener:function(m,v){c.push(v)}};this.abort=function(){f.aborted=!0,c.forEach(function(m){return m()})}},oie=t.unstable_scheduleCallback,aie=t.unstable_NormalPriority,rr={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function IE(){return{controller:new sie,data:new Map,refCount:0}}function tg(c){c.refCount--,c.refCount===0&&oie(aie,function(){c.controller.abort()})}var ng=null,_E=0,vd=0,bd=null;function lie(c,f){if(ng===null){var m=ng=[];_E=0,vd=NI(),bd={status:"pending",value:void 0,then:function(v){m.push(v)}}}return _E++,f.then(EL,EL),f}function EL(){if(--_E===0&&ng!==null){bd!==null&&(bd.status="fulfilled");var c=ng;ng=null,vd=0,bd=null;for(var f=0;f<c.length;f++)(0,c[f])()}}function uie(c,f){var m=[],v={status:"pending",value:null,reason:null,then:function(T){m.push(T)}};return c.then(function(){v.status="fulfilled",v.value=f;for(var T=0;T<m.length;T++)(0,m[T])(f)},function(T){for(v.status="rejected",v.reason=T,T=0;T<m.length;T++)(0,m[T])(void 0)}),v}var IL=W.S;W.S=function(c,f){u3=cn(),typeof f=="object"&&f!==null&&typeof f.then=="function"&&lie(c,f),IL!==null&&IL(c,f)};var bh=j(null);function AE(){var c=bh.current;return c!==null?c:hn.pooledCache}function Nb(c,f){f===null?ie(bh,bh.current):ie(bh,f.pool)}function _L(){var c=AE();return c===null?null:{parent:rr._currentValue,pool:c}}var xd=Error(r(460)),kE=Error(r(474)),Rb=Error(r(542)),Db={then:function(){}};function AL(c){return c=c.status,c==="fulfilled"||c==="rejected"}function kL(c,f,m){switch(m=c[m],m===void 0?c.push(f):m!==f&&(f.then(Do,Do),f=m),f.status){case"fulfilled":return f.value;case"rejected":throw c=f.reason,RL(c),c;default:if(typeof f.status=="string")f.then(Do,Do);else{if(c=hn,c!==null&&100<c.shellSuspendCounter)throw Error(r(482));c=f,c.status="pending",c.then(function(v){if(f.status==="pending"){var T=f;T.status="fulfilled",T.value=v}},function(v){if(f.status==="pending"){var T=f;T.status="rejected",T.reason=v}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw c=f.reason,RL(c),c}throw wh=f,xd}}function xh(c){try{var f=c._init;return f(c._payload)}catch(m){throw m!==null&&typeof m=="object"&&typeof m.then=="function"?(wh=m,xd):m}}var wh=null;function NL(){if(wh===null)throw Error(r(459));var c=wh;return wh=null,c}function RL(c){if(c===xd||c===Rb)throw Error(r(483))}var wd=null,rg=0;function $b(c){var f=rg;return rg+=1,wd===null&&(wd=[]),kL(wd,c,f)}function ig(c,f){f=f.props.ref,c.ref=f!==void 0?f:null}function Ob(c,f){throw f.$$typeof===p?Error(r(525)):(c=Object.prototype.toString.call(f),Error(r(31,c==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":c)))}function DL(c){function f(le,te){if(c){var de=le.deletions;de===null?(le.deletions=[te],le.flags|=16):de.push(te)}}function m(le,te){if(!c)return null;for(;te!==null;)f(le,te),te=te.sibling;return null}function v(le){for(var te=new Map;le!==null;)le.key!==null?te.set(le.key,le):te.set(le.index,le),le=le.sibling;return te}function T(le,te){return le=gl(le,te),le.index=0,le.sibling=null,le}function I(le,te,de){return le.index=de,c?(de=le.alternate,de!==null?(de=de.index,de<te?(le.flags|=67108866,te):de):(le.flags|=67108866,te)):(le.flags|=1048576,te)}function M(le){return c&&le.alternate===null&&(le.flags|=67108866),le}function z(le,te,de,Ie){return te===null||te.tag!==6?(te=yE(de,le.mode,Ie),te.return=le,te):(te=T(te,de),te.return=le,te)}function Z(le,te,de,Ie){var Ze=de.type;return Ze===b?Ee(le,te,de.props.children,Ie,de.key):te!==null&&(te.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===R&&xh(Ze)===te.type)?(te=T(te,de.props),ig(te,de),te.return=le,te):(te=Ib(de.type,de.key,de.props,null,le.mode,Ie),ig(te,de),te.return=le,te)}function pe(le,te,de,Ie){return te===null||te.tag!==4||te.stateNode.containerInfo!==de.containerInfo||te.stateNode.implementation!==de.implementation?(te=vE(de,le.mode,Ie),te.return=le,te):(te=T(te,de.children||[]),te.return=le,te)}function Ee(le,te,de,Ie,Ze){return te===null||te.tag!==7?(te=mh(de,le.mode,Ie,Ze),te.return=le,te):(te=T(te,de),te.return=le,te)}function Ae(le,te,de){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return te=yE(""+te,le.mode,de),te.return=le,te;if(typeof te=="object"&&te!==null){switch(te.$$typeof){case g:return de=Ib(te.type,te.key,te.props,null,le.mode,de),ig(de,te),de.return=le,de;case y:return te=vE(te,le.mode,de),te.return=le,te;case R:return te=xh(te),Ae(le,te,de)}if(Y(te)||F(te))return te=mh(te,le.mode,de,null),te.return=le,te;if(typeof te.then=="function")return Ae(le,$b(te),de);if(te.$$typeof===E)return Ae(le,kb(le,te),de);Ob(le,te)}return null}function ye(le,te,de,Ie){var Ze=te!==null?te.key:null;if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return Ze!==null?null:z(le,te,""+de,Ie);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case g:return de.key===Ze?Z(le,te,de,Ie):null;case y:return de.key===Ze?pe(le,te,de,Ie):null;case R:return de=xh(de),ye(le,te,de,Ie)}if(Y(de)||F(de))return Ze!==null?null:Ee(le,te,de,Ie,null);if(typeof de.then=="function")return ye(le,te,$b(de),Ie);if(de.$$typeof===E)return ye(le,te,kb(le,de),Ie);Ob(le,de)}return null}function xe(le,te,de,Ie,Ze){if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number"||typeof Ie=="bigint")return le=le.get(de)||null,z(te,le,""+Ie,Ze);if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case g:return le=le.get(Ie.key===null?de:Ie.key)||null,Z(te,le,Ie,Ze);case y:return le=le.get(Ie.key===null?de:Ie.key)||null,pe(te,le,Ie,Ze);case R:return Ie=xh(Ie),xe(le,te,de,Ie,Ze)}if(Y(Ie)||F(Ie))return le=le.get(de)||null,Ee(te,le,Ie,Ze,null);if(typeof Ie.then=="function")return xe(le,te,de,$b(Ie),Ze);if(Ie.$$typeof===E)return xe(le,te,de,kb(te,Ie),Ze);Ob(te,Ie)}return null}function je(le,te,de,Ie){for(var Ze=null,Vt=null,qe=te,bt=te=0,At=null;qe!==null&&bt<de.length;bt++){qe.index>bt?(At=qe,qe=null):At=qe.sibling;var Bt=ye(le,qe,de[bt],Ie);if(Bt===null){qe===null&&(qe=At);break}c&&qe&&Bt.alternate===null&&f(le,qe),te=I(Bt,te,bt),Vt===null?Ze=Bt:Vt.sibling=Bt,Vt=Bt,qe=At}if(bt===de.length)return m(le,qe),Dt&&yl(le,bt),Ze;if(qe===null){for(;bt<de.length;bt++)qe=Ae(le,de[bt],Ie),qe!==null&&(te=I(qe,te,bt),Vt===null?Ze=qe:Vt.sibling=qe,Vt=qe);return Dt&&yl(le,bt),Ze}for(qe=v(qe);bt<de.length;bt++)At=xe(qe,le,bt,de[bt],Ie),At!==null&&(c&&At.alternate!==null&&qe.delete(At.key===null?bt:At.key),te=I(At,te,bt),Vt===null?Ze=At:Vt.sibling=At,Vt=At);return c&&qe.forEach(function(Ku){return f(le,Ku)}),Dt&&yl(le,bt),Ze}function rt(le,te,de,Ie){if(de==null)throw Error(r(151));for(var Ze=null,Vt=null,qe=te,bt=te=0,At=null,Bt=de.next();qe!==null&&!Bt.done;bt++,Bt=de.next()){qe.index>bt?(At=qe,qe=null):At=qe.sibling;var Ku=ye(le,qe,Bt.value,Ie);if(Ku===null){qe===null&&(qe=At);break}c&&qe&&Ku.alternate===null&&f(le,qe),te=I(Ku,te,bt),Vt===null?Ze=Ku:Vt.sibling=Ku,Vt=Ku,qe=At}if(Bt.done)return m(le,qe),Dt&&yl(le,bt),Ze;if(qe===null){for(;!Bt.done;bt++,Bt=de.next())Bt=Ae(le,Bt.value,Ie),Bt!==null&&(te=I(Bt,te,bt),Vt===null?Ze=Bt:Vt.sibling=Bt,Vt=Bt);return Dt&&yl(le,bt),Ze}for(qe=v(qe);!Bt.done;bt++,Bt=de.next())Bt=xe(qe,le,bt,Bt.value,Ie),Bt!==null&&(c&&Bt.alternate!==null&&qe.delete(Bt.key===null?bt:Bt.key),te=I(Bt,te,bt),Vt===null?Ze=Bt:Vt.sibling=Bt,Vt=Bt);return c&&qe.forEach(function(xse){return f(le,xse)}),Dt&&yl(le,bt),Ze}function an(le,te,de,Ie){if(typeof de=="object"&&de!==null&&de.type===b&&de.key===null&&(de=de.props.children),typeof de=="object"&&de!==null){switch(de.$$typeof){case g:e:{for(var Ze=de.key;te!==null;){if(te.key===Ze){if(Ze=de.type,Ze===b){if(te.tag===7){m(le,te.sibling),Ie=T(te,de.props.children),Ie.return=le,le=Ie;break e}}else if(te.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===R&&xh(Ze)===te.type){m(le,te.sibling),Ie=T(te,de.props),ig(Ie,de),Ie.return=le,le=Ie;break e}m(le,te);break}else f(le,te);te=te.sibling}de.type===b?(Ie=mh(de.props.children,le.mode,Ie,de.key),Ie.return=le,le=Ie):(Ie=Ib(de.type,de.key,de.props,null,le.mode,Ie),ig(Ie,de),Ie.return=le,le=Ie)}return M(le);case y:e:{for(Ze=de.key;te!==null;){if(te.key===Ze)if(te.tag===4&&te.stateNode.containerInfo===de.containerInfo&&te.stateNode.implementation===de.implementation){m(le,te.sibling),Ie=T(te,de.children||[]),Ie.return=le,le=Ie;break e}else{m(le,te);break}else f(le,te);te=te.sibling}Ie=vE(de,le.mode,Ie),Ie.return=le,le=Ie}return M(le);case R:return de=xh(de),an(le,te,de,Ie)}if(Y(de))return je(le,te,de,Ie);if(F(de)){if(Ze=F(de),typeof Ze!="function")throw Error(r(150));return de=Ze.call(de),rt(le,te,de,Ie)}if(typeof de.then=="function")return an(le,te,$b(de),Ie);if(de.$$typeof===E)return an(le,te,kb(le,de),Ie);Ob(le,de)}return typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint"?(de=""+de,te!==null&&te.tag===6?(m(le,te.sibling),Ie=T(te,de),Ie.return=le,le=Ie):(m(le,te),Ie=yE(de,le.mode,Ie),Ie.return=le,le=Ie),M(le)):m(le,te)}return function(le,te,de,Ie){try{rg=0;var Ze=an(le,te,de,Ie);return wd=null,Ze}catch(qe){if(qe===xd||qe===Rb)throw qe;var Vt=vs(29,qe,null,le.mode);return Vt.lanes=Ie,Vt.return=le,Vt}finally{}}}var Sh=DL(!0),$L=DL(!1),Ru=!1;function NE(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function RE(c,f){c=c.updateQueue,f.updateQueue===c&&(f.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,callbacks:null})}function Du(c){return{lane:c,tag:0,payload:null,callback:null,next:null}}function $u(c,f,m){var v=c.updateQueue;if(v===null)return null;if(v=v.shared,(Ht&2)!==0){var T=v.pending;return T===null?f.next=f:(f.next=T.next,T.next=f),v.pending=f,f=Eb(c),gL(c,null,m),f}return Cb(c,v,f,m),Eb(c)}function sg(c,f,m){if(f=f.updateQueue,f!==null&&(f=f.shared,(m&4194048)!==0)){var v=f.lanes;v&=c.pendingLanes,m|=v,f.lanes=m,Dm(c,m)}}function DE(c,f){var m=c.updateQueue,v=c.alternate;if(v!==null&&(v=v.updateQueue,m===v)){var T=null,I=null;if(m=m.firstBaseUpdate,m!==null){do{var M={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};I===null?T=I=M:I=I.next=M,m=m.next}while(m!==null);I===null?T=I=f:I=I.next=f}else T=I=f;m={baseState:v.baseState,firstBaseUpdate:T,lastBaseUpdate:I,shared:v.shared,callbacks:v.callbacks},c.updateQueue=m;return}c=m.lastBaseUpdate,c===null?m.firstBaseUpdate=f:c.next=f,m.lastBaseUpdate=f}var $E=!1;function og(){if($E){var c=bd;if(c!==null)throw c}}function ag(c,f,m,v){$E=!1;var T=c.updateQueue;Ru=!1;var I=T.firstBaseUpdate,M=T.lastBaseUpdate,z=T.shared.pending;if(z!==null){T.shared.pending=null;var Z=z,pe=Z.next;Z.next=null,M===null?I=pe:M.next=pe,M=Z;var Ee=c.alternate;Ee!==null&&(Ee=Ee.updateQueue,z=Ee.lastBaseUpdate,z!==M&&(z===null?Ee.firstBaseUpdate=pe:z.next=pe,Ee.lastBaseUpdate=Z))}if(I!==null){var Ae=T.baseState;M=0,Ee=pe=Z=null,z=I;do{var ye=z.lane&-536870913,xe=ye!==z.lane;if(xe?(_t&ye)===ye:(v&ye)===ye){ye!==0&&ye===vd&&($E=!0),Ee!==null&&(Ee=Ee.next={lane:0,tag:z.tag,payload:z.payload,callback:null,next:null});e:{var je=c,rt=z;ye=f;var an=m;switch(rt.tag){case 1:if(je=rt.payload,typeof je=="function"){Ae=je.call(an,Ae,ye);break e}Ae=je;break e;case 3:je.flags=je.flags&-65537|128;case 0:if(je=rt.payload,ye=typeof je=="function"?je.call(an,Ae,ye):je,ye==null)break e;Ae=d({},Ae,ye);break e;case 2:Ru=!0}}ye=z.callback,ye!==null&&(c.flags|=64,xe&&(c.flags|=8192),xe=T.callbacks,xe===null?T.callbacks=[ye]:xe.push(ye))}else xe={lane:ye,tag:z.tag,payload:z.payload,callback:z.callback,next:null},Ee===null?(pe=Ee=xe,Z=Ae):Ee=Ee.next=xe,M|=ye;if(z=z.next,z===null){if(z=T.shared.pending,z===null)break;xe=z,z=xe.next,xe.next=null,T.lastBaseUpdate=xe,T.shared.pending=null}}while(!0);Ee===null&&(Z=Ae),T.baseState=Z,T.firstBaseUpdate=pe,T.lastBaseUpdate=Ee,I===null&&(T.shared.lanes=0),Fu|=M,c.lanes=M,c.memoizedState=Ae}}function OL(c,f){if(typeof c!="function")throw Error(r(191,c));c.call(f)}function PL(c,f){var m=c.callbacks;if(m!==null)for(c.callbacks=null,c=0;c<m.length;c++)OL(m[c],f)}var Sd=j(null),Pb=j(0);function ML(c,f){c=Al,ie(Pb,c),ie(Sd,f),Al=c|f.baseLanes}function OE(){ie(Pb,Al),ie(Sd,Sd.current)}function PE(){Al=Pb.current,Q(Sd),Q(Pb)}var bs=j(null),Xs=null;function Ou(c){var f=c.alternate;ie(Gn,Gn.current&1),ie(bs,c),Xs===null&&(f===null||Sd.current!==null||f.memoizedState!==null)&&(Xs=c)}function ME(c){ie(Gn,Gn.current),ie(bs,c),Xs===null&&(Xs=c)}function LL(c){c.tag===22?(ie(Gn,Gn.current),ie(bs,c),Xs===null&&(Xs=c)):Pu()}function Pu(){ie(Gn,Gn.current),ie(bs,bs.current)}function xs(c){Q(bs),Xs===c&&(Xs=null),Q(Gn)}var Gn=j(0);function Mb(c){for(var f=c;f!==null;){if(f.tag===13){var m=f.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||UI(m)||jI(m)))return f}else if(f.tag===19&&(f.memoizedProps.revealOrder==="forwards"||f.memoizedProps.revealOrder==="backwards"||f.memoizedProps.revealOrder==="unstable_legacy-backwards"||f.memoizedProps.revealOrder==="together")){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var xl=0,gt=null,sn=null,ir=null,Lb=!1,Td=!1,Th=!1,Fb=0,lg=0,Cd=null,cie=0;function On(){throw Error(r(321))}function LE(c,f){if(f===null)return!1;for(var m=0;m<f.length&&m<c.length;m++)if(!ys(c[m],f[m]))return!1;return!0}function FE(c,f,m,v,T,I){return xl=I,gt=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,W.H=c===null||c.memoizedState===null?xF:JE,Th=!1,I=m(v,T),Th=!1,Td&&(I=VL(f,m,v,T)),FL(c),I}function FL(c){W.H=hg;var f=sn!==null&&sn.next!==null;if(xl=0,ir=sn=gt=null,Lb=!1,lg=0,Cd=null,f)throw Error(r(300));c===null||sr||(c=c.dependencies,c!==null&&Ab(c)&&(sr=!0))}function VL(c,f,m,v){gt=c;var T=0;do{if(Td&&(Cd=null),lg=0,Td=!1,25<=T)throw Error(r(301));if(T+=1,ir=sn=null,c.updateQueue!=null){var I=c.updateQueue;I.lastEffect=null,I.events=null,I.stores=null,I.memoCache!=null&&(I.memoCache.index=0)}W.H=wF,I=f(m,v)}while(Td);return I}function hie(){var c=W.H,f=c.useState()[0];return f=typeof f.then=="function"?ug(f):f,c=c.useState()[0],(sn!==null?sn.memoizedState:null)!==c&&(gt.flags|=1024),f}function VE(){var c=Fb!==0;return Fb=0,c}function BE(c,f,m){f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~m}function zE(c){if(Lb){for(c=c.memoizedState;c!==null;){var f=c.queue;f!==null&&(f.pending=null),c=c.next}Lb=!1}xl=0,ir=sn=gt=null,Td=!1,lg=Fb=0,Cd=null}function Ri(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ir===null?gt.memoizedState=ir=c:ir=ir.next=c,ir}function Hn(){if(sn===null){var c=gt.alternate;c=c!==null?c.memoizedState:null}else c=sn.next;var f=ir===null?gt.memoizedState:ir.next;if(f!==null)ir=f,sn=c;else{if(c===null)throw gt.alternate===null?Error(r(467)):Error(r(310));sn=c,c={memoizedState:sn.memoizedState,baseState:sn.baseState,baseQueue:sn.baseQueue,queue:sn.queue,next:null},ir===null?gt.memoizedState=ir=c:ir=ir.next=c}return ir}function Vb(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ug(c){var f=lg;return lg+=1,Cd===null&&(Cd=[]),c=kL(Cd,c,f),f=gt,(ir===null?f.memoizedState:ir.next)===null&&(f=f.alternate,W.H=f===null||f.memoizedState===null?xF:JE),c}function Bb(c){if(c!==null&&typeof c=="object"){if(typeof c.then=="function")return ug(c);if(c.$$typeof===E)return Qr(c)}throw Error(r(438,String(c)))}function UE(c){var f=null,m=gt.updateQueue;if(m!==null&&(f=m.memoCache),f==null){var v=gt.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(f={data:v.data.map(function(T){return T.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),m===null&&(m=Vb(),gt.updateQueue=m),m.memoCache=f,m=f.data[f.index],m===void 0)for(m=f.data[f.index]=Array(c),v=0;v<c;v++)m[v]=O;return f.index++,m}function wl(c,f){return typeof f=="function"?f(c):f}function zb(c){var f=Hn();return jE(f,sn,c)}function jE(c,f,m){var v=c.queue;if(v===null)throw Error(r(311));v.lastRenderedReducer=m;var T=c.baseQueue,I=v.pending;if(I!==null){if(T!==null){var M=T.next;T.next=I.next,I.next=M}f.baseQueue=T=I,v.pending=null}if(I=c.baseState,T===null)c.memoizedState=I;else{f=T.next;var z=M=null,Z=null,pe=f,Ee=!1;do{var Ae=pe.lane&-536870913;if(Ae!==pe.lane?(_t&Ae)===Ae:(xl&Ae)===Ae){var ye=pe.revertLane;if(ye===0)Z!==null&&(Z=Z.next={lane:0,revertLane:0,gesture:null,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null}),Ae===vd&&(Ee=!0);else if((xl&ye)===ye){pe=pe.next,ye===vd&&(Ee=!0);continue}else Ae={lane:0,revertLane:pe.revertLane,gesture:null,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null},Z===null?(z=Z=Ae,M=I):Z=Z.next=Ae,gt.lanes|=ye,Fu|=ye;Ae=pe.action,Th&&m(I,Ae),I=pe.hasEagerState?pe.eagerState:m(I,Ae)}else ye={lane:Ae,revertLane:pe.revertLane,gesture:pe.gesture,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null},Z===null?(z=Z=ye,M=I):Z=Z.next=ye,gt.lanes|=Ae,Fu|=Ae;pe=pe.next}while(pe!==null&&pe!==f);if(Z===null?M=I:Z.next=z,!ys(I,c.memoizedState)&&(sr=!0,Ee&&(m=bd,m!==null)))throw m;c.memoizedState=I,c.baseState=M,c.baseQueue=Z,v.lastRenderedState=I}return T===null&&(v.lanes=0),[c.memoizedState,v.dispatch]}function WE(c){var f=Hn(),m=f.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=c;var v=m.dispatch,T=m.pending,I=f.memoizedState;if(T!==null){m.pending=null;var M=T=T.next;do I=c(I,M.action),M=M.next;while(M!==T);ys(I,f.memoizedState)||(sr=!0),f.memoizedState=I,f.baseQueue===null&&(f.baseState=I),m.lastRenderedState=I}return[I,v]}function BL(c,f,m){var v=gt,T=Hn(),I=Dt;if(I){if(m===void 0)throw Error(r(407));m=m()}else m=f();var M=!ys((sn||T).memoizedState,m);if(M&&(T.memoizedState=m,sr=!0),T=T.queue,qE(jL.bind(null,v,T,c),[c]),T.getSnapshot!==f||M||ir!==null&&ir.memoizedState.tag&1){if(v.flags|=2048,Ed(9,{destroy:void 0},UL.bind(null,v,T,m,f),null),hn===null)throw Error(r(349));I||(xl&127)!==0||zL(v,f,m)}return m}function zL(c,f,m){c.flags|=16384,c={getSnapshot:f,value:m},f=gt.updateQueue,f===null?(f=Vb(),gt.updateQueue=f,f.stores=[c]):(m=f.stores,m===null?f.stores=[c]:m.push(c))}function UL(c,f,m,v){f.value=m,f.getSnapshot=v,WL(f)&&GL(c)}function jL(c,f,m){return m(function(){WL(f)&&GL(c)})}function WL(c){var f=c.getSnapshot;c=c.value;try{var m=f();return!ys(c,m)}catch{return!0}}function GL(c){var f=ph(c,2);f!==null&&ns(f,c,2)}function GE(c){var f=Ri();if(typeof c=="function"){var m=c;if(c=m(),Th){Xi(!0);try{m()}finally{Xi(!1)}}}return f.memoizedState=f.baseState=c,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wl,lastRenderedState:c},f}function HL(c,f,m,v){return c.baseState=m,jE(c,sn,typeof v=="function"?v:wl)}function fie(c,f,m,v,T){if(Wb(c))throw Error(r(485));if(c=f.action,c!==null){var I={payload:T,action:c,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(M){I.listeners.push(M)}};W.T!==null?m(!0):I.isTransition=!1,v(I),m=f.pending,m===null?(I.next=f.pending=I,qL(f,I)):(I.next=m.next,f.pending=m.next=I)}}function qL(c,f){var m=f.action,v=f.payload,T=c.state;if(f.isTransition){var I=W.T,M={};W.T=M;try{var z=m(T,v),Z=W.S;Z!==null&&Z(M,z),KL(c,f,z)}catch(pe){HE(c,f,pe)}finally{I!==null&&M.types!==null&&(I.types=M.types),W.T=I}}else try{I=m(T,v),KL(c,f,I)}catch(pe){HE(c,f,pe)}}function KL(c,f,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(v){XL(c,f,v)},function(v){return HE(c,f,v)}):XL(c,f,m)}function XL(c,f,m){f.status="fulfilled",f.value=m,YL(f),c.state=m,f=c.pending,f!==null&&(m=f.next,m===f?c.pending=null:(m=m.next,f.next=m,qL(c,m)))}function HE(c,f,m){var v=c.pending;if(c.pending=null,v!==null){v=v.next;do f.status="rejected",f.reason=m,YL(f),f=f.next;while(f!==v)}c.action=null}function YL(c){c=c.listeners;for(var f=0;f<c.length;f++)(0,c[f])()}function QL(c,f){return f}function ZL(c,f){if(Dt){var m=hn.formState;if(m!==null){e:{var v=gt;if(Dt){if(bn){t:{for(var T=bn,I=Ks;T.nodeType!==8;){if(!I){T=null;break t}if(T=Ys(T.nextSibling),T===null){T=null;break t}}I=T.data,T=I==="F!"||I==="F"?T:null}if(T){bn=Ys(T.nextSibling),v=T.data==="F!";break e}}ku(v)}v=!1}v&&(f=m[0])}}return m=Ri(),m.memoizedState=m.baseState=f,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:QL,lastRenderedState:f},m.queue=v,m=yF.bind(null,gt,v),v.dispatch=m,v=GE(!1),I=ZE.bind(null,gt,!1,v.queue),v=Ri(),T={state:f,dispatch:null,action:c,pending:null},v.queue=T,m=fie.bind(null,gt,T,I,m),T.dispatch=m,v.memoizedState=c,[f,m,!1]}function JL(c){var f=Hn();return eF(f,sn,c)}function eF(c,f,m){if(f=jE(c,f,QL)[0],c=zb(wl)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var v=ug(f)}catch(M){throw M===xd?Rb:M}else v=f;f=Hn();var T=f.queue,I=T.dispatch;return m!==f.memoizedState&&(gt.flags|=2048,Ed(9,{destroy:void 0},die.bind(null,T,m),null)),[v,I,c]}function die(c,f){c.action=f}function tF(c){var f=Hn(),m=sn;if(m!==null)return eF(f,m,c);Hn(),f=f.memoizedState,m=Hn();var v=m.queue.dispatch;return m.memoizedState=c,[f,v,!1]}function Ed(c,f,m,v){return c={tag:c,create:m,deps:v,inst:f,next:null},f=gt.updateQueue,f===null&&(f=Vb(),gt.updateQueue=f),m=f.lastEffect,m===null?f.lastEffect=c.next=c:(v=m.next,m.next=c,c.next=v,f.lastEffect=c),c}function nF(){return Hn().memoizedState}function Ub(c,f,m,v){var T=Ri();gt.flags|=c,T.memoizedState=Ed(1|f,{destroy:void 0},m,v===void 0?null:v)}function jb(c,f,m,v){var T=Hn();v=v===void 0?null:v;var I=T.memoizedState.inst;sn!==null&&v!==null&&LE(v,sn.memoizedState.deps)?T.memoizedState=Ed(f,I,m,v):(gt.flags|=c,T.memoizedState=Ed(1|f,I,m,v))}function rF(c,f){Ub(8390656,8,c,f)}function qE(c,f){jb(2048,8,c,f)}function pie(c){gt.flags|=4;var f=gt.updateQueue;if(f===null)f=Vb(),gt.updateQueue=f,f.events=[c];else{var m=f.events;m===null?f.events=[c]:m.push(c)}}function iF(c){var f=Hn().memoizedState;return pie({ref:f,nextImpl:c}),function(){if((Ht&2)!==0)throw Error(r(440));return f.impl.apply(void 0,arguments)}}function sF(c,f){return jb(4,2,c,f)}function oF(c,f){return jb(4,4,c,f)}function aF(c,f){if(typeof f=="function"){c=c();var m=f(c);return function(){typeof m=="function"?m():f(null)}}if(f!=null)return c=c(),f.current=c,function(){f.current=null}}function lF(c,f,m){m=m!=null?m.concat([c]):null,jb(4,4,aF.bind(null,f,c),m)}function KE(){}function uF(c,f){var m=Hn();f=f===void 0?null:f;var v=m.memoizedState;return f!==null&&LE(f,v[1])?v[0]:(m.memoizedState=[c,f],c)}function cF(c,f){var m=Hn();f=f===void 0?null:f;var v=m.memoizedState;if(f!==null&&LE(f,v[1]))return v[0];if(v=c(),Th){Xi(!0);try{c()}finally{Xi(!1)}}return m.memoizedState=[v,f],v}function XE(c,f,m){return m===void 0||(xl&1073741824)!==0&&(_t&261930)===0?c.memoizedState=f:(c.memoizedState=m,c=h3(),gt.lanes|=c,Fu|=c,m)}function hF(c,f,m,v){return ys(m,f)?m:Sd.current!==null?(c=XE(c,m,v),ys(c,f)||(sr=!0),c):(xl&42)===0||(xl&1073741824)!==0&&(_t&261930)===0?(sr=!0,c.memoizedState=m):(c=h3(),gt.lanes|=c,Fu|=c,f)}function fF(c,f,m,v,T){var I=H.p;H.p=I!==0&&8>I?I:8;var M=W.T,z={};W.T=z,ZE(c,!1,f,m);try{var Z=T(),pe=W.S;if(pe!==null&&pe(z,Z),Z!==null&&typeof Z=="object"&&typeof Z.then=="function"){var Ee=uie(Z,v);cg(c,f,Ee,Ts(c))}else cg(c,f,v,Ts(c))}catch(Ae){cg(c,f,{then:function(){},status:"rejected",reason:Ae},Ts())}finally{H.p=I,M!==null&&z.types!==null&&(M.types=z.types),W.T=M}}function mie(){}function YE(c,f,m,v){if(c.tag!==5)throw Error(r(476));var T=dF(c).queue;fF(c,T,f,X,m===null?mie:function(){return pF(c),m(v)})}function dF(c){var f=c.memoizedState;if(f!==null)return f;f={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wl,lastRenderedState:X},next:null};var m={};return f.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wl,lastRenderedState:m},next:null},c.memoizedState=f,c=c.alternate,c!==null&&(c.memoizedState=f),f}function pF(c){var f=dF(c);f.next===null&&(f=c.alternate.memoizedState),cg(c,f.next.queue,{},Ts())}function QE(){return Qr(_g)}function mF(){return Hn().memoizedState}function gF(){return Hn().memoizedState}function gie(c){for(var f=c.return;f!==null;){switch(f.tag){case 24:case 3:var m=Ts();c=Du(m);var v=$u(f,c,m);v!==null&&(ns(v,f,m),sg(v,f,m)),f={cache:IE()},c.payload=f;return}f=f.return}}function yie(c,f,m){var v=Ts();m={lane:v,revertLane:0,gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},Wb(c)?vF(f,m):(m=mE(c,f,m,v),m!==null&&(ns(m,c,v),bF(m,f,v)))}function yF(c,f,m){var v=Ts();cg(c,f,m,v)}function cg(c,f,m,v){var T={lane:v,revertLane:0,gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null};if(Wb(c))vF(f,T);else{var I=c.alternate;if(c.lanes===0&&(I===null||I.lanes===0)&&(I=f.lastRenderedReducer,I!==null))try{var M=f.lastRenderedState,z=I(M,m);if(T.hasEagerState=!0,T.eagerState=z,ys(z,M))return Cb(c,f,T,0),hn===null&&Tb(),!1}catch{}finally{}if(m=mE(c,f,T,v),m!==null)return ns(m,c,v),bF(m,f,v),!0}return!1}function ZE(c,f,m,v){if(v={lane:2,revertLane:NI(),gesture:null,action:v,hasEagerState:!1,eagerState:null,next:null},Wb(c)){if(f)throw Error(r(479))}else f=mE(c,m,v,2),f!==null&&ns(f,c,2)}function Wb(c){var f=c.alternate;return c===gt||f!==null&&f===gt}function vF(c,f){Td=Lb=!0;var m=c.pending;m===null?f.next=f:(f.next=m.next,m.next=f),c.pending=f}function bF(c,f,m){if((m&4194048)!==0){var v=f.lanes;v&=c.pendingLanes,m|=v,f.lanes=m,Dm(c,m)}}var hg={readContext:Qr,use:Bb,useCallback:On,useContext:On,useEffect:On,useImperativeHandle:On,useLayoutEffect:On,useInsertionEffect:On,useMemo:On,useReducer:On,useRef:On,useState:On,useDebugValue:On,useDeferredValue:On,useTransition:On,useSyncExternalStore:On,useId:On,useHostTransitionStatus:On,useFormState:On,useActionState:On,useOptimistic:On,useMemoCache:On,useCacheRefresh:On};hg.useEffectEvent=On;var xF={readContext:Qr,use:Bb,useCallback:function(c,f){return Ri().memoizedState=[c,f===void 0?null:f],c},useContext:Qr,useEffect:rF,useImperativeHandle:function(c,f,m){m=m!=null?m.concat([c]):null,Ub(4194308,4,aF.bind(null,f,c),m)},useLayoutEffect:function(c,f){return Ub(4194308,4,c,f)},useInsertionEffect:function(c,f){Ub(4,2,c,f)},useMemo:function(c,f){var m=Ri();f=f===void 0?null:f;var v=c();if(Th){Xi(!0);try{c()}finally{Xi(!1)}}return m.memoizedState=[v,f],v},useReducer:function(c,f,m){var v=Ri();if(m!==void 0){var T=m(f);if(Th){Xi(!0);try{m(f)}finally{Xi(!1)}}}else T=f;return v.memoizedState=v.baseState=T,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:T},v.queue=c,c=c.dispatch=yie.bind(null,gt,c),[v.memoizedState,c]},useRef:function(c){var f=Ri();return c={current:c},f.memoizedState=c},useState:function(c){c=GE(c);var f=c.queue,m=yF.bind(null,gt,f);return f.dispatch=m,[c.memoizedState,m]},useDebugValue:KE,useDeferredValue:function(c,f){var m=Ri();return XE(m,c,f)},useTransition:function(){var c=GE(!1);return c=fF.bind(null,gt,c.queue,!0,!1),Ri().memoizedState=c,[!1,c]},useSyncExternalStore:function(c,f,m){var v=gt,T=Ri();if(Dt){if(m===void 0)throw Error(r(407));m=m()}else{if(m=f(),hn===null)throw Error(r(349));(_t&127)!==0||zL(v,f,m)}T.memoizedState=m;var I={value:m,getSnapshot:f};return T.queue=I,rF(jL.bind(null,v,I,c),[c]),v.flags|=2048,Ed(9,{destroy:void 0},UL.bind(null,v,I,m,f),null),m},useId:function(){var c=Ri(),f=hn.identifierPrefix;if(Dt){var m=Ia,v=Ea;m=(v&~(1<<32-jn(v)-1)).toString(32)+m,f="_"+f+"R_"+m,m=Fb++,0<m&&(f+="H"+m.toString(32)),f+="_"}else m=cie++,f="_"+f+"r_"+m.toString(32)+"_";return c.memoizedState=f},useHostTransitionStatus:QE,useFormState:ZL,useActionState:ZL,useOptimistic:function(c){var f=Ri();f.memoizedState=f.baseState=c;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=m,f=ZE.bind(null,gt,!0,m),m.dispatch=f,[c,f]},useMemoCache:UE,useCacheRefresh:function(){return Ri().memoizedState=gie.bind(null,gt)},useEffectEvent:function(c){var f=Ri(),m={impl:c};return f.memoizedState=m,function(){if((Ht&2)!==0)throw Error(r(440));return m.impl.apply(void 0,arguments)}}},JE={readContext:Qr,use:Bb,useCallback:uF,useContext:Qr,useEffect:qE,useImperativeHandle:lF,useInsertionEffect:sF,useLayoutEffect:oF,useMemo:cF,useReducer:zb,useRef:nF,useState:function(){return zb(wl)},useDebugValue:KE,useDeferredValue:function(c,f){var m=Hn();return hF(m,sn.memoizedState,c,f)},useTransition:function(){var c=zb(wl)[0],f=Hn().memoizedState;return[typeof c=="boolean"?c:ug(c),f]},useSyncExternalStore:BL,useId:mF,useHostTransitionStatus:QE,useFormState:JL,useActionState:JL,useOptimistic:function(c,f){var m=Hn();return HL(m,sn,c,f)},useMemoCache:UE,useCacheRefresh:gF};JE.useEffectEvent=iF;var wF={readContext:Qr,use:Bb,useCallback:uF,useContext:Qr,useEffect:qE,useImperativeHandle:lF,useInsertionEffect:sF,useLayoutEffect:oF,useMemo:cF,useReducer:WE,useRef:nF,useState:function(){return WE(wl)},useDebugValue:KE,useDeferredValue:function(c,f){var m=Hn();return sn===null?XE(m,c,f):hF(m,sn.memoizedState,c,f)},useTransition:function(){var c=WE(wl)[0],f=Hn().memoizedState;return[typeof c=="boolean"?c:ug(c),f]},useSyncExternalStore:BL,useId:mF,useHostTransitionStatus:QE,useFormState:tF,useActionState:tF,useOptimistic:function(c,f){var m=Hn();return sn!==null?HL(m,sn,c,f):(m.baseState=c,[c,m.queue.dispatch])},useMemoCache:UE,useCacheRefresh:gF};wF.useEffectEvent=iF;function eI(c,f,m,v){f=c.memoizedState,m=m(v,f),m=m==null?f:d({},f,m),c.memoizedState=m,c.lanes===0&&(c.updateQueue.baseState=m)}var tI={enqueueSetState:function(c,f,m){c=c._reactInternals;var v=Ts(),T=Du(v);T.payload=f,m!=null&&(T.callback=m),f=$u(c,T,v),f!==null&&(ns(f,c,v),sg(f,c,v))},enqueueReplaceState:function(c,f,m){c=c._reactInternals;var v=Ts(),T=Du(v);T.tag=1,T.payload=f,m!=null&&(T.callback=m),f=$u(c,T,v),f!==null&&(ns(f,c,v),sg(f,c,v))},enqueueForceUpdate:function(c,f){c=c._reactInternals;var m=Ts(),v=Du(m);v.tag=2,f!=null&&(v.callback=f),f=$u(c,v,m),f!==null&&(ns(f,c,m),sg(f,c,m))}};function SF(c,f,m,v,T,I,M){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(v,I,M):f.prototype&&f.prototype.isPureReactComponent?!Qm(m,v)||!Qm(T,I):!0}function TF(c,f,m,v){c=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(m,v),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(m,v),f.state!==c&&tI.enqueueReplaceState(f,f.state,null)}function Ch(c,f){var m=f;if("ref"in f){m={};for(var v in f)v!=="ref"&&(m[v]=f[v])}if(c=c.defaultProps){m===f&&(m=d({},m));for(var T in c)m[T]===void 0&&(m[T]=c[T])}return m}function CF(c){Sb(c)}function EF(c){console.error(c)}function IF(c){Sb(c)}function Gb(c,f){try{var m=c.onUncaughtError;m(f.value,{componentStack:f.stack})}catch(v){setTimeout(function(){throw v})}}function _F(c,f,m){try{var v=c.onCaughtError;v(m.value,{componentStack:m.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(T){setTimeout(function(){throw T})}}function nI(c,f,m){return m=Du(m),m.tag=3,m.payload={element:null},m.callback=function(){Gb(c,f)},m}function AF(c){return c=Du(c),c.tag=3,c}function kF(c,f,m,v){var T=m.type.getDerivedStateFromError;if(typeof T=="function"){var I=v.value;c.payload=function(){return T(I)},c.callback=function(){_F(f,m,v)}}var M=m.stateNode;M!==null&&typeof M.componentDidCatch=="function"&&(c.callback=function(){_F(f,m,v),typeof T!="function"&&(Vu===null?Vu=new Set([this]):Vu.add(this));var z=v.stack;this.componentDidCatch(v.value,{componentStack:z!==null?z:""})})}function vie(c,f,m,v,T){if(m.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(f=m.alternate,f!==null&&yd(f,m,T,!0),m=bs.current,m!==null){switch(m.tag){case 31:case 13:return Xs===null?rx():m.alternate===null&&Pn===0&&(Pn=3),m.flags&=-257,m.flags|=65536,m.lanes=T,v===Db?m.flags|=16384:(f=m.updateQueue,f===null?m.updateQueue=new Set([v]):f.add(v),_I(c,v,T)),!1;case 22:return m.flags|=65536,v===Db?m.flags|=16384:(f=m.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([v])},m.updateQueue=f):(m=f.retryQueue,m===null?f.retryQueue=new Set([v]):m.add(v)),_I(c,v,T)),!1}throw Error(r(435,m.tag))}return _I(c,v,T),rx(),!1}if(Dt)return f=bs.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=T,v!==wE&&(c=Error(r(422),{cause:v}),eg(Gs(c,m)))):(v!==wE&&(f=Error(r(423),{cause:v}),eg(Gs(f,m))),c=c.current.alternate,c.flags|=65536,T&=-T,c.lanes|=T,v=Gs(v,m),T=nI(c.stateNode,v,T),DE(c,T),Pn!==4&&(Pn=2)),!1;var I=Error(r(520),{cause:v});if(I=Gs(I,m),bg===null?bg=[I]:bg.push(I),Pn!==4&&(Pn=2),f===null)return!0;v=Gs(v,m),m=f;do{switch(m.tag){case 3:return m.flags|=65536,c=T&-T,m.lanes|=c,c=nI(m.stateNode,v,c),DE(m,c),!1;case 1:if(f=m.type,I=m.stateNode,(m.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Vu===null||!Vu.has(I))))return m.flags|=65536,T&=-T,m.lanes|=T,T=AF(T),kF(T,c,m,v),DE(m,T),!1}m=m.return}while(m!==null);return!1}var rI=Error(r(461)),sr=!1;function Zr(c,f,m,v){f.child=c===null?$L(f,null,m,v):Sh(f,c.child,m,v)}function NF(c,f,m,v,T){m=m.render;var I=f.ref;if("ref"in v){var M={};for(var z in v)z!=="ref"&&(M[z]=v[z])}else M=v;return vh(f),v=FE(c,f,m,M,I,T),z=VE(),c!==null&&!sr?(BE(c,f,T),Sl(c,f,T)):(Dt&&z&&bE(f),f.flags|=1,Zr(c,f,v,T),f.child)}function RF(c,f,m,v,T){if(c===null){var I=m.type;return typeof I=="function"&&!gE(I)&&I.defaultProps===void 0&&m.compare===null?(f.tag=15,f.type=I,DF(c,f,I,v,T)):(c=Ib(m.type,null,v,f,f.mode,T),c.ref=f.ref,c.return=f,f.child=c)}if(I=c.child,!hI(c,T)){var M=I.memoizedProps;if(m=m.compare,m=m!==null?m:Qm,m(M,v)&&c.ref===f.ref)return Sl(c,f,T)}return f.flags|=1,c=gl(I,v),c.ref=f.ref,c.return=f,f.child=c}function DF(c,f,m,v,T){if(c!==null){var I=c.memoizedProps;if(Qm(I,v)&&c.ref===f.ref)if(sr=!1,f.pendingProps=v=I,hI(c,T))(c.flags&131072)!==0&&(sr=!0);else return f.lanes=c.lanes,Sl(c,f,T)}return iI(c,f,m,v,T)}function $F(c,f,m,v){var T=v.children,I=c!==null?c.memoizedState:null;if(c===null&&f.stateNode===null&&(f.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),v.mode==="hidden"){if((f.flags&128)!==0){if(I=I!==null?I.baseLanes|m:m,c!==null){for(v=f.child=c.child,T=0;v!==null;)T=T|v.lanes|v.childLanes,v=v.sibling;v=T&~I}else v=0,f.child=null;return OF(c,f,I,m,v)}if((m&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},c!==null&&Nb(f,I!==null?I.cachePool:null),I!==null?ML(f,I):OE(),LL(f);else return v=f.lanes=536870912,OF(c,f,I!==null?I.baseLanes|m:m,m,v)}else I!==null?(Nb(f,I.cachePool),ML(f,I),Pu(),f.memoizedState=null):(c!==null&&Nb(f,null),OE(),Pu());return Zr(c,f,T,m),f.child}function fg(c,f){return c!==null&&c.tag===22||f.stateNode!==null||(f.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.sibling}function OF(c,f,m,v,T){var I=AE();return I=I===null?null:{parent:rr._currentValue,pool:I},f.memoizedState={baseLanes:m,cachePool:I},c!==null&&Nb(f,null),OE(),LL(f),c!==null&&yd(c,f,v,!0),f.childLanes=T,null}function Hb(c,f){return f=Kb({mode:f.mode,children:f.children},c.mode),f.ref=c.ref,c.child=f,f.return=c,f}function PF(c,f,m){return Sh(f,c.child,null,m),c=Hb(f,f.pendingProps),c.flags|=2,xs(f),f.memoizedState=null,c}function bie(c,f,m){var v=f.pendingProps,T=(f.flags&128)!==0;if(f.flags&=-129,c===null){if(Dt){if(v.mode==="hidden")return c=Hb(f,v),f.lanes=536870912,fg(null,c);if(ME(f),(c=bn)?(c=q3(c,Ks),c=c!==null&&c.data==="&"?c:null,c!==null&&(f.memoizedState={dehydrated:c,treeContext:_u!==null?{id:Ea,overflow:Ia}:null,retryLane:536870912,hydrationErrors:null},m=vL(c),m.return=f,f.child=m,Yr=f,bn=null)):c=null,c===null)throw ku(f);return f.lanes=536870912,null}return Hb(f,v)}var I=c.memoizedState;if(I!==null){var M=I.dehydrated;if(ME(f),T)if(f.flags&256)f.flags&=-257,f=PF(c,f,m);else if(f.memoizedState!==null)f.child=c.child,f.flags|=128,f=null;else throw Error(r(558));else if(sr||yd(c,f,m,!1),T=(m&c.childLanes)!==0,sr||T){if(v=hn,v!==null&&(M=$m(v,m),M!==0&&M!==I.retryLane))throw I.retryLane=M,ph(c,M),ns(v,c,M),rI;rx(),f=PF(c,f,m)}else c=I.treeContext,bn=Ys(M.nextSibling),Yr=f,Dt=!0,Au=null,Ks=!1,c!==null&&wL(f,c),f=Hb(f,v),f.flags|=4096;return f}return c=gl(c.child,{mode:v.mode,children:v.children}),c.ref=f.ref,f.child=c,c.return=f,c}function qb(c,f){var m=f.ref;if(m===null)c!==null&&c.ref!==null&&(f.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(r(284));(c===null||c.ref!==m)&&(f.flags|=4194816)}}function iI(c,f,m,v,T){return vh(f),m=FE(c,f,m,v,void 0,T),v=VE(),c!==null&&!sr?(BE(c,f,T),Sl(c,f,T)):(Dt&&v&&bE(f),f.flags|=1,Zr(c,f,m,T),f.child)}function MF(c,f,m,v,T,I){return vh(f),f.updateQueue=null,m=VL(f,v,m,T),FL(c),v=VE(),c!==null&&!sr?(BE(c,f,I),Sl(c,f,I)):(Dt&&v&&bE(f),f.flags|=1,Zr(c,f,m,I),f.child)}function LF(c,f,m,v,T){if(vh(f),f.stateNode===null){var I=dd,M=m.contextType;typeof M=="object"&&M!==null&&(I=Qr(M)),I=new m(v,I),f.memoizedState=I.state!==null&&I.state!==void 0?I.state:null,I.updater=tI,f.stateNode=I,I._reactInternals=f,I=f.stateNode,I.props=v,I.state=f.memoizedState,I.refs={},NE(f),M=m.contextType,I.context=typeof M=="object"&&M!==null?Qr(M):dd,I.state=f.memoizedState,M=m.getDerivedStateFromProps,typeof M=="function"&&(eI(f,m,M,v),I.state=f.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof I.getSnapshotBeforeUpdate=="function"||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(M=I.state,typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount(),M!==I.state&&tI.enqueueReplaceState(I,I.state,null),ag(f,v,I,T),og(),I.state=f.memoizedState),typeof I.componentDidMount=="function"&&(f.flags|=4194308),v=!0}else if(c===null){I=f.stateNode;var z=f.memoizedProps,Z=Ch(m,z);I.props=Z;var pe=I.context,Ee=m.contextType;M=dd,typeof Ee=="object"&&Ee!==null&&(M=Qr(Ee));var Ae=m.getDerivedStateFromProps;Ee=typeof Ae=="function"||typeof I.getSnapshotBeforeUpdate=="function",z=f.pendingProps!==z,Ee||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(z||pe!==M)&&TF(f,I,v,M),Ru=!1;var ye=f.memoizedState;I.state=ye,ag(f,v,I,T),og(),pe=f.memoizedState,z||ye!==pe||Ru?(typeof Ae=="function"&&(eI(f,m,Ae,v),pe=f.memoizedState),(Z=Ru||SF(f,m,Z,v,ye,pe,M))?(Ee||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(f.flags|=4194308)):(typeof I.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=v,f.memoizedState=pe),I.props=v,I.state=pe,I.context=M,v=Z):(typeof I.componentDidMount=="function"&&(f.flags|=4194308),v=!1)}else{I=f.stateNode,RE(c,f),M=f.memoizedProps,Ee=Ch(m,M),I.props=Ee,Ae=f.pendingProps,ye=I.context,pe=m.contextType,Z=dd,typeof pe=="object"&&pe!==null&&(Z=Qr(pe)),z=m.getDerivedStateFromProps,(pe=typeof z=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(M!==Ae||ye!==Z)&&TF(f,I,v,Z),Ru=!1,ye=f.memoizedState,I.state=ye,ag(f,v,I,T),og();var xe=f.memoizedState;M!==Ae||ye!==xe||Ru||c!==null&&c.dependencies!==null&&Ab(c.dependencies)?(typeof z=="function"&&(eI(f,m,z,v),xe=f.memoizedState),(Ee=Ru||SF(f,m,Ee,v,ye,xe,Z)||c!==null&&c.dependencies!==null&&Ab(c.dependencies))?(pe||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(v,xe,Z),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(v,xe,Z)),typeof I.componentDidUpdate=="function"&&(f.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof I.componentDidUpdate!="function"||M===c.memoizedProps&&ye===c.memoizedState||(f.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||M===c.memoizedProps&&ye===c.memoizedState||(f.flags|=1024),f.memoizedProps=v,f.memoizedState=xe),I.props=v,I.state=xe,I.context=Z,v=Ee):(typeof I.componentDidUpdate!="function"||M===c.memoizedProps&&ye===c.memoizedState||(f.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||M===c.memoizedProps&&ye===c.memoizedState||(f.flags|=1024),v=!1)}return I=v,qb(c,f),v=(f.flags&128)!==0,I||v?(I=f.stateNode,m=v&&typeof m.getDerivedStateFromError!="function"?null:I.render(),f.flags|=1,c!==null&&v?(f.child=Sh(f,c.child,null,T),f.child=Sh(f,null,m,T)):Zr(c,f,m,T),f.memoizedState=I.state,c=f.child):c=Sl(c,f,T),c}function FF(c,f,m,v){return gh(),f.flags|=256,Zr(c,f,m,v),f.child}var sI={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function oI(c){return{baseLanes:c,cachePool:_L()}}function aI(c,f,m){return c=c!==null?c.childLanes&~m:0,f&&(c|=Ss),c}function VF(c,f,m){var v=f.pendingProps,T=!1,I=(f.flags&128)!==0,M;if((M=I)||(M=c!==null&&c.memoizedState===null?!1:(Gn.current&2)!==0),M&&(T=!0,f.flags&=-129),M=(f.flags&32)!==0,f.flags&=-33,c===null){if(Dt){if(T?Ou(f):Pu(),(c=bn)?(c=q3(c,Ks),c=c!==null&&c.data!=="&"?c:null,c!==null&&(f.memoizedState={dehydrated:c,treeContext:_u!==null?{id:Ea,overflow:Ia}:null,retryLane:536870912,hydrationErrors:null},m=vL(c),m.return=f,f.child=m,Yr=f,bn=null)):c=null,c===null)throw ku(f);return jI(c)?f.lanes=32:f.lanes=536870912,null}var z=v.children;return v=v.fallback,T?(Pu(),T=f.mode,z=Kb({mode:"hidden",children:z},T),v=mh(v,T,m,null),z.return=f,v.return=f,z.sibling=v,f.child=z,v=f.child,v.memoizedState=oI(m),v.childLanes=aI(c,M,m),f.memoizedState=sI,fg(null,v)):(Ou(f),lI(f,z))}var Z=c.memoizedState;if(Z!==null&&(z=Z.dehydrated,z!==null)){if(I)f.flags&256?(Ou(f),f.flags&=-257,f=uI(c,f,m)):f.memoizedState!==null?(Pu(),f.child=c.child,f.flags|=128,f=null):(Pu(),z=v.fallback,T=f.mode,v=Kb({mode:"visible",children:v.children},T),z=mh(z,T,m,null),z.flags|=2,v.return=f,z.return=f,v.sibling=z,f.child=v,Sh(f,c.child,null,m),v=f.child,v.memoizedState=oI(m),v.childLanes=aI(c,M,m),f.memoizedState=sI,f=fg(null,v));else if(Ou(f),jI(z)){if(M=z.nextSibling&&z.nextSibling.dataset,M)var pe=M.dgst;M=pe,v=Error(r(419)),v.stack="",v.digest=M,eg({value:v,source:null,stack:null}),f=uI(c,f,m)}else if(sr||yd(c,f,m,!1),M=(m&c.childLanes)!==0,sr||M){if(M=hn,M!==null&&(v=$m(M,m),v!==0&&v!==Z.retryLane))throw Z.retryLane=v,ph(c,v),ns(M,c,v),rI;UI(z)||rx(),f=uI(c,f,m)}else UI(z)?(f.flags|=192,f.child=c.child,f=null):(c=Z.treeContext,bn=Ys(z.nextSibling),Yr=f,Dt=!0,Au=null,Ks=!1,c!==null&&wL(f,c),f=lI(f,v.children),f.flags|=4096);return f}return T?(Pu(),z=v.fallback,T=f.mode,Z=c.child,pe=Z.sibling,v=gl(Z,{mode:"hidden",children:v.children}),v.subtreeFlags=Z.subtreeFlags&65011712,pe!==null?z=gl(pe,z):(z=mh(z,T,m,null),z.flags|=2),z.return=f,v.return=f,v.sibling=z,f.child=v,fg(null,v),v=f.child,z=c.child.memoizedState,z===null?z=oI(m):(T=z.cachePool,T!==null?(Z=rr._currentValue,T=T.parent!==Z?{parent:Z,pool:Z}:T):T=_L(),z={baseLanes:z.baseLanes|m,cachePool:T}),v.memoizedState=z,v.childLanes=aI(c,M,m),f.memoizedState=sI,fg(c.child,v)):(Ou(f),m=c.child,c=m.sibling,m=gl(m,{mode:"visible",children:v.children}),m.return=f,m.sibling=null,c!==null&&(M=f.deletions,M===null?(f.deletions=[c],f.flags|=16):M.push(c)),f.child=m,f.memoizedState=null,m)}function lI(c,f){return f=Kb({mode:"visible",children:f},c.mode),f.return=c,c.child=f}function Kb(c,f){return c=vs(22,c,null,f),c.lanes=0,c}function uI(c,f,m){return Sh(f,c.child,null,m),c=lI(f,f.pendingProps.children),c.flags|=2,f.memoizedState=null,c}function BF(c,f,m){c.lanes|=f;var v=c.alternate;v!==null&&(v.lanes|=f),CE(c.return,f,m)}function cI(c,f,m,v,T,I){var M=c.memoizedState;M===null?c.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:v,tail:m,tailMode:T,treeForkCount:I}:(M.isBackwards=f,M.rendering=null,M.renderingStartTime=0,M.last=v,M.tail=m,M.tailMode=T,M.treeForkCount=I)}function zF(c,f,m){var v=f.pendingProps,T=v.revealOrder,I=v.tail;v=v.children;var M=Gn.current,z=(M&2)!==0;if(z?(M=M&1|2,f.flags|=128):M&=1,ie(Gn,M),Zr(c,f,v,m),v=Dt?Jm:0,!z&&c!==null&&(c.flags&128)!==0)e:for(c=f.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&BF(c,m,f);else if(c.tag===19)BF(c,m,f);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===f)break e;for(;c.sibling===null;){if(c.return===null||c.return===f)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}switch(T){case"forwards":for(m=f.child,T=null;m!==null;)c=m.alternate,c!==null&&Mb(c)===null&&(T=m),m=m.sibling;m=T,m===null?(T=f.child,f.child=null):(T=m.sibling,m.sibling=null),cI(f,!1,T,m,I,v);break;case"backwards":case"unstable_legacy-backwards":for(m=null,T=f.child,f.child=null;T!==null;){if(c=T.alternate,c!==null&&Mb(c)===null){f.child=T;break}c=T.sibling,T.sibling=m,m=T,T=c}cI(f,!0,m,null,I,v);break;case"together":cI(f,!1,null,null,void 0,v);break;default:f.memoizedState=null}return f.child}function Sl(c,f,m){if(c!==null&&(f.dependencies=c.dependencies),Fu|=f.lanes,(m&f.childLanes)===0)if(c!==null){if(yd(c,f,m,!1),(m&f.childLanes)===0)return null}else return null;if(c!==null&&f.child!==c.child)throw Error(r(153));if(f.child!==null){for(c=f.child,m=gl(c,c.pendingProps),f.child=m,m.return=f;c.sibling!==null;)c=c.sibling,m=m.sibling=gl(c,c.pendingProps),m.return=f;m.sibling=null}return f.child}function hI(c,f){return(c.lanes&f)!==0?!0:(c=c.dependencies,!!(c!==null&&Ab(c)))}function xie(c,f,m){switch(f.tag){case 3:Fe(f,f.stateNode.containerInfo),Nu(f,rr,c.memoizedState.cache),gh();break;case 27:case 5:Oe(f);break;case 4:Fe(f,f.stateNode.containerInfo);break;case 10:Nu(f,f.type,f.memoizedProps.value);break;case 31:if(f.memoizedState!==null)return f.flags|=128,ME(f),null;break;case 13:var v=f.memoizedState;if(v!==null)return v.dehydrated!==null?(Ou(f),f.flags|=128,null):(m&f.child.childLanes)!==0?VF(c,f,m):(Ou(f),c=Sl(c,f,m),c!==null?c.sibling:null);Ou(f);break;case 19:var T=(c.flags&128)!==0;if(v=(m&f.childLanes)!==0,v||(yd(c,f,m,!1),v=(m&f.childLanes)!==0),T){if(v)return zF(c,f,m);f.flags|=128}if(T=f.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),ie(Gn,Gn.current),v)break;return null;case 22:return f.lanes=0,$F(c,f,m,f.pendingProps);case 24:Nu(f,rr,c.memoizedState.cache)}return Sl(c,f,m)}function UF(c,f,m){if(c!==null)if(c.memoizedProps!==f.pendingProps)sr=!0;else{if(!hI(c,m)&&(f.flags&128)===0)return sr=!1,xie(c,f,m);sr=(c.flags&131072)!==0}else sr=!1,Dt&&(f.flags&1048576)!==0&&xL(f,Jm,f.index);switch(f.lanes=0,f.tag){case 16:e:{var v=f.pendingProps;if(c=xh(f.elementType),f.type=c,typeof c=="function")gE(c)?(v=Ch(c,v),f.tag=1,f=LF(null,f,c,v,m)):(f.tag=0,f=iI(null,f,c,v,m));else{if(c!=null){var T=c.$$typeof;if(T===_){f.tag=11,f=NF(null,f,c,v,m);break e}else if(T===N){f.tag=14,f=RF(null,f,c,v,m);break e}}throw f=q(c)||c,Error(r(306,f,""))}}return f;case 0:return iI(c,f,f.type,f.pendingProps,m);case 1:return v=f.type,T=Ch(v,f.pendingProps),LF(c,f,v,T,m);case 3:e:{if(Fe(f,f.stateNode.containerInfo),c===null)throw Error(r(387));v=f.pendingProps;var I=f.memoizedState;T=I.element,RE(c,f),ag(f,v,null,m);var M=f.memoizedState;if(v=M.cache,Nu(f,rr,v),v!==I.cache&&EE(f,[rr],m,!0),og(),v=M.element,I.isDehydrated)if(I={element:v,isDehydrated:!1,cache:M.cache},f.updateQueue.baseState=I,f.memoizedState=I,f.flags&256){f=FF(c,f,v,m);break e}else if(v!==T){T=Gs(Error(r(424)),f),eg(T),f=FF(c,f,v,m);break e}else{switch(c=f.stateNode.containerInfo,c.nodeType){case 9:c=c.body;break;default:c=c.nodeName==="HTML"?c.ownerDocument.body:c}for(bn=Ys(c.firstChild),Yr=f,Dt=!0,Au=null,Ks=!0,m=$L(f,null,v,m),f.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(gh(),v===T){f=Sl(c,f,m);break e}Zr(c,f,v,m)}f=f.child}return f;case 26:return qb(c,f),c===null?(m=J3(f.type,null,f.pendingProps,null))?f.memoizedState=m:Dt||(m=f.type,c=f.pendingProps,v=cx(_e.current).createElement(m),v[er]=f,v[Dr]=c,Jr(v,m,c),tr(v),f.stateNode=v):f.memoizedState=J3(f.type,c.memoizedProps,f.pendingProps,c.memoizedState),null;case 27:return Oe(f),c===null&&Dt&&(v=f.stateNode=Y3(f.type,f.pendingProps,_e.current),Yr=f,Ks=!0,T=bn,ju(f.type)?(WI=T,bn=Ys(v.firstChild)):bn=T),Zr(c,f,f.pendingProps.children,m),qb(c,f),c===null&&(f.flags|=4194304),f.child;case 5:return c===null&&Dt&&((T=v=bn)&&(v=Yie(v,f.type,f.pendingProps,Ks),v!==null?(f.stateNode=v,Yr=f,bn=Ys(v.firstChild),Ks=!1,T=!0):T=!1),T||ku(f)),Oe(f),T=f.type,I=f.pendingProps,M=c!==null?c.memoizedProps:null,v=I.children,VI(T,I)?v=null:M!==null&&VI(T,M)&&(f.flags|=32),f.memoizedState!==null&&(T=FE(c,f,hie,null,null,m),_g._currentValue=T),qb(c,f),Zr(c,f,v,m),f.child;case 6:return c===null&&Dt&&((c=m=bn)&&(m=Qie(m,f.pendingProps,Ks),m!==null?(f.stateNode=m,Yr=f,bn=null,c=!0):c=!1),c||ku(f)),null;case 13:return VF(c,f,m);case 4:return Fe(f,f.stateNode.containerInfo),v=f.pendingProps,c===null?f.child=Sh(f,null,v,m):Zr(c,f,v,m),f.child;case 11:return NF(c,f,f.type,f.pendingProps,m);case 7:return Zr(c,f,f.pendingProps,m),f.child;case 8:return Zr(c,f,f.pendingProps.children,m),f.child;case 12:return Zr(c,f,f.pendingProps.children,m),f.child;case 10:return v=f.pendingProps,Nu(f,f.type,v.value),Zr(c,f,v.children,m),f.child;case 9:return T=f.type._context,v=f.pendingProps.children,vh(f),T=Qr(T),v=v(T),f.flags|=1,Zr(c,f,v,m),f.child;case 14:return RF(c,f,f.type,f.pendingProps,m);case 15:return DF(c,f,f.type,f.pendingProps,m);case 19:return zF(c,f,m);case 31:return bie(c,f,m);case 22:return $F(c,f,m,f.pendingProps);case 24:return vh(f),v=Qr(rr),c===null?(T=AE(),T===null&&(T=hn,I=IE(),T.pooledCache=I,I.refCount++,I!==null&&(T.pooledCacheLanes|=m),T=I),f.memoizedState={parent:v,cache:T},NE(f),Nu(f,rr,T)):((c.lanes&m)!==0&&(RE(c,f),ag(f,null,null,m),og()),T=c.memoizedState,I=f.memoizedState,T.parent!==v?(T={parent:v,cache:v},f.memoizedState=T,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=T),Nu(f,rr,v)):(v=I.cache,Nu(f,rr,v),v!==T.cache&&EE(f,[rr],m,!0))),Zr(c,f,f.pendingProps.children,m),f.child;case 29:throw f.pendingProps}throw Error(r(156,f.tag))}function Tl(c){c.flags|=4}function fI(c,f,m,v,T){if((f=(c.mode&32)!==0)&&(f=!1),f){if(c.flags|=16777216,(T&335544128)===T)if(c.stateNode.complete)c.flags|=8192;else if(m3())c.flags|=8192;else throw wh=Db,kE}else c.flags&=-16777217}function jF(c,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)c.flags&=-16777217;else if(c.flags|=16777216,!iV(f))if(m3())c.flags|=8192;else throw wh=Db,kE}function Xb(c,f){f!==null&&(c.flags|=4),c.flags&16384&&(f=c.tag!==22?tb():536870912,c.lanes|=f,kd|=f)}function dg(c,f){if(!Dt)switch(c.tailMode){case"hidden":f=c.tail;for(var m=null;f!==null;)f.alternate!==null&&(m=f),f=f.sibling;m===null?c.tail=null:m.sibling=null;break;case"collapsed":m=c.tail;for(var v=null;m!==null;)m.alternate!==null&&(v=m),m=m.sibling;v===null?f||c.tail===null?c.tail=null:c.tail.sibling=null:v.sibling=null}}function xn(c){var f=c.alternate!==null&&c.alternate.child===c.child,m=0,v=0;if(f)for(var T=c.child;T!==null;)m|=T.lanes|T.childLanes,v|=T.subtreeFlags&65011712,v|=T.flags&65011712,T.return=c,T=T.sibling;else for(T=c.child;T!==null;)m|=T.lanes|T.childLanes,v|=T.subtreeFlags,v|=T.flags,T.return=c,T=T.sibling;return c.subtreeFlags|=v,c.childLanes=m,f}function wie(c,f,m){var v=f.pendingProps;switch(xE(f),f.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xn(f),null;case 1:return xn(f),null;case 3:return m=f.stateNode,v=null,c!==null&&(v=c.memoizedState.cache),f.memoizedState.cache!==v&&(f.flags|=2048),bl(rr),ue(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(c===null||c.child===null)&&(gd(f)?Tl(f):c===null||c.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,SE())),xn(f),null;case 26:var T=f.type,I=f.memoizedState;return c===null?(Tl(f),I!==null?(xn(f),jF(f,I)):(xn(f),fI(f,T,null,v,m))):I?I!==c.memoizedState?(Tl(f),xn(f),jF(f,I)):(xn(f),f.flags&=-16777217):(c=c.memoizedProps,c!==v&&Tl(f),xn(f),fI(f,T,c,v,m)),null;case 27:if(Me(f),m=_e.current,T=f.type,c!==null&&f.stateNode!=null)c.memoizedProps!==v&&Tl(f);else{if(!v){if(f.stateNode===null)throw Error(r(166));return xn(f),null}c=me.current,gd(f)?SL(f):(c=Y3(T,v,m),f.stateNode=c,Tl(f))}return xn(f),null;case 5:if(Me(f),T=f.type,c!==null&&f.stateNode!=null)c.memoizedProps!==v&&Tl(f);else{if(!v){if(f.stateNode===null)throw Error(r(166));return xn(f),null}if(I=me.current,gd(f))SL(f);else{var M=cx(_e.current);switch(I){case 1:I=M.createElementNS("http://www.w3.org/2000/svg",T);break;case 2:I=M.createElementNS("http://www.w3.org/1998/Math/MathML",T);break;default:switch(T){case"svg":I=M.createElementNS("http://www.w3.org/2000/svg",T);break;case"math":I=M.createElementNS("http://www.w3.org/1998/Math/MathML",T);break;case"script":I=M.createElement("div"),I.innerHTML="<script><\/script>",I=I.removeChild(I.firstChild);break;case"select":I=typeof v.is=="string"?M.createElement("select",{is:v.is}):M.createElement("select"),v.multiple?I.multiple=!0:v.size&&(I.size=v.size);break;default:I=typeof v.is=="string"?M.createElement(T,{is:v.is}):M.createElement(T)}}I[er]=f,I[Dr]=v;e:for(M=f.child;M!==null;){if(M.tag===5||M.tag===6)I.appendChild(M.stateNode);else if(M.tag!==4&&M.tag!==27&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===f)break e;for(;M.sibling===null;){if(M.return===null||M.return===f)break e;M=M.return}M.sibling.return=M.return,M=M.sibling}f.stateNode=I;e:switch(Jr(I,T,v),T){case"button":case"input":case"select":case"textarea":v=!!v.autoFocus;break e;case"img":v=!0;break e;default:v=!1}v&&Tl(f)}}return xn(f),fI(f,f.type,c===null?null:c.memoizedProps,f.pendingProps,m),null;case 6:if(c&&f.stateNode!=null)c.memoizedProps!==v&&Tl(f);else{if(typeof v!="string"&&f.stateNode===null)throw Error(r(166));if(c=_e.current,gd(f)){if(c=f.stateNode,m=f.memoizedProps,v=null,T=Yr,T!==null)switch(T.tag){case 27:case 5:v=T.memoizedProps}c[er]=f,c=!!(c.nodeValue===m||v!==null&&v.suppressHydrationWarning===!0||V3(c.nodeValue,m)),c||ku(f,!0)}else c=cx(c).createTextNode(v),c[er]=f,f.stateNode=c}return xn(f),null;case 31:if(m=f.memoizedState,c===null||c.memoizedState!==null){if(v=gd(f),m!==null){if(c===null){if(!v)throw Error(r(318));if(c=f.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(557));c[er]=f}else gh(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;xn(f),c=!1}else m=SE(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=m),c=!0;if(!c)return f.flags&256?(xs(f),f):(xs(f),null);if((f.flags&128)!==0)throw Error(r(558))}return xn(f),null;case 13:if(v=f.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(T=gd(f),v!==null&&v.dehydrated!==null){if(c===null){if(!T)throw Error(r(318));if(T=f.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(r(317));T[er]=f}else gh(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;xn(f),T=!1}else T=SE(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=T),T=!0;if(!T)return f.flags&256?(xs(f),f):(xs(f),null)}return xs(f),(f.flags&128)!==0?(f.lanes=m,f):(m=v!==null,c=c!==null&&c.memoizedState!==null,m&&(v=f.child,T=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(T=v.alternate.memoizedState.cachePool.pool),I=null,v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(I=v.memoizedState.cachePool.pool),I!==T&&(v.flags|=2048)),m!==c&&m&&(f.child.flags|=8192),Xb(f,f.updateQueue),xn(f),null);case 4:return ue(),c===null&&OI(f.stateNode.containerInfo),xn(f),null;case 10:return bl(f.type),xn(f),null;case 19:if(Q(Gn),v=f.memoizedState,v===null)return xn(f),null;if(T=(f.flags&128)!==0,I=v.rendering,I===null)if(T)dg(v,!1);else{if(Pn!==0||c!==null&&(c.flags&128)!==0)for(c=f.child;c!==null;){if(I=Mb(c),I!==null){for(f.flags|=128,dg(v,!1),c=I.updateQueue,f.updateQueue=c,Xb(f,c),f.subtreeFlags=0,c=m,m=f.child;m!==null;)yL(m,c),m=m.sibling;return ie(Gn,Gn.current&1|2),Dt&&yl(f,v.treeForkCount),f.child}c=c.sibling}v.tail!==null&&cn()>ex&&(f.flags|=128,T=!0,dg(v,!1),f.lanes=4194304)}else{if(!T)if(c=Mb(I),c!==null){if(f.flags|=128,T=!0,c=c.updateQueue,f.updateQueue=c,Xb(f,c),dg(v,!0),v.tail===null&&v.tailMode==="hidden"&&!I.alternate&&!Dt)return xn(f),null}else 2*cn()-v.renderingStartTime>ex&&m!==536870912&&(f.flags|=128,T=!0,dg(v,!1),f.lanes=4194304);v.isBackwards?(I.sibling=f.child,f.child=I):(c=v.last,c!==null?c.sibling=I:f.child=I,v.last=I)}return v.tail!==null?(c=v.tail,v.rendering=c,v.tail=c.sibling,v.renderingStartTime=cn(),c.sibling=null,m=Gn.current,ie(Gn,T?m&1|2:m&1),Dt&&yl(f,v.treeForkCount),c):(xn(f),null);case 22:case 23:return xs(f),PE(),v=f.memoizedState!==null,c!==null?c.memoizedState!==null!==v&&(f.flags|=8192):v&&(f.flags|=8192),v?(m&536870912)!==0&&(f.flags&128)===0&&(xn(f),f.subtreeFlags&6&&(f.flags|=8192)):xn(f),m=f.updateQueue,m!==null&&Xb(f,m.retryQueue),m=null,c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),v=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(v=f.memoizedState.cachePool.pool),v!==m&&(f.flags|=2048),c!==null&&Q(bh),null;case 24:return m=null,c!==null&&(m=c.memoizedState.cache),f.memoizedState.cache!==m&&(f.flags|=2048),bl(rr),xn(f),null;case 25:return null;case 30:return null}throw Error(r(156,f.tag))}function Sie(c,f){switch(xE(f),f.tag){case 1:return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 3:return bl(rr),ue(),c=f.flags,(c&65536)!==0&&(c&128)===0?(f.flags=c&-65537|128,f):null;case 26:case 27:case 5:return Me(f),null;case 31:if(f.memoizedState!==null){if(xs(f),f.alternate===null)throw Error(r(340));gh()}return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 13:if(xs(f),c=f.memoizedState,c!==null&&c.dehydrated!==null){if(f.alternate===null)throw Error(r(340));gh()}return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 19:return Q(Gn),null;case 4:return ue(),null;case 10:return bl(f.type),null;case 22:case 23:return xs(f),PE(),c!==null&&Q(bh),c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 24:return bl(rr),null;case 25:return null;default:return null}}function WF(c,f){switch(xE(f),f.tag){case 3:bl(rr),ue();break;case 26:case 27:case 5:Me(f);break;case 4:ue();break;case 31:f.memoizedState!==null&&xs(f);break;case 13:xs(f);break;case 19:Q(Gn);break;case 10:bl(f.type);break;case 22:case 23:xs(f),PE(),c!==null&&Q(bh);break;case 24:bl(rr)}}function pg(c,f){try{var m=f.updateQueue,v=m!==null?m.lastEffect:null;if(v!==null){var T=v.next;m=T;do{if((m.tag&c)===c){v=void 0;var I=m.create,M=m.inst;v=I(),M.destroy=v}m=m.next}while(m!==T)}}catch(z){Jt(f,f.return,z)}}function Mu(c,f,m){try{var v=f.updateQueue,T=v!==null?v.lastEffect:null;if(T!==null){var I=T.next;v=I;do{if((v.tag&c)===c){var M=v.inst,z=M.destroy;if(z!==void 0){M.destroy=void 0,T=f;var Z=m,pe=z;try{pe()}catch(Ee){Jt(T,Z,Ee)}}}v=v.next}while(v!==I)}}catch(Ee){Jt(f,f.return,Ee)}}function GF(c){var f=c.updateQueue;if(f!==null){var m=c.stateNode;try{PL(f,m)}catch(v){Jt(c,c.return,v)}}}function HF(c,f,m){m.props=Ch(c.type,c.memoizedProps),m.state=c.memoizedState;try{m.componentWillUnmount()}catch(v){Jt(c,f,v)}}function mg(c,f){try{var m=c.ref;if(m!==null){switch(c.tag){case 26:case 27:case 5:var v=c.stateNode;break;case 30:v=c.stateNode;break;default:v=c.stateNode}typeof m=="function"?c.refCleanup=m(v):m.current=v}}catch(T){Jt(c,f,T)}}function _a(c,f){var m=c.ref,v=c.refCleanup;if(m!==null)if(typeof v=="function")try{v()}catch(T){Jt(c,f,T)}finally{c.refCleanup=null,c=c.alternate,c!=null&&(c.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(T){Jt(c,f,T)}else m.current=null}function qF(c){var f=c.type,m=c.memoizedProps,v=c.stateNode;try{e:switch(f){case"button":case"input":case"select":case"textarea":m.autoFocus&&v.focus();break e;case"img":m.src?v.src=m.src:m.srcSet&&(v.srcset=m.srcSet)}}catch(T){Jt(c,c.return,T)}}function dI(c,f,m){try{var v=c.stateNode;Wie(v,c.type,m,f),v[Dr]=f}catch(T){Jt(c,c.return,T)}}function KF(c){return c.tag===5||c.tag===3||c.tag===26||c.tag===27&&ju(c.type)||c.tag===4}function pI(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||KF(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.tag===27&&ju(c.type)||c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function mI(c,f,m){var v=c.tag;if(v===5||v===6)c=c.stateNode,f?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(c,f):(f=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,f.appendChild(c),m=m._reactRootContainer,m!=null||f.onclick!==null||(f.onclick=Do));else if(v!==4&&(v===27&&ju(c.type)&&(m=c.stateNode,f=null),c=c.child,c!==null))for(mI(c,f,m),c=c.sibling;c!==null;)mI(c,f,m),c=c.sibling}function Yb(c,f,m){var v=c.tag;if(v===5||v===6)c=c.stateNode,f?m.insertBefore(c,f):m.appendChild(c);else if(v!==4&&(v===27&&ju(c.type)&&(m=c.stateNode),c=c.child,c!==null))for(Yb(c,f,m),c=c.sibling;c!==null;)Yb(c,f,m),c=c.sibling}function XF(c){var f=c.stateNode,m=c.memoizedProps;try{for(var v=c.type,T=f.attributes;T.length;)f.removeAttributeNode(T[0]);Jr(f,v,m),f[er]=c,f[Dr]=m}catch(I){Jt(c,c.return,I)}}var Cl=!1,or=!1,gI=!1,YF=typeof WeakSet=="function"?WeakSet:Set,Or=null;function Tie(c,f){if(c=c.containerInfo,LI=yx,c=lL(c),uE(c)){if("selectionStart"in c)var m={start:c.selectionStart,end:c.selectionEnd};else e:{m=(m=c.ownerDocument)&&m.defaultView||window;var v=m.getSelection&&m.getSelection();if(v&&v.rangeCount!==0){m=v.anchorNode;var T=v.anchorOffset,I=v.focusNode;v=v.focusOffset;try{m.nodeType,I.nodeType}catch{m=null;break e}var M=0,z=-1,Z=-1,pe=0,Ee=0,Ae=c,ye=null;t:for(;;){for(var xe;Ae!==m||T!==0&&Ae.nodeType!==3||(z=M+T),Ae!==I||v!==0&&Ae.nodeType!==3||(Z=M+v),Ae.nodeType===3&&(M+=Ae.nodeValue.length),(xe=Ae.firstChild)!==null;)ye=Ae,Ae=xe;for(;;){if(Ae===c)break t;if(ye===m&&++pe===T&&(z=M),ye===I&&++Ee===v&&(Z=M),(xe=Ae.nextSibling)!==null)break;Ae=ye,ye=Ae.parentNode}Ae=xe}m=z===-1||Z===-1?null:{start:z,end:Z}}else m=null}m=m||{start:0,end:0}}else m=null;for(FI={focusedElem:c,selectionRange:m},yx=!1,Or=f;Or!==null;)if(f=Or,c=f.child,(f.subtreeFlags&1028)!==0&&c!==null)c.return=f,Or=c;else for(;Or!==null;){switch(f=Or,I=f.alternate,c=f.flags,f.tag){case 0:if((c&4)!==0&&(c=f.updateQueue,c=c!==null?c.events:null,c!==null))for(m=0;m<c.length;m++)T=c[m],T.ref.impl=T.nextImpl;break;case 11:case 15:break;case 1:if((c&1024)!==0&&I!==null){c=void 0,m=f,T=I.memoizedProps,I=I.memoizedState,v=m.stateNode;try{var je=Ch(m.type,T);c=v.getSnapshotBeforeUpdate(je,I),v.__reactInternalSnapshotBeforeUpdate=c}catch(rt){Jt(m,m.return,rt)}}break;case 3:if((c&1024)!==0){if(c=f.stateNode.containerInfo,m=c.nodeType,m===9)zI(c);else if(m===1)switch(c.nodeName){case"HEAD":case"HTML":case"BODY":zI(c);break;default:c.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((c&1024)!==0)throw Error(r(163))}if(c=f.sibling,c!==null){c.return=f.return,Or=c;break}Or=f.return}}function QF(c,f,m){var v=m.flags;switch(m.tag){case 0:case 11:case 15:Il(c,m),v&4&&pg(5,m);break;case 1:if(Il(c,m),v&4)if(c=m.stateNode,f===null)try{c.componentDidMount()}catch(M){Jt(m,m.return,M)}else{var T=Ch(m.type,f.memoizedProps);f=f.memoizedState;try{c.componentDidUpdate(T,f,c.__reactInternalSnapshotBeforeUpdate)}catch(M){Jt(m,m.return,M)}}v&64&&GF(m),v&512&&mg(m,m.return);break;case 3:if(Il(c,m),v&64&&(c=m.updateQueue,c!==null)){if(f=null,m.child!==null)switch(m.child.tag){case 27:case 5:f=m.child.stateNode;break;case 1:f=m.child.stateNode}try{PL(c,f)}catch(M){Jt(m,m.return,M)}}break;case 27:f===null&&v&4&&XF(m);case 26:case 5:Il(c,m),f===null&&v&4&&qF(m),v&512&&mg(m,m.return);break;case 12:Il(c,m);break;case 31:Il(c,m),v&4&&e3(c,m);break;case 13:Il(c,m),v&4&&t3(c,m),v&64&&(c=m.memoizedState,c!==null&&(c=c.dehydrated,c!==null&&(m=Die.bind(null,m),Zie(c,m))));break;case 22:if(v=m.memoizedState!==null||Cl,!v){f=f!==null&&f.memoizedState!==null||or,T=Cl;var I=or;Cl=v,(or=f)&&!I?_l(c,m,(m.subtreeFlags&8772)!==0):Il(c,m),Cl=T,or=I}break;case 30:break;default:Il(c,m)}}function ZF(c){var f=c.alternate;f!==null&&(c.alternate=null,ZF(f)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(f=c.stateNode,f!==null&&Jf(f)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}var _n=null,Zi=!1;function El(c,f,m){for(m=m.child;m!==null;)JF(c,f,m),m=m.sibling}function JF(c,f,m){if(vr&&typeof vr.onCommitFiberUnmount=="function")try{vr.onCommitFiberUnmount(pi,m)}catch{}switch(m.tag){case 26:or||_a(m,f),El(c,f,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:or||_a(m,f);var v=_n,T=Zi;ju(m.type)&&(_n=m.stateNode,Zi=!1),El(c,f,m),Cg(m.stateNode),_n=v,Zi=T;break;case 5:or||_a(m,f);case 6:if(v=_n,T=Zi,_n=null,El(c,f,m),_n=v,Zi=T,_n!==null)if(Zi)try{(_n.nodeType===9?_n.body:_n.nodeName==="HTML"?_n.ownerDocument.body:_n).removeChild(m.stateNode)}catch(I){Jt(m,f,I)}else try{_n.removeChild(m.stateNode)}catch(I){Jt(m,f,I)}break;case 18:_n!==null&&(Zi?(c=_n,G3(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,m.stateNode),Ld(c)):G3(_n,m.stateNode));break;case 4:v=_n,T=Zi,_n=m.stateNode.containerInfo,Zi=!0,El(c,f,m),_n=v,Zi=T;break;case 0:case 11:case 14:case 15:Mu(2,m,f),or||Mu(4,m,f),El(c,f,m);break;case 1:or||(_a(m,f),v=m.stateNode,typeof v.componentWillUnmount=="function"&&HF(m,f,v)),El(c,f,m);break;case 21:El(c,f,m);break;case 22:or=(v=or)||m.memoizedState!==null,El(c,f,m),or=v;break;default:El(c,f,m)}}function e3(c,f){if(f.memoizedState===null&&(c=f.alternate,c!==null&&(c=c.memoizedState,c!==null))){c=c.dehydrated;try{Ld(c)}catch(m){Jt(f,f.return,m)}}}function t3(c,f){if(f.memoizedState===null&&(c=f.alternate,c!==null&&(c=c.memoizedState,c!==null&&(c=c.dehydrated,c!==null))))try{Ld(c)}catch(m){Jt(f,f.return,m)}}function Cie(c){switch(c.tag){case 31:case 13:case 19:var f=c.stateNode;return f===null&&(f=c.stateNode=new YF),f;case 22:return c=c.stateNode,f=c._retryCache,f===null&&(f=c._retryCache=new YF),f;default:throw Error(r(435,c.tag))}}function Qb(c,f){var m=Cie(c);f.forEach(function(v){if(!m.has(v)){m.add(v);var T=$ie.bind(null,c,v);v.then(T,T)}})}function Ji(c,f){var m=f.deletions;if(m!==null)for(var v=0;v<m.length;v++){var T=m[v],I=c,M=f,z=M;e:for(;z!==null;){switch(z.tag){case 27:if(ju(z.type)){_n=z.stateNode,Zi=!1;break e}break;case 5:_n=z.stateNode,Zi=!1;break e;case 3:case 4:_n=z.stateNode.containerInfo,Zi=!0;break e}z=z.return}if(_n===null)throw Error(r(160));JF(I,M,T),_n=null,Zi=!1,I=T.alternate,I!==null&&(I.return=null),T.return=null}if(f.subtreeFlags&13886)for(f=f.child;f!==null;)n3(f,c),f=f.sibling}var Fo=null;function n3(c,f){var m=c.alternate,v=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:Ji(f,c),es(c),v&4&&(Mu(3,c,c.return),pg(3,c),Mu(5,c,c.return));break;case 1:Ji(f,c),es(c),v&512&&(or||m===null||_a(m,m.return)),v&64&&Cl&&(c=c.updateQueue,c!==null&&(v=c.callbacks,v!==null&&(m=c.shared.hiddenCallbacks,c.shared.hiddenCallbacks=m===null?v:m.concat(v))));break;case 26:var T=Fo;if(Ji(f,c),es(c),v&512&&(or||m===null||_a(m,m.return)),v&4){var I=m!==null?m.memoizedState:null;if(v=c.memoizedState,m===null)if(v===null)if(c.stateNode===null){e:{v=c.type,m=c.memoizedProps,T=T.ownerDocument||T;t:switch(v){case"title":I=T.getElementsByTagName("title")[0],(!I||I[da]||I[er]||I.namespaceURI==="http://www.w3.org/2000/svg"||I.hasAttribute("itemprop"))&&(I=T.createElement(v),T.head.insertBefore(I,T.querySelector("head > title"))),Jr(I,v,m),I[er]=c,tr(I),v=I;break e;case"link":var M=nV("link","href",T).get(v+(m.href||""));if(M){for(var z=0;z<M.length;z++)if(I=M[z],I.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&I.getAttribute("rel")===(m.rel==null?null:m.rel)&&I.getAttribute("title")===(m.title==null?null:m.title)&&I.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){M.splice(z,1);break t}}I=T.createElement(v),Jr(I,v,m),T.head.appendChild(I);break;case"meta":if(M=nV("meta","content",T).get(v+(m.content||""))){for(z=0;z<M.length;z++)if(I=M[z],I.getAttribute("content")===(m.content==null?null:""+m.content)&&I.getAttribute("name")===(m.name==null?null:m.name)&&I.getAttribute("property")===(m.property==null?null:m.property)&&I.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&I.getAttribute("charset")===(m.charSet==null?null:m.charSet)){M.splice(z,1);break t}}I=T.createElement(v),Jr(I,v,m),T.head.appendChild(I);break;default:throw Error(r(468,v))}I[er]=c,tr(I),v=I}c.stateNode=v}else rV(T,c.type,c.stateNode);else c.stateNode=tV(T,v,c.memoizedProps);else I!==v?(I===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):I.count--,v===null?rV(T,c.type,c.stateNode):tV(T,v,c.memoizedProps)):v===null&&c.stateNode!==null&&dI(c,c.memoizedProps,m.memoizedProps)}break;case 27:Ji(f,c),es(c),v&512&&(or||m===null||_a(m,m.return)),m!==null&&v&4&&dI(c,c.memoizedProps,m.memoizedProps);break;case 5:if(Ji(f,c),es(c),v&512&&(or||m===null||_a(m,m.return)),c.flags&32){T=c.stateNode;try{Qi(T,"")}catch(je){Jt(c,c.return,je)}}v&4&&c.stateNode!=null&&(T=c.memoizedProps,dI(c,T,m!==null?m.memoizedProps:T)),v&1024&&(gI=!0);break;case 6:if(Ji(f,c),es(c),v&4){if(c.stateNode===null)throw Error(r(162));v=c.memoizedProps,m=c.stateNode;try{m.nodeValue=v}catch(je){Jt(c,c.return,je)}}break;case 3:if(dx=null,T=Fo,Fo=hx(f.containerInfo),Ji(f,c),Fo=T,es(c),v&4&&m!==null&&m.memoizedState.isDehydrated)try{Ld(f.containerInfo)}catch(je){Jt(c,c.return,je)}gI&&(gI=!1,r3(c));break;case 4:v=Fo,Fo=hx(c.stateNode.containerInfo),Ji(f,c),es(c),Fo=v;break;case 12:Ji(f,c),es(c);break;case 31:Ji(f,c),es(c),v&4&&(v=c.updateQueue,v!==null&&(c.updateQueue=null,Qb(c,v)));break;case 13:Ji(f,c),es(c),c.child.flags&8192&&c.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(Jb=cn()),v&4&&(v=c.updateQueue,v!==null&&(c.updateQueue=null,Qb(c,v)));break;case 22:T=c.memoizedState!==null;var Z=m!==null&&m.memoizedState!==null,pe=Cl,Ee=or;if(Cl=pe||T,or=Ee||Z,Ji(f,c),or=Ee,Cl=pe,es(c),v&8192)e:for(f=c.stateNode,f._visibility=T?f._visibility&-2:f._visibility|1,T&&(m===null||Z||Cl||or||Eh(c)),m=null,f=c;;){if(f.tag===5||f.tag===26){if(m===null){Z=m=f;try{if(I=Z.stateNode,T)M=I.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none";else{z=Z.stateNode;var Ae=Z.memoizedProps.style,ye=Ae!=null&&Ae.hasOwnProperty("display")?Ae.display:null;z.style.display=ye==null||typeof ye=="boolean"?"":(""+ye).trim()}}catch(je){Jt(Z,Z.return,je)}}}else if(f.tag===6){if(m===null){Z=f;try{Z.stateNode.nodeValue=T?"":Z.memoizedProps}catch(je){Jt(Z,Z.return,je)}}}else if(f.tag===18){if(m===null){Z=f;try{var xe=Z.stateNode;T?H3(xe,!0):H3(Z.stateNode,!1)}catch(je){Jt(Z,Z.return,je)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===c)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break e;for(;f.sibling===null;){if(f.return===null||f.return===c)break e;m===f&&(m=null),f=f.return}m===f&&(m=null),f.sibling.return=f.return,f=f.sibling}v&4&&(v=c.updateQueue,v!==null&&(m=v.retryQueue,m!==null&&(v.retryQueue=null,Qb(c,m))));break;case 19:Ji(f,c),es(c),v&4&&(v=c.updateQueue,v!==null&&(c.updateQueue=null,Qb(c,v)));break;case 30:break;case 21:break;default:Ji(f,c),es(c)}}function es(c){var f=c.flags;if(f&2){try{for(var m,v=c.return;v!==null;){if(KF(v)){m=v;break}v=v.return}if(m==null)throw Error(r(160));switch(m.tag){case 27:var T=m.stateNode,I=pI(c);Yb(c,I,T);break;case 5:var M=m.stateNode;m.flags&32&&(Qi(M,""),m.flags&=-33);var z=pI(c);Yb(c,z,M);break;case 3:case 4:var Z=m.stateNode.containerInfo,pe=pI(c);mI(c,pe,Z);break;default:throw Error(r(161))}}catch(Ee){Jt(c,c.return,Ee)}c.flags&=-3}f&4096&&(c.flags&=-4097)}function r3(c){if(c.subtreeFlags&1024)for(c=c.child;c!==null;){var f=c;r3(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),c=c.sibling}}function Il(c,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)QF(c,f.alternate,f),f=f.sibling}function Eh(c){for(c=c.child;c!==null;){var f=c;switch(f.tag){case 0:case 11:case 14:case 15:Mu(4,f,f.return),Eh(f);break;case 1:_a(f,f.return);var m=f.stateNode;typeof m.componentWillUnmount=="function"&&HF(f,f.return,m),Eh(f);break;case 27:Cg(f.stateNode);case 26:case 5:_a(f,f.return),Eh(f);break;case 22:f.memoizedState===null&&Eh(f);break;case 30:Eh(f);break;default:Eh(f)}c=c.sibling}}function _l(c,f,m){for(m=m&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var v=f.alternate,T=c,I=f,M=I.flags;switch(I.tag){case 0:case 11:case 15:_l(T,I,m),pg(4,I);break;case 1:if(_l(T,I,m),v=I,T=v.stateNode,typeof T.componentDidMount=="function")try{T.componentDidMount()}catch(pe){Jt(v,v.return,pe)}if(v=I,T=v.updateQueue,T!==null){var z=v.stateNode;try{var Z=T.shared.hiddenCallbacks;if(Z!==null)for(T.shared.hiddenCallbacks=null,T=0;T<Z.length;T++)OL(Z[T],z)}catch(pe){Jt(v,v.return,pe)}}m&&M&64&&GF(I),mg(I,I.return);break;case 27:XF(I);case 26:case 5:_l(T,I,m),m&&v===null&&M&4&&qF(I),mg(I,I.return);break;case 12:_l(T,I,m);break;case 31:_l(T,I,m),m&&M&4&&e3(T,I);break;case 13:_l(T,I,m),m&&M&4&&t3(T,I);break;case 22:I.memoizedState===null&&_l(T,I,m),mg(I,I.return);break;case 30:break;default:_l(T,I,m)}f=f.sibling}}function yI(c,f){var m=null;c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),c=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(c=f.memoizedState.cachePool.pool),c!==m&&(c!=null&&c.refCount++,m!=null&&tg(m))}function vI(c,f){c=null,f.alternate!==null&&(c=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==c&&(f.refCount++,c!=null&&tg(c))}function Vo(c,f,m,v){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)i3(c,f,m,v),f=f.sibling}function i3(c,f,m,v){var T=f.flags;switch(f.tag){case 0:case 11:case 15:Vo(c,f,m,v),T&2048&&pg(9,f);break;case 1:Vo(c,f,m,v);break;case 3:Vo(c,f,m,v),T&2048&&(c=null,f.alternate!==null&&(c=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==c&&(f.refCount++,c!=null&&tg(c)));break;case 12:if(T&2048){Vo(c,f,m,v),c=f.stateNode;try{var I=f.memoizedProps,M=I.id,z=I.onPostCommit;typeof z=="function"&&z(M,f.alternate===null?"mount":"update",c.passiveEffectDuration,-0)}catch(Z){Jt(f,f.return,Z)}}else Vo(c,f,m,v);break;case 31:Vo(c,f,m,v);break;case 13:Vo(c,f,m,v);break;case 23:break;case 22:I=f.stateNode,M=f.alternate,f.memoizedState!==null?I._visibility&2?Vo(c,f,m,v):gg(c,f):I._visibility&2?Vo(c,f,m,v):(I._visibility|=2,Id(c,f,m,v,(f.subtreeFlags&10256)!==0||!1)),T&2048&&yI(M,f);break;case 24:Vo(c,f,m,v),T&2048&&vI(f.alternate,f);break;default:Vo(c,f,m,v)}}function Id(c,f,m,v,T){for(T=T&&((f.subtreeFlags&10256)!==0||!1),f=f.child;f!==null;){var I=c,M=f,z=m,Z=v,pe=M.flags;switch(M.tag){case 0:case 11:case 15:Id(I,M,z,Z,T),pg(8,M);break;case 23:break;case 22:var Ee=M.stateNode;M.memoizedState!==null?Ee._visibility&2?Id(I,M,z,Z,T):gg(I,M):(Ee._visibility|=2,Id(I,M,z,Z,T)),T&&pe&2048&&yI(M.alternate,M);break;case 24:Id(I,M,z,Z,T),T&&pe&2048&&vI(M.alternate,M);break;default:Id(I,M,z,Z,T)}f=f.sibling}}function gg(c,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var m=c,v=f,T=v.flags;switch(v.tag){case 22:gg(m,v),T&2048&&yI(v.alternate,v);break;case 24:gg(m,v),T&2048&&vI(v.alternate,v);break;default:gg(m,v)}f=f.sibling}}var yg=8192;function _d(c,f,m){if(c.subtreeFlags&yg)for(c=c.child;c!==null;)s3(c,f,m),c=c.sibling}function s3(c,f,m){switch(c.tag){case 26:_d(c,f,m),c.flags&yg&&c.memoizedState!==null&&cse(m,Fo,c.memoizedState,c.memoizedProps);break;case 5:_d(c,f,m);break;case 3:case 4:var v=Fo;Fo=hx(c.stateNode.containerInfo),_d(c,f,m),Fo=v;break;case 22:c.memoizedState===null&&(v=c.alternate,v!==null&&v.memoizedState!==null?(v=yg,yg=16777216,_d(c,f,m),yg=v):_d(c,f,m));break;default:_d(c,f,m)}}function o3(c){var f=c.alternate;if(f!==null&&(c=f.child,c!==null)){f.child=null;do f=c.sibling,c.sibling=null,c=f;while(c!==null)}}function vg(c){var f=c.deletions;if((c.flags&16)!==0){if(f!==null)for(var m=0;m<f.length;m++){var v=f[m];Or=v,l3(v,c)}o3(c)}if(c.subtreeFlags&10256)for(c=c.child;c!==null;)a3(c),c=c.sibling}function a3(c){switch(c.tag){case 0:case 11:case 15:vg(c),c.flags&2048&&Mu(9,c,c.return);break;case 3:vg(c);break;case 12:vg(c);break;case 22:var f=c.stateNode;c.memoizedState!==null&&f._visibility&2&&(c.return===null||c.return.tag!==13)?(f._visibility&=-3,Zb(c)):vg(c);break;default:vg(c)}}function Zb(c){var f=c.deletions;if((c.flags&16)!==0){if(f!==null)for(var m=0;m<f.length;m++){var v=f[m];Or=v,l3(v,c)}o3(c)}for(c=c.child;c!==null;){switch(f=c,f.tag){case 0:case 11:case 15:Mu(8,f,f.return),Zb(f);break;case 22:m=f.stateNode,m._visibility&2&&(m._visibility&=-3,Zb(f));break;default:Zb(f)}c=c.sibling}}function l3(c,f){for(;Or!==null;){var m=Or;switch(m.tag){case 0:case 11:case 15:Mu(8,m,f);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var v=m.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:tg(m.memoizedState.cache)}if(v=m.child,v!==null)v.return=m,Or=v;else e:for(m=c;Or!==null;){v=Or;var T=v.sibling,I=v.return;if(ZF(v),v===m){Or=null;break e}if(T!==null){T.return=I,Or=T;break e}Or=I}}}var Eie={getCacheForType:function(c){var f=Qr(rr),m=f.data.get(c);return m===void 0&&(m=c(),f.data.set(c,m)),m},cacheSignal:function(){return Qr(rr).controller.signal}},Iie=typeof WeakMap=="function"?WeakMap:Map,Ht=0,hn=null,Et=null,_t=0,Zt=0,ws=null,Lu=!1,Ad=!1,bI=!1,Al=0,Pn=0,Fu=0,Ih=0,xI=0,Ss=0,kd=0,bg=null,ts=null,wI=!1,Jb=0,u3=0,ex=1/0,tx=null,Vu=null,br=0,Bu=null,Nd=null,kl=0,SI=0,TI=null,c3=null,xg=0,CI=null;function Ts(){return(Ht&2)!==0&&_t!==0?_t&-_t:W.T!==null?NI():nb()}function h3(){if(Ss===0)if((_t&536870912)===0||Dt){var c=Jc;Jc<<=1,(Jc&3932160)===0&&(Jc=262144),Ss=c}else Ss=536870912;return c=bs.current,c!==null&&(c.flags|=32),Ss}function ns(c,f,m){(c===hn&&(Zt===2||Zt===9)||c.cancelPendingCommit!==null)&&(Rd(c,0),zu(c,_t,Ss,!1)),eh(c,m),((Ht&2)===0||c!==hn)&&(c===hn&&((Ht&2)===0&&(Ih|=m),Pn===4&&zu(c,_t,Ss,!1)),Aa(c))}function f3(c,f,m){if((Ht&6)!==0)throw Error(r(327));var v=!m&&(f&127)===0&&(f&c.expiredLanes)===0||ko(c,f),T=v?kie(c,f):II(c,f,!0),I=v;do{if(T===0){Ad&&!v&&zu(c,f,0,!1);break}else{if(m=c.current.alternate,I&&!_ie(m)){T=II(c,f,!1),I=!1;continue}if(T===2){if(I=f,c.errorRecoveryDisabledLanes&I)var M=0;else M=c.pendingLanes&-536870913,M=M!==0?M:M&536870912?536870912:0;if(M!==0){f=M;e:{var z=c;T=bg;var Z=z.current.memoizedState.isDehydrated;if(Z&&(Rd(z,M).flags|=256),M=II(z,M,!1),M!==2){if(bI&&!Z){z.errorRecoveryDisabledLanes|=I,Ih|=I,T=4;break e}I=ts,ts=T,I!==null&&(ts===null?ts=I:ts.push.apply(ts,I))}T=M}if(I=!1,T!==2)continue}}if(T===1){Rd(c,0),zu(c,f,0,!0);break}e:{switch(v=c,I=T,I){case 0:case 1:throw Error(r(345));case 4:if((f&4194048)!==f)break;case 6:zu(v,f,Ss,!Lu);break e;case 2:ts=null;break;case 3:case 5:break;default:throw Error(r(329))}if((f&62914560)===f&&(T=Jb+300-cn(),10<T)){if(zu(v,f,Ss,!Lu),ca(v,0,!0)!==0)break e;kl=f,v.timeoutHandle=j3(d3.bind(null,v,m,ts,tx,wI,f,Ss,Ih,kd,Lu,I,"Throttled",-0,0),T);break e}d3(v,m,ts,tx,wI,f,Ss,Ih,kd,Lu,I,null,-0,0)}}break}while(!0);Aa(c)}function d3(c,f,m,v,T,I,M,z,Z,pe,Ee,Ae,ye,xe){if(c.timeoutHandle=-1,Ae=f.subtreeFlags,Ae&8192||(Ae&16785408)===16785408){Ae={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Do},s3(f,I,Ae);var je=(I&62914560)===I?Jb-cn():(I&4194048)===I?u3-cn():0;if(je=hse(Ae,je),je!==null){kl=I,c.cancelPendingCommit=je(w3.bind(null,c,f,I,m,v,T,M,z,Z,Ee,Ae,null,ye,xe)),zu(c,I,M,!pe);return}}w3(c,f,I,m,v,T,M,z,Z)}function _ie(c){for(var f=c;;){var m=f.tag;if((m===0||m===11||m===15)&&f.flags&16384&&(m=f.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var v=0;v<m.length;v++){var T=m[v],I=T.getSnapshot;T=T.value;try{if(!ys(I(),T))return!1}catch{return!1}}if(m=f.child,f.subtreeFlags&16384&&m!==null)m.return=f,f=m;else{if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function zu(c,f,m,v){f&=~xI,f&=~Ih,c.suspendedLanes|=f,c.pingedLanes&=~f,v&&(c.warmLanes|=f),v=c.expirationTimes;for(var T=f;0<T;){var I=31-jn(T),M=1<<I;v[I]=-1,T&=~M}m!==0&&th(c,m,f)}function nx(){return(Ht&6)===0?(wg(0),!1):!0}function EI(){if(Et!==null){if(Zt===0)var c=Et.return;else c=Et,vl=yh=null,zE(c),wd=null,rg=0,c=Et;for(;c!==null;)WF(c.alternate,c),c=c.return;Et=null}}function Rd(c,f){var m=c.timeoutHandle;m!==-1&&(c.timeoutHandle=-1,qie(m)),m=c.cancelPendingCommit,m!==null&&(c.cancelPendingCommit=null,m()),kl=0,EI(),hn=c,Et=m=gl(c.current,null),_t=f,Zt=0,ws=null,Lu=!1,Ad=ko(c,f),bI=!1,kd=Ss=xI=Ih=Fu=Pn=0,ts=bg=null,wI=!1,(f&8)!==0&&(f|=f&32);var v=c.entangledLanes;if(v!==0)for(c=c.entanglements,v&=f;0<v;){var T=31-jn(v),I=1<<T;f|=c[T],v&=~I}return Al=f,Tb(),m}function p3(c,f){gt=null,W.H=hg,f===xd||f===Rb?(f=NL(),Zt=3):f===kE?(f=NL(),Zt=4):Zt=f===rI?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,ws=f,Et===null&&(Pn=1,Gb(c,Gs(f,c.current)))}function m3(){var c=bs.current;return c===null?!0:(_t&4194048)===_t?Xs===null:(_t&62914560)===_t||(_t&536870912)!==0?c===Xs:!1}function g3(){var c=W.H;return W.H=hg,c===null?hg:c}function y3(){var c=W.A;return W.A=Eie,c}function rx(){Pn=4,Lu||(_t&4194048)!==_t&&bs.current!==null||(Ad=!0),(Fu&134217727)===0&&(Ih&134217727)===0||hn===null||zu(hn,_t,Ss,!1)}function II(c,f,m){var v=Ht;Ht|=2;var T=g3(),I=y3();(hn!==c||_t!==f)&&(tx=null,Rd(c,f)),f=!1;var M=Pn;e:do try{if(Zt!==0&&Et!==null){var z=Et,Z=ws;switch(Zt){case 8:EI(),M=6;break e;case 3:case 2:case 9:case 6:bs.current===null&&(f=!0);var pe=Zt;if(Zt=0,ws=null,Dd(c,z,Z,pe),m&&Ad){M=0;break e}break;default:pe=Zt,Zt=0,ws=null,Dd(c,z,Z,pe)}}Aie(),M=Pn;break}catch(Ee){p3(c,Ee)}while(!0);return f&&c.shellSuspendCounter++,vl=yh=null,Ht=v,W.H=T,W.A=I,Et===null&&(hn=null,_t=0,Tb()),M}function Aie(){for(;Et!==null;)v3(Et)}function kie(c,f){var m=Ht;Ht|=2;var v=g3(),T=y3();hn!==c||_t!==f?(tx=null,ex=cn()+500,Rd(c,f)):Ad=ko(c,f);e:do try{if(Zt!==0&&Et!==null){f=Et;var I=ws;t:switch(Zt){case 1:Zt=0,ws=null,Dd(c,f,I,1);break;case 2:case 9:if(AL(I)){Zt=0,ws=null,b3(f);break}f=function(){Zt!==2&&Zt!==9||hn!==c||(Zt=7),Aa(c)},I.then(f,f);break e;case 3:Zt=7;break e;case 4:Zt=5;break e;case 7:AL(I)?(Zt=0,ws=null,b3(f)):(Zt=0,ws=null,Dd(c,f,I,7));break;case 5:var M=null;switch(Et.tag){case 26:M=Et.memoizedState;case 5:case 27:var z=Et;if(M?iV(M):z.stateNode.complete){Zt=0,ws=null;var Z=z.sibling;if(Z!==null)Et=Z;else{var pe=z.return;pe!==null?(Et=pe,ix(pe)):Et=null}break t}}Zt=0,ws=null,Dd(c,f,I,5);break;case 6:Zt=0,ws=null,Dd(c,f,I,6);break;case 8:EI(),Pn=6;break e;default:throw Error(r(462))}}Nie();break}catch(Ee){p3(c,Ee)}while(!0);return vl=yh=null,W.H=v,W.A=T,Ht=m,Et!==null?0:(hn=null,_t=0,Tb(),Pn)}function Nie(){for(;Et!==null&&!Hr();)v3(Et)}function v3(c){var f=UF(c.alternate,c,Al);c.memoizedProps=c.pendingProps,f===null?ix(c):Et=f}function b3(c){var f=c,m=f.alternate;switch(f.tag){case 15:case 0:f=MF(m,f,f.pendingProps,f.type,void 0,_t);break;case 11:f=MF(m,f,f.pendingProps,f.type.render,f.ref,_t);break;case 5:zE(f);default:WF(m,f),f=Et=yL(f,Al),f=UF(m,f,Al)}c.memoizedProps=c.pendingProps,f===null?ix(c):Et=f}function Dd(c,f,m,v){vl=yh=null,zE(f),wd=null,rg=0;var T=f.return;try{if(vie(c,T,f,m,_t)){Pn=1,Gb(c,Gs(m,c.current)),Et=null;return}}catch(I){if(T!==null)throw Et=T,I;Pn=1,Gb(c,Gs(m,c.current)),Et=null;return}f.flags&32768?(Dt||v===1?c=!0:Ad||(_t&536870912)!==0?c=!1:(Lu=c=!0,(v===2||v===9||v===3||v===6)&&(v=bs.current,v!==null&&v.tag===13&&(v.flags|=16384))),x3(f,c)):ix(f)}function ix(c){var f=c;do{if((f.flags&32768)!==0){x3(f,Lu);return}c=f.return;var m=wie(f.alternate,f,Al);if(m!==null){Et=m;return}if(f=f.sibling,f!==null){Et=f;return}Et=f=c}while(f!==null);Pn===0&&(Pn=5)}function x3(c,f){do{var m=Sie(c.alternate,c);if(m!==null){m.flags&=32767,Et=m;return}if(m=c.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!f&&(c=c.sibling,c!==null)){Et=c;return}Et=c=m}while(c!==null);Pn=6,Et=null}function w3(c,f,m,v,T,I,M,z,Z){c.cancelPendingCommit=null;do sx();while(br!==0);if((Ht&6)!==0)throw Error(r(327));if(f!==null){if(f===c.current)throw Error(r(177));if(I=f.lanes|f.childLanes,I|=pE,sE(c,m,I,M,z,Z),c===hn&&(Et=hn=null,_t=0),Nd=f,Bu=c,kl=m,SI=I,TI=T,c3=v,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(c.callbackNode=null,c.callbackPriority=0,Oie(Kr,function(){return I3(),null})):(c.callbackNode=null,c.callbackPriority=0),v=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||v){v=W.T,W.T=null,T=H.p,H.p=2,M=Ht,Ht|=4;try{Tie(c,f,m)}finally{Ht=M,H.p=T,W.T=v}}br=1,S3(),T3(),C3()}}function S3(){if(br===1){br=0;var c=Bu,f=Nd,m=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||m){m=W.T,W.T=null;var v=H.p;H.p=2;var T=Ht;Ht|=4;try{n3(f,c);var I=FI,M=lL(c.containerInfo),z=I.focusedElem,Z=I.selectionRange;if(M!==z&&z&&z.ownerDocument&&aL(z.ownerDocument.documentElement,z)){if(Z!==null&&uE(z)){var pe=Z.start,Ee=Z.end;if(Ee===void 0&&(Ee=pe),"selectionStart"in z)z.selectionStart=pe,z.selectionEnd=Math.min(Ee,z.value.length);else{var Ae=z.ownerDocument||document,ye=Ae&&Ae.defaultView||window;if(ye.getSelection){var xe=ye.getSelection(),je=z.textContent.length,rt=Math.min(Z.start,je),an=Z.end===void 0?rt:Math.min(Z.end,je);!xe.extend&&rt>an&&(M=an,an=rt,rt=M);var le=oL(z,rt),te=oL(z,an);if(le&&te&&(xe.rangeCount!==1||xe.anchorNode!==le.node||xe.anchorOffset!==le.offset||xe.focusNode!==te.node||xe.focusOffset!==te.offset)){var de=Ae.createRange();de.setStart(le.node,le.offset),xe.removeAllRanges(),rt>an?(xe.addRange(de),xe.extend(te.node,te.offset)):(de.setEnd(te.node,te.offset),xe.addRange(de))}}}}for(Ae=[],xe=z;xe=xe.parentNode;)xe.nodeType===1&&Ae.push({element:xe,left:xe.scrollLeft,top:xe.scrollTop});for(typeof z.focus=="function"&&z.focus(),z=0;z<Ae.length;z++){var Ie=Ae[z];Ie.element.scrollLeft=Ie.left,Ie.element.scrollTop=Ie.top}}yx=!!LI,FI=LI=null}finally{Ht=T,H.p=v,W.T=m}}c.current=f,br=2}}function T3(){if(br===2){br=0;var c=Bu,f=Nd,m=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||m){m=W.T,W.T=null;var v=H.p;H.p=2;var T=Ht;Ht|=4;try{QF(c,f.alternate,f)}finally{Ht=T,H.p=v,W.T=m}}br=3}}function C3(){if(br===4||br===3){br=0,Vs();var c=Bu,f=Nd,m=kl,v=c3;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?br=5:(br=0,Nd=Bu=null,E3(c,c.pendingLanes));var T=c.pendingLanes;if(T===0&&(Vu=null),fl(m),f=f.stateNode,vr&&typeof vr.onCommitFiberRoot=="function")try{vr.onCommitFiberRoot(pi,f,void 0,(f.current.flags&128)===128)}catch{}if(v!==null){f=W.T,T=H.p,H.p=2,W.T=null;try{for(var I=c.onRecoverableError,M=0;M<v.length;M++){var z=v[M];I(z.value,{componentStack:z.stack})}}finally{W.T=f,H.p=T}}(kl&3)!==0&&sx(),Aa(c),T=c.pendingLanes,(m&261930)!==0&&(T&42)!==0?c===CI?xg++:(xg=0,CI=c):xg=0,wg(0)}}function E3(c,f){(c.pooledCacheLanes&=f)===0&&(f=c.pooledCache,f!=null&&(c.pooledCache=null,tg(f)))}function sx(){return S3(),T3(),C3(),I3()}function I3(){if(br!==5)return!1;var c=Bu,f=SI;SI=0;var m=fl(kl),v=W.T,T=H.p;try{H.p=32>m?32:m,W.T=null,m=TI,TI=null;var I=Bu,M=kl;if(br=0,Nd=Bu=null,kl=0,(Ht&6)!==0)throw Error(r(331));var z=Ht;if(Ht|=4,a3(I.current),i3(I,I.current,M,m),Ht=z,wg(0,!1),vr&&typeof vr.onPostCommitFiberRoot=="function")try{vr.onPostCommitFiberRoot(pi,I)}catch{}return!0}finally{H.p=T,W.T=v,E3(c,f)}}function _3(c,f,m){f=Gs(m,f),f=nI(c.stateNode,f,2),c=$u(c,f,2),c!==null&&(eh(c,2),Aa(c))}function Jt(c,f,m){if(c.tag===3)_3(c,c,m);else for(;f!==null;){if(f.tag===3){_3(f,c,m);break}else if(f.tag===1){var v=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(Vu===null||!Vu.has(v))){c=Gs(m,c),m=AF(2),v=$u(f,m,2),v!==null&&(kF(m,v,f,c),eh(v,2),Aa(v));break}}f=f.return}}function _I(c,f,m){var v=c.pingCache;if(v===null){v=c.pingCache=new Iie;var T=new Set;v.set(f,T)}else T=v.get(f),T===void 0&&(T=new Set,v.set(f,T));T.has(m)||(bI=!0,T.add(m),c=Rie.bind(null,c,f,m),f.then(c,c))}function Rie(c,f,m){var v=c.pingCache;v!==null&&v.delete(f),c.pingedLanes|=c.suspendedLanes&m,c.warmLanes&=~m,hn===c&&(_t&m)===m&&(Pn===4||Pn===3&&(_t&62914560)===_t&&300>cn()-Jb?(Ht&2)===0&&Rd(c,0):xI|=m,kd===_t&&(kd=0)),Aa(c)}function A3(c,f){f===0&&(f=tb()),c=ph(c,f),c!==null&&(eh(c,f),Aa(c))}function Die(c){var f=c.memoizedState,m=0;f!==null&&(m=f.retryLane),A3(c,m)}function $ie(c,f){var m=0;switch(c.tag){case 31:case 13:var v=c.stateNode,T=c.memoizedState;T!==null&&(m=T.retryLane);break;case 19:v=c.stateNode;break;case 22:v=c.stateNode._retryCache;break;default:throw Error(r(314))}v!==null&&v.delete(f),A3(c,m)}function Oie(c,f){return Ct(c,f)}var ox=null,$d=null,AI=!1,ax=!1,kI=!1,Uu=0;function Aa(c){c!==$d&&c.next===null&&($d===null?ox=$d=c:$d=$d.next=c),ax=!0,AI||(AI=!0,Mie())}function wg(c,f){if(!kI&&ax){kI=!0;do for(var m=!1,v=ox;v!==null;){if(c!==0){var T=v.pendingLanes;if(T===0)var I=0;else{var M=v.suspendedLanes,z=v.pingedLanes;I=(1<<31-jn(42|c)+1)-1,I&=T&~(M&~z),I=I&201326741?I&201326741|1:I?I|2:0}I!==0&&(m=!0,D3(v,I))}else I=_t,I=ca(v,v===hn?I:0,v.cancelPendingCommit!==null||v.timeoutHandle!==-1),(I&3)===0||ko(v,I)||(m=!0,D3(v,I));v=v.next}while(m);kI=!1}}function Pie(){k3()}function k3(){ax=AI=!1;var c=0;Uu!==0&&Hie()&&(c=Uu);for(var f=cn(),m=null,v=ox;v!==null;){var T=v.next,I=N3(v,f);I===0?(v.next=null,m===null?ox=T:m.next=T,T===null&&($d=m)):(m=v,(c!==0||(I&3)!==0)&&(ax=!0)),v=T}br!==0&&br!==5||wg(c),Uu!==0&&(Uu=0)}function N3(c,f){for(var m=c.suspendedLanes,v=c.pingedLanes,T=c.expirationTimes,I=c.pendingLanes&-62914561;0<I;){var M=31-jn(I),z=1<<M,Z=T[M];Z===-1?((z&m)===0||(z&v)!==0)&&(T[M]=iE(z,f)):Z<=f&&(c.expiredLanes|=z),I&=~z}if(f=hn,m=_t,m=ca(c,c===f?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),v=c.callbackNode,m===0||c===f&&(Zt===2||Zt===9)||c.cancelPendingCommit!==null)return v!==null&&v!==null&&Gr(v),c.callbackNode=null,c.callbackPriority=0;if((m&3)===0||ko(c,m)){if(f=m&-m,f===c.callbackPriority)return f;switch(v!==null&&Gr(v),fl(m)){case 2:case 8:m=Ki;break;case 32:m=Kr;break;case 268435456:m=gu;break;default:m=Kr}return v=R3.bind(null,c),m=Ct(m,v),c.callbackPriority=f,c.callbackNode=m,f}return v!==null&&v!==null&&Gr(v),c.callbackPriority=2,c.callbackNode=null,2}function R3(c,f){if(br!==0&&br!==5)return c.callbackNode=null,c.callbackPriority=0,null;var m=c.callbackNode;if(sx()&&c.callbackNode!==m)return null;var v=_t;return v=ca(c,c===hn?v:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),v===0?null:(f3(c,v,f),N3(c,cn()),c.callbackNode!=null&&c.callbackNode===m?R3.bind(null,c):null)}function D3(c,f){if(sx())return null;f3(c,f,!0)}function Mie(){Kie(function(){(Ht&6)!==0?Ct(qi,Pie):k3()})}function NI(){if(Uu===0){var c=vd;c===0&&(c=la,la<<=1,(la&261888)===0&&(la=256)),Uu=c}return Uu}function $3(c){return c==null||typeof c=="symbol"||typeof c=="boolean"?null:typeof c=="function"?c:rd(""+c)}function O3(c,f){var m=f.ownerDocument.createElement("input");return m.name=f.name,m.value=f.value,c.id&&m.setAttribute("form",c.id),f.parentNode.insertBefore(m,f),c=new FormData(c),m.parentNode.removeChild(m),c}function Lie(c,f,m,v,T){if(f==="submit"&&m&&m.stateNode===T){var I=$3((T[Dr]||null).action),M=v.submitter;M&&(f=(f=M[Dr]||null)?$3(f.formAction):M.getAttribute("formAction"),f!==null&&(I=f,M=null));var z=new wa("action","action",null,v,T);c.push({event:z,listeners:[{instance:null,listener:function(){if(v.defaultPrevented){if(Uu!==0){var Z=M?O3(T,M):new FormData(T);YE(m,{pending:!0,data:Z,method:T.method,action:I},null,Z)}}else typeof I=="function"&&(z.preventDefault(),Z=M?O3(T,M):new FormData(T),YE(m,{pending:!0,data:Z,method:T.method,action:I},I,Z))},currentTarget:T}]})}}for(var RI=0;RI<dE.length;RI++){var DI=dE[RI],Fie=DI.toLowerCase(),Vie=DI[0].toUpperCase()+DI.slice(1);Lo(Fie,"on"+Vie)}Lo(hL,"onAnimationEnd"),Lo(fL,"onAnimationIteration"),Lo(dL,"onAnimationStart"),Lo("dblclick","onDoubleClick"),Lo("focusin","onFocus"),Lo("focusout","onBlur"),Lo(tie,"onTransitionRun"),Lo(nie,"onTransitionStart"),Lo(rie,"onTransitionCancel"),Lo(pL,"onTransitionEnd"),ya("onMouseEnter",["mouseout","mouseover"]),ya("onMouseLeave",["mouseout","mouseover"]),ya("onPointerEnter",["pointerout","pointerover"]),ya("onPointerLeave",["pointerout","pointerover"]),ga("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ga("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ga("onBeforeInput",["compositionend","keypress","textInput","paste"]),ga("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ga("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ga("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bie=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Sg));function P3(c,f){f=(f&4)!==0;for(var m=0;m<c.length;m++){var v=c[m],T=v.event;v=v.listeners;e:{var I=void 0;if(f)for(var M=v.length-1;0<=M;M--){var z=v[M],Z=z.instance,pe=z.currentTarget;if(z=z.listener,Z!==I&&T.isPropagationStopped())break e;I=z,T.currentTarget=pe;try{I(T)}catch(Ee){Sb(Ee)}T.currentTarget=null,I=Z}else for(M=0;M<v.length;M++){if(z=v[M],Z=z.instance,pe=z.currentTarget,z=z.listener,Z!==I&&T.isPropagationStopped())break e;I=z,T.currentTarget=pe;try{I(T)}catch(Ee){Sb(Ee)}T.currentTarget=null,I=Z}}}}function It(c,f){var m=f[Zf];m===void 0&&(m=f[Zf]=new Set);var v=c+"__bubble";m.has(v)||(M3(f,c,2,!1),m.add(v))}function $I(c,f,m){var v=0;f&&(v|=4),M3(m,c,v,f)}var lx="_reactListening"+Math.random().toString(36).slice(2);function OI(c){if(!c[lx]){c[lx]=!0,Om.forEach(function(m){m!=="selectionchange"&&(Bie.has(m)||$I(m,!1,c),$I(m,!0,c))});var f=c.nodeType===9?c:c.ownerDocument;f===null||f[lx]||(f[lx]=!0,$I("selectionchange",!1,f))}}function M3(c,f,m,v){switch(hV(f)){case 2:var T=pse;break;case 8:T=mse;break;default:T=XI}m=T.bind(null,f,m,c),T=void 0,!oh||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(T=!0),v?T!==void 0?c.addEventListener(f,m,{capture:!0,passive:T}):c.addEventListener(f,m,!0):T!==void 0?c.addEventListener(f,m,{passive:T}):c.addEventListener(f,m,!1)}function PI(c,f,m,v,T){var I=v;if((f&1)===0&&(f&2)===0&&v!==null)e:for(;;){if(v===null)return;var M=v.tag;if(M===3||M===4){var z=v.stateNode.containerInfo;if(z===T)break;if(M===4)for(M=v.return;M!==null;){var Z=M.tag;if((Z===3||Z===4)&&M.stateNode.containerInfo===T)return;M=M.return}for(;z!==null;){if(M=pa(z),M===null)return;if(Z=M.tag,Z===5||Z===6||Z===26||Z===27){v=I=M;continue e}z=z.parentNode}}v=v.return}Tu(function(){var pe=I,Ee=zs(m),Ae=[];e:{var ye=mL.get(c);if(ye!==void 0){var xe=wa,je=c;switch(c){case"keypress":if(lh(m)===0)break e;case"keydown":case"keyup":xe=bb;break;case"focusin":je="focus",xe=ch;break;case"focusout":je="blur",xe=ch;break;case"beforeblur":case"afterblur":xe=ch;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":xe=qm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":xe=cb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":xe=$;break;case hL:case fL:case dL:xe=fb;break;case pL:xe=G;break;case"scroll":case"scrollend":xe=Hm;break;case"wheel":xe=be;break;case"copy":case"cut":case"paste":xe=db;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":xe=ml;break;case"toggle":case"beforetoggle":xe=mt}var rt=(f&4)!==0,an=!rt&&(c==="scroll"||c==="scrollend"),le=rt?ye!==null?ye+"Capture":null:ye;rt=[];for(var te=pe,de;te!==null;){var Ie=te;if(de=Ie.stateNode,Ie=Ie.tag,Ie!==5&&Ie!==26&&Ie!==27||de===null||le===null||(Ie=$o(te,le),Ie!=null&&rt.push(Tg(te,Ie,de))),an)break;te=te.return}0<rt.length&&(ye=new xe(ye,je,null,m,Ee),Ae.push({event:ye,listeners:rt}))}}if((f&7)===0){e:{if(ye=c==="mouseover"||c==="pointerover",xe=c==="mouseout"||c==="pointerout",ye&&m!==jm&&(je=m.relatedTarget||m.fromElement)&&(pa(je)||je[fa]))break e;if((xe||ye)&&(ye=Ee.window===Ee?Ee:(ye=Ee.ownerDocument)?ye.defaultView||ye.parentWindow:window,xe?(je=m.relatedTarget||m.toElement,xe=pe,je=je?pa(je):null,je!==null&&(an=s(je),rt=je.tag,je!==an||rt!==5&&rt!==27&&rt!==6)&&(je=null)):(xe=null,je=pe),xe!==je)){if(rt=qm,Ie="onMouseLeave",le="onMouseEnter",te="mouse",(c==="pointerout"||c==="pointerover")&&(rt=ml,Ie="onPointerLeave",le="onPointerEnter",te="pointer"),an=xe==null?ye:ms(xe),de=je==null?ye:ms(je),ye=new rt(Ie,te+"leave",xe,m,Ee),ye.target=an,ye.relatedTarget=de,Ie=null,pa(Ee)===pe&&(rt=new rt(le,te+"enter",je,m,Ee),rt.target=de,rt.relatedTarget=an,Ie=rt),an=Ie,xe&&je)t:{for(rt=zie,le=xe,te=je,de=0,Ie=le;Ie;Ie=rt(Ie))de++;Ie=0;for(var Ze=te;Ze;Ze=rt(Ze))Ie++;for(;0<de-Ie;)le=rt(le),de--;for(;0<Ie-de;)te=rt(te),Ie--;for(;de--;){if(le===te||te!==null&&le===te.alternate){rt=le;break t}le=rt(le),te=rt(te)}rt=null}else rt=null;xe!==null&&L3(Ae,ye,xe,rt,!1),je!==null&&an!==null&&L3(Ae,an,je,rt,!0)}}e:{if(ye=pe?ms(pe):window,xe=ye.nodeName&&ye.nodeName.toLowerCase(),xe==="select"||xe==="input"&&ye.type==="file")var Vt=eL;else if(ZM(ye))if(tL)Vt=Zre;else{Vt=Yre;var qe=Xre}else xe=ye.nodeName,!xe||xe.toLowerCase()!=="input"||ye.type!=="checkbox"&&ye.type!=="radio"?pe&&nd(pe.elementType)&&(Vt=eL):Vt=Qre;if(Vt&&(Vt=Vt(c,pe))){JM(Ae,Vt,m,Ee);break e}qe&&qe(c,ye,pe),c==="focusout"&&pe&&ye.type==="number"&&pe.memoizedProps.value!=null&&Bm(ye,"number",ye.value)}switch(qe=pe?ms(pe):window,c){case"focusin":(ZM(qe)||qe.contentEditable==="true")&&(cd=qe,cE=pe,Zm=null);break;case"focusout":Zm=cE=cd=null;break;case"mousedown":hE=!0;break;case"contextmenu":case"mouseup":case"dragend":hE=!1,uL(Ae,m,Ee);break;case"selectionchange":if(eie)break;case"keydown":case"keyup":uL(Ae,m,Ee)}var bt;if(Gt)e:{switch(c){case"compositionstart":var At="onCompositionStart";break e;case"compositionend":At="onCompositionEnd";break e;case"compositionupdate":At="onCompositionUpdate";break e}At=void 0}else ud?hh(c,m)&&(At="onCompositionEnd"):c==="keydown"&&m.keyCode===229&&(At="onCompositionStart");At&&(Ca&&m.locale!=="ko"&&(ud||At!=="onCompositionStart"?At==="onCompositionEnd"&&ud&&(bt=Gm()):(xa=Ee,Wm="value"in xa?xa.value:xa.textContent,ud=!0)),qe=ux(pe,At),0<qe.length&&(At=new Ta(At,c,null,m,Ee),Ae.push({event:At,listeners:qe}),bt?At.data=bt:(bt=ld(m),bt!==null&&(At.data=bt)))),(bt=js?Gre(c,m):Hre(c,m))&&(At=ux(pe,"onBeforeInput"),0<At.length&&(qe=new Ta("onBeforeInput","beforeinput",null,m,Ee),Ae.push({event:qe,listeners:At}),qe.data=bt)),Lie(Ae,c,pe,m,Ee)}P3(Ae,f)})}function Tg(c,f,m){return{instance:c,listener:f,currentTarget:m}}function ux(c,f){for(var m=f+"Capture",v=[];c!==null;){var T=c,I=T.stateNode;if(T=T.tag,T!==5&&T!==26&&T!==27||I===null||(T=$o(c,m),T!=null&&v.unshift(Tg(c,T,I)),T=$o(c,f),T!=null&&v.push(Tg(c,T,I))),c.tag===3)return v;c=c.return}return[]}function zie(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5&&c.tag!==27);return c||null}function L3(c,f,m,v,T){for(var I=f._reactName,M=[];m!==null&&m!==v;){var z=m,Z=z.alternate,pe=z.stateNode;if(z=z.tag,Z!==null&&Z===v)break;z!==5&&z!==26&&z!==27||pe===null||(Z=pe,T?(pe=$o(m,I),pe!=null&&M.unshift(Tg(m,pe,Z))):T||(pe=$o(m,I),pe!=null&&M.push(Tg(m,pe,Z)))),m=m.return}M.length!==0&&c.push({event:f,listeners:M})}var Uie=/\r\n?/g,jie=/\u0000|\uFFFD/g;function F3(c){return(typeof c=="string"?c:""+c).replace(Uie,`
`).replace(jie,"")}function V3(c,f){return f=F3(f),F3(c)===f}function on(c,f,m,v,T,I){switch(m){case"children":typeof v=="string"?f==="body"||f==="textarea"&&v===""||Qi(c,v):(typeof v=="number"||typeof v=="bigint")&&f!=="body"&&Qi(c,""+v);break;case"className":gs(c,"class",v);break;case"tabIndex":gs(c,"tabindex",v);break;case"dir":case"role":case"viewBox":case"width":case"height":gs(c,m,v);break;case"style":Um(c,v,I);break;case"data":if(f!=="object"){gs(c,"data",v);break}case"src":case"href":if(v===""&&(f!=="a"||m!=="href")){c.removeAttribute(m);break}if(v==null||typeof v=="function"||typeof v=="symbol"||typeof v=="boolean"){c.removeAttribute(m);break}v=rd(""+v),c.setAttribute(m,v);break;case"action":case"formAction":if(typeof v=="function"){c.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof I=="function"&&(m==="formAction"?(f!=="input"&&on(c,f,"name",T.name,T,null),on(c,f,"formEncType",T.formEncType,T,null),on(c,f,"formMethod",T.formMethod,T,null),on(c,f,"formTarget",T.formTarget,T,null)):(on(c,f,"encType",T.encType,T,null),on(c,f,"method",T.method,T,null),on(c,f,"target",T.target,T,null)));if(v==null||typeof v=="symbol"||typeof v=="boolean"){c.removeAttribute(m);break}v=rd(""+v),c.setAttribute(m,v);break;case"onClick":v!=null&&(c.onclick=Do);break;case"onScroll":v!=null&&It("scroll",c);break;case"onScrollEnd":v!=null&&It("scrollend",c);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(r(61));if(m=v.__html,m!=null){if(T.children!=null)throw Error(r(60));c.innerHTML=m}}break;case"multiple":c.multiple=v&&typeof v!="function"&&typeof v!="symbol";break;case"muted":c.muted=v&&typeof v!="function"&&typeof v!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(v==null||typeof v=="function"||typeof v=="boolean"||typeof v=="symbol"){c.removeAttribute("xlink:href");break}m=rd(""+v),c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":v!=null&&typeof v!="function"&&typeof v!="symbol"?c.setAttribute(m,""+v):c.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":v&&typeof v!="function"&&typeof v!="symbol"?c.setAttribute(m,""):c.removeAttribute(m);break;case"capture":case"download":v===!0?c.setAttribute(m,""):v!==!1&&v!=null&&typeof v!="function"&&typeof v!="symbol"?c.setAttribute(m,v):c.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":v!=null&&typeof v!="function"&&typeof v!="symbol"&&!isNaN(v)&&1<=v?c.setAttribute(m,v):c.removeAttribute(m);break;case"rowSpan":case"start":v==null||typeof v=="function"||typeof v=="symbol"||isNaN(v)?c.removeAttribute(m):c.setAttribute(m,v);break;case"popover":It("beforetoggle",c),It("toggle",c),ed(c,"popover",v);break;case"xlinkActuate":nr(c,"http://www.w3.org/1999/xlink","xlink:actuate",v);break;case"xlinkArcrole":nr(c,"http://www.w3.org/1999/xlink","xlink:arcrole",v);break;case"xlinkRole":nr(c,"http://www.w3.org/1999/xlink","xlink:role",v);break;case"xlinkShow":nr(c,"http://www.w3.org/1999/xlink","xlink:show",v);break;case"xlinkTitle":nr(c,"http://www.w3.org/1999/xlink","xlink:title",v);break;case"xlinkType":nr(c,"http://www.w3.org/1999/xlink","xlink:type",v);break;case"xmlBase":nr(c,"http://www.w3.org/XML/1998/namespace","xml:base",v);break;case"xmlLang":nr(c,"http://www.w3.org/XML/1998/namespace","xml:lang",v);break;case"xmlSpace":nr(c,"http://www.w3.org/XML/1998/namespace","xml:space",v);break;case"is":ed(c,"is",v);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=ub.get(m)||m,ed(c,m,v))}}function MI(c,f,m,v,T,I){switch(m){case"style":Um(c,v,I);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(r(61));if(m=v.__html,m!=null){if(T.children!=null)throw Error(r(60));c.innerHTML=m}}break;case"children":typeof v=="string"?Qi(c,v):(typeof v=="number"||typeof v=="bigint")&&Qi(c,""+v);break;case"onScroll":v!=null&&It("scroll",c);break;case"onScrollEnd":v!=null&&It("scrollend",c);break;case"onClick":v!=null&&(c.onclick=Do);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Pm.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(T=m.endsWith("Capture"),f=m.slice(2,T?m.length-7:void 0),I=c[Dr]||null,I=I!=null?I[m]:null,typeof I=="function"&&c.removeEventListener(f,I,T),typeof v=="function")){typeof I!="function"&&I!==null&&(m in c?c[m]=null:c.hasAttribute(m)&&c.removeAttribute(m)),c.addEventListener(f,v,T);break e}m in c?c[m]=v:v===!0?c.setAttribute(m,""):ed(c,m,v)}}}function Jr(c,f,m){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":It("error",c),It("load",c);var v=!1,T=!1,I;for(I in m)if(m.hasOwnProperty(I)){var M=m[I];if(M!=null)switch(I){case"src":v=!0;break;case"srcSet":T=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:on(c,f,I,M,m,null)}}T&&on(c,f,"srcSet",m.srcSet,m,null),v&&on(c,f,"src",m.src,m,null);return;case"input":It("invalid",c);var z=I=M=T=null,Z=null,pe=null;for(v in m)if(m.hasOwnProperty(v)){var Ee=m[v];if(Ee!=null)switch(v){case"name":T=Ee;break;case"type":M=Ee;break;case"checked":Z=Ee;break;case"defaultChecked":pe=Ee;break;case"value":I=Ee;break;case"defaultValue":z=Ee;break;case"children":case"dangerouslySetInnerHTML":if(Ee!=null)throw Error(r(137,f));break;default:on(c,f,v,Ee,m,null)}}ob(c,I,z,Z,pe,M,T,!1);return;case"select":It("invalid",c),v=M=I=null;for(T in m)if(m.hasOwnProperty(T)&&(z=m[T],z!=null))switch(T){case"value":I=z;break;case"defaultValue":M=z;break;case"multiple":v=z;default:on(c,f,T,z,m,null)}f=I,m=M,c.multiple=!!v,f!=null?bu(c,!!v,f,!1):m!=null&&bu(c,!!v,m,!0);return;case"textarea":It("invalid",c),I=T=v=null;for(M in m)if(m.hasOwnProperty(M)&&(z=m[M],z!=null))switch(M){case"value":v=z;break;case"defaultValue":T=z;break;case"children":I=z;break;case"dangerouslySetInnerHTML":if(z!=null)throw Error(r(91));break;default:on(c,f,M,z,m,null)}xu(c,v,T,I);return;case"option":for(Z in m)if(m.hasOwnProperty(Z)&&(v=m[Z],v!=null))switch(Z){case"selected":c.selected=v&&typeof v!="function"&&typeof v!="symbol";break;default:on(c,f,Z,v,m,null)}return;case"dialog":It("beforetoggle",c),It("toggle",c),It("cancel",c),It("close",c);break;case"iframe":case"object":It("load",c);break;case"video":case"audio":for(v=0;v<Sg.length;v++)It(Sg[v],c);break;case"image":It("error",c),It("load",c);break;case"details":It("toggle",c);break;case"embed":case"source":case"link":It("error",c),It("load",c);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(pe in m)if(m.hasOwnProperty(pe)&&(v=m[pe],v!=null))switch(pe){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:on(c,f,pe,v,m,null)}return;default:if(nd(f)){for(Ee in m)m.hasOwnProperty(Ee)&&(v=m[Ee],v!==void 0&&MI(c,f,Ee,v,m,void 0));return}}for(z in m)m.hasOwnProperty(z)&&(v=m[z],v!=null&&on(c,f,z,v,m,null))}function Wie(c,f,m,v){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var T=null,I=null,M=null,z=null,Z=null,pe=null,Ee=null;for(xe in m){var Ae=m[xe];if(m.hasOwnProperty(xe)&&Ae!=null)switch(xe){case"checked":break;case"value":break;case"defaultValue":Z=Ae;default:v.hasOwnProperty(xe)||on(c,f,xe,null,v,Ae)}}for(var ye in v){var xe=v[ye];if(Ae=m[ye],v.hasOwnProperty(ye)&&(xe!=null||Ae!=null))switch(ye){case"type":I=xe;break;case"name":T=xe;break;case"checked":pe=xe;break;case"defaultChecked":Ee=xe;break;case"value":M=xe;break;case"defaultValue":z=xe;break;case"children":case"dangerouslySetInnerHTML":if(xe!=null)throw Error(r(137,f));break;default:xe!==Ae&&on(c,f,ye,xe,v,Ae)}}td(c,M,z,Z,pe,Ee,I,T);return;case"select":xe=M=z=ye=null;for(I in m)if(Z=m[I],m.hasOwnProperty(I)&&Z!=null)switch(I){case"value":break;case"multiple":xe=Z;default:v.hasOwnProperty(I)||on(c,f,I,null,v,Z)}for(T in v)if(I=v[T],Z=m[T],v.hasOwnProperty(T)&&(I!=null||Z!=null))switch(T){case"value":ye=I;break;case"defaultValue":z=I;break;case"multiple":M=I;default:I!==Z&&on(c,f,T,I,v,Z)}f=z,m=M,v=xe,ye!=null?bu(c,!!m,ye,!1):!!v!=!!m&&(f!=null?bu(c,!!m,f,!0):bu(c,!!m,m?[]:"",!1));return;case"textarea":xe=ye=null;for(z in m)if(T=m[z],m.hasOwnProperty(z)&&T!=null&&!v.hasOwnProperty(z))switch(z){case"value":break;case"children":break;default:on(c,f,z,null,v,T)}for(M in v)if(T=v[M],I=m[M],v.hasOwnProperty(M)&&(T!=null||I!=null))switch(M){case"value":ye=T;break;case"defaultValue":xe=T;break;case"children":break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:T!==I&&on(c,f,M,T,v,I)}ab(c,ye,xe);return;case"option":for(var je in m)if(ye=m[je],m.hasOwnProperty(je)&&ye!=null&&!v.hasOwnProperty(je))switch(je){case"selected":c.selected=!1;break;default:on(c,f,je,null,v,ye)}for(Z in v)if(ye=v[Z],xe=m[Z],v.hasOwnProperty(Z)&&ye!==xe&&(ye!=null||xe!=null))switch(Z){case"selected":c.selected=ye&&typeof ye!="function"&&typeof ye!="symbol";break;default:on(c,f,Z,ye,v,xe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var rt in m)ye=m[rt],m.hasOwnProperty(rt)&&ye!=null&&!v.hasOwnProperty(rt)&&on(c,f,rt,null,v,ye);for(pe in v)if(ye=v[pe],xe=m[pe],v.hasOwnProperty(pe)&&ye!==xe&&(ye!=null||xe!=null))switch(pe){case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(r(137,f));break;default:on(c,f,pe,ye,v,xe)}return;default:if(nd(f)){for(var an in m)ye=m[an],m.hasOwnProperty(an)&&ye!==void 0&&!v.hasOwnProperty(an)&&MI(c,f,an,void 0,v,ye);for(Ee in v)ye=v[Ee],xe=m[Ee],!v.hasOwnProperty(Ee)||ye===xe||ye===void 0&&xe===void 0||MI(c,f,Ee,ye,v,xe);return}}for(var le in m)ye=m[le],m.hasOwnProperty(le)&&ye!=null&&!v.hasOwnProperty(le)&&on(c,f,le,null,v,ye);for(Ae in v)ye=v[Ae],xe=m[Ae],!v.hasOwnProperty(Ae)||ye===xe||ye==null&&xe==null||on(c,f,Ae,ye,v,xe)}function B3(c){switch(c){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Gie(){if(typeof performance.getEntriesByType=="function"){for(var c=0,f=0,m=performance.getEntriesByType("resource"),v=0;v<m.length;v++){var T=m[v],I=T.transferSize,M=T.initiatorType,z=T.duration;if(I&&z&&B3(M)){for(M=0,z=T.responseEnd,v+=1;v<m.length;v++){var Z=m[v],pe=Z.startTime;if(pe>z)break;var Ee=Z.transferSize,Ae=Z.initiatorType;Ee&&B3(Ae)&&(Z=Z.responseEnd,M+=Ee*(Z<z?1:(z-pe)/(Z-pe)))}if(--v,f+=8*(I+M)/(T.duration/1e3),c++,10<c)break}}if(0<c)return f/c/1e6}return navigator.connection&&(c=navigator.connection.downlink,typeof c=="number")?c:5}var LI=null,FI=null;function cx(c){return c.nodeType===9?c:c.ownerDocument}function z3(c){switch(c){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function U3(c,f){if(c===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return c===1&&f==="foreignObject"?0:c}function VI(c,f){return c==="textarea"||c==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var BI=null;function Hie(){var c=window.event;return c&&c.type==="popstate"?c===BI?!1:(BI=c,!0):(BI=null,!1)}var j3=typeof setTimeout=="function"?setTimeout:void 0,qie=typeof clearTimeout=="function"?clearTimeout:void 0,W3=typeof Promise=="function"?Promise:void 0,Kie=typeof queueMicrotask=="function"?queueMicrotask:typeof W3<"u"?function(c){return W3.resolve(null).then(c).catch(Xie)}:j3;function Xie(c){setTimeout(function(){throw c})}function ju(c){return c==="head"}function G3(c,f){var m=f,v=0;do{var T=m.nextSibling;if(c.removeChild(m),T&&T.nodeType===8)if(m=T.data,m==="/$"||m==="/&"){if(v===0){c.removeChild(T),Ld(f);return}v--}else if(m==="$"||m==="$?"||m==="$~"||m==="$!"||m==="&")v++;else if(m==="html")Cg(c.ownerDocument.documentElement);else if(m==="head"){m=c.ownerDocument.head,Cg(m);for(var I=m.firstChild;I;){var M=I.nextSibling,z=I.nodeName;I[da]||z==="SCRIPT"||z==="STYLE"||z==="LINK"&&I.rel.toLowerCase()==="stylesheet"||m.removeChild(I),I=M}}else m==="body"&&Cg(c.ownerDocument.body);m=T}while(m);Ld(f)}function H3(c,f){var m=c;c=0;do{var v=m.nextSibling;if(m.nodeType===1?f?(m._stashedDisplay=m.style.display,m.style.display="none"):(m.style.display=m._stashedDisplay||"",m.getAttribute("style")===""&&m.removeAttribute("style")):m.nodeType===3&&(f?(m._stashedText=m.nodeValue,m.nodeValue=""):m.nodeValue=m._stashedText||""),v&&v.nodeType===8)if(m=v.data,m==="/$"){if(c===0)break;c--}else m!=="$"&&m!=="$?"&&m!=="$~"&&m!=="$!"||c++;m=v}while(m)}function zI(c){var f=c.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var m=f;switch(f=f.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":zI(m),Jf(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}c.removeChild(m)}}function Yie(c,f,m,v){for(;c.nodeType===1;){var T=m;if(c.nodeName.toLowerCase()!==f.toLowerCase()){if(!v&&(c.nodeName!=="INPUT"||c.type!=="hidden"))break}else if(v){if(!c[da])switch(f){case"meta":if(!c.hasAttribute("itemprop"))break;return c;case"link":if(I=c.getAttribute("rel"),I==="stylesheet"&&c.hasAttribute("data-precedence"))break;if(I!==T.rel||c.getAttribute("href")!==(T.href==null||T.href===""?null:T.href)||c.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin)||c.getAttribute("title")!==(T.title==null?null:T.title))break;return c;case"style":if(c.hasAttribute("data-precedence"))break;return c;case"script":if(I=c.getAttribute("src"),(I!==(T.src==null?null:T.src)||c.getAttribute("type")!==(T.type==null?null:T.type)||c.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin))&&I&&c.hasAttribute("async")&&!c.hasAttribute("itemprop"))break;return c;default:return c}}else if(f==="input"&&c.type==="hidden"){var I=T.name==null?null:""+T.name;if(T.type==="hidden"&&c.getAttribute("name")===I)return c}else return c;if(c=Ys(c.nextSibling),c===null)break}return null}function Qie(c,f,m){if(f==="")return null;for(;c.nodeType!==3;)if((c.nodeType!==1||c.nodeName!=="INPUT"||c.type!=="hidden")&&!m||(c=Ys(c.nextSibling),c===null))return null;return c}function q3(c,f){for(;c.nodeType!==8;)if((c.nodeType!==1||c.nodeName!=="INPUT"||c.type!=="hidden")&&!f||(c=Ys(c.nextSibling),c===null))return null;return c}function UI(c){return c.data==="$?"||c.data==="$~"}function jI(c){return c.data==="$!"||c.data==="$?"&&c.ownerDocument.readyState!=="loading"}function Zie(c,f){var m=c.ownerDocument;if(c.data==="$~")c._reactRetry=f;else if(c.data!=="$?"||m.readyState!=="loading")f();else{var v=function(){f(),m.removeEventListener("DOMContentLoaded",v)};m.addEventListener("DOMContentLoaded",v),c._reactRetry=v}}function Ys(c){for(;c!=null;c=c.nextSibling){var f=c.nodeType;if(f===1||f===3)break;if(f===8){if(f=c.data,f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"||f==="F!"||f==="F")break;if(f==="/$"||f==="/&")return null}}return c}var WI=null;function K3(c){c=c.nextSibling;for(var f=0;c;){if(c.nodeType===8){var m=c.data;if(m==="/$"||m==="/&"){if(f===0)return Ys(c.nextSibling);f--}else m!=="$"&&m!=="$!"&&m!=="$?"&&m!=="$~"&&m!=="&"||f++}c=c.nextSibling}return null}function X3(c){c=c.previousSibling;for(var f=0;c;){if(c.nodeType===8){var m=c.data;if(m==="$"||m==="$!"||m==="$?"||m==="$~"||m==="&"){if(f===0)return c;f--}else m!=="/$"&&m!=="/&"||f++}c=c.previousSibling}return null}function Y3(c,f,m){switch(f=cx(m),c){case"html":if(c=f.documentElement,!c)throw Error(r(452));return c;case"head":if(c=f.head,!c)throw Error(r(453));return c;case"body":if(c=f.body,!c)throw Error(r(454));return c;default:throw Error(r(451))}}function Cg(c){for(var f=c.attributes;f.length;)c.removeAttributeNode(f[0]);Jf(c)}var Qs=new Map,Q3=new Set;function hx(c){return typeof c.getRootNode=="function"?c.getRootNode():c.nodeType===9?c:c.ownerDocument}var Nl=H.d;H.d={f:Jie,r:ese,D:tse,C:nse,L:rse,m:ise,X:ose,S:sse,M:ase};function Jie(){var c=Nl.f(),f=nx();return c||f}function ese(c){var f=Bs(c);f!==null&&f.tag===5&&f.type==="form"?pF(f):Nl.r(c)}var Od=typeof document>"u"?null:document;function Z3(c,f,m){var v=Od;if(v&&typeof f=="string"&&f){var T=Yi(f);T='link[rel="'+c+'"][href="'+T+'"]',typeof m=="string"&&(T+='[crossorigin="'+m+'"]'),Q3.has(T)||(Q3.add(T),c={rel:c,crossOrigin:m,href:f},v.querySelector(T)===null&&(f=v.createElement("link"),Jr(f,"link",c),tr(f),v.head.appendChild(f)))}}function tse(c){Nl.D(c),Z3("dns-prefetch",c,null)}function nse(c,f){Nl.C(c,f),Z3("preconnect",c,f)}function rse(c,f,m){Nl.L(c,f,m);var v=Od;if(v&&c&&f){var T='link[rel="preload"][as="'+Yi(f)+'"]';f==="image"&&m&&m.imageSrcSet?(T+='[imagesrcset="'+Yi(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(T+='[imagesizes="'+Yi(m.imageSizes)+'"]')):T+='[href="'+Yi(c)+'"]';var I=T;switch(f){case"style":I=Pd(c);break;case"script":I=Md(c)}Qs.has(I)||(c=d({rel:"preload",href:f==="image"&&m&&m.imageSrcSet?void 0:c,as:f},m),Qs.set(I,c),v.querySelector(T)!==null||f==="style"&&v.querySelector(Eg(I))||f==="script"&&v.querySelector(Ig(I))||(f=v.createElement("link"),Jr(f,"link",c),tr(f),v.head.appendChild(f)))}}function ise(c,f){Nl.m(c,f);var m=Od;if(m&&c){var v=f&&typeof f.as=="string"?f.as:"script",T='link[rel="modulepreload"][as="'+Yi(v)+'"][href="'+Yi(c)+'"]',I=T;switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":I=Md(c)}if(!Qs.has(I)&&(c=d({rel:"modulepreload",href:c},f),Qs.set(I,c),m.querySelector(T)===null)){switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(Ig(I)))return}v=m.createElement("link"),Jr(v,"link",c),tr(v),m.head.appendChild(v)}}}function sse(c,f,m){Nl.S(c,f,m);var v=Od;if(v&&c){var T=ma(v).hoistableStyles,I=Pd(c);f=f||"default";var M=T.get(I);if(!M){var z={loading:0,preload:null};if(M=v.querySelector(Eg(I)))z.loading=5;else{c=d({rel:"stylesheet",href:c,"data-precedence":f},m),(m=Qs.get(I))&&GI(c,m);var Z=M=v.createElement("link");tr(Z),Jr(Z,"link",c),Z._p=new Promise(function(pe,Ee){Z.onload=pe,Z.onerror=Ee}),Z.addEventListener("load",function(){z.loading|=1}),Z.addEventListener("error",function(){z.loading|=2}),z.loading|=4,fx(M,f,v)}M={type:"stylesheet",instance:M,count:1,state:z},T.set(I,M)}}}function ose(c,f){Nl.X(c,f);var m=Od;if(m&&c){var v=ma(m).hoistableScripts,T=Md(c),I=v.get(T);I||(I=m.querySelector(Ig(T)),I||(c=d({src:c,async:!0},f),(f=Qs.get(T))&&HI(c,f),I=m.createElement("script"),tr(I),Jr(I,"link",c),m.head.appendChild(I)),I={type:"script",instance:I,count:1,state:null},v.set(T,I))}}function ase(c,f){Nl.M(c,f);var m=Od;if(m&&c){var v=ma(m).hoistableScripts,T=Md(c),I=v.get(T);I||(I=m.querySelector(Ig(T)),I||(c=d({src:c,async:!0,type:"module"},f),(f=Qs.get(T))&&HI(c,f),I=m.createElement("script"),tr(I),Jr(I,"link",c),m.head.appendChild(I)),I={type:"script",instance:I,count:1,state:null},v.set(T,I))}}function J3(c,f,m,v){var T=(T=_e.current)?hx(T):null;if(!T)throw Error(r(446));switch(c){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(f=Pd(m.href),m=ma(T).hoistableStyles,v=m.get(f),v||(v={type:"style",instance:null,count:0,state:null},m.set(f,v)),v):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){c=Pd(m.href);var I=ma(T).hoistableStyles,M=I.get(c);if(M||(T=T.ownerDocument||T,M={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},I.set(c,M),(I=T.querySelector(Eg(c)))&&!I._p&&(M.instance=I,M.state.loading=5),Qs.has(c)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},Qs.set(c,m),I||lse(T,c,m,M.state))),f&&v===null)throw Error(r(528,""));return M}if(f&&v!==null)throw Error(r(529,""));return null;case"script":return f=m.async,m=m.src,typeof m=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=Md(m),m=ma(T).hoistableScripts,v=m.get(f),v||(v={type:"script",instance:null,count:0,state:null},m.set(f,v)),v):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,c))}}function Pd(c){return'href="'+Yi(c)+'"'}function Eg(c){return'link[rel="stylesheet"]['+c+"]"}function eV(c){return d({},c,{"data-precedence":c.precedence,precedence:null})}function lse(c,f,m,v){c.querySelector('link[rel="preload"][as="style"]['+f+"]")?v.loading=1:(f=c.createElement("link"),v.preload=f,f.addEventListener("load",function(){return v.loading|=1}),f.addEventListener("error",function(){return v.loading|=2}),Jr(f,"link",m),tr(f),c.head.appendChild(f))}function Md(c){return'[src="'+Yi(c)+'"]'}function Ig(c){return"script[async]"+c}function tV(c,f,m){if(f.count++,f.instance===null)switch(f.type){case"style":var v=c.querySelector('style[data-href~="'+Yi(m.href)+'"]');if(v)return f.instance=v,tr(v),v;var T=d({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return v=(c.ownerDocument||c).createElement("style"),tr(v),Jr(v,"style",T),fx(v,m.precedence,c),f.instance=v;case"stylesheet":T=Pd(m.href);var I=c.querySelector(Eg(T));if(I)return f.state.loading|=4,f.instance=I,tr(I),I;v=eV(m),(T=Qs.get(T))&&GI(v,T),I=(c.ownerDocument||c).createElement("link"),tr(I);var M=I;return M._p=new Promise(function(z,Z){M.onload=z,M.onerror=Z}),Jr(I,"link",v),f.state.loading|=4,fx(I,m.precedence,c),f.instance=I;case"script":return I=Md(m.src),(T=c.querySelector(Ig(I)))?(f.instance=T,tr(T),T):(v=m,(T=Qs.get(I))&&(v=d({},m),HI(v,T)),c=c.ownerDocument||c,T=c.createElement("script"),tr(T),Jr(T,"link",v),c.head.appendChild(T),f.instance=T);case"void":return null;default:throw Error(r(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(v=f.instance,f.state.loading|=4,fx(v,m.precedence,c));return f.instance}function fx(c,f,m){for(var v=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),T=v.length?v[v.length-1]:null,I=T,M=0;M<v.length;M++){var z=v[M];if(z.dataset.precedence===f)I=z;else if(I!==T)break}I?I.parentNode.insertBefore(c,I.nextSibling):(f=m.nodeType===9?m.head:m,f.insertBefore(c,f.firstChild))}function GI(c,f){c.crossOrigin==null&&(c.crossOrigin=f.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=f.referrerPolicy),c.title==null&&(c.title=f.title)}function HI(c,f){c.crossOrigin==null&&(c.crossOrigin=f.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=f.referrerPolicy),c.integrity==null&&(c.integrity=f.integrity)}var dx=null;function nV(c,f,m){if(dx===null){var v=new Map,T=dx=new Map;T.set(m,v)}else T=dx,v=T.get(m),v||(v=new Map,T.set(m,v));if(v.has(c))return v;for(v.set(c,null),m=m.getElementsByTagName(c),T=0;T<m.length;T++){var I=m[T];if(!(I[da]||I[er]||c==="link"&&I.getAttribute("rel")==="stylesheet")&&I.namespaceURI!=="http://www.w3.org/2000/svg"){var M=I.getAttribute(f)||"";M=c+M;var z=v.get(M);z?z.push(I):v.set(M,[I])}}return v}function rV(c,f,m){c=c.ownerDocument||c,c.head.insertBefore(m,f==="title"?c.querySelector("head > title"):null)}function use(c,f,m){if(m===1||f.itemProp!=null)return!1;switch(c){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;switch(f.rel){case"stylesheet":return c=f.disabled,typeof f.precedence=="string"&&c==null;default:return!0}case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function iV(c){return!(c.type==="stylesheet"&&(c.state.loading&3)===0)}function cse(c,f,m,v){if(m.type==="stylesheet"&&(typeof v.media!="string"||matchMedia(v.media).matches!==!1)&&(m.state.loading&4)===0){if(m.instance===null){var T=Pd(v.href),I=f.querySelector(Eg(T));if(I){f=I._p,f!==null&&typeof f=="object"&&typeof f.then=="function"&&(c.count++,c=px.bind(c),f.then(c,c)),m.state.loading|=4,m.instance=I,tr(I);return}I=f.ownerDocument||f,v=eV(v),(T=Qs.get(T))&&GI(v,T),I=I.createElement("link"),tr(I);var M=I;M._p=new Promise(function(z,Z){M.onload=z,M.onerror=Z}),Jr(I,"link",v),m.instance=I}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(m,f),(f=m.state.preload)&&(m.state.loading&3)===0&&(c.count++,m=px.bind(c),f.addEventListener("load",m),f.addEventListener("error",m))}}var qI=0;function hse(c,f){return c.stylesheets&&c.count===0&&gx(c,c.stylesheets),0<c.count||0<c.imgCount?function(m){var v=setTimeout(function(){if(c.stylesheets&&gx(c,c.stylesheets),c.unsuspend){var I=c.unsuspend;c.unsuspend=null,I()}},6e4+f);0<c.imgBytes&&qI===0&&(qI=62500*Gie());var T=setTimeout(function(){if(c.waitingForImages=!1,c.count===0&&(c.stylesheets&&gx(c,c.stylesheets),c.unsuspend)){var I=c.unsuspend;c.unsuspend=null,I()}},(c.imgBytes>qI?50:800)+f);return c.unsuspend=m,function(){c.unsuspend=null,clearTimeout(v),clearTimeout(T)}}:null}function px(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)gx(this,this.stylesheets);else if(this.unsuspend){var c=this.unsuspend;this.unsuspend=null,c()}}}var mx=null;function gx(c,f){c.stylesheets=null,c.unsuspend!==null&&(c.count++,mx=new Map,f.forEach(fse,c),mx=null,px.call(c))}function fse(c,f){if(!(f.state.loading&4)){var m=mx.get(c);if(m)var v=m.get(null);else{m=new Map,mx.set(c,m);for(var T=c.querySelectorAll("link[data-precedence],style[data-precedence]"),I=0;I<T.length;I++){var M=T[I];(M.nodeName==="LINK"||M.getAttribute("media")!=="not all")&&(m.set(M.dataset.precedence,M),v=M)}v&&m.set(null,v)}T=f.instance,M=T.getAttribute("data-precedence"),I=m.get(M)||v,I===v&&m.set(null,T),m.set(M,T),this.count++,v=px.bind(this),T.addEventListener("load",v),T.addEventListener("error",v),I?I.parentNode.insertBefore(T,I.nextSibling):(c=c.nodeType===9?c.head:c,c.insertBefore(T,c.firstChild)),f.state.loading|=4}}var _g={$$typeof:E,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function dse(c,f,m,v,T,I,M,z,Z){this.tag=1,this.containerInfo=c,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ha(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ha(0),this.hiddenUpdates=ha(null),this.identifierPrefix=v,this.onUncaughtError=T,this.onCaughtError=I,this.onRecoverableError=M,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Z,this.incompleteTransitions=new Map}function sV(c,f,m,v,T,I,M,z,Z,pe,Ee,Ae){return c=new dse(c,f,m,M,Z,pe,Ee,Ae,z),f=1,I===!0&&(f|=24),I=vs(3,null,null,f),c.current=I,I.stateNode=c,f=IE(),f.refCount++,c.pooledCache=f,f.refCount++,I.memoizedState={element:v,isDehydrated:m,cache:f},NE(I),c}function oV(c){return c?(c=dd,c):dd}function aV(c,f,m,v,T,I){T=oV(T),v.context===null?v.context=T:v.pendingContext=T,v=Du(f),v.payload={element:m},I=I===void 0?null:I,I!==null&&(v.callback=I),m=$u(c,v,f),m!==null&&(ns(m,c,f),sg(m,c,f))}function lV(c,f){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var m=c.retryLane;c.retryLane=m!==0&&m<f?m:f}}function KI(c,f){lV(c,f),(c=c.alternate)&&lV(c,f)}function uV(c){if(c.tag===13||c.tag===31){var f=ph(c,67108864);f!==null&&ns(f,c,67108864),KI(c,67108864)}}function cV(c){if(c.tag===13||c.tag===31){var f=Ts();f=nh(f);var m=ph(c,f);m!==null&&ns(m,c,f),KI(c,f)}}var yx=!0;function pse(c,f,m,v){var T=W.T;W.T=null;var I=H.p;try{H.p=2,XI(c,f,m,v)}finally{H.p=I,W.T=T}}function mse(c,f,m,v){var T=W.T;W.T=null;var I=H.p;try{H.p=8,XI(c,f,m,v)}finally{H.p=I,W.T=T}}function XI(c,f,m,v){if(yx){var T=YI(v);if(T===null)PI(c,f,v,vx,m),fV(c,v);else if(yse(T,c,f,m,v))v.stopPropagation();else if(fV(c,v),f&4&&-1<gse.indexOf(c)){for(;T!==null;){var I=Bs(T);if(I!==null)switch(I.tag){case 3:if(I=I.stateNode,I.current.memoizedState.isDehydrated){var M=ua(I.pendingLanes);if(M!==0){var z=I;for(z.pendingLanes|=2,z.entangledLanes|=2;M;){var Z=1<<31-jn(M);z.entanglements[1]|=Z,M&=~Z}Aa(I),(Ht&6)===0&&(ex=cn()+500,wg(0))}}break;case 31:case 13:z=ph(I,2),z!==null&&ns(z,I,2),nx(),KI(I,2)}if(I=YI(v),I===null&&PI(c,f,v,vx,m),I===T)break;T=I}T!==null&&v.stopPropagation()}else PI(c,f,v,null,m)}}function YI(c){return c=zs(c),QI(c)}var vx=null;function QI(c){if(vx=null,c=pa(c),c!==null){var f=s(c);if(f===null)c=null;else{var m=f.tag;if(m===13){if(c=o(f),c!==null)return c;c=null}else if(m===31){if(c=a(f),c!==null)return c;c=null}else if(m===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;c=null}else f!==c&&(c=null)}}return vx=c,null}function hV(c){switch(c){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(qr()){case qi:return 2;case Ki:return 8;case Kr:case hl:return 32;case gu:return 268435456;default:return 32}default:return 32}}var ZI=!1,Wu=null,Gu=null,Hu=null,Ag=new Map,kg=new Map,qu=[],gse="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function fV(c,f){switch(c){case"focusin":case"focusout":Wu=null;break;case"dragenter":case"dragleave":Gu=null;break;case"mouseover":case"mouseout":Hu=null;break;case"pointerover":case"pointerout":Ag.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":kg.delete(f.pointerId)}}function Ng(c,f,m,v,T,I){return c===null||c.nativeEvent!==I?(c={blockedOn:f,domEventName:m,eventSystemFlags:v,nativeEvent:I,targetContainers:[T]},f!==null&&(f=Bs(f),f!==null&&uV(f)),c):(c.eventSystemFlags|=v,f=c.targetContainers,T!==null&&f.indexOf(T)===-1&&f.push(T),c)}function yse(c,f,m,v,T){switch(f){case"focusin":return Wu=Ng(Wu,c,f,m,v,T),!0;case"dragenter":return Gu=Ng(Gu,c,f,m,v,T),!0;case"mouseover":return Hu=Ng(Hu,c,f,m,v,T),!0;case"pointerover":var I=T.pointerId;return Ag.set(I,Ng(Ag.get(I)||null,c,f,m,v,T)),!0;case"gotpointercapture":return I=T.pointerId,kg.set(I,Ng(kg.get(I)||null,c,f,m,v,T)),!0}return!1}function dV(c){var f=pa(c.target);if(f!==null){var m=s(f);if(m!==null){if(f=m.tag,f===13){if(f=o(m),f!==null){c.blockedOn=f,No(c.priority,function(){cV(m)});return}}else if(f===31){if(f=a(m),f!==null){c.blockedOn=f,No(c.priority,function(){cV(m)});return}}else if(f===3&&m.stateNode.current.memoizedState.isDehydrated){c.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}c.blockedOn=null}function bx(c){if(c.blockedOn!==null)return!1;for(var f=c.targetContainers;0<f.length;){var m=YI(c.nativeEvent);if(m===null){m=c.nativeEvent;var v=new m.constructor(m.type,m);jm=v,m.target.dispatchEvent(v),jm=null}else return f=Bs(m),f!==null&&uV(f),c.blockedOn=m,!1;f.shift()}return!0}function pV(c,f,m){bx(c)&&m.delete(f)}function vse(){ZI=!1,Wu!==null&&bx(Wu)&&(Wu=null),Gu!==null&&bx(Gu)&&(Gu=null),Hu!==null&&bx(Hu)&&(Hu=null),Ag.forEach(pV),kg.forEach(pV)}function xx(c,f){c.blockedOn===f&&(c.blockedOn=null,ZI||(ZI=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,vse)))}var wx=null;function mV(c){wx!==c&&(wx=c,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){wx===c&&(wx=null);for(var f=0;f<c.length;f+=3){var m=c[f],v=c[f+1],T=c[f+2];if(typeof v!="function"){if(QI(v||m)===null)continue;break}var I=Bs(m);I!==null&&(c.splice(f,3),f-=3,YE(I,{pending:!0,data:T,method:m.method,action:v},v,T))}}))}function Ld(c){function f(Z){return xx(Z,c)}Wu!==null&&xx(Wu,c),Gu!==null&&xx(Gu,c),Hu!==null&&xx(Hu,c),Ag.forEach(f),kg.forEach(f);for(var m=0;m<qu.length;m++){var v=qu[m];v.blockedOn===c&&(v.blockedOn=null)}for(;0<qu.length&&(m=qu[0],m.blockedOn===null);)dV(m),m.blockedOn===null&&qu.shift();if(m=(c.ownerDocument||c).$$reactFormReplay,m!=null)for(v=0;v<m.length;v+=3){var T=m[v],I=m[v+1],M=T[Dr]||null;if(typeof I=="function")M||mV(m);else if(M){var z=null;if(I&&I.hasAttribute("formAction")){if(T=I,M=I[Dr]||null)z=M.formAction;else if(QI(T)!==null)continue}else z=M.action;typeof z=="function"?m[v+1]=z:(m.splice(v,3),v-=3),mV(m)}}}function gV(){function c(I){I.canIntercept&&I.info==="react-transition"&&I.intercept({handler:function(){return new Promise(function(M){return T=M})},focusReset:"manual",scroll:"manual"})}function f(){T!==null&&(T(),T=null),v||setTimeout(m,20)}function m(){if(!v&&!navigation.transition){var I=navigation.currentEntry;I&&I.url!=null&&navigation.navigate(I.url,{state:I.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var v=!1,T=null;return navigation.addEventListener("navigate",c),navigation.addEventListener("navigatesuccess",f),navigation.addEventListener("navigateerror",f),setTimeout(m,100),function(){v=!0,navigation.removeEventListener("navigate",c),navigation.removeEventListener("navigatesuccess",f),navigation.removeEventListener("navigateerror",f),T!==null&&(T(),T=null)}}}function JI(c){this._internalRoot=c}Sx.prototype.render=JI.prototype.render=function(c){var f=this._internalRoot;if(f===null)throw Error(r(409));var m=f.current,v=Ts();aV(m,v,c,f,null,null)},Sx.prototype.unmount=JI.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var f=c.containerInfo;aV(c.current,2,null,c,null,null),nx(),f[fa]=null}};function Sx(c){this._internalRoot=c}Sx.prototype.unstable_scheduleHydration=function(c){if(c){var f=nb();c={blockedOn:null,target:c,priority:f};for(var m=0;m<qu.length&&f!==0&&f<qu[m].priority;m++);qu.splice(m,0,c),m===0&&dV(c)}};var yV=e.version;if(yV!=="19.2.0")throw Error(r(527,yV,"19.2.0"));H.findDOMNode=function(c){var f=c._reactInternals;if(f===void 0)throw typeof c.render=="function"?Error(r(188)):(c=Object.keys(c).join(","),Error(r(268,c)));return c=u(f),c=c!==null?h(c):null,c=c===null?null:c.stateNode,c};var bse={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tx.isDisabled&&Tx.supportsFiber)try{pi=Tx.inject(bse),vr=Tx}catch{}}return Dg.createRoot=function(c,f){if(!i(c))throw Error(r(299));var m=!1,v="",T=CF,I=EF,M=IF;return f!=null&&(f.unstable_strictMode===!0&&(m=!0),f.identifierPrefix!==void 0&&(v=f.identifierPrefix),f.onUncaughtError!==void 0&&(T=f.onUncaughtError),f.onCaughtError!==void 0&&(I=f.onCaughtError),f.onRecoverableError!==void 0&&(M=f.onRecoverableError)),f=sV(c,1,!1,null,null,m,v,null,T,I,M,gV),c[fa]=f.current,OI(c),new JI(f)},Dg.hydrateRoot=function(c,f,m){if(!i(c))throw Error(r(299));var v=!1,T="",I=CF,M=EF,z=IF,Z=null;return m!=null&&(m.unstable_strictMode===!0&&(v=!0),m.identifierPrefix!==void 0&&(T=m.identifierPrefix),m.onUncaughtError!==void 0&&(I=m.onUncaughtError),m.onCaughtError!==void 0&&(M=m.onCaughtError),m.onRecoverableError!==void 0&&(z=m.onRecoverableError),m.formState!==void 0&&(Z=m.formState)),f=sV(c,1,!0,f,m??null,v,T,Z,I,M,z,gV),f.context=oV(null),m=f.current,v=Ts(),v=nh(v),T=Du(v),T.callback=null,$u(m,T,v),m=v,f.current.lanes=m,eh(f,m),Aa(f),c[fa]=f.current,OI(c),new Sx(f)},Dg.version="19.2.0",Dg}var _V;function Rse(){if(_V)return n_.exports;_V=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),n_.exports=Nse(),n_.exports}var Dse=Rse();const s5=B.createContext({});function $se(t){const e=B.useRef(null);return e.current===null&&(e.current=t()),e.current}const oR=typeof window<"u",Ose=oR?B.useLayoutEffect:B.useEffect,aR=B.createContext(null);function lR(t,e){t.indexOf(e)===-1&&t.push(e)}function uR(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const jl=(t,e,n)=>n>e?e:n<t?t:n;let cR=()=>{};const Wl={},o5=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function a5(t){return typeof t=="object"&&t!==null}const l5=t=>/^0[^.\s]+$/u.test(t);function hR(t){let e;return()=>(e===void 0&&(e=t()),e)}const go=t=>t,Pse=(t,e)=>n=>e(t(n)),sv=(...t)=>t.reduce(Pse),by=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class fR{constructor(){this.subscriptions=[]}add(e){return lR(this.subscriptions,e),()=>uR(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const La=t=>t*1e3,ho=t=>t/1e3;function u5(t,e){return e?t*(1e3/e):0}const c5=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Mse=1e-7,Lse=12;function Fse(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=c5(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>Mse&&++a<Lse);return o}function ov(t,e,n,r){if(t===e&&n===r)return go;const i=s=>Fse(s,0,1,t,n);return s=>s===0||s===1?s:c5(i(s),e,r)}const h5=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,f5=t=>e=>1-t(1-e),d5=ov(.33,1.53,.69,.99),dR=f5(d5),p5=h5(dR),m5=t=>(t*=2)<1?.5*dR(t):.5*(2-Math.pow(2,-10*(t-1))),pR=t=>1-Math.sin(Math.acos(t)),g5=f5(pR),y5=h5(pR),Vse=ov(.42,0,1,1),Bse=ov(0,0,.58,1),v5=ov(.42,0,.58,1),zse=t=>Array.isArray(t)&&typeof t[0]!="number",b5=t=>Array.isArray(t)&&typeof t[0]=="number",Use={linear:go,easeIn:Vse,easeInOut:v5,easeOut:Bse,circIn:pR,circInOut:y5,circOut:g5,backIn:dR,backInOut:p5,backOut:d5,anticipate:m5},jse=t=>typeof t=="string",AV=t=>{if(b5(t)){cR(t.length===4);const[e,n,r,i]=t;return ov(e,n,r,i)}else if(jse(t))return Use[t];return t},Cx=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Wse(t,e){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(h){o.has(h)&&(u.schedule(h),t()),h(a)}const u={schedule:(h,d=!1,p=!1)=>{const y=p&&i?n:r;return d&&o.add(h),y.has(h)||y.add(h),h},cancel:h=>{r.delete(h),o.delete(h)},process:h=>{if(a=h,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(l),n.clear(),i=!1,s&&(s=!1,u.process(h))}};return u}const Gse=40;function x5(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=Cx.reduce((E,_)=>(E[_]=Wse(s),E),{}),{setup:a,read:l,resolveKeyframes:u,preUpdate:h,update:d,preRender:p,render:g,postRender:y}=o,b=()=>{const E=Wl.useManualTiming?i.timestamp:performance.now();n=!1,Wl.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(E-i.timestamp,Gse),1)),i.timestamp=E,i.isProcessing=!0,a.process(i),l.process(i),u.process(i),h.process(i),d.process(i),p.process(i),g.process(i),y.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(b))},x=()=>{n=!0,r=!0,i.isProcessing||t(b)};return{schedule:Cx.reduce((E,_)=>{const A=o[_];return E[_]=(P,N=!1,R=!1)=>(n||x(),A.schedule(P,N,R)),E},{}),cancel:E=>{for(let _=0;_<Cx.length;_++)o[Cx[_]].cancel(E)},state:i,steps:o}}const{schedule:An,cancel:xc,state:ti,steps:o_}=x5(typeof requestAnimationFrame<"u"?requestAnimationFrame:go,!0);let u1;function Hse(){u1=void 0}const as={now:()=>(u1===void 0&&as.set(ti.isProcessing||Wl.useManualTiming?ti.timestamp:performance.now()),u1),set:t=>{u1=t,queueMicrotask(Hse)}},w5=t=>e=>typeof e=="string"&&e.startsWith(t),mR=w5("--"),qse=w5("var(--"),gR=t=>qse(t)?Kse.test(t.split("/*")[0].trim()):!1,Kse=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Yp={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},xy={...Yp,transform:t=>jl(0,1,t)},Ex={...Yp,default:1},iy=t=>Math.round(t*1e5)/1e5,yR=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Xse(t){return t==null}const Yse=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,vR=(t,e)=>n=>!!(typeof n=="string"&&Yse.test(n)&&n.startsWith(t)||e&&!Xse(n)&&Object.prototype.hasOwnProperty.call(n,e)),S5=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(yR);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},Qse=t=>jl(0,255,t),a_={...Yp,transform:t=>Math.round(Qse(t))},Bh={test:vR("rgb","red"),parse:S5("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+a_.transform(t)+", "+a_.transform(e)+", "+a_.transform(n)+", "+iy(xy.transform(r))+")"};function Zse(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const $k={test:vR("#"),parse:Zse,transform:Bh.transform},av=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Yu=av("deg"),Fa=av("%"),lt=av("px"),Jse=av("vh"),eoe=av("vw"),kV={...Fa,parse:t=>Fa.parse(t)/100,transform:t=>Fa.transform(t*100)},Yd={test:vR("hsl","hue"),parse:S5("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Fa.transform(iy(e))+", "+Fa.transform(iy(n))+", "+iy(xy.transform(r))+")"},lr={test:t=>Bh.test(t)||$k.test(t)||Yd.test(t),parse:t=>Bh.test(t)?Bh.parse(t):Yd.test(t)?Yd.parse(t):$k.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Bh.transform(t):Yd.transform(t),getAnimatableNone:t=>{const e=lr.parse(t);return e.alpha=0,lr.transform(e)}},toe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function noe(t){return isNaN(t)&&typeof t=="string"&&(t.match(yR)?.length||0)+(t.match(toe)?.length||0)>0}const T5="number",C5="color",roe="var",ioe="var(",NV="${}",soe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function wy(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(soe,l=>(lr.test(l)?(r.color.push(s),i.push(C5),n.push(lr.parse(l))):l.startsWith(ioe)?(r.var.push(s),i.push(roe),n.push(l)):(r.number.push(s),i.push(T5),n.push(parseFloat(l))),++s,NV)).split(NV);return{values:n,split:a,indexes:r,types:i}}function E5(t){return wy(t).values}function I5(t){const{split:e,types:n}=wy(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===T5?s+=iy(i[o]):a===C5?s+=lr.transform(i[o]):s+=i[o]}return s}}const ooe=t=>typeof t=="number"?0:lr.test(t)?lr.getAnimatableNone(t):t;function aoe(t){const e=E5(t);return I5(t)(e.map(ooe))}const wc={test:noe,parse:E5,createTransformer:I5,getAnimatableNone:aoe};function l_(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function loe({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=l_(l,a,t+1/3),s=l_(l,a,t),o=l_(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function P1(t,e){return n=>n>0?e:t}const Dn=(t,e,n)=>t+(e-t)*n,u_=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},uoe=[$k,Bh,Yd],coe=t=>uoe.find(e=>e.test(t));function RV(t){const e=coe(t);if(!e)return!1;let n=e.parse(t);return e===Yd&&(n=loe(n)),n}const DV=(t,e)=>{const n=RV(t),r=RV(e);if(!n||!r)return P1(t,e);const i={...n};return s=>(i.red=u_(n.red,r.red,s),i.green=u_(n.green,r.green,s),i.blue=u_(n.blue,r.blue,s),i.alpha=Dn(n.alpha,r.alpha,s),Bh.transform(i))},Ok=new Set(["none","hidden"]);function hoe(t,e){return Ok.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function foe(t,e){return n=>Dn(t,e,n)}function bR(t){return typeof t=="number"?foe:typeof t=="string"?gR(t)?P1:lr.test(t)?DV:moe:Array.isArray(t)?_5:typeof t=="object"?lr.test(t)?DV:doe:P1}function _5(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>bR(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function doe(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=bR(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function poe(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],o=t.indexes[s][r[s]],a=t.values[o]??0;n[i]=a,r[s]++}return n}const moe=(t,e)=>{const n=wc.createTransformer(e),r=wy(t),i=wy(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Ok.has(t)&&!i.values.length||Ok.has(e)&&!r.values.length?hoe(t,e):sv(_5(poe(r,i),i.values),n):P1(t,e)};function A5(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Dn(t,e,n):bR(t)(t,e)}const goe=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>An.update(e,n),stop:()=>xc(e),now:()=>ti.isProcessing?ti.timestamp:as.now()}},k5=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=Math.round(t(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},M1=2e4;function xR(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<M1;)e+=n,r=t.next(e);return e>=M1?1/0:e}function yoe(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(xR(r),M1);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:ho(i)}}const voe=5;function N5(t,e,n){const r=Math.max(e-voe,0);return u5(n-t(r),e-r)}const Mn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},c_=.001;function boe({duration:t=Mn.duration,bounce:e=Mn.bounce,velocity:n=Mn.velocity,mass:r=Mn.mass}){let i,s,o=1-e;o=jl(Mn.minDamping,Mn.maxDamping,o),t=jl(Mn.minDuration,Mn.maxDuration,ho(t)),o<1?(i=u=>{const h=u*o,d=h*t,p=h-n,g=Pk(u,o),y=Math.exp(-d);return c_-p/g*y},s=u=>{const d=u*o*t,p=d*n+n,g=Math.pow(o,2)*Math.pow(u,2)*t,y=Math.exp(-d),b=Pk(Math.pow(u,2),o);return(-i(u)+c_>0?-1:1)*((p-g)*y)/b}):(i=u=>{const h=Math.exp(-u*t),d=(u-n)*t+1;return-c_+h*d},s=u=>{const h=Math.exp(-u*t),d=(n-u)*(t*t);return h*d});const a=5/t,l=woe(i,s,a);if(t=La(t),isNaN(l))return{stiffness:Mn.stiffness,damping:Mn.damping,duration:t};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:t}}}const xoe=12;function woe(t,e,n){let r=n;for(let i=1;i<xoe;i++)r=r-t(r)/e(r);return r}function Pk(t,e){return t*Math.sqrt(1-e*e)}const Soe=["duration","bounce"],Toe=["stiffness","damping","mass"];function $V(t,e){return e.some(n=>t[n]!==void 0)}function Coe(t){let e={velocity:Mn.velocity,stiffness:Mn.stiffness,damping:Mn.damping,mass:Mn.mass,isResolvedFromDuration:!1,...t};if(!$V(t,Toe)&&$V(t,Soe))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*jl(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Mn.mass,stiffness:i,damping:s}}else{const n=boe(t);e={...e,...n,mass:Mn.mass},e.isResolvedFromDuration=!0}return e}function L1(t=Mn.visualDuration,e=Mn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:u,mass:h,duration:d,velocity:p,isResolvedFromDuration:g}=Coe({...n,velocity:-ho(n.velocity||0)}),y=p||0,b=u/(2*Math.sqrt(l*h)),x=o-s,w=ho(Math.sqrt(l/h)),C=Math.abs(x)<5;r||(r=C?Mn.restSpeed.granular:Mn.restSpeed.default),i||(i=C?Mn.restDelta.granular:Mn.restDelta.default);let E;if(b<1){const A=Pk(w,b);E=P=>{const N=Math.exp(-b*w*P);return o-N*((y+b*w*x)/A*Math.sin(A*P)+x*Math.cos(A*P))}}else if(b===1)E=A=>o-Math.exp(-w*A)*(x+(y+w*x)*A);else{const A=w*Math.sqrt(b*b-1);E=P=>{const N=Math.exp(-b*w*P),R=Math.min(A*P,300);return o-N*((y+b*w*x)*Math.sinh(R)+A*x*Math.cosh(R))/A}}const _={calculatedDuration:g&&d||null,next:A=>{const P=E(A);if(g)a.done=A>=d;else{let N=A===0?y:0;b<1&&(N=A===0?La(y):N5(E,A,P));const R=Math.abs(N)<=r,D=Math.abs(o-P)<=i;a.done=R&&D}return a.value=a.done?o:P,a},toString:()=>{const A=Math.min(xR(_),M1),P=k5(N=>_.next(A*N).value,A,30);return A+"ms "+P},toTransition:()=>{}};return _}L1.applyToOptions=t=>{const e=yoe(t,100,L1);return t.ease=e.ease,t.duration=La(e.duration),t.type="keyframes",t};function Mk({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:h}){const d=t[0],p={done:!1,value:d},g=R=>a!==void 0&&R<a||l!==void 0&&R>l,y=R=>a===void 0?l:l===void 0||Math.abs(a-R)<Math.abs(l-R)?a:l;let b=n*e;const x=d+b,w=o===void 0?x:o(x);w!==x&&(b=w-d);const C=R=>-b*Math.exp(-R/r),E=R=>w+C(R),_=R=>{const D=C(R),O=E(R);p.done=Math.abs(D)<=u,p.value=p.done?w:O};let A,P;const N=R=>{g(p.value)&&(A=R,P=L1({keyframes:[p.value,y(p.value)],velocity:N5(E,R,p.value),damping:i,stiffness:s,restDelta:u,restSpeed:h}))};return N(0),{calculatedDuration:null,next:R=>{let D=!1;return!P&&A===void 0&&(D=!0,_(R),N(R)),A!==void 0&&R>=A?P.next(R-A):(!D&&_(R),p)}}}function Eoe(t,e,n){const r=[],i=n||Wl.mix||A5,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||go:e;a=sv(l,a)}r.push(a)}return r}function Ioe(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(cR(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=Eoe(e,r,i),l=a.length,u=h=>{if(o&&h<t[0])return e[0];let d=0;if(l>1)for(;d<t.length-2&&!(h<t[d+1]);d++);const p=by(t[d],t[d+1],h);return a[d](p)};return n?h=>u(jl(t[0],t[s-1],h)):u}function _oe(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=by(0,e,r);t.push(Dn(n,1,i))}}function Aoe(t){const e=[0];return _oe(e,t.length-1),e}function koe(t,e){return t.map(n=>n*e)}function Noe(t,e){return t.map(()=>e||v5).splice(0,t.length-1)}function sy({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=zse(r)?r.map(AV):AV(r),s={done:!1,value:e[0]},o=koe(n&&n.length===e.length?n:Aoe(e),t),a=Ioe(o,e,{ease:Array.isArray(i)?i:Noe(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const Roe=t=>t!==null;function wR(t,{repeat:e,repeatType:n="loop"},r,i=1){const s=t.filter(Roe),a=i<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}const Doe={decay:Mk,inertia:Mk,tween:sy,keyframes:sy,spring:L1};function R5(t){typeof t.type=="string"&&(t.type=Doe[t.type])}class SR{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const $oe=t=>t/100;class TR extends SR{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==as.now()&&this.tick(as.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;R5(e);const{type:n=sy,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=e;let{keyframes:a}=e;const l=n||sy;l!==sy&&typeof a[0]!="number"&&(this.mixKeyframes=sv($oe,A5(a[0],a[1])),a=[0,100]);const u=l({...e,keyframes:a});s==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...a].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=xR(u));const{calculatedDuration:h}=u;this.calculatedDuration=h,this.resolvedDuration=h+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=u}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:h,repeat:d,repeatType:p,repeatDelay:g,type:y,onUpdate:b,finalKeyframe:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const w=this.currentTime-u*(this.playbackSpeed>=0?1:-1),C=this.playbackSpeed>=0?w<0:w>i;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let E=this.currentTime,_=r;if(d){const R=Math.min(this.currentTime,i)/a;let D=Math.floor(R),O=R%1;!O&&R>=1&&(O=1),O===1&&D--,D=Math.min(D,d+1),!!(D%2)&&(p==="reverse"?(O=1-O,g&&(O-=g/a)):p==="mirror"&&(_=o)),E=jl(0,1,O)*a}const A=C?{done:!1,value:h[0]}:_.next(E);s&&(A.value=s(A.value));let{done:P}=A;!C&&l!==null&&(P=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const N=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&P);return N&&y!==Mk&&(A.value=wR(h,this.options,x,this.speed)),b&&b(A.value),N&&this.finish(),A}then(e,n){return this.finished.then(e,n)}get duration(){return ho(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+ho(e)}get time(){return ho(this.currentTime)}set time(e){e=La(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(as.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=ho(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=goe,startTime:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(as.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function Ooe(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const zh=t=>t*180/Math.PI,Lk=t=>{const e=zh(Math.atan2(t[1],t[0]));return Fk(e)},Poe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Lk,rotateZ:Lk,skewX:t=>zh(Math.atan(t[1])),skewY:t=>zh(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Fk=t=>(t=t%360,t<0&&(t+=360),t),OV=Lk,PV=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),MV=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),Moe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:PV,scaleY:MV,scale:t=>(PV(t)+MV(t))/2,rotateX:t=>Fk(zh(Math.atan2(t[6],t[5]))),rotateY:t=>Fk(zh(Math.atan2(-t[2],t[0]))),rotateZ:OV,rotate:OV,skewX:t=>zh(Math.atan(t[4])),skewY:t=>zh(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Vk(t){return t.includes("scale")?1:0}function Bk(t,e){if(!t||t==="none")return Vk(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=Moe,i=n;else{const a=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Poe,i=a}if(!i)return Vk(e);const s=r[e],o=i[1].split(",").map(Foe);return typeof s=="function"?s(o):o[s]}const Loe=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Bk(n,e)};function Foe(t){return parseFloat(t.trim())}const Qp=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Zp=new Set(Qp),LV=t=>t===Yp||t===lt,Voe=new Set(["x","y","z"]),Boe=Qp.filter(t=>!Voe.has(t));function zoe(t){const e=[];return Boe.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Xh={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Bk(e,"x"),y:(t,{transform:e})=>Bk(e,"y")};Xh.translateX=Xh.x;Xh.translateY=Xh.y;const Yh=new Set;let zk=!1,Uk=!1,jk=!1;function D5(){if(Uk){const t=Array.from(Yh).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=zoe(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{r.getValue(s)?.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Uk=!1,zk=!1,Yh.forEach(t=>t.complete(jk)),Yh.clear()}function $5(){Yh.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Uk=!0)})}function Uoe(){jk=!0,$5(),D5(),jk=!1}class CR{constructor(e,n,r,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Yh.add(this),zk||(zk=!0,An.read($5),An.resolveKeyframes(D5))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const s=i?.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const a=r.readValue(n,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),i&&s===void 0&&i.set(e[0])}Ooe(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Yh.delete(this)}cancel(){this.state==="scheduled"&&(Yh.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const joe=t=>t.startsWith("--");function Woe(t,e,n){joe(e)?t.style.setProperty(e,n):t.style[e]=n}const Goe=hR(()=>window.ScrollTimeline!==void 0),Hoe={};function qoe(t,e){const n=hR(t);return()=>Hoe[e]??n()}const O5=qoe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Hg=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,FV={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Hg([0,.65,.55,1]),circOut:Hg([.55,0,1,.45]),backIn:Hg([.31,.01,.66,-.59]),backOut:Hg([.33,1.53,.69,.99])};function P5(t,e){if(t)return typeof t=="function"?O5()?k5(t,e):"ease-out":b5(t)?Hg(t):Array.isArray(t)?t.map(n=>P5(n,e)||FV.easeOut):FV[t]}function Koe(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeOut",times:l}={},u=void 0){const h={[e]:n};l&&(h.offset=l);const d=P5(a,i);Array.isArray(d)&&(h.easing=d);const p={delay:r,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return u&&(p.pseudoElement=u),t.animate(h,p)}function M5(t){return typeof t=="function"&&"applyToOptions"in t}function Xoe({type:t,...e}){return M5(t)&&O5()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class Yoe extends SR{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,cR(typeof e.type!="string");const u=Xoe(e);this.animation=Koe(n,r,i,u,s),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const h=wR(i,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(h):Woe(n,r,h),this.animation.cancel()}l?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return ho(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+ho(e)}get time(){return ho(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=La(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&Goe()?(this.animation.timeline=e,go):n(this)}}const L5={anticipate:m5,backInOut:p5,circInOut:y5};function Qoe(t){return t in L5}function Zoe(t){typeof t.ease=="string"&&Qoe(t.ease)&&(t.ease=L5[t.ease])}const VV=10;class Joe extends Yoe{constructor(e){Zoe(e),R5(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const a=new TR({...o,autoplay:!1}),l=La(this.finishedTime??this.time);n.setWithVelocity(a.sample(l-VV).value,a.sample(l).value,VV),a.stop()}}const BV=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(wc.test(t)||t==="0")&&!t.startsWith("url("));function eae(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function tae(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=BV(i,e),a=BV(s,e);return!o||!a?!1:eae(t)||(n==="spring"||M5(n))&&r}function Wk(t){t.duration=0,t.type="keyframes"}const nae=new Set(["opacity","clipPath","filter","transform"]),rae=hR(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function iae(t){const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=e.owner.getProps();return rae()&&n&&nae.has(n)&&(n!=="transform"||!u)&&!l&&!r&&i!=="mirror"&&s!==0&&o!=="inertia"}const sae=40;class oae extends SR{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:a,name:l,motionValue:u,element:h,...d}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=as.now();const p={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,name:l,motionValue:u,element:h,...d},g=h?.KeyframeResolver||CR;this.keyframeResolver=new g(a,(y,b,x)=>this.onKeyframesResolved(y,b,p,!x),l,u,h),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:s,type:o,velocity:a,delay:l,isHandoff:u,onUpdate:h}=r;this.resolvedAt=as.now(),tae(e,s,o,a)||((Wl.instantAnimations||!l)&&h?.(wR(e,r,n)),e[0]=e[e.length-1],Wk(r),r.repeat=0);const p={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>sae?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},g=!u&&iae(p)?new Joe({...p,element:p.motionValue.owner.current}):new TR(p);g.finished.then(()=>this.notifyFinished()).catch(go),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),Uoe()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const aae=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function lae(t){const e=aae.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function F5(t,e,n=1){const[r,i]=lae(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return o5(o)?parseFloat(o):o}return gR(i)?F5(i,e,n+1):i}function ER(t,e){return t?.[e]??t?.default??t}const V5=new Set(["width","height","top","left","right","bottom",...Qp]),uae={test:t=>t==="auto",parse:t=>t},B5=t=>e=>e.test(t),z5=[Yp,lt,Fa,Yu,eoe,Jse,uae],zV=t=>z5.find(B5(t));function cae(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||l5(t):!0}const hae=new Set(["brightness","contrast","saturate","opacity"]);function fae(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(yR)||[];if(!r)return t;const i=n.replace(r,"");let s=hae.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const dae=/\b([a-z-]*)\(.*?\)/gu,Gk={...wc,getAnimatableNone:t=>{const e=t.match(dae);return e?e.map(fae).join(" "):t}},UV={...Yp,transform:Math.round},pae={rotate:Yu,rotateX:Yu,rotateY:Yu,rotateZ:Yu,scale:Ex,scaleX:Ex,scaleY:Ex,scaleZ:Ex,skew:Yu,skewX:Yu,skewY:Yu,distance:lt,translateX:lt,translateY:lt,translateZ:lt,x:lt,y:lt,z:lt,perspective:lt,transformPerspective:lt,opacity:xy,originX:kV,originY:kV,originZ:lt},IR={borderWidth:lt,borderTopWidth:lt,borderRightWidth:lt,borderBottomWidth:lt,borderLeftWidth:lt,borderRadius:lt,radius:lt,borderTopLeftRadius:lt,borderTopRightRadius:lt,borderBottomRightRadius:lt,borderBottomLeftRadius:lt,width:lt,maxWidth:lt,height:lt,maxHeight:lt,top:lt,right:lt,bottom:lt,left:lt,padding:lt,paddingTop:lt,paddingRight:lt,paddingBottom:lt,paddingLeft:lt,margin:lt,marginTop:lt,marginRight:lt,marginBottom:lt,marginLeft:lt,backgroundPositionX:lt,backgroundPositionY:lt,...pae,zIndex:UV,fillOpacity:xy,strokeOpacity:xy,numOctaves:UV},mae={...IR,color:lr,backgroundColor:lr,outlineColor:lr,fill:lr,stroke:lr,borderColor:lr,borderTopColor:lr,borderRightColor:lr,borderBottomColor:lr,borderLeftColor:lr,filter:Gk,WebkitFilter:Gk},U5=t=>mae[t];function j5(t,e){let n=U5(t);return n!==Gk&&(n=wc),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const gae=new Set(["auto","none","0"]);function yae(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!gae.has(s)&&wy(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=j5(n,i)}class vae extends CR{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),gR(u))){const h=F5(u,n.current);h!==void 0&&(e[l]=h),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!V5.has(r)||e.length!==2)return;const[i,s]=e,o=zV(i),a=zV(s);if(o!==a)if(LV(o)&&LV(a))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else Xh[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||cae(e[i]))&&r.push(i);r.length&&yae(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Xh[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=Xh[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([a,l])=>{e.getValue(a).set(l)}),this.resolveNoneKeyframes()}}function bae(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=n?.[t]??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const W5=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function xae(t){return a5(t)&&"offsetHeight"in t}const jV=30,wae=t=>!isNaN(parseFloat(t));class Sae{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=as.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const s of this.dependents)s.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=as.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=wae(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new fR);const r=this.events[e].add(n);return e==="change"?()=>{r(),An.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=as.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>jV)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,jV);return u5(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function vp(t,e){return new Sae(t,e)}const{schedule:_R}=x5(queueMicrotask,!1),zo={x:!1,y:!1};function G5(){return zo.x||zo.y}function Tae(t){return t==="x"||t==="y"?zo[t]?null:(zo[t]=!0,()=>{zo[t]=!1}):zo.x||zo.y?null:(zo.x=zo.y=!0,()=>{zo.x=zo.y=!1})}function H5(t,e){const n=bae(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function WV(t){return!(t.pointerType==="touch"||G5())}function Cae(t,e,n={}){const[r,i,s]=H5(t,n),o=a=>{if(!WV(a))return;const{target:l}=a,u=e(l,a);if(typeof u!="function"||!l)return;const h=d=>{WV(d)&&(u(d),l.removeEventListener("pointerleave",h))};l.addEventListener("pointerleave",h,i)};return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const q5=(t,e)=>e?t===e?!0:q5(t,e.parentElement):!1,AR=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Eae=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Iae(t){return Eae.has(t.tagName)||t.tabIndex!==-1}const c1=new WeakSet;function GV(t){return e=>{e.key==="Enter"&&t(e)}}function h_(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const _ae=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=GV(()=>{if(c1.has(n))return;h_(n,"down");const i=GV(()=>{h_(n,"up")}),s=()=>h_(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function HV(t){return AR(t)&&!G5()}function Aae(t,e,n={}){const[r,i,s]=H5(t,n),o=a=>{const l=a.currentTarget;if(!HV(a))return;c1.add(l);const u=e(l,a),h=(g,y)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",p),c1.has(l)&&c1.delete(l),HV(g)&&typeof u=="function"&&u(g,{success:y})},d=g=>{h(g,l===window||l===document||n.useGlobalTarget||q5(l,g.target))},p=g=>{h(g,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",p,i)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),xae(a)&&(a.addEventListener("focus",u=>_ae(u,i)),!Iae(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function K5(t){return a5(t)&&"ownerSVGElement"in t}function kae(t){return K5(t)&&t.tagName==="svg"}const Ci=t=>!!(t&&t.getVelocity),Nae=[...z5,lr,wc],Rae=t=>Nae.find(B5(t)),X5=B.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function Dae(t=!0){const e=B.useContext(aR);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=B.useId();B.useEffect(()=>{if(t)return i(s)},[t]);const o=B.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const Y5=B.createContext({strict:!1}),qV={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},bp={};for(const t in qV)bp[t]={isEnabled:e=>qV[t].some(n=>!!e[n])};function $ae(t){for(const e in t)bp[e]={...bp[e],...t[e]}}const Oae=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function F1(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Oae.has(t)}let Q5=t=>!F1(t);function Pae(t){typeof t=="function"&&(Q5=e=>e.startsWith("on")?!F1(e):t(e))}try{Pae(require("@emotion/is-prop-valid").default)}catch{}function Mae(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(Q5(i)||n===!0&&F1(i)||!e&&!F1(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const CS=B.createContext({});function ES(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Sy(t){return typeof t=="string"||Array.isArray(t)}const kR=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],NR=["initial",...kR];function IS(t){return ES(t.animate)||NR.some(e=>Sy(t[e]))}function Z5(t){return!!(IS(t)||t.variants)}function Lae(t,e){if(IS(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Sy(n)?n:void 0,animate:Sy(r)?r:void 0}}return t.inherit!==!1?e:{}}function Fae(t){const{initial:e,animate:n}=Lae(t,B.useContext(CS));return B.useMemo(()=>({initial:e,animate:n}),[KV(e),KV(n)])}function KV(t){return Array.isArray(t)?t.join(" "):t}const Ty={};function Vae(t){for(const e in t)Ty[e]=t[e],mR(e)&&(Ty[e].isCSSVariable=!0)}function J5(t,{layout:e,layoutId:n}){return Zp.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Ty[t]||t==="opacity")}const Bae={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},zae=Qp.length;function Uae(t,e,n){let r="",i=!0;for(let s=0;s<zae;s++){const o=Qp[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const u=W5(a,IR[o]);if(!l){i=!1;const h=Bae[o]||o;r+=`${h}(${u}) `}n&&(e[o]=u)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function RR(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const u=e[l];if(Zp.has(l)){o=!0;continue}else if(mR(l)){i[l]=u;continue}else{const h=W5(u,IR[l]);l.startsWith("origin")?(a=!0,s[l]=h):r[l]=h}}if(e.transform||(o||n?r.transform=Uae(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:u="50%",originZ:h=0}=s;r.transformOrigin=`${l} ${u} ${h}`}}const DR=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function eH(t,e,n){for(const r in e)!Ci(e[r])&&!J5(r,n)&&(t[r]=e[r])}function jae({transformTemplate:t},e){return B.useMemo(()=>{const n=DR();return RR(n,e,t),Object.assign({},n.vars,n.style)},[e])}function Wae(t,e){const n=t.style||{},r={};return eH(r,n,t),Object.assign(r,jae(t,e)),r}function Gae(t,e){const n={},r=Wae(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const Hae={offset:"stroke-dashoffset",array:"stroke-dasharray"},qae={offset:"strokeDashoffset",array:"strokeDasharray"};function Kae(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?Hae:qae;t[s.offset]=lt.transform(-r);const o=lt.transform(e),a=lt.transform(n);t[s.array]=`${o} ${a}`}function tH(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...a},l,u,h){if(RR(t,a,u),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:d,style:p}=t;d.transform&&(p.transform=d.transform,delete d.transform),(p.transform||d.transformOrigin)&&(p.transformOrigin=d.transformOrigin??"50% 50%",delete d.transformOrigin),p.transform&&(p.transformBox=h?.transformBox??"fill-box",delete d.transformBox),e!==void 0&&(d.x=e),n!==void 0&&(d.y=n),r!==void 0&&(d.scale=r),i!==void 0&&Kae(d,i,s,o,!1)}const nH=()=>({...DR(),attrs:{}}),rH=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Xae(t,e,n,r){const i=B.useMemo(()=>{const s=nH();return tH(s,e,rH(r),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};eH(s,t.style,t),i.style={...s,...i.style}}return i}const Yae=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function $R(t){return typeof t!="string"||t.includes("-")?!1:!!(Yae.indexOf(t)>-1||/[A-Z]/u.test(t))}function Qae(t,e,n,{latestValues:r},i,s=!1){const a=($R(t)?Xae:Gae)(e,r,i,t),l=Mae(e,typeof t=="string",s),u=t!==B.Fragment?{...l,...a,ref:n}:{},{children:h}=e,d=B.useMemo(()=>Ci(h)?h.get():h,[h]);return B.createElement(t,{...u,children:d})}function XV(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function OR(t,e,n,r){if(typeof e=="function"){const[i,s]=XV(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=XV(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function h1(t){return Ci(t)?t.get():t}function Zae({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:Jae(n,r,i,t),renderState:e()}}function Jae(t,e,n,r){const i={},s=r(t,{});for(const p in s)i[p]=h1(s[p]);let{initial:o,animate:a}=t;const l=IS(t),u=Z5(t);e&&u&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const d=h?a:o;if(d&&typeof d!="boolean"&&!ES(d)){const p=Array.isArray(d)?d:[d];for(let g=0;g<p.length;g++){const y=OR(t,p[g]);if(y){const{transitionEnd:b,transition:x,...w}=y;for(const C in w){let E=w[C];if(Array.isArray(E)){const _=h?E.length-1:0;E=E[_]}E!==null&&(i[C]=E)}for(const C in b)i[C]=b[C]}}}return i}const iH=t=>(e,n)=>{const r=B.useContext(CS),i=B.useContext(aR),s=()=>Zae(t,e,r,i);return n?s():$se(s)};function PR(t,e,n){const{style:r}=t,i={};for(const s in r)(Ci(r[s])||e.style&&Ci(e.style[s])||J5(s,t)||n?.getValue(s)?.liveStyle!==void 0)&&(i[s]=r[s]);return i}const ele=iH({scrapeMotionValuesFromProps:PR,createRenderState:DR});function sH(t,e,n){const r=PR(t,e,n);for(const i in t)if(Ci(t[i])||Ci(e[i])){const s=Qp.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}const tle=iH({scrapeMotionValuesFromProps:sH,createRenderState:nH}),nle=Symbol.for("motionComponentSymbol");function Qd(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function rle(t,e,n){return B.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Qd(n)&&(n.current=r))},[e])}const MR=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),ile="framerAppearId",oH="data-"+MR(ile),aH=B.createContext({});function sle(t,e,n,r,i){const{visualElement:s}=B.useContext(CS),o=B.useContext(Y5),a=B.useContext(aR),l=B.useContext(X5).reducedMotion,u=B.useRef(null);r=r||o.renderer,!u.current&&r&&(u.current=r(t,{visualState:e,parent:s,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const h=u.current,d=B.useContext(aH);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&ole(u.current,n,i,d);const p=B.useRef(!1);B.useInsertionEffect(()=>{h&&p.current&&h.update(n,a)});const g=n[oH],y=B.useRef(!!g&&!window.MotionHandoffIsComplete?.(g)&&window.MotionHasOptimisedAnimation?.(g));return Ose(()=>{h&&(p.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),y.current&&h.animationState&&h.animationState.animateChanges())}),B.useEffect(()=>{h&&(!y.current&&h.animationState&&h.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(g)}),y.current=!1),h.enteringChildren=void 0)}),h}function ole(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:u,layoutCrossfade:h}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:lH(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&Qd(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:h,layoutScroll:l,layoutRoot:u})}function lH(t){if(t)return t.options.allowProjection!==!1?t.projection:lH(t.parent)}function f_(t,{forwardMotionProps:e=!1}={},n,r){n&&$ae(n);const i=$R(t)?tle:ele;function s(a,l){let u;const h={...B.useContext(X5),...a,layoutId:ale(a)},{isStatic:d}=h,p=Fae(a),g=i(a,d);if(!d&&oR){lle();const y=ule(h);u=y.MeasureLayout,p.visualElement=sle(t,g,h,r,y.ProjectionNode)}return se.jsxs(CS.Provider,{value:p,children:[u&&p.visualElement?se.jsx(u,{visualElement:p.visualElement,...h}):null,Qae(t,a,rle(g,p.visualElement,l),g,d,e)]})}s.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=B.forwardRef(s);return o[nle]=t,o}function ale({layoutId:t}){const e=B.useContext(s5).id;return e&&t!==void 0?e+"-"+t:t}function lle(t,e){B.useContext(Y5).strict}function ule(t){const{drag:e,layout:n}=bp;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function cle(t,e){if(typeof Proxy>"u")return f_;const n=new Map,r=(s,o)=>f_(s,o,t,e),i=(s,o)=>r(s,o);return new Proxy(i,{get:(s,o)=>o==="create"?r:(n.has(o)||n.set(o,f_(o,void 0,t,e)),n.get(o))})}function uH({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function hle({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function fle(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function d_(t){return t===void 0||t===1}function Hk({scale:t,scaleX:e,scaleY:n}){return!d_(t)||!d_(e)||!d_(n)}function Rh(t){return Hk(t)||cH(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function cH(t){return YV(t.x)||YV(t.y)}function YV(t){return t&&t!=="0%"}function V1(t,e,n){const r=t-n,i=e*r;return n+i}function QV(t,e,n,r,i){return i!==void 0&&(t=V1(t,i,r)),V1(t,n,r)+e}function qk(t,e=0,n=1,r,i){t.min=QV(t.min,e,n,r,i),t.max=QV(t.max,e,n,r,i)}function hH(t,{x:e,y:n}){qk(t.x,e.translate,e.scale,e.originPoint),qk(t.y,n.translate,n.scale,n.originPoint)}const ZV=.999999999999,JV=1.0000000000001;function dle(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Jd(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,hH(t,o)),r&&Rh(s.latestValues)&&Jd(t,s.latestValues))}e.x<JV&&e.x>ZV&&(e.x=1),e.y<JV&&e.y>ZV&&(e.y=1)}function Zd(t,e){t.min=t.min+e,t.max=t.max+e}function e4(t,e,n,r,i=.5){const s=Dn(t.min,t.max,i);qk(t,e,n,s,r)}function Jd(t,e){e4(t.x,e.x,e.scaleX,e.scale,e.originX),e4(t.y,e.y,e.scaleY,e.scale,e.originY)}function fH(t,e){return uH(fle(t.getBoundingClientRect(),e))}function ple(t,e,n){const r=fH(t,n),{scroll:i}=e;return i&&(Zd(r.x,i.offset.x),Zd(r.y,i.offset.y)),r}const t4=()=>({translate:0,scale:1,origin:0,originPoint:0}),ep=()=>({x:t4(),y:t4()}),n4=()=>({min:0,max:0}),Kn=()=>({x:n4(),y:n4()}),Kk={current:null},dH={current:!1};function mle(){if(dH.current=!0,!!oR)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Kk.current=t.matches;t.addEventListener("change",e),e()}else Kk.current=!1}const gle=new WeakMap;function yle(t,e,n){for(const r in e){const i=e[r],s=n[r];if(Ci(i))t.addValue(r,i);else if(Ci(s))t.addValue(r,vp(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,vp(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const r4=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class vle{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=CR,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=as.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,An.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=IS(n),this.isVariantNode=Z5(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in d){const g=d[p];l[p]!==void 0&&Ci(g)&&g.set(l[p])}}mount(e){this.current=e,gle.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),dH.current||mle(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Kk.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),xc(this.notifyUpdate),xc(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Zp.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&An.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in bp){const n=bp[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Kn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<r4.length;r++){const i=r4[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=yle(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=vp(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(o5(r)||l5(r))?r=parseFloat(r):!Rae(r)&&wc.test(n)&&(r=j5(e,n)),this.setBaseTarget(e,Ci(r)?r.get():r)),Ci(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const s=OR(this.props,n,this.presenceContext?.custom);s&&(r=s[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Ci(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new fR),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){_R.render(this.render)}}class pH extends vle{constructor(){super(...arguments),this.KeyframeResolver=vae}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ci(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function mH(t,{style:e,vars:n},r,i){const s=t.style;let o;for(o in e)s[o]=e[o];i?.applyProjectionStyles(s,r);for(o in n)s.setProperty(o,n[o])}function ble(t){return window.getComputedStyle(t)}class xle extends pH{constructor(){super(...arguments),this.type="html",this.renderInstance=mH}readValueFromInstance(e,n){if(Zp.has(n))return this.projection?.isProjecting?Vk(n):Loe(e,n);{const r=ble(e),i=(mR(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return fH(e,n)}build(e,n,r){RR(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return PR(e,n,r)}}const gH=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function wle(t,e,n,r){mH(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(gH.has(i)?i:MR(i),e.attrs[i])}class Sle extends pH{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Kn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Zp.has(n)){const r=U5(n);return r&&r.default||0}return n=gH.has(n)?n:MR(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return sH(e,n,r)}build(e,n,r){tH(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){wle(e,n,r,i)}mount(e){this.isSVGTag=rH(e.tagName),super.mount(e)}}const Tle=(t,e)=>$R(t)?new Sle(e):new xle(e,{allowProjection:t!==B.Fragment});function rp(t,e,n){const r=t.getProps();return OR(r,e,n!==void 0?n:r.custom,t)}const Xk=t=>Array.isArray(t);function Cle(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,vp(n))}function Ele(t){return Xk(t)?t[t.length-1]||0:t}function Ile(t,e){const n=rp(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=Ele(s[o]);Cle(t,o,a)}}function _le(t){return!!(Ci(t)&&t.add)}function Yk(t,e){const n=t.getValue("willChange");if(_le(n))return n.add(e);if(!n&&Wl.WillChange){const r=new Wl.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function yH(t){return t.props[oH]}const Ale=t=>t!==null;function kle(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(Ale),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[s]}const Nle={type:"spring",stiffness:500,damping:25,restSpeed:10},Rle=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Dle={type:"keyframes",duration:.8},$le={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Ole=(t,{keyframes:e})=>e.length>2?Dle:Zp.has(t)?t.startsWith("scale")?Rle(e[1]):Nle:$le;function Ple({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:u,...h}){return!!Object.keys(h).length}const LR=(t,e,n,r={},i,s)=>o=>{const a=ER(r,t)||{},l=a.delay||r.delay||0;let{elapsed:u=0}=r;u=u-La(l);const h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-u,onUpdate:p=>{e.set(p),a.onUpdate&&a.onUpdate(p)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};Ple(a)||Object.assign(h,Ole(t,h)),h.duration&&(h.duration=La(h.duration)),h.repeatDelay&&(h.repeatDelay=La(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let d=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(Wk(h),h.delay===0&&(d=!0)),(Wl.instantAnimations||Wl.skipAnimations)&&(d=!0,Wk(h),h.delay=0),h.allowFlatten=!a.type&&!a.ease,d&&!s&&e.get()!==void 0){const p=kle(h.keyframes,a);if(p!==void 0){An.update(()=>{h.onUpdate(p),h.onComplete()});return}}return a.isSync?new TR(h):new oae(h)};function Mle({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function vH(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=e;r&&(s=r);const l=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const h in a){const d=t.getValue(h,t.latestValues[h]??null),p=a[h];if(p===void 0||u&&Mle(u,h))continue;const g={delay:n,...ER(s||{},h)},y=d.get();if(y!==void 0&&!d.isAnimating&&!Array.isArray(p)&&p===y&&!g.velocity)continue;let b=!1;if(window.MotionHandoffAnimation){const w=yH(t);if(w){const C=window.MotionHandoffAnimation(w,h,An);C!==null&&(g.startTime=C,b=!0)}}Yk(t,h),d.start(LR(h,d,p,t.shouldReduceMotion&&V5.has(h)?{type:!1}:g,t,b));const x=d.animation;x&&l.push(x)}return o&&Promise.all(l).then(()=>{An.update(()=>{o&&Ile(t,o)})}),l}function bH(t,e,n,r=0,i=1){const s=Array.from(t).sort((u,h)=>u.sortNodePosition(h)).indexOf(e),o=t.size,a=(o-1)*r;return typeof n=="function"?n(s,o):i===1?s*r:a-s*r}function Qk(t,e,n={}){const r=rp(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(vH(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:d}=i;return Lle(t,e,l,u,h,d,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[l,u]=a==="beforeChildren"?[s,o]:[o,s];return l().then(()=>u())}else return Promise.all([s(),o(n.delay)])}function Lle(t,e,n=0,r=0,i=0,s=1,o){const a=[];for(const l of t.variantChildren)l.notify("AnimationStart",e),a.push(Qk(l,e,{...o,delay:n+(typeof r=="function"?0:r)+bH(t.variantChildren,l,r,i,s)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(a)}function Fle(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>Qk(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=Qk(t,e,n);else{const i=typeof e=="function"?rp(t,e,n.custom):e;r=Promise.all(vH(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function xH(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const Vle=NR.length;function wH(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?wH(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<Vle;n++){const r=NR[n],i=t.props[r];(Sy(i)||i===!1)&&(e[r]=i)}return e}const Ble=[...kR].reverse(),zle=kR.length;function Ule(t){return e=>Promise.all(e.map(({animation:n,options:r})=>Fle(t,n,r)))}function jle(t){let e=Ule(t),n=i4(),r=!0;const i=l=>(u,h)=>{const d=rp(t,h,l==="exit"?t.presenceContext?.custom:void 0);if(d){const{transition:p,transitionEnd:g,...y}=d;u={...u,...y,...g}}return u};function s(l){e=l(t)}function o(l){const{props:u}=t,h=wH(t.parent)||{},d=[],p=new Set;let g={},y=1/0;for(let x=0;x<zle;x++){const w=Ble[x],C=n[w],E=u[w]!==void 0?u[w]:h[w],_=Sy(E),A=w===l?C.isActive:null;A===!1&&(y=x);let P=E===h[w]&&E!==u[w]&&_;if(P&&r&&t.manuallyAnimateOnMount&&(P=!1),C.protectedKeys={...g},!C.isActive&&A===null||!E&&!C.prevProp||ES(E)||typeof E=="boolean")continue;const N=Wle(C.prevProp,E);let R=N||w===l&&C.isActive&&!P&&_||x>y&&_,D=!1;const O=Array.isArray(E)?E:[E];let k=O.reduce(i(w),{});A===!1&&(k={});const{prevResolvedValues:F={}}=C,L={...F,...k},q=H=>{R=!0,p.has(H)&&(D=!0,p.delete(H)),C.needsAnimating[H]=!0;const X=t.getValue(H);X&&(X.liveStyle=!1)};for(const H in L){const X=k[H],ee=F[H];if(g.hasOwnProperty(H))continue;let ce=!1;Xk(X)&&Xk(ee)?ce=!xH(X,ee):ce=X!==ee,ce?X!=null?q(H):p.add(H):X!==void 0&&p.has(H)?q(H):C.protectedKeys[H]=!0}C.prevProp=E,C.prevResolvedValues=k,C.isActive&&(g={...g,...k}),r&&t.blockInitialAnimation&&(R=!1);const Y=P&&N;R&&(!Y||D)&&d.push(...O.map(H=>{const X={type:w};if(typeof H=="string"&&r&&!Y&&t.manuallyAnimateOnMount&&t.parent){const{parent:ee}=t,ce=rp(ee,H);if(ee.enteringChildren&&ce){const{delayChildren:j}=ce.transition||{};X.delay=bH(ee.enteringChildren,t,j)}}return{animation:H,options:X}}))}if(p.size){const x={};if(typeof u.initial!="boolean"){const w=rp(t,Array.isArray(u.initial)?u.initial[0]:u.initial);w&&w.transition&&(x.transition=w.transition)}p.forEach(w=>{const C=t.getBaseTarget(w),E=t.getValue(w);E&&(E.liveStyle=!0),x[w]=C??null}),d.push({animation:x})}let b=!!d.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(b=!1),r=!1,b?e(d):Promise.resolve()}function a(l,u){if(n[l].isActive===u)return Promise.resolve();t.variantChildren?.forEach(d=>d.animationState?.setActive(l,u)),n[l].isActive=u;const h=o(l);for(const d in n)n[d].protectedKeys={};return h}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=i4()}}}function Wle(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!xH(e,t):!1}function _h(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function i4(){return{animate:_h(!0),whileInView:_h(),whileHover:_h(),whileTap:_h(),whileDrag:_h(),whileFocus:_h(),exit:_h()}}class Fc{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Gle extends Fc{constructor(e){super(e),e.animationState||(e.animationState=jle(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();ES(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let Hle=0;class qle extends Fc{constructor(){super(...arguments),this.id=Hle++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const Kle={animation:{Feature:Gle},exit:{Feature:qle}};function Cy(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function lv(t){return{point:{x:t.pageX,y:t.pageY}}}const Xle=t=>e=>AR(e)&&t(e,lv(e));function oy(t,e,n,r){return Cy(t,e,Xle(n),r)}const SH=1e-4,Yle=1-SH,Qle=1+SH,TH=.01,Zle=0-TH,Jle=0+TH;function Fi(t){return t.max-t.min}function eue(t,e,n){return Math.abs(t-e)<=n}function s4(t,e,n,r=.5){t.origin=r,t.originPoint=Dn(e.min,e.max,t.origin),t.scale=Fi(n)/Fi(e),t.translate=Dn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=Yle&&t.scale<=Qle||isNaN(t.scale))&&(t.scale=1),(t.translate>=Zle&&t.translate<=Jle||isNaN(t.translate))&&(t.translate=0)}function ay(t,e,n,r){s4(t.x,e.x,n.x,r?r.originX:void 0),s4(t.y,e.y,n.y,r?r.originY:void 0)}function o4(t,e,n){t.min=n.min+e.min,t.max=t.min+Fi(e)}function tue(t,e,n){o4(t.x,e.x,n.x),o4(t.y,e.y,n.y)}function a4(t,e,n){t.min=e.min-n.min,t.max=t.min+Fi(e)}function ly(t,e,n){a4(t.x,e.x,n.x),a4(t.y,e.y,n.y)}function so(t){return[t("x"),t("y")]}const CH=({current:t})=>t?t.ownerDocument.defaultView:null,l4=(t,e)=>Math.abs(t-e);function nue(t,e){const n=l4(t.x,e.x),r=l4(t.y,e.y);return Math.sqrt(n**2+r**2)}class EH{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=m_(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,y=nue(p.offset,{x:0,y:0})>=this.distanceThreshold;if(!g&&!y)return;const{point:b}=p,{timestamp:x}=ti;this.history.push({...b,timestamp:x});const{onStart:w,onMove:C}=this.handlers;g||(w&&w(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),C&&C(this.lastMoveEvent,p)},this.handlePointerMove=(p,g)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=p_(g,this.transformPagePoint),An.update(this.updatePoint,!0)},this.handlePointerUp=(p,g)=>{this.end();const{onEnd:y,onSessionEnd:b,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=m_(p.type==="pointercancel"?this.lastMoveEventInfo:p_(g,this.transformPagePoint),this.history);this.startEvent&&y&&y(p,w),b&&b(p,w)},!AR(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const a=lv(e),l=p_(a,this.transformPagePoint),{point:u}=l,{timestamp:h}=ti;this.history=[{...u,timestamp:h}];const{onSessionStart:d}=n;d&&d(e,m_(l,this.history)),this.removeListeners=sv(oy(this.contextWindow,"pointermove",this.handlePointerMove),oy(this.contextWindow,"pointerup",this.handlePointerUp),oy(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),xc(this.updatePoint)}}function p_(t,e){return e?{point:e(t.point)}:t}function u4(t,e){return{x:t.x-e.x,y:t.y-e.y}}function m_({point:t},e){return{point:t,delta:u4(t,IH(e)),offset:u4(t,rue(e)),velocity:iue(e,.1)}}function rue(t){return t[0]}function IH(t){return t[t.length-1]}function iue(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=IH(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>La(e)));)n--;if(!r)return{x:0,y:0};const s=ho(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function sue(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Dn(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Dn(n,t,r.max):Math.min(t,n)),t}function c4(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function oue(t,{top:e,left:n,bottom:r,right:i}){return{x:c4(t.x,n,i),y:c4(t.y,e,r)}}function h4(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function aue(t,e){return{x:h4(t.x,e.x),y:h4(t.y,e.y)}}function lue(t,e){let n=.5;const r=Fi(t),i=Fi(e);return i>r?n=by(e.min,e.max-r,t.min):r>i&&(n=by(t.min,t.max-i,e.min)),jl(0,1,n)}function uue(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Zk=.35;function cue(t=Zk){return t===!1?t=0:t===!0&&(t=Zk),{x:f4(t,"left","right"),y:f4(t,"top","bottom")}}function f4(t,e,n){return{min:d4(t,e),max:d4(t,n)}}function d4(t,e){return typeof t=="number"?t:t[e]||0}const hue=new WeakMap;class fue{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Kn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=d=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(lv(d).point)},o=(d,p)=>{const{drag:g,dragPropagation:y,onDragStart:b}=this.getProps();if(g&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Tae(g),!this.openDragLock))return;this.latestPointerEvent=d,this.latestPanInfo=p,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),so(w=>{let C=this.getAxisMotionValue(w).get()||0;if(Fa.test(C)){const{projection:E}=this.visualElement;if(E&&E.layout){const _=E.layout.layoutBox[w];_&&(C=Fi(_)*(parseFloat(C)/100))}}this.originPoint[w]=C}),b&&An.postRender(()=>b(d,p)),Yk(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},a=(d,p)=>{this.latestPointerEvent=d,this.latestPanInfo=p;const{dragPropagation:g,dragDirectionLock:y,onDirectionLock:b,onDrag:x}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:w}=p;if(y&&this.currentDirection===null){this.currentDirection=due(w),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",p.point,w),this.updateAxis("y",p.point,w),this.visualElement.render(),x&&x(d,p)},l=(d,p)=>{this.latestPointerEvent=d,this.latestPanInfo=p,this.stop(d,p),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>so(d=>this.getAnimationState(d)==="paused"&&this.getAxisMotionValue(d).animation?.play()),{dragSnapToOrigin:h}=this.getProps();this.panSession=new EH(e,{onSessionStart:s,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:r,contextWindow:CH(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&An.postRender(()=>a(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Ix(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=sue(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&Qd(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=oue(r.layoutBox,e):this.constraints=!1,this.elastic=cue(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&so(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=uue(r.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Qd(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=ple(r,i.root,this.visualElement.getTransformPagePoint());let o=aue(i.layout.layoutBox,s);if(n){const a=n(hle(o));this.hasMutatedConstraints=!!a,a&&(o=uH(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=so(h=>{if(!Ix(h,n,this.currentDirection))return;let d=l&&l[h]||{};o&&(d={min:0,max:0});const p=i?200:1e6,g=i?40:1e7,y={type:"inertia",velocity:r?e[h]:0,bounceStiffness:p,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(h,y)});return Promise.all(u).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Yk(this.visualElement,e),r.start(LR(e,r,0,n,this.visualElement,!1))}stopAnimation(){so(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){so(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){so(n=>{const{drag:r}=this.getProps();if(!Ix(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-Dn(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Qd(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};so(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=lue({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),so(o=>{if(!Ix(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(Dn(l,u,i[o]))})}addListeners(){if(!this.visualElement.current)return;hue.set(this.visualElement,this);const e=this.visualElement.current,n=oy(e,"pointerdown",l=>{const{drag:u,dragListener:h=!0}=this.getProps();u&&h&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Qd(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),An.read(r);const o=Cy(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",(({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(so(h=>{const d=this.getAxisMotionValue(h);d&&(this.originPoint[h]+=l[h].translate,d.set(d.get()+l[h].translate))}),this.visualElement.render())}));return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=Zk,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Ix(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function due(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class pue extends Fc{constructor(e){super(e),this.removeGroupControls=go,this.removeListeners=go,this.controls=new fue(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||go}unmount(){this.removeGroupControls(),this.removeListeners()}}const p4=t=>(e,n)=>{t&&An.postRender(()=>t(e,n))};class mue extends Fc{constructor(){super(...arguments),this.removePointerDownListener=go}onPointerDown(e){this.session=new EH(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:CH(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:p4(e),onStart:p4(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&An.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=oy(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const f1={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function m4(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const $g={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(lt.test(t))t=parseFloat(t);else return t;const n=m4(t,e.target.x),r=m4(t,e.target.y);return`${n}% ${r}%`}},gue={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=wc.parse(t);if(i.length>5)return r;const s=wc.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const u=Dn(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=u),typeof i[3+o]=="number"&&(i[3+o]/=u),s(i)}};let g_=!1;class yue extends B.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;Vae(vue),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),g_&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),f1.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:o}=r;return o&&(o.isPresent=s,g_=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||An.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),_R.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;g_=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function _H(t){const[e,n]=Dae(),r=B.useContext(s5);return se.jsx(yue,{...t,layoutGroup:r,switchLayoutGroup:B.useContext(aH),isPresent:e,safeToRemove:n})}const vue={borderRadius:{...$g,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:$g,borderTopRightRadius:$g,borderBottomLeftRadius:$g,borderBottomRightRadius:$g,boxShadow:gue};function bue(t,e,n){const r=Ci(t)?t:vp(t);return r.start(LR("",r,e,n)),r.animation}const xue=(t,e)=>t.depth-e.depth;class wue{constructor(){this.children=[],this.isDirty=!1}add(e){lR(this.children,e),this.isDirty=!0}remove(e){uR(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(xue),this.isDirty=!1,this.children.forEach(e)}}function Sue(t,e){const n=as.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(xc(r),t(s-e))};return An.setup(r,!0),()=>xc(r)}const AH=["TopLeft","TopRight","BottomLeft","BottomRight"],Tue=AH.length,g4=t=>typeof t=="string"?parseFloat(t):t,y4=t=>typeof t=="number"||lt.test(t);function Cue(t,e,n,r,i,s){i?(t.opacity=Dn(0,n.opacity??1,Eue(r)),t.opacityExit=Dn(e.opacity??1,0,Iue(r))):s&&(t.opacity=Dn(e.opacity??1,n.opacity??1,r));for(let o=0;o<Tue;o++){const a=`border${AH[o]}Radius`;let l=v4(e,a),u=v4(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||y4(l)===y4(u)?(t[a]=Math.max(Dn(g4(l),g4(u),r),0),(Fa.test(u)||Fa.test(l))&&(t[a]+="%")):t[a]=u}(e.rotate||n.rotate)&&(t.rotate=Dn(e.rotate||0,n.rotate||0,r))}function v4(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Eue=kH(0,.5,g5),Iue=kH(.5,.95,go);function kH(t,e,n){return r=>r<t?0:r>e?1:n(by(t,e,r))}function b4(t,e){t.min=e.min,t.max=e.max}function Zs(t,e){b4(t.x,e.x),b4(t.y,e.y)}function x4(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function w4(t,e,n,r,i){return t-=e,t=V1(t,1/n,r),i!==void 0&&(t=V1(t,1/i,r)),t}function _ue(t,e=0,n=1,r=.5,i,s=t,o=t){if(Fa.test(e)&&(e=parseFloat(e),e=Dn(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Dn(s.min,s.max,r);t===s&&(a-=e),t.min=w4(t.min,e,n,a,i),t.max=w4(t.max,e,n,a,i)}function S4(t,e,[n,r,i],s,o){_ue(t,e[n],e[r],e[i],e.scale,s,o)}const Aue=["x","scaleX","originX"],kue=["y","scaleY","originY"];function T4(t,e,n,r){S4(t.x,e,Aue,n?n.x:void 0,r?r.x:void 0),S4(t.y,e,kue,n?n.y:void 0,r?r.y:void 0)}function C4(t){return t.translate===0&&t.scale===1}function NH(t){return C4(t.x)&&C4(t.y)}function E4(t,e){return t.min===e.min&&t.max===e.max}function Nue(t,e){return E4(t.x,e.x)&&E4(t.y,e.y)}function I4(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function RH(t,e){return I4(t.x,e.x)&&I4(t.y,e.y)}function _4(t){return Fi(t.x)/Fi(t.y)}function A4(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Rue{constructor(){this.members=[]}add(e){lR(this.members,e),e.scheduleRender()}remove(e){if(uR(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Due(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=n?.z||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:h,rotateX:d,rotateY:p,skewX:g,skewY:y}=n;u&&(r=`perspective(${u}px) ${r}`),h&&(r+=`rotate(${h}deg) `),d&&(r+=`rotateX(${d}deg) `),p&&(r+=`rotateY(${p}deg) `),g&&(r+=`skewX(${g}deg) `),y&&(r+=`skewY(${y}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const y_=["","X","Y","Z"],$ue=1e3;let Oue=0;function v_(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function DH(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=yH(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",An,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&DH(r)}function $H({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e?.()){this.id=Oue++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Lue),this.nodes.forEach(zue),this.nodes.forEach(Uue),this.nodes.forEach(Fue)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new wue)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new fR),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=K5(o)&&!kae(o),this.instance=o;const{layoutId:a,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),t){let h,d=0;const p=()=>this.root.updateBlockedByResize=!1;An.read(()=>{d=window.innerWidth}),t(o,()=>{const g=window.innerWidth;g!==d&&(d=g,this.root.updateBlockedByResize=!0,h&&h(),h=Sue(p,250),f1.hasAnimatedSinceResize&&(f1.hasAnimatedSinceResize=!1,this.nodes.forEach(R4)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&u&&(a||l)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:d,hasRelativeLayoutChanged:p,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||u.getDefaultTransition()||que,{onLayoutAnimationStart:b,onLayoutAnimationComplete:x}=u.getProps(),w=!this.targetLayout||!RH(this.targetLayout,g),C=!d&&p;if(this.options.layoutRoot||this.resumeFrom||C||d&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const E={...ER(y,"layout"),onPlay:b,onComplete:x};(u.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E),this.setAnimationOrigin(h,C)}else d||R4(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),xc(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(jue),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&DH(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const d=this.path[h];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(k4);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(N4);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Bue),this.nodes.forEach(Pue),this.nodes.forEach(Mue)):this.nodes.forEach(N4),this.clearAllSnapshots();const a=as.now();ti.delta=jl(0,1e3/60,a-ti.timestamp),ti.timestamp=a,ti.isProcessing=!0,o_.update.process(ti),o_.preRender.process(ti),o_.render.process(ti),ti.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,_R.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Vue),this.sharedNodes.forEach(Wue)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,An.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){An.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Fi(this.snapshot.measuredBox.x)&&!Fi(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Kn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!NH(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,h=u!==this.prevTransformTemplateValue;o&&this.instance&&(a||Rh(this.latestValues)||h)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),Kue(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Kn();const a=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(Xue))){const{scroll:u}=this.root;u&&(Zd(a.x,u.offset.x),Zd(a.y,u.offset.y))}return a}removeElementScroll(o){const a=Kn();if(Zs(a,o),this.scroll?.wasRoot)return a;for(let l=0;l<this.path.length;l++){const u=this.path[l],{scroll:h,options:d}=u;u!==this.root&&h&&d.layoutScroll&&(h.wasRoot&&Zs(a,o),Zd(a.x,h.offset.x),Zd(a.y,h.offset.y))}return a}applyTransform(o,a=!1){const l=Kn();Zs(l,o);for(let u=0;u<this.path.length;u++){const h=this.path[u];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Jd(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Rh(h.latestValues)&&Jd(l,h.latestValues)}return Rh(this.latestValues)&&Jd(l,this.latestValues),l}removeTransform(o){const a=Kn();Zs(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Rh(u.latestValues))continue;Hk(u.latestValues)&&u.updateSnapshot();const h=Kn(),d=u.measurePageBox();Zs(h,d),T4(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,h)}return Rh(this.latestValues)&&T4(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ti.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:d}=this.options;if(!(!this.layout||!(h||d))){if(this.resolvedRelativeTargetAt=ti.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Kn(),this.relativeTargetOrigin=Kn(),ly(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),Zs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Kn(),this.targetWithTransforms=Kn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),tue(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Zs(this.target,this.layout.layoutBox),hH(this.target,this.targetDelta)):Zs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Kn(),this.relativeTargetOrigin=Kn(),ly(this.relativeTargetOrigin,this.target,p.target),Zs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Hk(this.parent.latestValues)||cH(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===ti.timestamp&&(l=!1),l)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;Zs(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,p=this.treeScale.y;dle(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Kn());const{target:g}=o;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(x4(this.prevProjectionDelta.x,this.projectionDelta.x),x4(this.prevProjectionDelta.y,this.projectionDelta.y)),ay(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==p||!A4(this.projectionDelta.x,this.prevProjectionDelta.x)||!A4(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ep(),this.projectionDelta=ep(),this.projectionDeltaWithTransform=ep()}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},h={...this.latestValues},d=ep();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=Kn(),g=l?l.source:void 0,y=this.layout?this.layout.source:void 0,b=g!==y,x=this.getStack(),w=!x||x.members.length<=1,C=!!(b&&!w&&this.options.crossfade===!0&&!this.path.some(Hue));this.animationProgress=0;let E;this.mixTargetDelta=_=>{const A=_/1e3;D4(d.x,o.x,A),D4(d.y,o.y,A),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ly(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Gue(this.relativeTarget,this.relativeTargetOrigin,p,A),E&&Nue(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=Kn()),Zs(E,this.relativeTarget)),b&&(this.animationValues=h,Cue(h,u,this.latestValues,A,C,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=A},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(xc(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=An.update(()=>{f1.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=vp(0)),this.currentAnimation=bue(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta($ue),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:h}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&OH(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Kn();const d=Fi(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const p=Fi(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}Zs(a,l),Jd(a,h),ay(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Rue),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const u={};l.z&&v_("z",o,u,this.animationValues);for(let h=0;h<y_.length;h++)v_(`rotate${y_[h]}`,o,u,this.animationValues),v_(`skew${y_[h]}`,o,u,this.animationValues);o.render();for(const h in u)o.setStaticValue(h,u[h]),this.animationValues&&(this.animationValues[h]=u[h]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=h1(a?.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=h1(a?.pointerEvents)||""),this.hasProjected&&!Rh(this.latestValues)&&(o.transform=l?l({},""):"none",this.hasProjected=!1);return}o.visibility="";const h=u.animationValues||u.latestValues;this.applyTransformsToTarget();let d=Due(this.projectionDeltaWithTransform,this.treeScale,h);l&&(d=l(h,d)),o.transform=d;const{x:p,y:g}=this.projectionDelta;o.transformOrigin=`${p.origin*100}% ${g.origin*100}% 0`,u.animationValues?o.opacity=u===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:o.opacity=u===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const y in Ty){if(h[y]===void 0)continue;const{correct:b,applyTo:x,isCSSVariable:w}=Ty[y],C=d==="none"?h[y]:b(h[y],u);if(x){const E=x.length;for(let _=0;_<E;_++)o[x[_]]=C}else w?this.options.visualElement.renderState.vars[y]=C:o[y]=C}this.options.layoutId&&(o.pointerEvents=u===this?h1(a?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(k4),this.root.sharedNodes.clear()}}}function Pue(t){t.updateLayout()}function Mue(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:i}=t.options,s=e.source!==t.layout.source;i==="size"?so(h=>{const d=s?e.measuredBox[h]:e.layoutBox[h],p=Fi(d);d.min=n[h].min,d.max=d.min+p}):OH(i,e.layoutBox,n)&&so(h=>{const d=s?e.measuredBox[h]:e.layoutBox[h],p=Fi(n[h]);d.max=d.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+p)});const o=ep();ay(o,n,e.layoutBox);const a=ep();s?ay(a,t.applyTransform(r,!0),e.measuredBox):ay(a,n,e.layoutBox);const l=!NH(o);let u=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:d,layout:p}=h;if(d&&p){const g=Kn();ly(g,e.layoutBox,d.layoutBox);const y=Kn();ly(y,n,p.layoutBox),RH(g,y)||(u=!0),h.options.layoutRoot&&(t.relativeTarget=y,t.relativeTargetOrigin=g,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:a,layoutDelta:o,hasLayoutChanged:l,hasRelativeLayoutChanged:u})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function Lue(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Fue(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Vue(t){t.clearSnapshot()}function k4(t){t.clearMeasurements()}function N4(t){t.isLayoutDirty=!1}function Bue(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function R4(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function zue(t){t.resolveTargetDelta()}function Uue(t){t.calcProjection()}function jue(t){t.resetSkewAndRotation()}function Wue(t){t.removeLeadSnapshot()}function D4(t,e,n){t.translate=Dn(e.translate,0,n),t.scale=Dn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function $4(t,e,n,r){t.min=Dn(e.min,n.min,r),t.max=Dn(e.max,n.max,r)}function Gue(t,e,n,r){$4(t.x,e.x,n.x,r),$4(t.y,e.y,n.y,r)}function Hue(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const que={duration:.45,ease:[.4,0,.1,1]},O4=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),P4=O4("applewebkit/")&&!O4("chrome/")?Math.round:go;function M4(t){t.min=P4(t.min),t.max=P4(t.max)}function Kue(t){M4(t.x),M4(t.y)}function OH(t,e,n){return t==="position"||t==="preserve-aspect"&&!eue(_4(e),_4(n),.2)}function Xue(t){return t!==t.root&&t.scroll?.wasRoot}const Yue=$H({attachResizeListener:(t,e)=>Cy(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),b_={current:void 0},PH=$H({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!b_.current){const t=new Yue({});t.mount(window),t.setOptions({layoutScroll:!0}),b_.current=t}return b_.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Que={pan:{Feature:mue},drag:{Feature:pue,ProjectionNode:PH,MeasureLayout:_H}};function L4(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&An.postRender(()=>s(e,lv(e)))}class Zue extends Fc{mount(){const{current:e}=this.node;e&&(this.unmount=Cae(e,(n,r)=>(L4(this.node,r,"Start"),i=>L4(this.node,i,"End"))))}unmount(){}}class Jue extends Fc{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=sv(Cy(this.node.current,"focus",()=>this.onFocus()),Cy(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function F4(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&An.postRender(()=>s(e,lv(e)))}class ece extends Fc{mount(){const{current:e}=this.node;e&&(this.unmount=Aae(e,(n,r)=>(F4(this.node,r,"Start"),(i,{success:s})=>F4(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Jk=new WeakMap,x_=new WeakMap,tce=t=>{const e=Jk.get(t.target);e&&e(t)},nce=t=>{t.forEach(tce)};function rce({root:t,...e}){const n=t||document;x_.has(n)||x_.set(n,{});const r=x_.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(nce,{root:t,...e})),r[i]}function ice(t,e,n){const r=rce(e);return Jk.set(t,n),r.observe(t),()=>{Jk.delete(t),r.unobserve(t)}}const sce={some:0,all:1};class oce extends Fc{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:sce[i]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:h,onViewportLeave:d}=this.node.getProps(),p=u?h:d;p&&p(l)};return ice(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(ace(e,n))&&this.startObserver()}unmount(){}}function ace({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const lce={inView:{Feature:oce},tap:{Feature:ece},focus:{Feature:Jue},hover:{Feature:Zue}},uce={layout:{ProjectionNode:PH,MeasureLayout:_H}},cce={...Kle,...lce,...Que,...uce},hce=cle(cce,Tle),fce=()=>{};var V4={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MH=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},dce=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},LH={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let p=(a&15)<<2|u>>6,g=u&63;l||(g=64,o||(p=64)),r.push(n[h],n[d],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(MH(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):dce(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||d==null)throw new pce;const p=s<<2|a>>4;if(r.push(p),u!==64){const g=a<<4&240|u>>2;if(r.push(g),d!==64){const y=u<<6&192|d;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class pce extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const mce=function(t){const e=MH(t);return LH.encodeByteArray(e,!0)},B1=function(t){return mce(t).replace(/\./g,"")},FH=function(t){try{return LH.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gce(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yce=()=>gce().__FIREBASE_DEFAULTS__,vce=()=>{if(typeof process>"u"||typeof V4>"u")return;const t=V4.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},bce=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&FH(t[1]);return e&&JSON.parse(e)},_S=()=>{try{return fce()||yce()||vce()||bce()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},VH=t=>_S()?.emulatorHosts?.[t],xce=t=>{const e=VH(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},BH=()=>_S()?.config,zH=t=>_S()?.[`_${t}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wce{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jp(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function UH(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sce(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[B1(JSON.stringify(n)),B1(JSON.stringify(o)),""].join(".")}const uy={};function Tce(){const t={prod:[],emulator:[]};for(const e of Object.keys(uy))uy[e]?t.emulator.push(e):t.prod.push(e);return t}function Cce(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let B4=!1;function jH(t,e){if(typeof window>"u"||typeof document>"u"||!Jp(window.location.host)||uy[t]===e||uy[t]||B4)return;uy[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",s=Tce().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,g){p.setAttribute("width","24"),p.setAttribute("id",g),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{B4=!0,o()},p}function h(p,g){p.setAttribute("id",g),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function d(){const p=Cce(r),g=n("text"),y=document.getElementById(g)||document.createElement("span"),b=n("learnmore"),x=document.getElementById(b)||document.createElement("a"),w=n("preprendIcon"),C=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const E=p.element;a(E),h(x,b);const _=u();l(C,w),E.append(C,y,x,_),document.body.appendChild(E)}s?(y.innerText="Preview backend disconnected.",C.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(C.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,y.innerText="Preview backend running in this workspace."),y.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ii(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ece(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ii())}function Ice(){const t=_S()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _ce(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function WH(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Ace(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function kce(){const t=Ii();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Nce(){return!Ice()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function GH(){try{return typeof indexedDB=="object"}catch{return!1}}function HH(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}function Rce(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dce="FirebaseError";class sa extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Dce,Object.setPrototypeOf(this,sa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Rf.prototype.create)}}class Rf{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?$ce(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new sa(i,a,r)}}function $ce(t,e){return t.replace(Oce,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Oce=/\{\$([^}]+)}/g;function Pce(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Sc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(z4(s)&&z4(o)){if(!Sc(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function z4(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uv(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Mce(t,e){const n=new Lce(t,e);return n.subscribe.bind(n)}class Lce{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Fce(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=w_),i.error===void 0&&(i.error=w_),i.complete===void 0&&(i.complete=w_);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Fce(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function w_(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vce=1e3,Bce=2,zce=14400*1e3,Uce=.5;function U4(t,e=Vce,n=Bce){const r=e*Math.pow(n,t),i=Math.round(Uce*r*(Math.random()-.5)*2);return Math.min(zce,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hs(t){return t&&t._delegate?t._delegate:t}class ea{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dh="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jce=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new wce;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Gce(e))try{this.getOrInitializeService({instanceIdentifier:Dh})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Dh){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Dh){return this.instances.has(e)}getOptions(e=Dh){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Wce(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Dh){return this.component?this.component.multipleInstances?e:Dh:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Wce(t){return t===Dh?void 0:t}function Gce(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hce{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new jce(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(kt||(kt={}));const qce={debug:kt.DEBUG,verbose:kt.VERBOSE,info:kt.INFO,warn:kt.WARN,error:kt.ERROR,silent:kt.SILENT},Kce=kt.INFO,Xce={[kt.DEBUG]:"log",[kt.VERBOSE]:"log",[kt.INFO]:"info",[kt.WARN]:"warn",[kt.ERROR]:"error"},Yce=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Xce[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let AS=class{constructor(e){this.name=e,this._logLevel=Kce,this._logHandler=Yce,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in kt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?qce[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,kt.DEBUG,...e),this._logHandler(this,kt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,kt.VERBOSE,...e),this._logHandler(this,kt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,kt.INFO,...e),this._logHandler(this,kt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,kt.WARN,...e),this._logHandler(this,kt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,kt.ERROR,...e),this._logHandler(this,kt.ERROR,...e)}};const Qce=(t,e)=>e.some(n=>t instanceof n);let j4,W4;function Zce(){return j4||(j4=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Jce(){return W4||(W4=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const qH=new WeakMap,e2=new WeakMap,KH=new WeakMap,S_=new WeakMap,FR=new WeakMap;function ehe(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(uc(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&qH.set(n,t)}).catch(()=>{}),FR.set(e,t),e}function the(t){if(e2.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});e2.set(t,e)}let t2={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return e2.get(t);if(e==="objectStoreNames")return t.objectStoreNames||KH.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return uc(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function nhe(t){t2=t(t2)}function rhe(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(T_(this),e,...n);return KH.set(r,e.sort?e.sort():[e]),uc(r)}:Jce().includes(t)?function(...e){return t.apply(T_(this),e),uc(qH.get(this))}:function(...e){return uc(t.apply(T_(this),e))}}function ihe(t){return typeof t=="function"?rhe(t):(t instanceof IDBTransaction&&the(t),Qce(t,Zce())?new Proxy(t,t2):t)}function uc(t){if(t instanceof IDBRequest)return ehe(t);if(S_.has(t))return S_.get(t);const e=ihe(t);return e!==t&&(S_.set(t,e),FR.set(e,t)),e}const T_=t=>FR.get(t);function XH(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=uc(o);return r&&o.addEventListener("upgradeneeded",l=>{r(uc(o.result),l.oldVersion,l.newVersion,uc(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const she=["get","getKey","getAll","getAllKeys","count"],ohe=["put","add","delete","clear"],C_=new Map;function G4(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(C_.get(e))return C_.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=ohe.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||she.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return C_.set(e,s),s}nhe(t=>({...t,get:(e,n,r)=>G4(e,n)||t.get(e,n,r),has:(e,n)=>!!G4(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ahe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(lhe(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function lhe(t){return t.getComponent()?.type==="VERSION"}const n2="@firebase/app",H4="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gl=new AS("@firebase/app"),uhe="@firebase/app-compat",che="@firebase/analytics-compat",hhe="@firebase/analytics",fhe="@firebase/app-check-compat",dhe="@firebase/app-check",phe="@firebase/auth",mhe="@firebase/auth-compat",ghe="@firebase/database",yhe="@firebase/data-connect",vhe="@firebase/database-compat",bhe="@firebase/functions",xhe="@firebase/functions-compat",whe="@firebase/installations",She="@firebase/installations-compat",The="@firebase/messaging",Che="@firebase/messaging-compat",Ehe="@firebase/performance",Ihe="@firebase/performance-compat",_he="@firebase/remote-config",Ahe="@firebase/remote-config-compat",khe="@firebase/storage",Nhe="@firebase/storage-compat",Rhe="@firebase/firestore",Dhe="@firebase/ai",$he="@firebase/firestore-compat",Ohe="firebase",Phe="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2="[DEFAULT]",Mhe={[n2]:"fire-core",[uhe]:"fire-core-compat",[hhe]:"fire-analytics",[che]:"fire-analytics-compat",[dhe]:"fire-app-check",[fhe]:"fire-app-check-compat",[phe]:"fire-auth",[mhe]:"fire-auth-compat",[ghe]:"fire-rtdb",[yhe]:"fire-data-connect",[vhe]:"fire-rtdb-compat",[bhe]:"fire-fn",[xhe]:"fire-fn-compat",[whe]:"fire-iid",[She]:"fire-iid-compat",[The]:"fire-fcm",[Che]:"fire-fcm-compat",[Ehe]:"fire-perf",[Ihe]:"fire-perf-compat",[_he]:"fire-rc",[Ahe]:"fire-rc-compat",[khe]:"fire-gcs",[Nhe]:"fire-gcs-compat",[Rhe]:"fire-fst",[$he]:"fire-fst-compat",[Dhe]:"fire-vertex","fire-js":"fire-js",[Ohe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1=new Map,Lhe=new Map,i2=new Map;function q4(t,e){try{t.container.addComponent(e)}catch(n){Gl.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Za(t){const e=t.name;if(i2.has(e))return Gl.debug(`There were multiple attempts to register component ${e}.`),!1;i2.set(e,t);for(const n of z1.values())q4(n,t);for(const n of Lhe.values())q4(n,t);return!0}function Df(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Go(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fhe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},cc=new Rf("app","Firebase",Fhe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vhe{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ea("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw cc.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const em=Phe;function YH(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:r2,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw cc.create("bad-app-name",{appName:String(i)});if(n||(n=BH()),!n)throw cc.create("no-options");const s=z1.get(i);if(s){if(Sc(n,s.options)&&Sc(r,s.config))return s;throw cc.create("duplicate-app",{appName:i})}const o=new Hce(i);for(const l of i2.values())o.addComponent(l);const a=new Vhe(n,r,o);return z1.set(i,a),a}function VR(t=r2){const e=z1.get(t);if(!e&&t===r2&&BH())return YH();if(!e)throw cc.create("no-app",{appName:t});return e}function yo(t,e,n){let r=Mhe[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Gl.warn(o.join(" "));return}Za(new ea(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bhe="firebase-heartbeat-database",zhe=1,Ey="firebase-heartbeat-store";let E_=null;function QH(){return E_||(E_=XH(Bhe,zhe,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ey)}catch(n){console.warn(n)}}}}).catch(t=>{throw cc.create("idb-open",{originalErrorMessage:t.message})})),E_}async function Uhe(t){try{const n=(await QH()).transaction(Ey),r=await n.objectStore(Ey).get(ZH(t));return await n.done,r}catch(e){if(e instanceof sa)Gl.warn(e.message);else{const n=cc.create("idb-get",{originalErrorMessage:e?.message});Gl.warn(n.message)}}}async function K4(t,e){try{const r=(await QH()).transaction(Ey,"readwrite");await r.objectStore(Ey).put(e,ZH(t)),await r.done}catch(n){if(n instanceof sa)Gl.warn(n.message);else{const r=cc.create("idb-set",{originalErrorMessage:n?.message});Gl.warn(r.message)}}}function ZH(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jhe=1024,Whe=30;class Ghe{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new qhe(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=X4();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>Whe){const i=Khe(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Gl.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=X4(),{heartbeatsToSend:n,unsentEntries:r}=Hhe(this._heartbeatsCache.heartbeats),i=B1(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Gl.warn(e),""}}}function X4(){return new Date().toISOString().substring(0,10)}function Hhe(t,e=jhe){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Y4(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Y4(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class qhe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return GH()?HH().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Uhe(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return K4(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return K4(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Y4(t){return B1(JSON.stringify({version:2,heartbeats:t})).length}function Khe(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xhe(t){Za(new ea("platform-logger",e=>new ahe(e),"PRIVATE")),Za(new ea("heartbeat",e=>new Ghe(e),"PRIVATE")),yo(n2,H4,t),yo(n2,H4,"esm2020"),yo("fire-js","")}Xhe("");var Q4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hc,JH;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,R){function D(){}D.prototype=R.prototype,N.F=R.prototype,N.prototype=new D,N.prototype.constructor=N,N.D=function(O,k,F){for(var L=Array(arguments.length-2),q=2;q<arguments.length;q++)L[q-2]=arguments[q];return R.prototype[k].apply(O,L)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(N,R,D){D||(D=0);const O=Array(16);if(typeof R=="string")for(var k=0;k<16;++k)O[k]=R.charCodeAt(D++)|R.charCodeAt(D++)<<8|R.charCodeAt(D++)<<16|R.charCodeAt(D++)<<24;else for(k=0;k<16;++k)O[k]=R[D++]|R[D++]<<8|R[D++]<<16|R[D++]<<24;R=N.g[0],D=N.g[1],k=N.g[2];let F=N.g[3],L;L=R+(F^D&(k^F))+O[0]+3614090360&4294967295,R=D+(L<<7&4294967295|L>>>25),L=F+(k^R&(D^k))+O[1]+3905402710&4294967295,F=R+(L<<12&4294967295|L>>>20),L=k+(D^F&(R^D))+O[2]+606105819&4294967295,k=F+(L<<17&4294967295|L>>>15),L=D+(R^k&(F^R))+O[3]+3250441966&4294967295,D=k+(L<<22&4294967295|L>>>10),L=R+(F^D&(k^F))+O[4]+4118548399&4294967295,R=D+(L<<7&4294967295|L>>>25),L=F+(k^R&(D^k))+O[5]+1200080426&4294967295,F=R+(L<<12&4294967295|L>>>20),L=k+(D^F&(R^D))+O[6]+2821735955&4294967295,k=F+(L<<17&4294967295|L>>>15),L=D+(R^k&(F^R))+O[7]+4249261313&4294967295,D=k+(L<<22&4294967295|L>>>10),L=R+(F^D&(k^F))+O[8]+1770035416&4294967295,R=D+(L<<7&4294967295|L>>>25),L=F+(k^R&(D^k))+O[9]+2336552879&4294967295,F=R+(L<<12&4294967295|L>>>20),L=k+(D^F&(R^D))+O[10]+4294925233&4294967295,k=F+(L<<17&4294967295|L>>>15),L=D+(R^k&(F^R))+O[11]+2304563134&4294967295,D=k+(L<<22&4294967295|L>>>10),L=R+(F^D&(k^F))+O[12]+1804603682&4294967295,R=D+(L<<7&4294967295|L>>>25),L=F+(k^R&(D^k))+O[13]+4254626195&4294967295,F=R+(L<<12&4294967295|L>>>20),L=k+(D^F&(R^D))+O[14]+2792965006&4294967295,k=F+(L<<17&4294967295|L>>>15),L=D+(R^k&(F^R))+O[15]+1236535329&4294967295,D=k+(L<<22&4294967295|L>>>10),L=R+(k^F&(D^k))+O[1]+4129170786&4294967295,R=D+(L<<5&4294967295|L>>>27),L=F+(D^k&(R^D))+O[6]+3225465664&4294967295,F=R+(L<<9&4294967295|L>>>23),L=k+(R^D&(F^R))+O[11]+643717713&4294967295,k=F+(L<<14&4294967295|L>>>18),L=D+(F^R&(k^F))+O[0]+3921069994&4294967295,D=k+(L<<20&4294967295|L>>>12),L=R+(k^F&(D^k))+O[5]+3593408605&4294967295,R=D+(L<<5&4294967295|L>>>27),L=F+(D^k&(R^D))+O[10]+38016083&4294967295,F=R+(L<<9&4294967295|L>>>23),L=k+(R^D&(F^R))+O[15]+3634488961&4294967295,k=F+(L<<14&4294967295|L>>>18),L=D+(F^R&(k^F))+O[4]+3889429448&4294967295,D=k+(L<<20&4294967295|L>>>12),L=R+(k^F&(D^k))+O[9]+568446438&4294967295,R=D+(L<<5&4294967295|L>>>27),L=F+(D^k&(R^D))+O[14]+3275163606&4294967295,F=R+(L<<9&4294967295|L>>>23),L=k+(R^D&(F^R))+O[3]+4107603335&4294967295,k=F+(L<<14&4294967295|L>>>18),L=D+(F^R&(k^F))+O[8]+1163531501&4294967295,D=k+(L<<20&4294967295|L>>>12),L=R+(k^F&(D^k))+O[13]+2850285829&4294967295,R=D+(L<<5&4294967295|L>>>27),L=F+(D^k&(R^D))+O[2]+4243563512&4294967295,F=R+(L<<9&4294967295|L>>>23),L=k+(R^D&(F^R))+O[7]+1735328473&4294967295,k=F+(L<<14&4294967295|L>>>18),L=D+(F^R&(k^F))+O[12]+2368359562&4294967295,D=k+(L<<20&4294967295|L>>>12),L=R+(D^k^F)+O[5]+4294588738&4294967295,R=D+(L<<4&4294967295|L>>>28),L=F+(R^D^k)+O[8]+2272392833&4294967295,F=R+(L<<11&4294967295|L>>>21),L=k+(F^R^D)+O[11]+1839030562&4294967295,k=F+(L<<16&4294967295|L>>>16),L=D+(k^F^R)+O[14]+4259657740&4294967295,D=k+(L<<23&4294967295|L>>>9),L=R+(D^k^F)+O[1]+2763975236&4294967295,R=D+(L<<4&4294967295|L>>>28),L=F+(R^D^k)+O[4]+1272893353&4294967295,F=R+(L<<11&4294967295|L>>>21),L=k+(F^R^D)+O[7]+4139469664&4294967295,k=F+(L<<16&4294967295|L>>>16),L=D+(k^F^R)+O[10]+3200236656&4294967295,D=k+(L<<23&4294967295|L>>>9),L=R+(D^k^F)+O[13]+681279174&4294967295,R=D+(L<<4&4294967295|L>>>28),L=F+(R^D^k)+O[0]+3936430074&4294967295,F=R+(L<<11&4294967295|L>>>21),L=k+(F^R^D)+O[3]+3572445317&4294967295,k=F+(L<<16&4294967295|L>>>16),L=D+(k^F^R)+O[6]+76029189&4294967295,D=k+(L<<23&4294967295|L>>>9),L=R+(D^k^F)+O[9]+3654602809&4294967295,R=D+(L<<4&4294967295|L>>>28),L=F+(R^D^k)+O[12]+3873151461&4294967295,F=R+(L<<11&4294967295|L>>>21),L=k+(F^R^D)+O[15]+530742520&4294967295,k=F+(L<<16&4294967295|L>>>16),L=D+(k^F^R)+O[2]+3299628645&4294967295,D=k+(L<<23&4294967295|L>>>9),L=R+(k^(D|~F))+O[0]+4096336452&4294967295,R=D+(L<<6&4294967295|L>>>26),L=F+(D^(R|~k))+O[7]+1126891415&4294967295,F=R+(L<<10&4294967295|L>>>22),L=k+(R^(F|~D))+O[14]+2878612391&4294967295,k=F+(L<<15&4294967295|L>>>17),L=D+(F^(k|~R))+O[5]+4237533241&4294967295,D=k+(L<<21&4294967295|L>>>11),L=R+(k^(D|~F))+O[12]+1700485571&4294967295,R=D+(L<<6&4294967295|L>>>26),L=F+(D^(R|~k))+O[3]+2399980690&4294967295,F=R+(L<<10&4294967295|L>>>22),L=k+(R^(F|~D))+O[10]+4293915773&4294967295,k=F+(L<<15&4294967295|L>>>17),L=D+(F^(k|~R))+O[1]+2240044497&4294967295,D=k+(L<<21&4294967295|L>>>11),L=R+(k^(D|~F))+O[8]+1873313359&4294967295,R=D+(L<<6&4294967295|L>>>26),L=F+(D^(R|~k))+O[15]+4264355552&4294967295,F=R+(L<<10&4294967295|L>>>22),L=k+(R^(F|~D))+O[6]+2734768916&4294967295,k=F+(L<<15&4294967295|L>>>17),L=D+(F^(k|~R))+O[13]+1309151649&4294967295,D=k+(L<<21&4294967295|L>>>11),L=R+(k^(D|~F))+O[4]+4149444226&4294967295,R=D+(L<<6&4294967295|L>>>26),L=F+(D^(R|~k))+O[11]+3174756917&4294967295,F=R+(L<<10&4294967295|L>>>22),L=k+(R^(F|~D))+O[2]+718787259&4294967295,k=F+(L<<15&4294967295|L>>>17),L=D+(F^(k|~R))+O[9]+3951481745&4294967295,N.g[0]=N.g[0]+R&4294967295,N.g[1]=N.g[1]+(k+(L<<21&4294967295|L>>>11))&4294967295,N.g[2]=N.g[2]+k&4294967295,N.g[3]=N.g[3]+F&4294967295}r.prototype.v=function(N,R){R===void 0&&(R=N.length);const D=R-this.blockSize,O=this.C;let k=this.h,F=0;for(;F<R;){if(k==0)for(;F<=D;)i(this,N,F),F+=this.blockSize;if(typeof N=="string"){for(;F<R;)if(O[k++]=N.charCodeAt(F++),k==this.blockSize){i(this,O),k=0;break}}else for(;F<R;)if(O[k++]=N[F++],k==this.blockSize){i(this,O),k=0;break}}this.h=k,this.o+=R},r.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var R=1;R<N.length-8;++R)N[R]=0;R=this.o*8;for(var D=N.length-8;D<N.length;++D)N[D]=R&255,R/=256;for(this.v(N),N=Array(16),R=0,D=0;D<4;++D)for(let O=0;O<32;O+=8)N[R++]=this.g[D]>>>O&255;return N};function s(N,R){var D=a;return Object.prototype.hasOwnProperty.call(D,N)?D[N]:D[N]=R(N)}function o(N,R){this.h=R;const D=[];let O=!0;for(let k=N.length-1;k>=0;k--){const F=N[k]|0;O&&F==R||(D[k]=F,O=!1)}this.g=D}var a={};function l(N){return-128<=N&&N<128?s(N,function(R){return new o([R|0],R<0?-1:0)}):new o([N|0],N<0?-1:0)}function u(N){if(isNaN(N)||!isFinite(N))return d;if(N<0)return x(u(-N));const R=[];let D=1;for(let O=0;N>=D;O++)R[O]=N/D|0,D*=4294967296;return new o(R,0)}function h(N,R){if(N.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(N.charAt(0)=="-")return x(h(N.substring(1),R));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const D=u(Math.pow(R,8));let O=d;for(let F=0;F<N.length;F+=8){var k=Math.min(8,N.length-F);const L=parseInt(N.substring(F,F+k),R);k<8?(k=u(Math.pow(R,k)),O=O.j(k).add(u(L))):(O=O.j(D),O=O.add(u(L)))}return O}var d=l(0),p=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(b(this))return-x(this).m();let N=0,R=1;for(let D=0;D<this.g.length;D++){const O=this.i(D);N+=(O>=0?O:4294967296+O)*R,R*=4294967296}return N},t.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(y(this))return"0";if(b(this))return"-"+x(this).toString(N);const R=u(Math.pow(N,6));var D=this;let O="";for(;;){const k=_(D,R).g;D=w(D,k.j(R));let F=((D.g.length>0?D.g[0]:D.h)>>>0).toString(N);if(D=k,y(D))return F+O;for(;F.length<6;)F="0"+F;O=F+O}},t.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function y(N){if(N.h!=0)return!1;for(let R=0;R<N.g.length;R++)if(N.g[R]!=0)return!1;return!0}function b(N){return N.h==-1}t.l=function(N){return N=w(this,N),b(N)?-1:y(N)?0:1};function x(N){const R=N.g.length,D=[];for(let O=0;O<R;O++)D[O]=~N.g[O];return new o(D,~N.h).add(p)}t.abs=function(){return b(this)?x(this):this},t.add=function(N){const R=Math.max(this.g.length,N.g.length),D=[];let O=0;for(let k=0;k<=R;k++){let F=O+(this.i(k)&65535)+(N.i(k)&65535),L=(F>>>16)+(this.i(k)>>>16)+(N.i(k)>>>16);O=L>>>16,F&=65535,L&=65535,D[k]=L<<16|F}return new o(D,D[D.length-1]&-2147483648?-1:0)};function w(N,R){return N.add(x(R))}t.j=function(N){if(y(this)||y(N))return d;if(b(this))return b(N)?x(this).j(x(N)):x(x(this).j(N));if(b(N))return x(this.j(x(N)));if(this.l(g)<0&&N.l(g)<0)return u(this.m()*N.m());const R=this.g.length+N.g.length,D=[];for(var O=0;O<2*R;O++)D[O]=0;for(O=0;O<this.g.length;O++)for(let k=0;k<N.g.length;k++){const F=this.i(O)>>>16,L=this.i(O)&65535,q=N.i(k)>>>16,Y=N.i(k)&65535;D[2*O+2*k]+=L*Y,C(D,2*O+2*k),D[2*O+2*k+1]+=F*Y,C(D,2*O+2*k+1),D[2*O+2*k+1]+=L*q,C(D,2*O+2*k+1),D[2*O+2*k+2]+=F*q,C(D,2*O+2*k+2)}for(N=0;N<R;N++)D[N]=D[2*N+1]<<16|D[2*N];for(N=R;N<2*R;N++)D[N]=0;return new o(D,0)};function C(N,R){for(;(N[R]&65535)!=N[R];)N[R+1]+=N[R]>>>16,N[R]&=65535,R++}function E(N,R){this.g=N,this.h=R}function _(N,R){if(y(R))throw Error("division by zero");if(y(N))return new E(d,d);if(b(N))return R=_(x(N),R),new E(x(R.g),x(R.h));if(b(R))return R=_(N,x(R)),new E(x(R.g),R.h);if(N.g.length>30){if(b(N)||b(R))throw Error("slowDivide_ only works with positive integers.");for(var D=p,O=R;O.l(N)<=0;)D=A(D),O=A(O);var k=P(D,1),F=P(O,1);for(O=P(O,2),D=P(D,2);!y(O);){var L=F.add(O);L.l(N)<=0&&(k=k.add(D),F=L),O=P(O,1),D=P(D,1)}return R=w(N,k.j(R)),new E(k,R)}for(k=d;N.l(R)>=0;){for(D=Math.max(1,Math.floor(N.m()/R.m())),O=Math.ceil(Math.log(D)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),F=u(D),L=F.j(R);b(L)||L.l(N)>0;)D-=O,F=u(D),L=F.j(R);y(F)&&(F=p),k=k.add(F),N=w(N,L)}return new E(k,N)}t.B=function(N){return _(this,N).h},t.and=function(N){const R=Math.max(this.g.length,N.g.length),D=[];for(let O=0;O<R;O++)D[O]=this.i(O)&N.i(O);return new o(D,this.h&N.h)},t.or=function(N){const R=Math.max(this.g.length,N.g.length),D=[];for(let O=0;O<R;O++)D[O]=this.i(O)|N.i(O);return new o(D,this.h|N.h)},t.xor=function(N){const R=Math.max(this.g.length,N.g.length),D=[];for(let O=0;O<R;O++)D[O]=this.i(O)^N.i(O);return new o(D,this.h^N.h)};function A(N){const R=N.g.length+1,D=[];for(let O=0;O<R;O++)D[O]=N.i(O)<<1|N.i(O-1)>>>31;return new o(D,N.h)}function P(N,R){const D=R>>5;R%=32;const O=N.g.length-D,k=[];for(let F=0;F<O;F++)k[F]=R>0?N.i(F+D)>>>R|N.i(F+D+1)<<32-R:N.i(F+D);return new o(k,N.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,JH=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,hc=o}).apply(typeof Q4<"u"?Q4:typeof self<"u"?self:typeof window<"u"?window:{});var _x=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var eq,qg,tq,d1,s2,nq,rq,iq;(function(){var t,e=Object.defineProperty;function n(S){S=[typeof globalThis=="object"&&globalThis,S,typeof window=="object"&&window,typeof self=="object"&&self,typeof _x=="object"&&_x];for(var $=0;$<S.length;++$){var V=S[$];if(V&&V.Math==Math)return V}throw Error("Cannot find global object")}var r=n(this);function i(S,$){if($)e:{var V=r;S=S.split(".");for(var G=0;G<S.length-1;G++){var he=S[G];if(!(he in V))break e;V=V[he]}S=S[S.length-1],G=V[S],$=$(G),$!=G&&$!=null&&e(V,S,{configurable:!0,writable:!0,value:$})}}i("Symbol.dispose",function(S){return S||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(S){return S||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(S){return S||function($){var V=[],G;for(G in $)Object.prototype.hasOwnProperty.call($,G)&&V.push([G,$[G]]);return V}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function a(S){var $=typeof S;return $=="object"&&S!=null||$=="function"}function l(S,$,V){return S.call.apply(S.bind,arguments)}function u(S,$,V){return u=l,u.apply(null,arguments)}function h(S,$){var V=Array.prototype.slice.call(arguments,1);return function(){var G=V.slice();return G.push.apply(G,arguments),S.apply(this,G)}}function d(S,$){function V(){}V.prototype=$.prototype,S.Z=$.prototype,S.prototype=new V,S.prototype.constructor=S,S.Ob=function(G,he,be){for(var Pe=Array(arguments.length-2),mt=2;mt<arguments.length;mt++)Pe[mt-2]=arguments[mt];return $.prototype[he].apply(G,Pe)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?S=>S&&AsyncContext.Snapshot.wrap(S):S=>S;function g(S){const $=S.length;if($>0){const V=Array($);for(let G=0;G<$;G++)V[G]=S[G];return V}return[]}function y(S,$){for(let G=1;G<arguments.length;G++){const he=arguments[G];var V=typeof he;if(V=V!="object"?V:he?Array.isArray(he)?"array":V:"null",V=="array"||V=="object"&&typeof he.length=="number"){V=S.length||0;const be=he.length||0;S.length=V+be;for(let Pe=0;Pe<be;Pe++)S[V+Pe]=he[Pe]}else S.push(he)}}class b{constructor($,V){this.i=$,this.j=V,this.h=0,this.g=null}get(){let $;return this.h>0?(this.h--,$=this.g,this.g=$.next,$.next=null):$=this.i(),$}}function x(S){o.setTimeout(()=>{throw S},0)}function w(){var S=N;let $=null;return S.g&&($=S.g,S.g=S.g.next,S.g||(S.h=null),$.next=null),$}class C{constructor(){this.h=this.g=null}add($,V){const G=E.get();G.set($,V),this.h?this.h.next=G:this.g=G,this.h=G}}var E=new b(()=>new _,S=>S.reset());class _{constructor(){this.next=this.g=this.h=null}set($,V){this.h=$,this.g=V,this.next=null}reset(){this.next=this.g=this.h=null}}let A,P=!1,N=new C,R=()=>{const S=Promise.resolve(void 0);A=()=>{S.then(D)}};function D(){for(var S;S=w();){try{S.h.call(S.g)}catch(V){x(V)}var $=E;$.j(S),$.h<100&&($.h++,S.next=$.g,$.g=S)}P=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(S,$){this.type=S,this.g=this.target=$,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var F=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var S=!1,$=Object.defineProperty({},"passive",{get:function(){S=!0}});try{const V=()=>{};o.addEventListener("test",V,$),o.removeEventListener("test",V,$)}catch{}return S})();function L(S){return/^[\s\xa0]*$/.test(S)}function q(S,$){k.call(this,S?S.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,S&&this.init(S,$)}d(q,k),q.prototype.init=function(S,$){const V=this.type=S.type,G=S.changedTouches&&S.changedTouches.length?S.changedTouches[0]:null;this.target=S.target||S.srcElement,this.g=$,$=S.relatedTarget,$||(V=="mouseover"?$=S.fromElement:V=="mouseout"&&($=S.toElement)),this.relatedTarget=$,G?(this.clientX=G.clientX!==void 0?G.clientX:G.pageX,this.clientY=G.clientY!==void 0?G.clientY:G.pageY,this.screenX=G.screenX||0,this.screenY=G.screenY||0):(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0),this.button=S.button,this.key=S.key||"",this.ctrlKey=S.ctrlKey,this.altKey=S.altKey,this.shiftKey=S.shiftKey,this.metaKey=S.metaKey,this.pointerId=S.pointerId||0,this.pointerType=S.pointerType,this.state=S.state,this.i=S,S.defaultPrevented&&q.Z.h.call(this)},q.prototype.h=function(){q.Z.h.call(this);const S=this.i;S.preventDefault?S.preventDefault():S.returnValue=!1};var Y="closure_listenable_"+(Math.random()*1e6|0),W=0;function H(S,$,V,G,he){this.listener=S,this.proxy=null,this.src=$,this.type=V,this.capture=!!G,this.ha=he,this.key=++W,this.da=this.fa=!1}function X(S){S.da=!0,S.listener=null,S.proxy=null,S.src=null,S.ha=null}function ee(S,$,V){for(const G in S)$.call(V,S[G],G,S)}function ce(S,$){for(const V in S)$.call(void 0,S[V],V,S)}function j(S){const $={};for(const V in S)$[V]=S[V];return $}const Q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ie(S,$){let V,G;for(let he=1;he<arguments.length;he++){G=arguments[he];for(V in G)S[V]=G[V];for(let be=0;be<Q.length;be++)V=Q[be],Object.prototype.hasOwnProperty.call(G,V)&&(S[V]=G[V])}}function me(S){this.src=S,this.g={},this.h=0}me.prototype.add=function(S,$,V,G,he){const be=S.toString();S=this.g[be],S||(S=this.g[be]=[],this.h++);const Pe=_e(S,$,G,he);return Pe>-1?($=S[Pe],V||($.fa=!1)):($=new H($,this.src,be,!!G,he),$.fa=V,S.push($)),$};function ve(S,$){const V=$.type;if(V in S.g){var G=S.g[V],he=Array.prototype.indexOf.call(G,$,void 0),be;(be=he>=0)&&Array.prototype.splice.call(G,he,1),be&&(X($),S.g[V].length==0&&(delete S.g[V],S.h--))}}function _e(S,$,V,G){for(let he=0;he<S.length;++he){const be=S[he];if(!be.da&&be.listener==$&&be.capture==!!V&&be.ha==G)return he}return-1}var De="closure_lm_"+(Math.random()*1e6|0),Fe={};function ue(S,$,V,G,he){if(Array.isArray($)){for(let be=0;be<$.length;be++)ue(S,$[be],V,G,he);return null}return V=Mt(V),S&&S[Y]?S.J($,V,a(G)?!!G.capture:!1,he):Oe(S,$,V,!1,G,he)}function Oe(S,$,V,G,he,be){if(!$)throw Error("Invalid event type");const Pe=a(he)?!!he.capture:!!he;let mt=nt(S);if(mt||(S[De]=mt=new me(S)),V=mt.add($,V,G,Pe,be),V.proxy)return V;if(G=Me(),V.proxy=G,G.src=S,G.listener=V,S.addEventListener)F||(he=Pe),he===void 0&&(he=!1),S.addEventListener($.toString(),G,he);else if(S.attachEvent)S.attachEvent(He($.toString()),G);else if(S.addListener&&S.removeListener)S.addListener(G);else throw Error("addEventListener and attachEvent are unavailable.");return V}function Me(){function S(V){return $.call(S.src,S.listener,V)}const $=ut;return S}function Ce(S,$,V,G,he){if(Array.isArray($))for(var be=0;be<$.length;be++)Ce(S,$[be],V,G,he);else G=a(G)?!!G.capture:!!G,V=Mt(V),S&&S[Y]?(S=S.i,be=String($).toString(),be in S.g&&($=S.g[be],V=_e($,V,G,he),V>-1&&(X($[V]),Array.prototype.splice.call($,V,1),$.length==0&&(delete S.g[be],S.h--)))):S&&(S=nt(S))&&($=S.g[$.toString()],S=-1,$&&(S=_e($,V,G,he)),(V=S>-1?$[S]:null)&&ot(V))}function ot(S){if(typeof S!="number"&&S&&!S.da){var $=S.src;if($&&$[Y])ve($.i,S);else{var V=S.type,G=S.proxy;$.removeEventListener?$.removeEventListener(V,G,S.capture):$.detachEvent?$.detachEvent(He(V),G):$.addListener&&$.removeListener&&$.removeListener(G),(V=nt($))?(ve(V,S),V.h==0&&(V.src=null,$[De]=null)):X(S)}}}function He(S){return S in Fe?Fe[S]:Fe[S]="on"+S}function ut(S,$){if(S.da)S=!0;else{$=new q($,this);const V=S.listener,G=S.ha||S.src;S.fa&&ot(S),S=V.call(G,$)}return S}function nt(S){return S=S[De],S instanceof me?S:null}var Tt="__closure_events_fn_"+(Math.random()*1e9>>>0);function Mt(S){return typeof S=="function"?S:(S[Tt]||(S[Tt]=function($){return S.handleEvent($)}),S[Tt])}function qt(){O.call(this),this.i=new me(this),this.M=this,this.G=null}d(qt,O),qt.prototype[Y]=!0,qt.prototype.removeEventListener=function(S,$,V,G){Ce(this,S,$,V,G)};function Ct(S,$){var V,G=S.G;if(G)for(V=[];G;G=G.G)V.push(G);if(S=S.M,G=$.type||$,typeof $=="string")$=new k($,S);else if($ instanceof k)$.target=$.target||S;else{var he=$;$=new k(G,S),ie($,he)}he=!0;let be,Pe;if(V)for(Pe=V.length-1;Pe>=0;Pe--)be=$.g=V[Pe],he=Gr(be,G,!0,$)&&he;if(be=$.g=S,he=Gr(be,G,!0,$)&&he,he=Gr(be,G,!1,$)&&he,V)for(Pe=0;Pe<V.length;Pe++)be=$.g=V[Pe],he=Gr(be,G,!1,$)&&he}qt.prototype.N=function(){if(qt.Z.N.call(this),this.i){var S=this.i;for(const $ in S.g){const V=S.g[$];for(let G=0;G<V.length;G++)X(V[G]);delete S.g[$],S.h--}}this.G=null},qt.prototype.J=function(S,$,V,G){return this.i.add(String(S),$,!1,V,G)},qt.prototype.K=function(S,$,V,G){return this.i.add(String(S),$,!0,V,G)};function Gr(S,$,V,G){if($=S.i.g[String($)],!$)return!0;$=$.concat();let he=!0;for(let be=0;be<$.length;++be){const Pe=$[be];if(Pe&&!Pe.da&&Pe.capture==V){const mt=Pe.listener,Wn=Pe.ha||Pe.src;Pe.fa&&ve(S.i,Pe),he=mt.call(Wn,G)!==!1&&he}}return he&&!G.defaultPrevented}function Hr(S,$){if(typeof S!="function")if(S&&typeof S.handleEvent=="function")S=u(S.handleEvent,S);else throw Error("Invalid listener argument");return Number($)>2147483647?-1:o.setTimeout(S,$||0)}function Vs(S){S.g=Hr(()=>{S.g=null,S.i&&(S.i=!1,Vs(S))},S.l);const $=S.h;S.h=null,S.m.apply(null,$)}class cn extends O{constructor($,V){super(),this.m=$,this.l=V,this.h=null,this.i=!1,this.g=null}j($){this.h=arguments,this.g?this.i=!0:Vs(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qr(S){O.call(this),this.h=S,this.g={}}d(qr,O);var qi=[];function Ki(S){ee(S.g,function($,V){this.g.hasOwnProperty(V)&&ot($)},S),S.g={}}qr.prototype.N=function(){qr.Z.N.call(this),Ki(this)},qr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Kr=o.JSON.stringify,hl=o.JSON.parse,gu=class{stringify(S){return o.JSON.stringify(S,void 0)}parse(S){return o.JSON.parse(S,void 0)}};function yu(){}function Yf(){}var pi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function vr(){k.call(this,"d")}d(vr,k);function Xi(){k.call(this,"c")}d(Xi,k);var jn={},J0=null;function Qf(){return J0=J0||new qt}jn.Ia="serverreachability";function eb(S){k.call(this,jn.Ia,S)}d(eb,k);function la(S){const $=Qf();Ct($,new eb($))}jn.STAT_EVENT="statevent";function Jc(S,$){k.call(this,jn.STAT_EVENT,S),this.stat=$}d(Jc,k);function Jn(S){const $=Qf();Ct($,new Jc($,S))}jn.Ja="timingevent";function ua(S,$){k.call(this,jn.Ja,S),this.size=$}d(ua,k);function ca(S,$){if(typeof S!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){S()},$)}function ko(){this.g=!0}ko.prototype.ua=function(){this.g=!1};function iE(S,$,V,G,he,be){S.info(function(){if(S.g)if(be){var Pe="",mt=be.split("&");for(let Gt=0;Gt<mt.length;Gt++){var Wn=mt[Gt].split("=");if(Wn.length>1){const In=Wn[0];Wn=Wn[1];const js=In.split("_");Pe=js.length>=2&&js[1]=="type"?Pe+(In+"="+Wn+"&"):Pe+(In+"=redacted&")}}}else Pe=null;else Pe=be;return"XMLHTTP REQ ("+G+") [attempt "+he+"]: "+$+`
`+V+`
`+Pe})}function tb(S,$,V,G,he,be,Pe){S.info(function(){return"XMLHTTP RESP ("+G+") [ attempt "+he+"]: "+$+`
`+V+`
`+be+" "+Pe})}function ha(S,$,V,G){S.info(function(){return"XMLHTTP TEXT ("+$+"): "+sE(S,V)+(G?" "+G:"")})}function eh(S,$){S.info(function(){return"TIMEOUT: "+$})}ko.prototype.info=function(){};function sE(S,$){if(!S.g)return $;if(!$)return null;try{const be=JSON.parse($);if(be){for(S=0;S<be.length;S++)if(Array.isArray(be[S])){var V=be[S];if(!(V.length<2)){var G=V[1];if(Array.isArray(G)&&!(G.length<1)){var he=G[0];if(he!="noop"&&he!="stop"&&he!="close")for(let Pe=1;Pe<G.length;Pe++)G[Pe]=""}}}}return Kr(be)}catch{return $}}var th={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Dm={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},$m;function nh(){}d(nh,yu),nh.prototype.g=function(){return new XMLHttpRequest},$m=new nh;function fl(S){return encodeURIComponent(String(S))}function nb(S){var $=1;S=S.split(":");const V=[];for(;$>0&&S.length;)V.push(S.shift()),$--;return S.length&&V.push(S.join(":")),V}function No(S,$,V,G){this.j=S,this.i=$,this.l=V,this.S=G||1,this.V=new qr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ro}function Ro(){this.i=null,this.g="",this.h=!1}var er={},Dr={};function fa(S,$,V){S.M=1,S.A=rh(nr($)),S.u=V,S.R=!0,Zf(S,null)}function Zf(S,$){S.F=Date.now(),da(S),S.B=nr(S.A);var V=S.B,G=S.S;Array.isArray(G)||(G=[String(G)]),nd(V.i,"t",G),S.C=0,V=S.j.L,S.h=new Ro,S.g=yb(S.j,V?$:null,!S.u),S.P>0&&(S.O=new cn(u(S.Y,S,S.g),S.P)),$=S.V,V=S.g,G=S.ba;var he="readystatechange";Array.isArray(he)||(he&&(qi[0]=he.toString()),he=qi);for(let be=0;be<he.length;be++){const Pe=ue(V,he[be],G||$.handleEvent,!1,$.h||$);if(!Pe)break;$.g[Pe.key]=Pe}$=S.J?j(S.J):{},S.u?(S.v||(S.v="POST"),$["Content-Type"]="application/x-www-form-urlencoded",S.g.ea(S.B,S.v,S.u,$)):(S.v="GET",S.g.ea(S.B,S.v,null,$)),la(),iE(S.i,S.v,S.B,S.l,S.S,S.u)}No.prototype.ba=function(S){S=S.target;const $=this.O;$&&Oo(S)==3?$.j():this.Y(S)},No.prototype.Y=function(S){try{if(S==this.g)e:{const mt=Oo(this.g),Wn=this.g.ya(),Gt=this.g.ca();if(!(mt<3)&&(mt!=3||this.g&&(this.h.h||this.g.la()||Xr(this.g)))){this.K||mt!=4||Wn==7||(Wn==8||Gt<=0?la(3):la(2)),pa(this);var $=this.g.ca();this.X=$;var V=oE(this);if(this.o=$==200,tb(this.i,this.v,this.B,this.l,this.S,mt,$),this.o){if(this.U&&!this.L){t:{if(this.g){var G,he=this.g;if((G=he.g?he.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(G)){var be=G;break t}}be=null}if(S=be)ha(this.i,this.l,S,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ma(this,S);else{this.o=!1,this.m=3,Jn(12),ms(this),Bs(this);break e}}if(this.R){S=!0;let In;for(;!this.K&&this.C<V.length;)if(In=ib(this,V),In==Dr){mt==4&&(this.m=4,Jn(14),S=!1),ha(this.i,this.l,null,"[Incomplete Response]");break}else if(In==er){this.m=4,Jn(15),ha(this.i,this.l,V,"[Invalid Chunk]"),S=!1;break}else ha(this.i,this.l,In,null),ma(this,In);if(rb(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),mt!=4||V.length!=0||this.h.h||(this.m=1,Jn(16),S=!1),this.o=this.o&&S,!S)ha(this.i,this.l,V,"[Invalid Chunked Response]"),ms(this),Bs(this);else if(V.length>0&&!this.W){this.W=!0;var Pe=this.j;Pe.g==this&&Pe.aa&&!Pe.P&&(Pe.j.info("Great, no buffering proxy detected. Bytes received: "+V.length),Km(Pe),Pe.P=!0,Jn(11))}}else ha(this.i,this.l,V,null),ma(this,V);mt==4&&ms(this),this.o&&!this.K&&(mt==4?db(this.j,this):(this.o=!1,da(this)))}else pl(this.g),$==400&&V.indexOf("Unknown SID")>0?(this.m=3,Jn(12)):(this.m=0,Jn(13)),ms(this),Bs(this)}}}catch{}finally{}};function oE(S){if(!rb(S))return S.g.la();const $=Xr(S.g);if($==="")return"";let V="";const G=$.length,he=Oo(S.g)==4;if(!S.h.i){if(typeof TextDecoder>"u")return ms(S),Bs(S),"";S.h.i=new o.TextDecoder}for(let be=0;be<G;be++)S.h.h=!0,V+=S.h.i.decode($[be],{stream:!(he&&be==G-1)});return $.length=0,S.h.g+=V,S.C=0,S.h.g}function rb(S){return S.g?S.v=="GET"&&S.M!=2&&S.j.Aa:!1}function ib(S,$){var V=S.C,G=$.indexOf(`
`,V);return G==-1?Dr:(V=Number($.substring(V,G)),isNaN(V)?er:(G+=1,G+V>$.length?Dr:($=$.slice(G,G+V),S.C=G+V,$)))}No.prototype.cancel=function(){this.K=!0,ms(this)};function da(S){S.T=Date.now()+S.H,Jf(S,S.H)}function Jf(S,$){if(S.D!=null)throw Error("WatchDog timer not null");S.D=ca(u(S.aa,S),$)}function pa(S){S.D&&(o.clearTimeout(S.D),S.D=null)}No.prototype.aa=function(){this.D=null;const S=Date.now();S-this.T>=0?(eh(this.i,this.B),this.M!=2&&(la(),Jn(17)),ms(this),this.m=2,Bs(this)):Jf(this,this.T-S)};function Bs(S){S.j.I==0||S.K||db(S.j,S)}function ms(S){pa(S);var $=S.O;$&&typeof $.dispose=="function"&&$.dispose(),S.O=null,Ki(S.V),S.g&&($=S.g,S.g=null,$.abort(),$.dispose())}function ma(S,$){try{var V=S.j;if(V.I!=0&&(V.g==S||ya(V.h,S))){if(!S.L&&ya(V.h,S)&&V.I==3){try{var G=V.Ba.g.parse($)}catch{G=null}if(Array.isArray(G)&&G.length==3){var he=G;if(he[0]==0){e:if(!V.v){if(V.g)if(V.g.F+3e3<S.F)ad(V),Eu(V);else break e;ch(V),Jn(18)}}else V.xa=he[1],0<V.xa-V.K&&he[2]<37500&&V.F&&V.A==0&&!V.C&&(V.C=ca(u(V.Va,V),6e3));ga(V.h)<=1&&V.ta&&(V.ta=void 0)}else Ta(V,11)}else if((S.L||V.g==S)&&ad(V),!L($))for(he=V.Ba.g.parse($),$=0;$<he.length;$++){let Gt=he[$];const In=Gt[0];if(!(In<=V.K))if(V.K=In,Gt=Gt[1],V.I==2)if(Gt[0]=="c"){V.M=Gt[1],V.ba=Gt[2];const js=Gt[3];js!=null&&(V.ka=js,V.j.info("VER="+V.ka));const Ca=Gt[4];Ca!=null&&(V.za=Ca,V.j.info("SVER="+V.za));const Po=Gt[5];Po!=null&&typeof Po=="number"&&Po>0&&(G=1.5*Po,V.O=G,V.j.info("backChannelRequestTimeoutMs_="+G)),G=V;const Mo=S.g;if(Mo){const hh=Mo.g?Mo.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hh){var be=G.h;be.g||hh.indexOf("spdy")==-1&&hh.indexOf("quic")==-1&&hh.indexOf("h2")==-1||(be.j=be.l,be.g=new Set,be.h&&(Mm(be,be.h),be.h=null))}if(G.G){const ld=Mo.g?Mo.g.getResponseHeader("X-HTTP-Session-Id"):null;ld&&(G.wa=ld,Qt(G.J,G.G,ld))}}V.I=3,V.l&&V.l.ra(),V.aa&&(V.T=Date.now()-S.F,V.j.info("Handshake RTT: "+V.T+"ms")),G=V;var Pe=S;if(G.na=gb(G,G.L?G.ba:null,G.W),Pe.L){Lm(G.h,Pe);var mt=Pe,Wn=G.O;Wn&&(mt.H=Wn),mt.D&&(pa(mt),da(mt)),G.g=Pe}else hb(G);V.i.length>0&&Sa(V)}else Gt[0]!="stop"&&Gt[0]!="close"||Ta(V,7);else V.I==3&&(Gt[0]=="stop"||Gt[0]=="close"?Gt[0]=="stop"?Ta(V,7):Hm(V):Gt[0]!="noop"&&V.l&&V.l.qa(Gt),V.A=0)}}la(4)}catch{}}var tr=class{constructor(S,$){this.g=S,this.map=$}};function Om(S){this.l=S||10,o.PerformanceNavigationTiming?(S=o.performance.getEntriesByType("navigation"),S=S.length>0&&(S[0].nextHopProtocol=="hq"||S[0].nextHopProtocol=="h2")):S=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=S?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Pm(S){return S.h?!0:S.g?S.g.size>=S.j:!1}function ga(S){return S.h?1:S.g?S.g.size:0}function ya(S,$){return S.h?S.h==$:S.g?S.g.has($):!1}function Mm(S,$){S.g?S.g.add($):S.h=$}function Lm(S,$){S.h&&S.h==$?S.h=null:S.g&&S.g.has($)&&S.g.delete($)}Om.prototype.cancel=function(){if(this.i=Fm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const S of this.g.values())S.cancel();this.g.clear()}};function Fm(S){if(S.h!=null)return S.i.concat(S.h.G);if(S.g!=null&&S.g.size!==0){let $=S.i;for(const V of S.g.values())$=$.concat(V.G);return $}return g(S.i)}var sb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ed(S,$){if(S){S=S.split("&");for(let V=0;V<S.length;V++){const G=S[V].indexOf("=");let he,be=null;G>=0?(he=S[V].substring(0,G),be=S[V].substring(G+1)):he=S[V],$(he,be?decodeURIComponent(be.replace(/\+/g," ")):"")}}}function gs(S){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let $;S instanceof gs?(this.l=S.l,$r(this,S.j),this.o=S.o,this.g=S.g,vu(this,S.u),this.h=S.h,Vm(this,ub(S.i)),this.m=S.m):S&&($=String(S).match(sb))?(this.l=!1,$r(this,$[1]||"",!0),this.o=va($[2]||""),this.g=va($[3]||"",!0),vu(this,$[4]),this.h=va($[5]||"",!0),Vm(this,$[6]||"",!0),this.m=va($[7]||"")):(this.l=!1,this.i=new xu(null,this.l))}gs.prototype.toString=function(){const S=[];var $=this.j;$&&S.push(ih($,td,!0),":");var V=this.g;return(V||$=="file")&&(S.push("//"),($=this.o)&&S.push(ih($,td,!0),"@"),S.push(fl(V).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),V=this.u,V!=null&&S.push(":",String(V))),(V=this.h)&&(this.g&&V.charAt(0)!="/"&&S.push("/"),S.push(ih(V,V.charAt(0)=="/"?Bm:ob,!0))),(V=this.i.toString())&&S.push("?",V),(V=this.m)&&S.push("#",ih(V,ab)),S.join("")},gs.prototype.resolve=function(S){const $=nr(this);let V=!!S.j;V?$r($,S.j):V=!!S.o,V?$.o=S.o:V=!!S.g,V?$.g=S.g:V=S.u!=null;var G=S.h;if(V)vu($,S.u);else if(V=!!S.h){if(G.charAt(0)!="/")if(this.g&&!this.h)G="/"+G;else{var he=$.h.lastIndexOf("/");he!=-1&&(G=$.h.slice(0,he+1)+G)}if(he=G,he==".."||he==".")G="";else if(he.indexOf("./")!=-1||he.indexOf("/.")!=-1){G=he.lastIndexOf("/",0)==0,he=he.split("/");const be=[];for(let Pe=0;Pe<he.length;){const mt=he[Pe++];mt=="."?G&&Pe==he.length&&be.push(""):mt==".."?((be.length>1||be.length==1&&be[0]!="")&&be.pop(),G&&Pe==he.length&&be.push("")):(be.push(mt),G=!0)}G=be.join("/")}else G=he}return V?$.h=G:V=S.i.toString()!=="",V?Vm($,ub(S.i)):V=!!S.m,V&&($.m=S.m),$};function nr(S){return new gs(S)}function $r(S,$,V){S.j=V?va($,!0):$,S.j&&(S.j=S.j.replace(/:$/,""))}function vu(S,$){if($){if($=Number($),isNaN($)||$<0)throw Error("Bad port number "+$);S.u=$}else S.u=null}function Vm(S,$,V){$ instanceof xu?(S.i=$,rd(S.i,S.l)):(V||($=ih($,bu)),S.i=new xu($,S.l))}function Qt(S,$,V){S.i.set($,V)}function rh(S){return Qt(S,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),S}function va(S,$){return S?$?decodeURI(S.replace(/%25/g,"%2525")):decodeURIComponent(S):""}function ih(S,$,V){return typeof S=="string"?(S=encodeURI(S).replace($,Yi),V&&(S=S.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S):null}function Yi(S){return S=S.charCodeAt(0),"%"+(S>>4&15).toString(16)+(S&15).toString(16)}var td=/[#\/\?@]/g,ob=/[#\?:]/g,Bm=/[#\?]/g,bu=/[#\?@]/g,ab=/#/g;function xu(S,$){this.h=this.g=null,this.i=S||null,this.j=!!$}function Qi(S){S.g||(S.g=new Map,S.h=0,S.i&&ed(S.i,function($,V){S.add(decodeURIComponent($.replace(/\+/g," ")),V)}))}t=xu.prototype,t.add=function(S,$){Qi(this),this.i=null,S=wu(this,S);let V=this.g.get(S);return V||this.g.set(S,V=[]),V.push($),this.h+=1,this};function lb(S,$){Qi(S),$=wu(S,$),S.g.has($)&&(S.i=null,S.h-=S.g.get($).length,S.g.delete($))}function zm(S,$){return Qi(S),$=wu(S,$),S.g.has($)}t.forEach=function(S,$){Qi(this),this.g.forEach(function(V,G){V.forEach(function(he){S.call($,he,G,this)},this)},this)};function Um(S,$){Qi(S);let V=[];if(typeof $=="string")zm(S,$)&&(V=V.concat(S.g.get(wu(S,$))));else for(S=Array.from(S.g.values()),$=0;$<S.length;$++)V=V.concat(S[$]);return V}t.set=function(S,$){return Qi(this),this.i=null,S=wu(this,S),zm(this,S)&&(this.h-=this.g.get(S).length),this.g.set(S,[$]),this.h+=1,this},t.get=function(S,$){return S?(S=Um(this,S),S.length>0?String(S[0]):$):$};function nd(S,$,V){lb(S,$),V.length>0&&(S.i=null,S.g.set(wu(S,$),g(V)),S.h+=V.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const S=[],$=Array.from(this.g.keys());for(let G=0;G<$.length;G++){var V=$[G];const he=fl(V);V=Um(this,V);for(let be=0;be<V.length;be++){let Pe=he;V[be]!==""&&(Pe+="="+fl(V[be])),S.push(Pe)}}return this.i=S.join("&")};function ub(S){const $=new xu;return $.i=S.i,S.g&&($.g=new Map(S.g),$.h=S.h),$}function wu(S,$){return $=String($),S.j&&($=$.toLowerCase()),$}function rd(S,$){$&&!S.j&&(Qi(S),S.i=null,S.g.forEach(function(V,G){const he=G.toLowerCase();G!=he&&(lb(this,G),nd(this,he,V))},S)),S.j=$}function Do(S,$){const V=new ko;if(o.Image){const G=new Image;G.onload=h(zs,V,"TestLoadImage: loaded",!0,$,G),G.onerror=h(zs,V,"TestLoadImage: error",!1,$,G),G.onabort=h(zs,V,"TestLoadImage: abort",!1,$,G),G.ontimeout=h(zs,V,"TestLoadImage: timeout",!1,$,G),o.setTimeout(function(){G.ontimeout&&G.ontimeout()},1e4),G.src=S}else $(!1)}function jm(S,$){const V=new ko,G=new AbortController,he=setTimeout(()=>{G.abort(),zs(V,"TestPingServer: timeout",!1,$)},1e4);fetch(S,{signal:G.signal}).then(be=>{clearTimeout(he),be.ok?zs(V,"TestPingServer: ok",!0,$):zs(V,"TestPingServer: server error",!1,$)}).catch(()=>{clearTimeout(he),zs(V,"TestPingServer: error",!1,$)})}function zs(S,$,V,G,he){try{he&&(he.onload=null,he.onerror=null,he.onabort=null,he.ontimeout=null),G(V)}catch{}}function Su(){this.g=new gu}function ba(S){this.i=S.Sb||null,this.h=S.ab||!1}d(ba,yu),ba.prototype.g=function(){return new sh(this.i,this.h)};function sh(S,$){qt.call(this),this.H=S,this.o=$,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(sh,qt),t=sh.prototype,t.open=function(S,$){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=S,this.D=$,this.readyState=1,$o(this)},t.send=function(S){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const $={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};S&&($.body=S),(this.H||o).fetch(new Request(this.D,$)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Tu(this)),this.readyState=0},t.Pa=function(S){if(this.g&&(this.l=S,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=S.headers,this.readyState=2,$o(this)),this.g&&(this.readyState=3,$o(this),this.g)))if(this.responseType==="arraybuffer")S.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in S){if(this.j=S.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;id(this)}else S.text().then(this.Oa.bind(this),this.ga.bind(this))};function id(S){S.j.read().then(S.Ma.bind(S)).catch(S.ga.bind(S))}t.Ma=function(S){if(this.g){if(this.o&&S.value)this.response.push(S.value);else if(!this.o){var $=S.value?S.value:new Uint8Array(0);($=this.B.decode($,{stream:!S.done}))&&(this.response=this.responseText+=$)}S.done?Tu(this):$o(this),this.readyState==3&&id(this)}},t.Oa=function(S){this.g&&(this.response=this.responseText=S,Tu(this))},t.Na=function(S){this.g&&(this.response=S,Tu(this))},t.ga=function(){this.g&&Tu(this)};function Tu(S){S.readyState=4,S.l=null,S.j=null,S.B=null,$o(S)}t.setRequestHeader=function(S,$){this.A.append(S,$)},t.getResponseHeader=function(S){return this.h&&this.h.get(S.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const S=[],$=this.h.entries();for(var V=$.next();!V.done;)V=V.value,S.push(V[0]+": "+V[1]),V=$.next();return S.join(`\r
`)};function $o(S){S.onreadystatechange&&S.onreadystatechange.call(S)}Object.defineProperty(sh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(S){this.m=S?"include":"same-origin"}});function Us(S){let $="";return ee(S,function(V,G){$+=G,$+=":",$+=V,$+=`\r
`}),$}function oh(S,$,V){e:{for(G in V){var G=!1;break e}G=!0}G||(V=Us(V),typeof S=="string"?V!=null&&fl(V):Qt(S,$,V))}function rn(S){qt.call(this),this.headers=new Map,this.L=S||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(rn,qt);var xa=/^https?$/i,Wm=["POST","PUT"];t=rn.prototype,t.Fa=function(S){this.H=S},t.ea=function(S,$,V,G){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+S);$=$?$.toUpperCase():"GET",this.D=S,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():$m.g(),this.g.onreadystatechange=p(u(this.Ca,this));try{this.B=!0,this.g.open($,String(S),!0),this.B=!1}catch(be){ah(this,be);return}if(S=V||"",V=new Map(this.headers),G)if(Object.getPrototypeOf(G)===Object.prototype)for(var he in G)V.set(he,G[he]);else if(typeof G.keys=="function"&&typeof G.get=="function")for(const be of G.keys())V.set(be,G.get(be));else throw Error("Unknown input type for opt_headers: "+String(G));G=Array.from(V.keys()).find(be=>be.toLowerCase()=="content-type"),he=o.FormData&&S instanceof o.FormData,!(Array.prototype.indexOf.call(Wm,$,void 0)>=0)||G||he||V.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[be,Pe]of V)this.g.setRequestHeader(be,Pe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(S),this.v=!1}catch(be){ah(this,be)}};function ah(S,$){S.h=!1,S.g&&(S.j=!0,S.g.abort(),S.j=!1),S.l=$,S.o=5,Gm(S),dl(S)}function Gm(S){S.A||(S.A=!0,Ct(S,"complete"),Ct(S,"error"))}t.abort=function(S){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=S||7,Ct(this,"complete"),Ct(this,"abort"),dl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),dl(this,!0)),rn.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?lh(this):this.Xa())},t.Xa=function(){lh(this)};function lh(S){if(S.h&&typeof s<"u"){if(S.v&&Oo(S)==4)setTimeout(S.Ca.bind(S),0);else if(Ct(S,"readystatechange"),Oo(S)==4){S.h=!1;try{const be=S.ca();e:switch(be){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var $=!0;break e;default:$=!1}var V;if(!(V=$)){var G;if(G=be===0){let Pe=String(S.D).match(sb)[1]||null;!Pe&&o.self&&o.self.location&&(Pe=o.self.location.protocol.slice(0,-1)),G=!xa.test(Pe?Pe.toLowerCase():"")}V=G}if(V)Ct(S,"complete"),Ct(S,"success");else{S.o=6;try{var he=Oo(S)>2?S.g.statusText:""}catch{he=""}S.l=he+" ["+S.ca()+"]",Gm(S)}}finally{dl(S)}}}}function dl(S,$){if(S.g){S.m&&(clearTimeout(S.m),S.m=null);const V=S.g;S.g=null,$||Ct(S,"ready");try{V.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Oo(S){return S.g?S.g.readyState:0}t.ca=function(){try{return Oo(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(S){if(this.g){var $=this.g.responseText;return S&&$.indexOf(S)==0&&($=$.substring(S.length)),hl($)}};function Xr(S){try{if(!S.g)return null;if("response"in S.g)return S.g.response;switch(S.F){case"":case"text":return S.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in S.g)return S.g.mozResponseArrayBuffer}return null}catch{return null}}function pl(S){const $={};S=(S.g&&Oo(S)>=2&&S.g.getAllResponseHeaders()||"").split(`\r
`);for(let G=0;G<S.length;G++){if(L(S[G]))continue;var V=nb(S[G]);const he=V[0];if(V=V[1],typeof V!="string")continue;V=V.trim();const be=$[he]||[];$[he]=be,be.push(V)}ce($,function(G){return G.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function wa(S,$,V){return V&&V.internalChannelParams&&V.internalChannelParams[S]||$}function Cu(S){this.za=0,this.i=[],this.j=new ko,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=wa("failFast",!1,S),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=wa("baseRetryDelayMs",5e3,S),this.Za=wa("retryDelaySeedMs",1e4,S),this.Ta=wa("forwardChannelMaxRetries",2,S),this.va=wa("forwardChannelRequestTimeoutMs",2e4,S),this.ma=S&&S.xmlHttpFactory||void 0,this.Ua=S&&S.Rb||void 0,this.Aa=S&&S.useFetchStreams||!1,this.O=void 0,this.L=S&&S.supportsCrossDomainXhr||!1,this.M="",this.h=new Om(S&&S.concurrentRequestLimit),this.Ba=new Su,this.S=S&&S.fastHandshake||!1,this.R=S&&S.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=S&&S.Pb||!1,S&&S.ua&&this.j.ua(),S&&S.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&S&&S.detectBufferingProxy||!1,this.ia=void 0,S&&S.longPollingTimeout&&S.longPollingTimeout>0&&(this.ia=S.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Cu.prototype,t.ka=8,t.I=1,t.connect=function(S,$,V,G){Jn(0),this.W=S,this.H=$||{},V&&G!==void 0&&(this.H.OSID=V,this.H.OAID=G),this.F=this.X,this.J=gb(this,null,this.W),Sa(this)};function Hm(S){if(sd(S),S.I==3){var $=S.V++,V=nr(S.J);if(Qt(V,"SID",S.M),Qt(V,"RID",$),Qt(V,"TYPE","terminate"),uh(S,V),$=new No(S,S.j,$),$.M=2,$.A=rh(nr(V)),V=!1,o.navigator&&o.navigator.sendBeacon)try{V=o.navigator.sendBeacon($.A.toString(),"")}catch{}!V&&o.Image&&(new Image().src=$.A,V=!0),V||($.g=yb($.j,null),$.g.ea($.A)),$.F=Date.now(),da($)}mb(S)}function Eu(S){S.g&&(Km(S),S.g.cancel(),S.g=null)}function sd(S){Eu(S),S.v&&(o.clearTimeout(S.v),S.v=null),ad(S),S.h.cancel(),S.m&&(typeof S.m=="number"&&o.clearTimeout(S.m),S.m=null)}function Sa(S){if(!Pm(S.h)&&!S.m){S.m=!0;var $=S.Ea;A||R(),P||(A(),P=!0),N.add($,S),S.D=0}}function od(S,$){return ga(S.h)>=S.h.j-(S.m?1:0)?!1:S.m?(S.i=$.G.concat(S.i),!0):S.I==1||S.I==2||S.D>=(S.Sa?0:S.Ta)?!1:(S.m=ca(u(S.Ea,S,$),pb(S,S.D)),S.D++,!0)}t.Ea=function(S){if(this.m)if(this.m=null,this.I==1){if(!S){this.V=Math.floor(Math.random()*1e5),S=this.V++;const he=new No(this,this.j,S);let be=this.o;if(this.U&&(be?(be=j(be),ie(be,this.U)):be=this.U),this.u!==null||this.R||(he.J=be,be=null),this.S)e:{for(var $=0,V=0;V<this.i.length;V++){t:{var G=this.i[V];if("__data__"in G.map&&(G=G.map.__data__,typeof G=="string")){G=G.length;break t}G=void 0}if(G===void 0)break;if($+=G,$>4096){$=V;break e}if($===4096||V===this.i.length-1){$=V+1;break e}}$=1e3}else $=1e3;$=cb(this,he,$),V=nr(this.J),Qt(V,"RID",S),Qt(V,"CVER",22),this.G&&Qt(V,"X-HTTP-Session-Id",this.G),uh(this,V),be&&(this.R?$="headers="+fl(Us(be))+"&"+$:this.u&&oh(V,this.u,be)),Mm(this.h,he),this.Ra&&Qt(V,"TYPE","init"),this.S?(Qt(V,"$req",$),Qt(V,"SID","null"),he.U=!0,fa(he,V,null)):fa(he,V,$),this.I=2}}else this.I==3&&(S?qm(this,S):this.i.length==0||Pm(this.h)||qm(this))};function qm(S,$){var V;$?V=$.l:V=S.V++;const G=nr(S.J);Qt(G,"SID",S.M),Qt(G,"RID",V),Qt(G,"AID",S.K),uh(S,G),S.u&&S.o&&oh(G,S.u,S.o),V=new No(S,S.j,V,S.D+1),S.u===null&&(V.J=S.o),$&&(S.i=$.G.concat(S.i)),$=cb(S,V,1e3),V.H=Math.round(S.va*.5)+Math.round(S.va*.5*Math.random()),Mm(S.h,V),fa(V,G,$)}function uh(S,$){S.H&&ee(S.H,function(V,G){Qt($,G,V)}),S.l&&ee({},function(V,G){Qt($,G,V)})}function cb(S,$,V){V=Math.min(S.i.length,V);const G=S.l?u(S.l.Ka,S.l,S):null;e:{var he=S.i;let mt=-1;for(;;){const Wn=["count="+V];mt==-1?V>0?(mt=he[0].g,Wn.push("ofs="+mt)):mt=0:Wn.push("ofs="+mt);let Gt=!0;for(let In=0;In<V;In++){var be=he[In].g;const js=he[In].map;if(be-=mt,be<0)mt=Math.max(0,he[In].g-100),Gt=!1;else try{be="req"+be+"_"||"";try{var Pe=js instanceof Map?js:Object.entries(js);for(const[Ca,Po]of Pe){let Mo=Po;a(Po)&&(Mo=Kr(Po)),Wn.push(be+Ca+"="+encodeURIComponent(Mo))}}catch(Ca){throw Wn.push(be+"type="+encodeURIComponent("_badmap")),Ca}}catch{G&&G(js)}}if(Gt){Pe=Wn.join("&");break e}}Pe=void 0}return S=S.i.splice(0,V),$.G=S,Pe}function hb(S){if(!S.g&&!S.v){S.Y=1;var $=S.Da;A||R(),P||(A(),P=!0),N.add($,S),S.A=0}}function ch(S){return S.g||S.v||S.A>=3?!1:(S.Y++,S.v=ca(u(S.Da,S),pb(S,S.A)),S.A++,!0)}t.Da=function(){if(this.v=null,fb(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var S=4*this.T;this.j.info("BP detection timer enabled: "+S),this.B=ca(u(this.Wa,this),S)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Jn(10),Eu(this),fb(this))};function Km(S){S.B!=null&&(o.clearTimeout(S.B),S.B=null)}function fb(S){S.g=new No(S,S.j,"rpc",S.Y),S.u===null&&(S.g.J=S.o),S.g.P=0;var $=nr(S.na);Qt($,"RID","rpc"),Qt($,"SID",S.M),Qt($,"AID",S.K),Qt($,"CI",S.F?"0":"1"),!S.F&&S.ia&&Qt($,"TO",S.ia),Qt($,"TYPE","xmlhttp"),uh(S,$),S.u&&S.o&&oh($,S.u,S.o),S.O&&(S.g.H=S.O);var V=S.g;S=S.ba,V.M=1,V.A=rh(nr($)),V.u=null,V.R=!0,Zf(V,S)}t.Va=function(){this.C!=null&&(this.C=null,Eu(this),ch(this),Jn(19))};function ad(S){S.C!=null&&(o.clearTimeout(S.C),S.C=null)}function db(S,$){var V=null;if(S.g==$){ad(S),Km(S),S.g=null;var G=2}else if(ya(S.h,$))V=$.G,Lm(S.h,$),G=1;else return;if(S.I!=0){if($.o)if(G==1){V=$.u?$.u.length:0,$=Date.now()-$.F;var he=S.D;G=Qf(),Ct(G,new ua(G,V)),Sa(S)}else hb(S);else if(he=$.m,he==3||he==0&&$.X>0||!(G==1&&od(S,$)||G==2&&ch(S)))switch(V&&V.length>0&&($=S.h,$.i=$.i.concat(V)),he){case 1:Ta(S,5);break;case 4:Ta(S,10);break;case 3:Ta(S,6);break;default:Ta(S,2)}}}function pb(S,$){let V=S.Qa+Math.floor(Math.random()*S.Za);return S.isActive()||(V*=2),V*$}function Ta(S,$){if(S.j.info("Error code "+$),$==2){var V=u(S.bb,S),G=S.Ua;const he=!G;G=new gs(G||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||$r(G,"https"),rh(G),he?Do(G.toString(),V):jm(G.toString(),V)}else Jn(2);S.I=0,S.l&&S.l.pa($),mb(S),sd(S)}t.bb=function(S){S?(this.j.info("Successfully pinged google.com"),Jn(2)):(this.j.info("Failed to ping google.com"),Jn(1))};function mb(S){if(S.I=0,S.ja=[],S.l){const $=Fm(S.h);($.length!=0||S.i.length!=0)&&(y(S.ja,$),y(S.ja,S.i),S.h.i.length=0,g(S.i),S.i.length=0),S.l.oa()}}function gb(S,$,V){var G=V instanceof gs?nr(V):new gs(V);if(G.g!="")$&&(G.g=$+"."+G.g),vu(G,G.u);else{var he=o.location;G=he.protocol,$=$?$+"."+he.hostname:he.hostname,he=+he.port;const be=new gs(null);G&&$r(be,G),$&&(be.g=$),he&&vu(be,he),V&&(be.h=V),G=be}return V=S.G,$=S.wa,V&&$&&Qt(G,V,$),Qt(G,"VER",S.ka),uh(S,G),G}function yb(S,$,V){if($&&!S.L)throw Error("Can't create secondary domain capable XhrIo object.");return $=S.Aa&&!S.ma?new rn(new ba({ab:V})):new rn(S.ma),$.Fa(S.L),$}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function vb(){}t=vb.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Iu(){}Iu.prototype.g=function(S,$){return new Ni(S,$)};function Ni(S,$){qt.call(this),this.g=new Cu($),this.l=S,this.h=$&&$.messageUrlParams||null,S=$&&$.messageHeaders||null,$&&$.clientProtocolHeaderRequired&&(S?S["X-Client-Protocol"]="webchannel":S={"X-Client-Protocol":"webchannel"}),this.g.o=S,S=$&&$.initMessageHeaders||null,$&&$.messageContentType&&(S?S["X-WebChannel-Content-Type"]=$.messageContentType:S={"X-WebChannel-Content-Type":$.messageContentType}),$&&$.sa&&(S?S["X-WebChannel-Client-Profile"]=$.sa:S={"X-WebChannel-Client-Profile":$.sa}),this.g.U=S,(S=$&&$.Qb)&&!L(S)&&(this.g.u=S),this.A=$&&$.supportsCrossDomainXhr||!1,this.v=$&&$.sendRawJson||!1,($=$&&$.httpSessionIdParam)&&!L($)&&(this.g.G=$,S=this.h,S!==null&&$ in S&&(S=this.h,$ in S&&delete S[$])),this.j=new ml(this)}d(Ni,qt),Ni.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ni.prototype.close=function(){Hm(this.g)},Ni.prototype.o=function(S){var $=this.g;if(typeof S=="string"){var V={};V.__data__=S,S=V}else this.v&&(V={},V.__data__=Kr(S),S=V);$.i.push(new tr($.Ya++,S)),$.I==3&&Sa($)},Ni.prototype.N=function(){this.g.l=null,delete this.j,Hm(this.g),delete this.g,Ni.Z.N.call(this)};function bb(S){vr.call(this),S.__headers__&&(this.headers=S.__headers__,this.statusCode=S.__status__,delete S.__headers__,delete S.__status__);var $=S.__sm__;if($){e:{for(const V in $){S=V;break e}S=void 0}(this.i=S)&&(S=this.i,$=$!==null&&S in $?$[S]:void 0),this.data=$}else this.data=S}d(bb,vr);function xb(){Xi.call(this),this.status=1}d(xb,Xi);function ml(S){this.g=S}d(ml,vb),ml.prototype.ra=function(){Ct(this.g,"a")},ml.prototype.qa=function(S){Ct(this.g,new bb(S))},ml.prototype.pa=function(S){Ct(this.g,new xb)},ml.prototype.oa=function(){Ct(this.g,"b")},Iu.prototype.createWebChannel=Iu.prototype.g,Ni.prototype.send=Ni.prototype.o,Ni.prototype.open=Ni.prototype.m,Ni.prototype.close=Ni.prototype.close,iq=function(){return new Iu},rq=function(){return Qf()},nq=jn,s2={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},th.NO_ERROR=0,th.TIMEOUT=8,th.HTTP_ERROR=6,d1=th,Dm.COMPLETE="complete",tq=Dm,Yf.EventType=pi,pi.OPEN="a",pi.CLOSE="b",pi.ERROR="c",pi.MESSAGE="d",qt.prototype.listen=qt.prototype.J,qg=Yf,rn.prototype.listenOnce=rn.prototype.K,rn.prototype.getLastError=rn.prototype.Ha,rn.prototype.getLastErrorCode=rn.prototype.ya,rn.prototype.getStatus=rn.prototype.ca,rn.prototype.getResponseJson=rn.prototype.La,rn.prototype.getResponseText=rn.prototype.la,rn.prototype.send=rn.prototype.ea,rn.prototype.setWithCredentials=rn.prototype.Fa,eq=rn}).apply(typeof _x<"u"?_x:typeof self<"u"?self:typeof window<"u"?window:{});const Z4="@firebase/firestore",J4="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vi.UNAUTHENTICATED=new vi(null),vi.GOOGLE_CREDENTIALS=new vi("google-credentials-uid"),vi.FIRST_PARTY=new vi("first-party-uid"),vi.MOCK_USER=new vi("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tm="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sf=new AS("@firebase/firestore");function jd(){return sf.logLevel}function ze(t,...e){if(sf.logLevel<=kt.DEBUG){const n=e.map(BR);sf.debug(`Firestore (${tm}): ${t}`,...n)}}function Hl(t,...e){if(sf.logLevel<=kt.ERROR){const n=e.map(BR);sf.error(`Firestore (${tm}): ${t}`,...n)}}function xp(t,...e){if(sf.logLevel<=kt.WARN){const n=e.map(BR);sf.warn(`Firestore (${tm}): ${t}`,...n)}}function BR(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,sq(t,r,n)}function sq(t,e,n){let r=`FIRESTORE (${tm}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Hl(r),new Error(r)}function Xt(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||sq(e,i,r)}function pt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ke extends sa{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oq{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Yhe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(vi.UNAUTHENTICATED)))}shutdown(){}}class Qhe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class Zhe{constructor(e){this.t=e,this.currentUser=vi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Xt(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new fc;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new fc,e.enqueueRetryable((()=>i(this.currentUser)))};const o=()=>{const l=s;e.enqueueRetryable((async()=>{await l.promise,await i(this.currentUser)}))},a=l=>{ze("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((l=>a(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ze("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new fc)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(ze("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Xt(typeof r.accessToken=="string",31837,{l:r}),new oq(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Xt(e===null||typeof e=="string",2055,{h:e}),new vi(e)}}class Jhe{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=vi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class efe{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Jhe(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(vi.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class eB{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tfe{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Go(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Xt(this.o===void 0,3512);const r=s=>{s.error!=null&&ze("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,ze("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable((()=>r(s)))};const i=s=>{ze("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((s=>i(s))),setTimeout((()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):ze("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new eB(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Xt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new eB(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nfe(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=nfe(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function Nt(t,e){return t<e?-1:t>e?1:0}function o2(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return I_(i)===I_(s)?Nt(i,s):I_(i)?1:-1}return Nt(t.length,e.length)}const rfe=55296,ife=57343;function I_(t){const e=t.charCodeAt(0);return e>=rfe&&e<=ife}function wp(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tB="__name__";class Na{constructor(e,n,r){n===void 0?n=0:n>e.length&&at(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&at(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Na.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Na?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=Na.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return Nt(e.length,n.length)}static compareSegments(e,n){const r=Na.isNumericId(e),i=Na.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Na.extractNumericId(e).compare(Na.extractNumericId(n)):o2(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return hc.fromString(e.substring(4,e.length-2))}}class Sn extends Na{construct(e,n,r){return new Sn(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ke(Re.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new Sn(n)}static emptyPath(){return new Sn([])}}const sfe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ii extends Na{construct(e,n,r){return new ii(e,n,r)}static isValidIdentifier(e){return sfe.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ii.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===tB}static keyField(){return new ii([tB])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Ke(Re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Ke(Re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Ke(Re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Ke(Re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ii(n)}static emptyPath(){return new ii([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.path=e}static fromPath(e){return new tt(Sn.fromString(e))}static fromName(e){return new tt(Sn.fromString(e).popFirst(5))}static empty(){return new tt(Sn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Sn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Sn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new tt(new Sn(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aq(t,e,n){if(!n)throw new Ke(Re.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function ofe(t,e,n,r){if(e===!0&&r===!0)throw new Ke(Re.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function nB(t){if(!tt.isDocumentKey(t))throw new Ke(Re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function rB(t){if(tt.isDocumentKey(t))throw new Ke(Re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function lq(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function UR(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":at(12329,{type:typeof t})}function U1(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ke(Re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=UR(t);throw new Ke(Re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cr(t,e){const n={typeString:t};return e&&(n.value=e),n}function cv(t,e){if(!lq(t))throw new Ke(Re.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new Ke(Re.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iB=-62135596800,sB=1e6;class Tn{static now(){return Tn.fromMillis(Date.now())}static fromDate(e){return Tn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*sB);return new Tn(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ke(Re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ke(Re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<iB)throw new Ke(Re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ke(Re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/sB}_compareTo(e){return this.seconds===e.seconds?Nt(this.nanoseconds,e.nanoseconds):Nt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Tn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(cv(e,Tn._jsonSchema))return new Tn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-iB;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Tn._jsonSchemaVersion="firestore/timestamp/1.0",Tn._jsonSchema={type:cr("string",Tn._jsonSchemaVersion),seconds:cr("number"),nanoseconds:cr("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{static fromTimestamp(e){return new ht(e)}static min(){return new ht(new Tn(0,0))}static max(){return new ht(new Tn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iy=-1;function afe(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ht.fromTimestamp(r===1e9?new Tn(n+1,0):new Tn(n,r));return new Tc(i,tt.empty(),e)}function lfe(t){return new Tc(t.readTime,t.key,Iy)}class Tc{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Tc(ht.min(),tt.empty(),Iy)}static max(){return new Tc(ht.max(),tt.empty(),Iy)}}function ufe(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=tt.comparator(t.documentKey,e.documentKey),n!==0?n:Nt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cfe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hfe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nm(t){if(t.code!==Re.FAILED_PRECONDITION||t.message!==cfe)throw t;ze("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&at(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ke(((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ke?n:ke.resolve(n)}catch(n){return ke.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ke.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ke.reject(n)}static resolve(e){return new ke(((n,r)=>{n(e)}))}static reject(e){return new ke(((n,r)=>{r(e)}))}static waitFor(e){return new ke(((n,r)=>{let i=0,s=0,o=!1;e.forEach((a=>{++i,a.next((()=>{++s,o&&s===i&&n()}),(l=>r(l)))})),o=!0,s===i&&n()}))}static or(e){let n=ke.resolve(!1);for(const r of e)n=n.next((i=>i?ke.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,s)=>{r.push(n.call(this,i,s))})),this.waitFor(r)}static mapArray(e,n){return new ke(((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next((h=>{o[u]=h,++a,a===s&&r(o)}),(h=>i(h)))}}))}static doWhile(e,n){return new ke(((r,i)=>{const s=()=>{e()===!0?n().next((()=>{s()}),i):r()};s()}))}}function ffe(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function rm(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}kS.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR=-1;function NS(t){return t==null}function j1(t){return t===0&&1/t==-1/0}function dfe(t){return typeof t=="number"&&Number.isInteger(t)&&!j1(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uq="";function pfe(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=oB(e)),e=mfe(t.get(n),e);return oB(e)}function mfe(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case uq:n+="";break;default:n+=s}}return n}function oB(t){return t+uq+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aB(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function $f(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function cq(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e,n){this.comparator=e,this.root=n||ni.EMPTY}insert(e,n){return new $n(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ni.BLACK,null,null))}remove(e){return new $n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ni.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ax(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ax(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ax(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ax(this.root,e,this.comparator,!0)}}class Ax{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ni{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??ni.RED,this.left=i??ni.EMPTY,this.right=s??ni.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new ni(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ni.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ni.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ni.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ni.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw at(43730,{key:this.key,value:this.value});if(this.right.isRed())throw at(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw at(27949);return e+(this.isRed()?0:1)}}ni.EMPTY=null,ni.RED=!0,ni.BLACK=!1;ni.EMPTY=new class{constructor(){this.size=0}get key(){throw at(57766)}get value(){throw at(16141)}get color(){throw at(16727)}get left(){throw at(29726)}get right(){throw at(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new ni(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e){this.comparator=e,this.data=new $n(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new lB(this.data.getIterator())}getIteratorFrom(e){return new lB(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Ir)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Ir(this.comparator);return n.data=e,n}}class lB{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e){this.fields=e,e.sort(ii.comparator)}static empty(){return new Ko([])}unionWith(e){let n=new Ir(ii.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ko(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return wp(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hq extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new hq("Invalid base64 string: "+s):s}})(e);return new ai(n)}static fromUint8Array(e){const n=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new ai(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Nt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ai.EMPTY_BYTE_STRING=new ai("");const gfe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cc(t){if(Xt(!!t,39018),typeof t=="string"){let e=0;const n=gfe.exec(t);if(Xt(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Xn(t.seconds),nanos:Xn(t.nanos)}}function Xn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ec(t){return typeof t=="string"?ai.fromBase64String(t):ai.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fq="server_timestamp",dq="__type__",pq="__previous_value__",mq="__local_write_time__";function WR(t){return(t?.mapValue?.fields||{})[dq]?.stringValue===fq}function RS(t){const e=t.mapValue.fields[pq];return WR(e)?RS(e):e}function _y(t){const e=Cc(t.mapValue.fields[mq].timestampValue);return new Tn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yfe{constructor(e,n,r,i,s,o,a,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=h}}const W1="(default)";class Ay{constructor(e,n){this.projectId=e,this.database=n||W1}static empty(){return new Ay("","")}get isDefaultDatabase(){return this.database===W1}isEqual(e){return e instanceof Ay&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gq="__type__",vfe="__max__",kx={mapValue:{}},yq="__vector__",G1="value";function Ic(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?WR(t)?4:xfe(t)?9007199254740991:bfe(t)?10:11:at(28295,{value:t})}function Ja(t,e){if(t===e)return!0;const n=Ic(t);if(n!==Ic(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return _y(t).isEqual(_y(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Cc(i.timestampValue),a=Cc(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,s){return Ec(i.bytesValue).isEqual(Ec(s.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,s){return Xn(i.geoPointValue.latitude)===Xn(s.geoPointValue.latitude)&&Xn(i.geoPointValue.longitude)===Xn(s.geoPointValue.longitude)})(t,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return Xn(i.integerValue)===Xn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Xn(i.doubleValue),a=Xn(s.doubleValue);return o===a?j1(o)===j1(a):isNaN(o)&&isNaN(a)}return!1})(t,e);case 9:return wp(t.arrayValue.values||[],e.arrayValue.values||[],Ja);case 10:case 11:return(function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(aB(o)!==aB(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Ja(o[l],a[l])))return!1;return!0})(t,e);default:return at(52216,{left:t})}}function ky(t,e){return(t.values||[]).find((n=>Ja(n,e)))!==void 0}function Sp(t,e){if(t===e)return 0;const n=Ic(t),r=Ic(e);if(n!==r)return Nt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Nt(t.booleanValue,e.booleanValue);case 2:return(function(s,o){const a=Xn(s.integerValue||s.doubleValue),l=Xn(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1})(t,e);case 3:return uB(t.timestampValue,e.timestampValue);case 4:return uB(_y(t),_y(e));case 5:return o2(t.stringValue,e.stringValue);case 6:return(function(s,o){const a=Ec(s),l=Ec(o);return a.compareTo(l)})(t.bytesValue,e.bytesValue);case 7:return(function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=Nt(a[u],l[u]);if(h!==0)return h}return Nt(a.length,l.length)})(t.referenceValue,e.referenceValue);case 8:return(function(s,o){const a=Nt(Xn(s.latitude),Xn(o.latitude));return a!==0?a:Nt(Xn(s.longitude),Xn(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return cB(t.arrayValue,e.arrayValue);case 10:return(function(s,o){const a=s.fields||{},l=o.fields||{},u=a[G1]?.arrayValue,h=l[G1]?.arrayValue,d=Nt(u?.values?.length||0,h?.values?.length||0);return d!==0?d:cB(u,h)})(t.mapValue,e.mapValue);case 11:return(function(s,o){if(s===kx.mapValue&&o===kx.mapValue)return 0;if(s===kx.mapValue)return 1;if(o===kx.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const p=o2(l[d],h[d]);if(p!==0)return p;const g=Sp(a[l[d]],u[h[d]]);if(g!==0)return g}return Nt(l.length,h.length)})(t.mapValue,e.mapValue);default:throw at(23264,{he:n})}}function uB(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Nt(t,e);const n=Cc(t),r=Cc(e),i=Nt(n.seconds,r.seconds);return i!==0?i:Nt(n.nanos,r.nanos)}function cB(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Sp(n[i],r[i]);if(s)return s}return Nt(n.length,r.length)}function Tp(t){return a2(t)}function a2(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=Cc(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Ec(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return tt.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=a2(s);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${a2(n.fields[o])}`;return i+"}"})(t.mapValue):at(61005,{value:t})}function p1(t){switch(Ic(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=RS(t);return e?16+p1(e):16;case 5:return 2*t.stringValue.length;case 6:return Ec(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,s)=>i+p1(s)),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return $f(r.fields,((s,o)=>{i+=s.length+p1(o)})),i})(t.mapValue);default:throw at(13486,{value:t})}}function l2(t){return!!t&&"integerValue"in t}function GR(t){return!!t&&"arrayValue"in t}function hB(t){return!!t&&"nullValue"in t}function fB(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function m1(t){return!!t&&"mapValue"in t}function bfe(t){return(t?.mapValue?.fields||{})[gq]?.stringValue===yq}function cy(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return $f(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=cy(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=cy(t.arrayValue.values[n]);return e}return{...t}}function xfe(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===vfe}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e){this.value=e}static empty(){return new lo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!m1(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=cy(n)}setAll(e){let n=ii.emptyPath(),r={},i=[];e.forEach(((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=cy(o):i.push(a.lastSegment())}));const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());m1(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ja(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];m1(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){$f(n,((i,s)=>e[i]=s));for(const i of r)delete e[i]}clone(){return new lo(cy(this.value))}}function vq(t){const e=[];return $f(t.fields,((n,r)=>{const i=new ii([n]);if(m1(r)){const s=vq(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)})),new Ko(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new xi(e,0,ht.min(),ht.min(),ht.min(),lo.empty(),0)}static newFoundDocument(e,n,r,i){return new xi(e,1,n,ht.min(),r,i,0)}static newNoDocument(e,n){return new xi(e,2,n,ht.min(),ht.min(),lo.empty(),0)}static newUnknownDocument(e,n){return new xi(e,3,n,ht.min(),ht.min(),lo.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ht.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=lo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=lo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ht.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e,n){this.position=e,this.inclusive=n}}function dB(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=tt.comparator(tt.fromName(o.referenceValue),n.key):r=Sp(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function pB(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ja(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e,n="asc"){this.field=e,this.dir=n}}function wfe(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bq{}class Tr extends bq{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Tfe(e,n,r):n==="array-contains"?new Ife(e,r):n==="in"?new _fe(e,r):n==="not-in"?new Afe(e,r):n==="array-contains-any"?new kfe(e,r):new Tr(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Cfe(e,r):new Efe(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Sp(n,this.value)):n!==null&&Ic(this.value)===Ic(n)&&this.matchesComparison(Sp(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return at(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class el extends bq{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new el(e,n)}matches(e){return xq(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function xq(t){return t.op==="and"}function wq(t){return Sfe(t)&&xq(t)}function Sfe(t){for(const e of t.filters)if(e instanceof el)return!1;return!0}function u2(t){if(t instanceof Tr)return t.field.canonicalString()+t.op.toString()+Tp(t.value);if(wq(t))return t.filters.map((e=>u2(e))).join(",");{const e=t.filters.map((n=>u2(n))).join(",");return`${t.op}(${e})`}}function Sq(t,e){return t instanceof Tr?(function(r,i){return i instanceof Tr&&r.op===i.op&&r.field.isEqual(i.field)&&Ja(r.value,i.value)})(t,e):t instanceof el?(function(r,i){return i instanceof el&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((s,o,a)=>s&&Sq(o,i.filters[a])),!0):!1})(t,e):void at(19439)}function Tq(t){return t instanceof Tr?(function(n){return`${n.field.canonicalString()} ${n.op} ${Tp(n.value)}`})(t):t instanceof el?(function(n){return n.op.toString()+" {"+n.getFilters().map(Tq).join(" ,")+"}"})(t):"Filter"}class Tfe extends Tr{constructor(e,n,r){super(e,n,r),this.key=tt.fromName(r.referenceValue)}matches(e){const n=tt.comparator(e.key,this.key);return this.matchesComparison(n)}}class Cfe extends Tr{constructor(e,n){super(e,"in",n),this.keys=Cq("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class Efe extends Tr{constructor(e,n){super(e,"not-in",n),this.keys=Cq("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Cq(t,e){return(e.arrayValue?.values||[]).map((n=>tt.fromName(n.referenceValue)))}class Ife extends Tr{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return GR(n)&&ky(n.arrayValue,this.value)}}class _fe extends Tr{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ky(this.value.arrayValue,n)}}class Afe extends Tr{constructor(e,n){super(e,"not-in",n)}matches(e){if(ky(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ky(this.value.arrayValue,n)}}class kfe extends Tr{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!GR(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>ky(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nfe{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}}function mB(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Nfe(t,e,n,r,i,s,o)}function HR(t){const e=pt(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>u2(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(s){return s.field.canonicalString()+s.dir})(r))).join(","),NS(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Tp(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Tp(r))).join(",")),e.Te=n}return e.Te}function qR(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!wfe(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Sq(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!pB(t.startAt,e.startAt)&&pB(t.endAt,e.endAt)}function c2(t){return tt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Rfe(t,e,n,r,i,s,o,a){return new DS(t,e,n,r,i,s,o,a)}function Eq(t){return new DS(t)}function gB(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Dfe(t){return t.collectionGroup!==null}function hy(t){const e=pt(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ir(ii.comparator);return o.filters.forEach((l=>{l.getFlattenedFilters().forEach((u=>{u.isInequality()&&(a=a.add(u.field))}))})),a})(e).forEach((s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new q1(s,r))})),n.has(ii.keyField().canonicalString())||e.Ie.push(new q1(ii.keyField(),r))}return e.Ie}function Va(t){const e=pt(t);return e.Ee||(e.Ee=$fe(e,hy(t))),e.Ee}function $fe(t,e){if(t.limitType==="F")return mB(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const s=i.dir==="desc"?"asc":"desc";return new q1(i.field,s)}));const n=t.endAt?new H1(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new H1(t.startAt.position,t.startAt.inclusive):null;return mB(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function h2(t,e,n){return new DS(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function $S(t,e){return qR(Va(t),Va(e))&&t.limitType===e.limitType}function Iq(t){return`${HR(Va(t))}|lt:${t.limitType}`}function Wd(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>Tq(i))).join(", ")}]`),NS(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>Tp(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>Tp(i))).join(",")),`Target(${r})`})(Va(t))}; limitType=${t.limitType})`}function OS(t,e){return e.isFoundDocument()&&(function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):tt.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(t,e)&&(function(r,i){for(const s of hy(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(o,a,l){const u=dB(o,a,l);return o.inclusive?u<=0:u<0})(r.startAt,hy(r),i)||r.endAt&&!(function(o,a,l){const u=dB(o,a,l);return o.inclusive?u>=0:u>0})(r.endAt,hy(r),i))})(t,e)}function Ofe(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function _q(t){return(e,n)=>{let r=!1;for(const i of hy(t)){const s=Pfe(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Pfe(t,e,n){const r=t.field.isKeyField()?tt.comparator(e.key,n.key):(function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?Sp(l,u):at(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return at(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){$f(this.inner,((n,r)=>{for(const[i,s]of r)e(i,s)}))}isEmpty(){return cq(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mfe=new $n(tt.comparator);function ql(){return Mfe}const Aq=new $n(tt.comparator);function Kg(...t){let e=Aq;for(const n of t)e=e.insert(n.key,n);return e}function kq(t){let e=Aq;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Uh(){return fy()}function Nq(){return fy()}function fy(){return new Of((t=>t.toString()),((t,e)=>t.isEqual(e)))}const Lfe=new $n(tt.comparator),Ffe=new Ir(tt.comparator);function Rt(...t){let e=Ffe;for(const n of t)e=e.add(n);return e}const Vfe=new Ir(Nt);function Bfe(){return Vfe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KR(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:j1(e)?"-0":e}}function Rq(t){return{integerValue:""+t}}function zfe(t,e){return dfe(e)?Rq(e):KR(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(){this._=void 0}}function Ufe(t,e,n){return t instanceof Ny?(function(i,s){const o={fields:{[dq]:{stringValue:fq},[mq]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&WR(s)&&(s=RS(s)),s&&(o.fields[pq]=s),{mapValue:o}})(n,e):t instanceof Ry?$q(t,e):t instanceof Dy?Oq(t,e):(function(i,s){const o=Dq(i,s),a=yB(o)+yB(i.Ae);return l2(o)&&l2(i.Ae)?Rq(a):KR(i.serializer,a)})(t,e)}function jfe(t,e,n){return t instanceof Ry?$q(t,e):t instanceof Dy?Oq(t,e):n}function Dq(t,e){return t instanceof K1?(function(r){return l2(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}class Ny extends PS{}class Ry extends PS{constructor(e){super(),this.elements=e}}function $q(t,e){const n=Pq(e);for(const r of t.elements)n.some((i=>Ja(i,r)))||n.push(r);return{arrayValue:{values:n}}}class Dy extends PS{constructor(e){super(),this.elements=e}}function Oq(t,e){let n=Pq(e);for(const r of t.elements)n=n.filter((i=>!Ja(i,r)));return{arrayValue:{values:n}}}class K1 extends PS{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function yB(t){return Xn(t.integerValue||t.doubleValue)}function Pq(t){return GR(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wfe{constructor(e,n){this.field=e,this.transform=n}}function Gfe(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof Ry&&i instanceof Ry||r instanceof Dy&&i instanceof Dy?wp(r.elements,i.elements,Ja):r instanceof K1&&i instanceof K1?Ja(r.Ae,i.Ae):r instanceof Ny&&i instanceof Ny})(t.transform,e.transform)}class Hfe{constructor(e,n){this.version=e,this.transformResults=n}}class Bl{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Bl}static exists(e){return new Bl(void 0,e)}static updateTime(e){return new Bl(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function g1(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class MS{}function Mq(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Fq(t.key,Bl.none()):new hv(t.key,t.data,Bl.none());{const n=t.data,r=lo.empty();let i=new Ir(ii.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Pf(t.key,r,new Ko(i.toArray()),Bl.none())}}function qfe(t,e,n){t instanceof hv?(function(i,s,o){const a=i.value.clone(),l=bB(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(t,e,n):t instanceof Pf?(function(i,s,o){if(!g1(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=bB(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(Lq(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(t,e,n):(function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function dy(t,e,n,r){return t instanceof hv?(function(s,o,a,l){if(!g1(s.precondition,o))return a;const u=s.value.clone(),h=xB(s.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null})(t,e,n,r):t instanceof Pf?(function(s,o,a,l){if(!g1(s.precondition,o))return a;const u=xB(s.fieldTransforms,l,o),h=o.data;return h.setAll(Lq(s)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((d=>d.field)))})(t,e,n,r):(function(s,o,a){return g1(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(t,e,n)}function Kfe(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=Dq(r.transform,i||null);s!=null&&(n===null&&(n=lo.empty()),n.set(r.field,s))}return n||null}function vB(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&wp(r,i,((s,o)=>Gfe(s,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class hv extends MS{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Pf extends MS{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Lq(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function bB(t,e,n){const r=new Map;Xt(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,jfe(o,a,n[i]))}return r}function xB(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,Ufe(s,o,e))}return r}class Fq extends MS{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Xfe extends MS{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yfe{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&qfe(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=dy(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=dy(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Nq();return this.mutations.forEach((i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=Mq(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ht.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Rt())}isEqual(e){return this.batchId===e.batchId&&wp(this.mutations,e.mutations,((n,r)=>vB(n,r)))&&wp(this.baseMutations,e.baseMutations,((n,r)=>vB(n,r)))}}class XR{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Xt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return Lfe})();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new XR(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qfe{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zfe{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ar,Lt;function Jfe(t){switch(t){case Re.OK:return at(64938);case Re.CANCELLED:case Re.UNKNOWN:case Re.DEADLINE_EXCEEDED:case Re.RESOURCE_EXHAUSTED:case Re.INTERNAL:case Re.UNAVAILABLE:case Re.UNAUTHENTICATED:return!1;case Re.INVALID_ARGUMENT:case Re.NOT_FOUND:case Re.ALREADY_EXISTS:case Re.PERMISSION_DENIED:case Re.FAILED_PRECONDITION:case Re.ABORTED:case Re.OUT_OF_RANGE:case Re.UNIMPLEMENTED:case Re.DATA_LOSS:return!0;default:return at(15467,{code:t})}}function Vq(t){if(t===void 0)return Hl("GRPC error has no .code"),Re.UNKNOWN;switch(t){case ar.OK:return Re.OK;case ar.CANCELLED:return Re.CANCELLED;case ar.UNKNOWN:return Re.UNKNOWN;case ar.DEADLINE_EXCEEDED:return Re.DEADLINE_EXCEEDED;case ar.RESOURCE_EXHAUSTED:return Re.RESOURCE_EXHAUSTED;case ar.INTERNAL:return Re.INTERNAL;case ar.UNAVAILABLE:return Re.UNAVAILABLE;case ar.UNAUTHENTICATED:return Re.UNAUTHENTICATED;case ar.INVALID_ARGUMENT:return Re.INVALID_ARGUMENT;case ar.NOT_FOUND:return Re.NOT_FOUND;case ar.ALREADY_EXISTS:return Re.ALREADY_EXISTS;case ar.PERMISSION_DENIED:return Re.PERMISSION_DENIED;case ar.FAILED_PRECONDITION:return Re.FAILED_PRECONDITION;case ar.ABORTED:return Re.ABORTED;case ar.OUT_OF_RANGE:return Re.OUT_OF_RANGE;case ar.UNIMPLEMENTED:return Re.UNIMPLEMENTED;case ar.DATA_LOSS:return Re.DATA_LOSS;default:return at(39323,{code:t})}}(Lt=ar||(ar={}))[Lt.OK=0]="OK",Lt[Lt.CANCELLED=1]="CANCELLED",Lt[Lt.UNKNOWN=2]="UNKNOWN",Lt[Lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Lt[Lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Lt[Lt.NOT_FOUND=5]="NOT_FOUND",Lt[Lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Lt[Lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Lt[Lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Lt[Lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Lt[Lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Lt[Lt.ABORTED=10]="ABORTED",Lt[Lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Lt[Lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Lt[Lt.INTERNAL=13]="INTERNAL",Lt[Lt.UNAVAILABLE=14]="UNAVAILABLE",Lt[Lt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ede(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tde=new hc([4294967295,4294967295],0);function wB(t){const e=ede().encode(t),n=new JH;return n.update(e),new Uint8Array(n.digest())}function SB(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new hc([n,r],0),new hc([i,s],0)]}class YR{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Xg(`Invalid padding: ${n}`);if(r<0)throw new Xg(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Xg(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Xg(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=hc.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(hc.fromNumber(r)));return i.compare(tde)===1&&(i=new hc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=wB(e),[r,i]=SB(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new YR(s,i,n);return r.forEach((a=>o.insert(a))),o}insert(e){if(this.ge===0)return;const n=wB(e),[r,i]=SB(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Xg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,fv.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new LS(ht.min(),i,new $n(Nt),ql(),Rt())}}class fv{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new fv(r,n,Rt(),Rt(),Rt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class Bq{constructor(e,n){this.targetId=e,this.Ce=n}}class zq{constructor(e,n,r=ai.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class TB{constructor(){this.ve=0,this.Fe=CB(),this.Me=ai.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Rt(),n=Rt(),r=Rt();return this.Fe.forEach(((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:at(38017,{changeType:s})}})),new fv(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=CB()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Xt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class nde{constructor(e){this.Ge=e,this.ze=new Map,this.je=ql(),this.Je=Nx(),this.He=Nx(),this.Ye=new $n(Nt)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:at(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,i)=>{this.rt(i)&&n(i)}))}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(c2(s))if(r===0){const o=new tt(s.path);this.et(n,o,xi.newNoDocument(o,ht.min()))}else Xt(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Ec(r).toUint8Array()}catch(l){if(l instanceof hq)return xp("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new YR(o,i,s)}catch(l){return xp(l instanceof Xg?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach((s=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(n,s,null),i++)})),i}Tt(e){const n=new Map;this.ze.forEach(((s,o)=>{const a=this.ot(o);if(a){if(s.current&&c2(a.target)){const l=new tt(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,xi.newNoDocument(l,e))}s.Be&&(n.set(o,s.ke()),s.qe())}}));let r=Rt();this.He.forEach(((s,o)=>{let a=!0;o.forEachWhile((l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)})),a&&(r=r.add(s))})),this.je.forEach(((s,o)=>o.setReadTime(e)));const i=new LS(e,n,this.Ye,this.je,r);return this.je=ql(),this.Je=Nx(),this.He=Nx(),this.Ye=new $n(Nt),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new TB,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ir(Nt),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ir(Nt),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ze("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new TB),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Nx(){return new $n(tt.comparator)}function CB(){return new $n(tt.comparator)}const rde={asc:"ASCENDING",desc:"DESCENDING"},ide={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sde={and:"AND",or:"OR"};class ode{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function f2(t,e){return t.useProto3Json||NS(e)?e:{value:e}}function X1(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Uq(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function ade(t,e){return X1(t,e.toTimestamp())}function Ba(t){return Xt(!!t,49232),ht.fromTimestamp((function(n){const r=Cc(n);return new Tn(r.seconds,r.nanos)})(t))}function QR(t,e){return d2(t,e).canonicalString()}function d2(t,e){const n=(function(i){return new Sn(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function jq(t){const e=Sn.fromString(t);return Xt(Kq(e),10190,{key:e.toString()}),e}function p2(t,e){return QR(t.databaseId,e.path)}function __(t,e){const n=jq(e);if(n.get(1)!==t.databaseId.projectId)throw new Ke(Re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ke(Re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new tt(Gq(n))}function Wq(t,e){return QR(t.databaseId,e)}function lde(t){const e=jq(t);return e.length===4?Sn.emptyPath():Gq(e)}function m2(t){return new Sn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Gq(t){return Xt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function EB(t,e,n){return{name:p2(t,e),fields:n.value.mapValue.fields}}function ude(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:at(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(u,h){return u.useProto3Json?(Xt(h===void 0||typeof h=="string",58123),ai.fromBase64String(h||"")):(Xt(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),ai.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(u){const h=u.code===void 0?Re.UNKNOWN:Vq(u.code);return new Ke(h,u.message||"")})(o);n=new zq(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=__(t,r.document.name),s=Ba(r.document.updateTime),o=r.document.createTime?Ba(r.document.createTime):ht.min(),a=new lo({mapValue:{fields:r.document.fields}}),l=xi.newFoundDocument(i,s,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];n=new y1(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=__(t,r.document),s=r.readTime?Ba(r.readTime):ht.min(),o=xi.newNoDocument(i,s),a=r.removedTargetIds||[];n=new y1([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=__(t,r.document),s=r.removedTargetIds||[];n=new y1([],s,i,null)}else{if(!("filter"in e))return at(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new Zfe(i,s),a=r.targetId;n=new Bq(a,o)}}return n}function cde(t,e){let n;if(e instanceof hv)n={update:EB(t,e.key,e.value)};else if(e instanceof Fq)n={delete:p2(t,e.key)};else if(e instanceof Pf)n={update:EB(t,e.key,e.data),updateMask:bde(e.fieldMask)};else{if(!(e instanceof Xfe))return at(16599,{Vt:e.type});n={verify:p2(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(s,o){const a=o.transform;if(a instanceof Ny)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ry)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Dy)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof K1)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw at(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:ade(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:at(27497)})(t,e.precondition)),n}function hde(t,e){return t&&t.length>0?(Xt(e!==void 0,14353),t.map((n=>(function(i,s){let o=i.updateTime?Ba(i.updateTime):Ba(s);return o.isEqual(ht.min())&&(o=Ba(s)),new Hfe(o,i.transformResults||[])})(n,e)))):[]}function fde(t,e){return{documents:[Wq(t,e.path)]}}function dde(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Wq(t,i);const s=(function(u){if(u.length!==0)return qq(el.create(u,"and"))})(e.filters);s&&(n.structuredQuery.where=s);const o=(function(u){if(u.length!==0)return u.map((h=>(function(p){return{field:Gd(p.field),direction:gde(p.dir)}})(h)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=f2(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:n,parent:i}}function pde(t){let e=lde(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Xt(r===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=(function(d){const p=Hq(d);return p instanceof el&&wq(p)?p.getFilters():[p]})(n.where));let o=[];n.orderBy&&(o=(function(d){return d.map((p=>(function(y){return new q1(Hd(y.field),(function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(y.direction))})(p)))})(n.orderBy));let a=null;n.limit&&(a=(function(d){let p;return p=typeof d=="object"?d.value:d,NS(p)?null:p})(n.limit));let l=null;n.startAt&&(l=(function(d){const p=!!d.before,g=d.values||[];return new H1(g,p)})(n.startAt));let u=null;return n.endAt&&(u=(function(d){const p=!d.before,g=d.values||[];return new H1(g,p)})(n.endAt)),Rfe(e,i,o,s,a,"F",l,u)}function mde(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return at(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Hq(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Hd(n.unaryFilter.field);return Tr.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Hd(n.unaryFilter.field);return Tr.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Hd(n.unaryFilter.field);return Tr.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Hd(n.unaryFilter.field);return Tr.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return at(61313);default:return at(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Tr.create(Hd(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return at(58110);default:return at(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return el.create(n.compositeFilter.filters.map((r=>Hq(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return at(1026)}})(n.compositeFilter.op))})(t):at(30097,{filter:t})}function gde(t){return rde[t]}function yde(t){return ide[t]}function vde(t){return sde[t]}function Gd(t){return{fieldPath:t.canonicalString()}}function Hd(t){return ii.fromServerFormat(t.fieldPath)}function qq(t){return t instanceof Tr?(function(n){if(n.op==="=="){if(fB(n.value))return{unaryFilter:{field:Gd(n.field),op:"IS_NAN"}};if(hB(n.value))return{unaryFilter:{field:Gd(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(fB(n.value))return{unaryFilter:{field:Gd(n.field),op:"IS_NOT_NAN"}};if(hB(n.value))return{unaryFilter:{field:Gd(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gd(n.field),op:yde(n.op),value:n.value}}})(t):t instanceof el?(function(n){const r=n.getFilters().map((i=>qq(i)));return r.length===1?r[0]:{compositeFilter:{op:vde(n.op),filters:r}}})(t):at(54877,{filter:t})}function bde(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function Kq(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e,n,r,i,s=ht.min(),o=ht.min(),a=ai.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new sc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new sc(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new sc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new sc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xde{constructor(e){this.yt=e}}function wde(t){const e=pde({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?h2(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sde{constructor(){this.Cn=new Tde}addToCollectionParentIndex(e,n){return this.Cn.add(n),ke.resolve()}getCollectionParents(e,n){return ke.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ke.resolve()}deleteFieldIndex(e,n){return ke.resolve()}deleteAllFieldIndexes(e){return ke.resolve()}createTargetIndexes(e,n){return ke.resolve()}getDocumentsMatchingTarget(e,n){return ke.resolve(null)}getIndexType(e,n){return ke.resolve(0)}getFieldIndexes(e,n){return ke.resolve([])}getNextCollectionGroupToUpdate(e){return ke.resolve(null)}getMinOffset(e,n){return ke.resolve(Tc.min())}getMinOffsetFromCollectionGroup(e,n){return ke.resolve(Tc.min())}updateCollectionGroup(e,n,r){return ke.resolve()}updateIndexEntries(e,n){return ke.resolve()}}class Tde{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ir(Sn.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ir(Sn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IB={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Xq=41943040;class ss{static withCacheSize(e){return new ss(e,ss.DEFAULT_COLLECTION_PERCENTILE,ss.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ss.DEFAULT_COLLECTION_PERCENTILE=10,ss.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ss.DEFAULT=new ss(Xq,ss.DEFAULT_COLLECTION_PERCENTILE,ss.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ss.DISABLED=new ss(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Cp(0)}static cr(){return new Cp(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _B="LruGarbageCollector",Cde=1048576;function AB([t,e],[n,r]){const i=Nt(t,n);return i===0?Nt(e,r):i}class Ede{constructor(e){this.Ir=e,this.buffer=new Ir(AB),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();AB(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Ide{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ze(_B,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){rm(n)?ze(_B,"Ignoring IndexedDB error during garbage collection: ",n):await nm(n)}await this.Vr(3e5)}))}}class _de{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return ke.resolve(kS.ce);const r=new Ede(n);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ze("LruGarbageCollector","Garbage collection skipped; disabled"),ke.resolve(IB)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ze("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),IB):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,a,l,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((d=>(d>this.params.maximumSequenceNumbersToCollect?(ze("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i)))).next((d=>(r=d,a=Date.now(),this.removeTargets(e,r,n)))).next((d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,r)))).next((d=>(u=Date.now(),jd()<=kt.DEBUG&&ze("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),ke.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d}))))}}function Ade(t,e){return new _de(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kde{constructor(){this.changes=new Of((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,xi.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ke.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nde{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rde{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&dy(r.mutation,i,Ko.empty(),Tn.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Rt()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Rt()){const i=Uh();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((s=>{let o=Kg();return s.forEach(((a,l)=>{o=o.insert(a,l.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const r=Uh();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Rt())))}populateOverlays(e,n,r){const i=[];return r.forEach((s=>{n.has(s)||i.push(s)})),this.documentOverlayCache.getOverlays(e,i).next((s=>{s.forEach(((o,a)=>{n.set(o,a)}))}))}computeViews(e,n,r,i){let s=ql();const o=fy(),a=(function(){return fy()})();return n.forEach(((l,u)=>{const h=r.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof Pf)?s=s.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),dy(h.mutation,u,h.mutation.getFieldMask(),Tn.now())):o.set(u.key,Ko.empty())})),this.recalculateAndSaveOverlays(e,s).next((l=>(l.forEach(((u,h)=>o.set(u,h))),n.forEach(((u,h)=>a.set(u,new Nde(h,o.get(u)??null)))),a)))}recalculateAndSaveOverlays(e,n){const r=fy();let i=new $n(((o,a)=>o-a)),s=Rt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const a of o)a.keys().forEach((l=>{const u=n.get(l);if(u===null)return;let h=r.get(l)||Ko.empty();h=a.applyToLocalView(u,h),r.set(l,h);const d=(i.get(a.batchId)||Rt()).add(l);i=i.insert(a.batchId,d)}))})).next((()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,d=Nq();h.forEach((p=>{if(!s.has(p)){const g=Mq(n.get(p),r.get(p));g!==null&&d.set(p,g),s=s.add(p)}})),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return ke.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return(function(o){return tt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Dfe(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):ke.resolve(Uh());let a=Iy,l=s;return o.next((u=>ke.forEach(u,((h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?ke.resolve():this.remoteDocumentCache.getEntry(e,h).next((p=>{l=l.insert(h,p)}))))).next((()=>this.populateOverlays(e,u,s))).next((()=>this.computeViews(e,l,u,Rt()))).next((h=>({batchId:a,changes:kq(h)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new tt(n)).next((r=>{let i=Kg();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Kg();return this.indexManager.getCollectionParents(e,s).next((a=>ke.forEach(a,(l=>{const u=(function(d,p){return new DS(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)})(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next((h=>{h.forEach(((d,p)=>{o=o.insert(d,p)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i)))).next((o=>{s.forEach(((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,xi.newInvalidDocument(h)))}));let a=Kg();return o.forEach(((l,u)=>{const h=s.get(l);h!==void 0&&dy(h.mutation,u,Ko.empty(),Tn.now()),OS(n,u)&&(a=a.insert(l,u))})),a}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dde{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ke.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Ba(i.createTime)}})(n)),ke.resolve()}getNamedQuery(e,n){return ke.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:wde(i.bundledQuery),readTime:Ba(i.readTime)}})(n)),ke.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $de{constructor(){this.overlays=new $n(tt.comparator),this.qr=new Map}getOverlay(e,n){return ke.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Uh();return ke.forEach(n,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,s)=>{this.St(e,n,s)})),ke.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((s=>this.overlays=this.overlays.remove(s))),this.qr.delete(r)),ke.resolve()}getOverlaysForCollection(e,n,r){const i=Uh(),s=n.length+1,o=new tt(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return ke.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new $n(((u,h)=>u-h));const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=s.get(u.largestBatchId);h===null&&(h=Uh(),s=s.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=Uh(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((u,h)=>a.set(u,h))),!(a.size()>=i)););return ke.resolve(a)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Qfe(n,r));let s=this.qr.get(n);s===void 0&&(s=Rt(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ode{constructor(){this.sessionToken=ai.EMPTY_BYTE_STRING}getSessionToken(e){return ke.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ke.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(){this.Qr=new Ir(Pr.$r),this.Ur=new Ir(Pr.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Pr(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new Pr(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new tt(new Sn([])),r=new Pr(n,e),i=new Pr(n,e+1),s=[];return this.Ur.forEachInRange([r,i],(o=>{this.Gr(o),s.push(o.key)})),s}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new tt(new Sn([])),r=new Pr(n,e),i=new Pr(n,e+1);let s=Rt();return this.Ur.forEachInRange([r,i],(o=>{s=s.add(o.key)})),s}containsKey(e){const n=new Pr(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Pr{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return tt.comparator(e.key,n.key)||Nt(e.Yr,n.Yr)}static Kr(e,n){return Nt(e.Yr,n.Yr)||tt.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pde{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ir(Pr.$r)}checkEmpty(e){return ke.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Yfe(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Zr=this.Zr.add(new Pr(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return ke.resolve(o)}lookupMutationBatch(e,n){return ke.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return ke.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ke.resolve(this.mutationQueue.length===0?jR:this.tr-1)}getAllMutationBatches(e){return ke.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Pr(n,0),i=new Pr(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],(o=>{const a=this.Xr(o.Yr);s.push(a)})),ke.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ir(Nt);return n.forEach((i=>{const s=new Pr(i,0),o=new Pr(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],(a=>{r=r.add(a.Yr)}))})),ke.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;tt.isDocumentKey(s)||(s=s.child(""));const o=new Pr(new tt(s),0);let a=new Ir(Nt);return this.Zr.forEachWhile((l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.Yr)),!0)}),o),ke.resolve(this.ti(a))}ti(e){const n=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){Xt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ke.forEach(n.mutations,(i=>{const s=new Pr(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new Pr(n,0),i=this.Zr.firstAfterOrEqual(r);return ke.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ke.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mde{constructor(e){this.ri=e,this.docs=(function(){return new $n(tt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ke.resolve(r?r.document.mutableCopy():xi.newInvalidDocument(n))}getEntries(e,n){let r=ql();return n.forEach((i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():xi.newInvalidDocument(i))})),ke.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=ql();const o=n.path,a=new tt(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||ufe(lfe(h),r)<=0||(i.has(h.key)||OS(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return ke.resolve(s)}getAllFromCollectionGroup(e,n,r,i){at(9500)}ii(e,n){return ke.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new Lde(this)}getSize(e){return ke.resolve(this.size)}}class Lde extends kde{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),ke.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fde{constructor(e){this.persistence=e,this.si=new Of((n=>HR(n)),qR),this.lastRemoteSnapshotVersion=ht.min(),this.highestTargetId=0,this.oi=0,this._i=new ZR,this.targetCount=0,this.ai=Cp.ur()}forEachTarget(e,n){return this.si.forEach(((r,i)=>n(i))),ke.resolve()}getLastRemoteSnapshotVersion(e){return ke.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ke.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ke.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),ke.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Cp(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ke.resolve()}updateTargetData(e,n){return this.Pr(n),ke.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ke.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach(((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)})),ke.waitFor(s).next((()=>i))}getTargetCount(e){return ke.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return ke.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),ke.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach((o=>{s.push(i.markPotentiallyOrphaned(e,o))})),ke.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ke.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return ke.resolve(r)}containsKey(e,n){return ke.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yq{constructor(e,n){this.ui={},this.overlays={},this.ci=new kS(0),this.li=!1,this.li=!0,this.hi=new Ode,this.referenceDelegate=e(this),this.Pi=new Fde(this),this.indexManager=new Sde,this.remoteDocumentCache=(function(i){return new Mde(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new xde(n),this.Ii=new Dde(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new $de,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new Pde(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){ze("MemoryPersistence","Starting transaction:",e);const i=new Vde(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((s=>this.referenceDelegate.di(i).next((()=>s)))).toPromise().then((s=>(i.raiseOnCommittedEvent(),s)))}Ai(e,n){return ke.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class Vde extends hfe{constructor(e){super(),this.currentSequenceNumber=e}}class JR{constructor(e){this.persistence=e,this.Ri=new ZR,this.Vi=null}static mi(e){return new JR(e)}get fi(){if(this.Vi)return this.Vi;throw at(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),ke.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),ke.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ke.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((s=>this.fi.add(s.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ke.forEach(this.fi,(r=>{const i=tt.fromPath(r);return this.gi(e,i).next((s=>{s||n.removeEntry(i,ht.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return ke.or([()=>ke.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Y1{constructor(e,n){this.persistence=e,this.pi=new Of((r=>pfe(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=Ade(this,n)}static mi(e,n){return new Y1(e,n)}Ei(){}di(e){return ke.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return ke.forEach(this.pi,((r,i)=>this.br(e,r,i).next((s=>s?ke.resolve():n(i)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,(o=>this.br(e,o,n).next((a=>{a||(r++,s.removeEntry(o,ht.min()))})))).next((()=>s.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ke.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),ke.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),ke.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ke.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=p1(e.data.value)),n}br(e,n,r){return ke.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return ke.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=Rt(),i=Rt();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new eD(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bde{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zde{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Nce()?8:ffe(Ii())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next((o=>{s.result=o})).next((()=>{if(!s.result)return this.ws(e,n,i,r).next((o=>{s.result=o}))})).next((()=>{if(s.result)return;const o=new Bde;return this.Ss(e,n,o).next((a=>{if(s.result=a,this.Vs)return this.bs(e,n,o,a.size)}))})).next((()=>s.result))}bs(e,n,r,i){return r.documentReadCount<this.fs?(jd()<=kt.DEBUG&&ze("QueryEngine","SDK will not create cache indexes for query:",Wd(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ke.resolve()):(jd()<=kt.DEBUG&&ze("QueryEngine","Query:",Wd(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(jd()<=kt.DEBUG&&ze("QueryEngine","The SDK decides to create cache indexes for query:",Wd(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Va(n))):ke.resolve())}ys(e,n){if(gB(n))return ke.resolve(null);let r=Va(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=h2(n,null,"F"),r=Va(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((s=>{const o=Rt(...s);return this.ps.getDocuments(e,o).next((a=>this.indexManager.getMinOffset(e,r).next((l=>{const u=this.Ds(n,a);return this.Cs(n,u,o,l.readTime)?this.ys(e,h2(n,null,"F")):this.vs(e,u,n,l)}))))})))))}ws(e,n,r,i){return gB(n)||i.isEqual(ht.min())?ke.resolve(null):this.ps.getDocuments(e,r).next((s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?ke.resolve(null):(jd()<=kt.DEBUG&&ze("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Wd(n)),this.vs(e,o,n,afe(i,Iy)).next((a=>a)))}))}Ds(e,n){let r=new Ir(_q(e));return n.forEach(((i,s)=>{OS(e,s)&&(r=r.add(s))})),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return jd()<=kt.DEBUG&&ze("QueryEngine","Using full collection scan to execute query:",Wd(n)),this.ps.getDocumentsMatchingQuery(e,n,Tc.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((s=>(n.forEach((o=>{s=s.insert(o.key,o)})),s)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD="LocalStore",Ude=3e8;class jde{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new $n(Nt),this.xs=new Of((s=>HR(s)),qR),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Rde(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function Wde(t,e,n,r){return new jde(t,e,n,r)}async function Qq(t,e){const n=pt(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((s=>{const o=[],a=[];let l=Rt();for(const u of i){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of s){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next((u=>({Ls:u,removedBatchIds:o,addedBatchIds:a})))}))}))}function Gde(t,e){const n=pt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,l,u,h){const d=u.batch,p=d.keys();let g=ke.resolve();return p.forEach((y=>{g=g.next((()=>h.getEntry(l,y))).next((b=>{const x=u.docVersions.get(y);Xt(x!==null,48541),b.version.compareTo(x)<0&&(d.applyToRemoteDocument(b,u),b.isValidDocument()&&(b.setReadTime(u.commitVersion),h.addEntry(b)))}))})),g.next((()=>a.mutationQueue.removeMutationBatch(l,d)))})(n,r,e,s).next((()=>s.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let l=Rt();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function Zq(t){const e=pt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function Hde(t,e){const n=pt(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];e.targetChanges.forEach(((h,d)=>{const p=i.get(d);if(!p)return;a.push(n.Pi.removeMatchingKeys(s,h.removedDocuments,d).next((()=>n.Pi.addMatchingKeys(s,h.addedDocuments,d))));let g=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?g=g.withResumeToken(ai.EMPTY_BYTE_STRING,ht.min()).withLastLimboFreeSnapshotVersion(ht.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),i=i.insert(d,g),(function(b,x,w){return b.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=Ude?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0})(p,g,h)&&a.push(n.Pi.updateTargetData(s,g))}));let l=ql(),u=Rt();if(e.documentUpdates.forEach((h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))})),a.push(qde(s,o,e.documentUpdates).next((h=>{l=h.ks,u=h.qs}))),!r.isEqual(ht.min())){const h=n.Pi.getLastRemoteSnapshotVersion(s).next((d=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r)));a.push(h)}return ke.waitFor(a).next((()=>o.apply(s))).next((()=>n.localDocuments.getLocalViewOfDocuments(s,l,u))).next((()=>l))})).then((s=>(n.Ms=i,s)))}function qde(t,e,n){let r=Rt(),i=Rt();return n.forEach((s=>r=r.add(s))),e.getEntries(t,r).next((s=>{let o=ql();return n.forEach(((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ht.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ze(tD,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)})),{ks:o,qs:i}}))}function Kde(t,e){const n=pt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=jR),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Xde(t,e){const n=pt(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.Pi.getTargetData(r,e).next((s=>s?(i=s,ke.resolve(i)):n.Pi.allocateTargetId(r).next((o=>(i=new sc(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function g2(t,e,n){const r=pt(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!rm(o))throw o;ze(tD,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function kB(t,e,n){const r=pt(t);let i=ht.min(),s=Rt();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(l,u,h){const d=pt(l),p=d.xs.get(h);return p!==void 0?ke.resolve(d.Ms.get(p)):d.Pi.getTargetData(u,h)})(r,o,Va(e)).next((a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next((l=>{s=l}))})).next((()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:ht.min(),n?s:Rt()))).next((a=>(Yde(r,Ofe(e),a),{documents:a,Qs:s})))))}function Yde(t,e,n){let r=t.Os.get(e)||ht.min();n.forEach(((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)})),t.Os.set(e,r)}class NB{constructor(){this.activeTargetIds=Bfe()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Qde{constructor(){this.Mo=new NB,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new NB,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zde{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RB="ConnectivityMonitor";class DB{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ze(RB,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ze(RB,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rx=null;function y2(){return Rx===null?Rx=(function(){return 268435456+Math.round(2147483648*Math.random())})():Rx++,"0x"+Rx.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_="RestConnection",Jde={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class epe{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===W1?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=y2(),a=this.zo(e,n.toUriEncodedString());ze(A_,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,s);const{host:u}=new URL(a),h=Jp(u);return this.Jo(e,a,l,r,h).then((d=>(ze(A_,`Received RPC '${e}' ${o}: `,d),d)),(d=>{throw xp(A_,`RPC '${e}' ${o} failed with error: `,d,"url: ",a,"request:",r),d}))}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+tm})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,s)=>e[s]=i)),r&&r.headers.forEach(((i,s)=>e[s]=i))}zo(e,n){const r=Jde[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tpe{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gi="WebChannelConnection";class npe extends epe{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=y2();return new Promise(((a,l)=>{const u=new eq;u.setWithCredentials(!0),u.listenOnce(tq.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case d1.NO_ERROR:const d=u.getResponseJson();ze(gi,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),a(d);break;case d1.TIMEOUT:ze(gi,`RPC '${e}' ${o} timed out`),l(new Ke(Re.DEADLINE_EXCEEDED,"Request time out"));break;case d1.HTTP_ERROR:const p=u.getStatus();if(ze(gi,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const y=g?.error;if(y&&y.status&&y.message){const b=(function(w){const C=w.toLowerCase().replace(/_/g,"-");return Object.values(Re).indexOf(C)>=0?C:Re.UNKNOWN})(y.status);l(new Ke(b,y.message))}else l(new Ke(Re.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Ke(Re.UNAVAILABLE,"Connection failed."));break;default:at(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{ze(gi,`RPC '${e}' ${o} completed.`)}}));const h=JSON.stringify(i);ze(gi,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",h,r,15)}))}T_(e,n,r){const i=y2(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=iq(),a=rq(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");ze(gi,`Creating RPC '${e}' stream ${i}: ${h}`,l);const d=o.createWebChannel(h,l);this.I_(d);let p=!1,g=!1;const y=new tpe({Yo:x=>{g?ze(gi,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(p||(ze(gi,`Opening RPC '${e}' stream ${i} transport.`),d.open(),p=!0),ze(gi,`RPC '${e}' stream ${i} sending:`,x),d.send(x))},Zo:()=>d.close()}),b=(x,w,C)=>{x.listen(w,(E=>{try{C(E)}catch(_){setTimeout((()=>{throw _}),0)}}))};return b(d,qg.EventType.OPEN,(()=>{g||(ze(gi,`RPC '${e}' stream ${i} transport opened.`),y.o_())})),b(d,qg.EventType.CLOSE,(()=>{g||(g=!0,ze(gi,`RPC '${e}' stream ${i} transport closed`),y.a_(),this.E_(d))})),b(d,qg.EventType.ERROR,(x=>{g||(g=!0,xp(gi,`RPC '${e}' stream ${i} transport errored. Name:`,x.name,"Message:",x.message),y.a_(new Ke(Re.UNAVAILABLE,"The operation could not be completed")))})),b(d,qg.EventType.MESSAGE,(x=>{if(!g){const w=x.data[0];Xt(!!w,16349);const C=w,E=C?.error||C[0]?.error;if(E){ze(gi,`RPC '${e}' stream ${i} received error:`,E);const _=E.status;let A=(function(R){const D=ar[R];if(D!==void 0)return Vq(D)})(_),P=E.message;A===void 0&&(A=Re.INTERNAL,P="Unknown error status: "+_+" with message "+E.message),g=!0,y.a_(new Ke(A,P)),d.close()}else ze(gi,`RPC '${e}' stream ${i} received:`,w),y.u_(w)}})),b(a,nq.STAT_EVENT,(x=>{x.stat===s2.PROXY?ze(gi,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===s2.NOPROXY&&ze(gi,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{y.__()}),0),y}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function k_(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FS(t){return new ode(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jq{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&ze("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $B="PersistentStream";class e9{constructor(e,n,r,i,s,o,a,l){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Jq(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Re.RESOURCE_EXHAUSTED?(Hl(n.toString()),Hl("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===n&&this.G_(r,i)}),(r=>{e((()=>{const i=new Ke(Re.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ze($B,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ze($B,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class rpe extends e9{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=ude(this.serializer,e),r=(function(s){if(!("targetChange"in s))return ht.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ht.min():o.readTime?Ba(o.readTime):ht.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=m2(this.serializer),n.addTarget=(function(s,o){let a;const l=o.target;if(a=c2(l)?{documents:fde(s,l)}:{query:dde(s,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Uq(s,o.resumeToken);const u=f2(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(ht.min())>0){a.readTime=X1(s,o.snapshotVersion.toTimestamp());const u=f2(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a})(this.serializer,e);const r=mde(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=m2(this.serializer),n.removeTarget=e,this.q_(n)}}class ipe extends e9{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Xt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Xt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Xt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=hde(e.writeResults,e.commitTime),r=Ba(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=m2(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>cde(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class spe{}class ope extends spe{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Ke(Re.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.Go(e,d2(n,r),i,s,o))).catch((s=>{throw s.name==="FirebaseError"?(s.code===Re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ke(Re.UNKNOWN,s.toString())}))}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,a])=>this.connection.Ho(e,d2(n,r),i,o,a,s))).catch((o=>{throw o.name==="FirebaseError"?(o.code===Re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ke(Re.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class ape{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Hl(n),this.aa=!1):ze("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const of="RemoteStore";class lpe{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo((o=>{r.enqueueAndForget((async()=>{Mf(this)&&(ze(of,"Restarting streams for network reachability change."),await(async function(l){const u=pt(l);u.Ea.add(4),await dv(u),u.Ra.set("Unknown"),u.Ea.delete(4),await VS(u)})(this))}))})),this.Ra=new ape(r,i)}}async function VS(t){if(Mf(t))for(const e of t.da)await e(!0)}async function dv(t){for(const e of t.da)await e(!1)}function t9(t,e){const n=pt(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),sD(n)?iD(n):im(n).O_()&&rD(n,e))}function nD(t,e){const n=pt(t),r=im(n);n.Ia.delete(e),r.O_()&&n9(n,e),n.Ia.size===0&&(r.O_()?r.L_():Mf(n)&&n.Ra.set("Unknown"))}function rD(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ht.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}im(t).Y_(e)}function n9(t,e){t.Va.Ue(e),im(t).Z_(e)}function iD(t){t.Va=new nde({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),im(t).start(),t.Ra.ua()}function sD(t){return Mf(t)&&!im(t).x_()&&t.Ia.size>0}function Mf(t){return pt(t).Ea.size===0}function r9(t){t.Va=void 0}async function upe(t){t.Ra.set("Online")}async function cpe(t){t.Ia.forEach(((e,n)=>{rD(t,e)}))}async function hpe(t,e){r9(t),sD(t)?(t.Ra.ha(e),iD(t)):t.Ra.set("Unknown")}async function fpe(t,e,n){if(t.Ra.set("Online"),e instanceof zq&&e.state===2&&e.cause)try{await(async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))})(t,e)}catch(r){ze(of,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Q1(t,r)}else if(e instanceof y1?t.Va.Ze(e):e instanceof Bq?t.Va.st(e):t.Va.tt(e),!n.isEqual(ht.min()))try{const r=await Zq(t.localStore);n.compareTo(r)>=0&&await(function(s,o){const a=s.Va.Tt(o);return a.targetChanges.forEach(((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.Ia.get(u);h&&s.Ia.set(u,h.withResumeToken(l.resumeToken,o))}})),a.targetMismatches.forEach(((l,u)=>{const h=s.Ia.get(l);if(!h)return;s.Ia.set(l,h.withResumeToken(ai.EMPTY_BYTE_STRING,h.snapshotVersion)),n9(s,l);const d=new sc(h.target,l,u,h.sequenceNumber);rD(s,d)})),s.remoteSyncer.applyRemoteEvent(a)})(t,n)}catch(r){ze(of,"Failed to raise snapshot:",r),await Q1(t,r)}}async function Q1(t,e,n){if(!rm(e))throw e;t.Ea.add(1),await dv(t),t.Ra.set("Offline"),n||(n=()=>Zq(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{ze(of,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await VS(t)}))}function i9(t,e){return e().catch((n=>Q1(t,n,e)))}async function BS(t){const e=pt(t),n=_c(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:jR;for(;dpe(e);)try{const i=await Kde(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,ppe(e,i)}catch(i){await Q1(e,i)}s9(e)&&o9(e)}function dpe(t){return Mf(t)&&t.Ta.length<10}function ppe(t,e){t.Ta.push(e);const n=_c(t);n.O_()&&n.X_&&n.ea(e.mutations)}function s9(t){return Mf(t)&&!_c(t).x_()&&t.Ta.length>0}function o9(t){_c(t).start()}async function mpe(t){_c(t).ra()}async function gpe(t){const e=_c(t);for(const n of t.Ta)e.ea(n.mutations)}async function ype(t,e,n){const r=t.Ta.shift(),i=XR.from(r,e,n);await i9(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await BS(t)}async function vpe(t,e){e&&_c(t).X_&&await(async function(r,i){if((function(o){return Jfe(o)&&o!==Re.ABORTED})(i.code)){const s=r.Ta.shift();_c(r).B_(),await i9(r,(()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i))),await BS(r)}})(t,e),s9(t)&&o9(t)}async function OB(t,e){const n=pt(t);n.asyncQueue.verifyOperationInProgress(),ze(of,"RemoteStore received new credentials");const r=Mf(n);n.Ea.add(3),await dv(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await VS(n)}async function bpe(t,e){const n=pt(t);e?(n.Ea.delete(2),await VS(n)):e||(n.Ea.add(2),await dv(n),n.Ra.set("Unknown"))}function im(t){return t.ma||(t.ma=(function(n,r,i){const s=pt(n);return s.sa(),new rpe(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(t.datastore,t.asyncQueue,{Xo:upe.bind(null,t),t_:cpe.bind(null,t),r_:hpe.bind(null,t),H_:fpe.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),sD(t)?iD(t):t.Ra.set("Unknown")):(await t.ma.stop(),r9(t))}))),t.ma}function _c(t){return t.fa||(t.fa=(function(n,r,i){const s=pt(n);return s.sa(),new ipe(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:mpe.bind(null,t),r_:vpe.bind(null,t),ta:gpe.bind(null,t),na:ype.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await BS(t)):(await t.fa.stop(),t.Ta.length>0&&(ze(of,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new fc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new oD(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ke(Re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function aD(t,e){if(Hl("AsyncQueue",`${e}: ${t}`),rm(t))return new Ke(Re.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{static emptySet(e){return new ip(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||tt.comparator(n.key,r.key):(n,r)=>tt.comparator(n.key,r.key),this.keyedMap=Kg(),this.sortedSet=new $n(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ip)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ip;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PB{constructor(){this.ga=new $n(tt.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):at(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Ep{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach((a=>{o.push({type:0,doc:a})})),new Ep(e,n,ip.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$S(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xpe{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class wpe{constructor(){this.queries=MB(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=pt(n),s=i.queries;i.queries=MB(),s.forEach(((o,a)=>{for(const l of a.Sa)l.onError(r)}))})(this,new Ke(Re.ABORTED,"Firestore shutting down"))}}function MB(){return new Of((t=>Iq(t)),$S)}async function Spe(t,e){const n=pt(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new xpe,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=aD(o,`Initialization of query '${Wd(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&lD(n)}async function Tpe(t,e){const n=pt(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Cpe(t,e){const n=pt(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&lD(n)}function Epe(t,e,n){const r=pt(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function lD(t){t.Ca.forEach((e=>{e.next()}))}var v2,LB;(LB=v2||(v2={})).Ma="default",LB.Cache="cache";class Ipe{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ep(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ep.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==v2.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a9{constructor(e){this.key=e}}class l9{constructor(e){this.key=e}}class _pe{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Rt(),this.mutatedKeys=Rt(),this.eu=_q(e),this.tu=new ip(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new PB,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((h,d)=>{const p=i.get(h),g=OS(this.query,d)?d:null,y=!!p&&this.mutatedKeys.has(p.key),b=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let x=!1;p&&g?p.data.isEqual(g.data)?y!==b&&(r.track({type:3,doc:g}),x=!0):this.su(p,g)||(r.track({type:2,doc:g}),x=!0,(l&&this.eu(g,l)>0||u&&this.eu(g,u)<0)&&(a=!0)):!p&&g?(r.track({type:0,doc:g}),x=!0):p&&!g&&(r.track({type:1,doc:p}),x=!0,(l||u)&&(a=!0)),x&&(g?(o=o.add(g),s=b?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((h,d)=>(function(g,y){const b=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return at(20277,{Rt:x})}};return b(g)-b(y)})(h.type,d.type)||this.eu(h.doc,d.doc))),this.ou(r),i=i??!1;const a=n&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new Ep(this.query,e.tu,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new PB,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Rt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new l9(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new a9(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=Rt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ep.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const uD="SyncEngine";class Ape{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class kpe{constructor(e){this.key=e,this.hu=!1}}class Npe{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Of((a=>Iq(a)),$S),this.Iu=new Map,this.Eu=new Set,this.du=new $n(tt.comparator),this.Au=new Map,this.Ru=new ZR,this.Vu={},this.mu=new Map,this.fu=Cp.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Rpe(t,e,n=!0){const r=p9(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await u9(r,e,n,!0),i}async function Dpe(t,e){const n=p9(t);await u9(n,e,!0,!1)}async function u9(t,e,n,r){const i=await Xde(t.localStore,Va(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await $pe(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&t9(t.remoteStore,i),a}async function $pe(t,e,n,r,i){t.pu=(d,p,g)=>(async function(b,x,w,C){let E=x.view.ru(w);E.Cs&&(E=await kB(b.localStore,x.query,!1).then((({documents:N})=>x.view.ru(N,E))));const _=C&&C.targetChanges.get(x.targetId),A=C&&C.targetMismatches.get(x.targetId)!=null,P=x.view.applyChanges(E,b.isPrimaryClient,_,A);return VB(b,x.targetId,P.au),P.snapshot})(t,d,p,g);const s=await kB(t.localStore,e,!0),o=new _pe(e,s.Qs),a=o.ru(s.documents),l=fv.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);VB(t,n,u.au);const h=new Ape(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function Ope(t,e,n){const r=pt(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter((o=>!$S(o,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await g2(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&nD(r.remoteStore,i.targetId),b2(r,i.targetId)})).catch(nm)):(b2(r,i.targetId),await g2(r.localStore,i.targetId,!0))}async function Ppe(t,e){const n=pt(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),nD(n.remoteStore,r.targetId))}async function Mpe(t,e,n){const r=jpe(t);try{const i=await(function(o,a){const l=pt(o),u=Tn.now(),h=a.reduce(((g,y)=>g.add(y.key)),Rt());let d,p;return l.persistence.runTransaction("Locally write mutations","readwrite",(g=>{let y=ql(),b=Rt();return l.Ns.getEntries(g,h).next((x=>{y=x,y.forEach(((w,C)=>{C.isValidDocument()||(b=b.add(w))}))})).next((()=>l.localDocuments.getOverlayedDocuments(g,y))).next((x=>{d=x;const w=[];for(const C of a){const E=Kfe(C,d.get(C.key).overlayedDocument);E!=null&&w.push(new Pf(C.key,E,vq(E.value.mapValue),Bl.exists(!0)))}return l.mutationQueue.addMutationBatch(g,u,w,a)})).next((x=>{p=x;const w=x.applyToLocalDocumentSet(d,b);return l.documentOverlayCache.saveOverlays(g,x.batchId,w)}))})).then((()=>({batchId:p.batchId,changes:kq(d)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,a,l){let u=o.Vu[o.currentUser.toKey()];u||(u=new $n(Nt)),u=u.insert(a,l),o.Vu[o.currentUser.toKey()]=u})(r,i.batchId,n),await pv(r,i.changes),await BS(r.remoteStore)}catch(i){const s=aD(i,"Failed to persist write");n.reject(s)}}async function c9(t,e){const n=pt(t);try{const r=await Hde(n.localStore,e);e.targetChanges.forEach(((i,s)=>{const o=n.Au.get(s);o&&(Xt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?Xt(o.hu,14607):i.removedDocuments.size>0&&(Xt(o.hu,42227),o.hu=!1))})),await pv(n,r,e)}catch(r){await nm(r)}}function FB(t,e,n){const r=pt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach(((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)})),(function(o,a){const l=pt(o);l.onlineState=a;let u=!1;l.queries.forEach(((h,d)=>{for(const p of d.Sa)p.va(a)&&(u=!0)})),u&&lD(l)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Lpe(t,e,n){const r=pt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new $n(tt.comparator);o=o.insert(s,xi.newNoDocument(s,ht.min()));const a=Rt().add(s),l=new LS(ht.min(),new Map,new $n(Nt),o,a);await c9(r,l),r.du=r.du.remove(s),r.Au.delete(e),cD(r)}else await g2(r.localStore,e,!1).then((()=>b2(r,e,n))).catch(nm)}async function Fpe(t,e){const n=pt(t),r=e.batch.batchId;try{const i=await Gde(n.localStore,e);f9(n,r,null),h9(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await pv(n,i)}catch(i){await nm(i)}}async function Vpe(t,e,n){const r=pt(t);try{const i=await(function(o,a){const l=pt(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next((d=>(Xt(d!==null,37113),h=d.keys(),l.mutationQueue.removeMutationBatch(u,d)))).next((()=>l.mutationQueue.performConsistencyCheck(u))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h))).next((()=>l.localDocuments.getDocuments(u,h)))}))})(r.localStore,e);f9(r,e,n),h9(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await pv(r,i)}catch(i){await nm(i)}}function h9(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function f9(t,e,n){const r=pt(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function b2(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||d9(t,r)}))}function d9(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(nD(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),cD(t))}function VB(t,e,n){for(const r of n)r instanceof a9?(t.Ru.addReference(r.key,e),Bpe(t,r)):r instanceof l9?(ze(uD,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||d9(t,r.key)):at(19791,{wu:r})}function Bpe(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(ze(uD,"New document in limbo: "+n),t.Eu.add(r),cD(t))}function cD(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new tt(Sn.fromString(e)),r=t.fu.next();t.Au.set(r,new kpe(n)),t.du=t.du.insert(n,r),t9(t.remoteStore,new sc(Va(Eq(n.path)),r,"TargetPurposeLimboResolution",kS.ce))}}async function pv(t,e,n){const r=pt(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((a,l)=>{o.push(r.pu(l,e,n).then((u=>{if((u||n)&&r.isPrimaryClient){const h=u?!u.fromCache:n?.targetChanges.get(l.targetId)?.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){i.push(u);const h=eD.As(l.targetId,u);s.push(h)}})))})),await Promise.all(o),r.Pu.H_(i),await(async function(l,u){const h=pt(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(d=>ke.forEach(u,(p=>ke.forEach(p.Es,(g=>h.persistence.referenceDelegate.addReference(d,p.targetId,g))).next((()=>ke.forEach(p.ds,(g=>h.persistence.referenceDelegate.removeReference(d,p.targetId,g)))))))))}catch(d){if(!rm(d))throw d;ze(tD,"Failed to update sequence numbers: "+d)}for(const d of u){const p=d.targetId;if(!d.fromCache){const g=h.Ms.get(p),y=g.snapshotVersion,b=g.withLastLimboFreeSnapshotVersion(y);h.Ms=h.Ms.insert(p,b)}}})(r.localStore,s))}async function zpe(t,e){const n=pt(t);if(!n.currentUser.isEqual(e)){ze(uD,"User change. New user:",e.toKey());const r=await Qq(n.localStore,e);n.currentUser=e,(function(s,o){s.mu.forEach((a=>{a.forEach((l=>{l.reject(new Ke(Re.CANCELLED,o))}))})),s.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await pv(n,r.Ls)}}function Upe(t,e){const n=pt(t),r=n.Au.get(e);if(r&&r.hu)return Rt().add(r.key);{let i=Rt();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const a=n.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}function p9(t){const e=pt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=c9.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Upe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Lpe.bind(null,e),e.Pu.H_=Cpe.bind(null,e.eventManager),e.Pu.yu=Epe.bind(null,e.eventManager),e}function jpe(t){const e=pt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Fpe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Vpe.bind(null,e),e}class Z1{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=FS(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Wde(this.persistence,new zde,e.initialUser,this.serializer)}Cu(e){return new Yq(JR.mi,this.serializer)}Du(e){return new Qde}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Z1.provider={build:()=>new Z1};class Wpe extends Z1{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Xt(this.persistence.referenceDelegate instanceof Y1,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Ide(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?ss.withCacheSize(this.cacheSizeBytes):ss.DEFAULT;return new Yq((r=>Y1.mi(r,n)),this.serializer)}}class x2{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>FB(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=zpe.bind(null,this.syncEngine),await bpe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new wpe})()}createDatastore(e){const n=FS(e.databaseInfo.databaseId),r=(function(s){return new npe(s)})(e.databaseInfo);return(function(s,o,a,l){return new ope(s,o,a,l)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,s,o,a){return new lpe(r,i,s,o,a)})(this.localStore,this.datastore,e.asyncQueue,(n=>FB(this.syncEngine,n,0)),(function(){return DB.v()?new DB:new Zde})())}createSyncEngine(e,n){return(function(i,s,o,a,l,u,h){const d=new Npe(i,s,o,a,l,u);return h&&(d.gu=!0),d})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=pt(n);ze(of,"RemoteStore shutting down."),r.Ea.add(5),await dv(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}x2.provider={build:()=>new x2};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gpe{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Hl("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ac="FirestoreClient";class Hpe{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=vi.UNAUTHENTICATED,this.clientId=zR.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,(async o=>{ze(Ac,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(ze(Ac,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new fc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=aD(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function N_(t,e){t.asyncQueue.verifyOperationInProgress(),ze(Ac,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await Qq(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function BB(t,e){t.asyncQueue.verifyOperationInProgress();const n=await qpe(t);ze(Ac,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>OB(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>OB(e.remoteStore,i))),t._onlineComponents=e}async function qpe(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ze(Ac,"Using user provided OfflineComponentProvider");try{await N_(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===Re.FAILED_PRECONDITION||i.code===Re.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;xp("Error using user provided cache. Falling back to memory cache: "+n),await N_(t,new Z1)}}else ze(Ac,"Using default OfflineComponentProvider"),await N_(t,new Wpe(void 0));return t._offlineComponents}async function m9(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ze(Ac,"Using user provided OnlineComponentProvider"),await BB(t,t._uninitializedComponentsProvider._online)):(ze(Ac,"Using default OnlineComponentProvider"),await BB(t,new x2))),t._onlineComponents}function Kpe(t){return m9(t).then((e=>e.syncEngine))}async function Xpe(t){const e=await m9(t),n=e.eventManager;return n.onListen=Rpe.bind(null,e.syncEngine),n.onUnlisten=Ope.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Dpe.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Ppe.bind(null,e.syncEngine),n}function Ype(t,e,n={}){const r=new fc;return t.asyncQueue.enqueueAndForget((async()=>(function(s,o,a,l,u){const h=new Gpe({next:p=>{h.Nu(),o.enqueueAndForget((()=>Tpe(s,d))),p.fromCache&&l.source==="server"?u.reject(new Ke(Re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),d=new Ipe(a,h,{includeMetadataChanges:!0,qa:!0});return Spe(s,d)})(await Xpe(t),t.asyncQueue,e,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g9(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zB=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y9="firestore.googleapis.com",UB=!0;class jB{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ke(Re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=y9,this.ssl=UB}else this.host=e.host,this.ssl=e.ssl??UB;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Xq;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Cde)throw new Ke(Re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ofe("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=g9(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Ke(Re.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Ke(Re.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Ke(Re.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zS{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jB({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ke(Re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ke(Re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jB(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Yhe;switch(r.type){case"firstParty":return new efe(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ke(Re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=zB.get(n);r&&(ze("ComponentProvider","Removing Datastore"),zB.delete(n),r.terminate())})(this),Promise.resolve()}}function Qpe(t,e,n,r={}){t=U1(t,zS);const i=Jp(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;i&&(UH(`https://${a}`),jH("Firestore",!0)),s.host!==y9&&s.host!==a&&xp("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:a,ssl:i,emulatorOptions:r};if(!Sc(l,o)&&(t._setSettings(l),r.mockUserToken)){let u,h;if(typeof r.mockUserToken=="string")u=r.mockUserToken,h=vi.MOCK_USER;else{u=Sce(r.mockUserToken,t._app?.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new Ke(Re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new vi(d)}t._authCredentials=new Qhe(new oq(u,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new US(this.firestore,e,this._query)}}class si{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new dc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new si(this.firestore,e,this._key)}toJSON(){return{type:si._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(cv(n,si._jsonSchema))return new si(e,r||null,new tt(Sn.fromString(n.referencePath)))}}si._jsonSchemaVersion="firestore/documentReference/1.0",si._jsonSchema={type:cr("string",si._jsonSchemaVersion),referencePath:cr("string")};class dc extends US{constructor(e,n,r){super(e,n,Eq(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new si(this.firestore,null,new tt(e))}withConverter(e){return new dc(this.firestore,e,this._path)}}function v9(t,e,...n){if(t=hs(t),aq("collection","path",e),t instanceof zS){const r=Sn.fromString(e,...n);return rB(r),new dc(t,null,r)}{if(!(t instanceof si||t instanceof dc))throw new Ke(Re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Sn.fromString(e,...n));return rB(r),new dc(t.firestore,null,r)}}function Zpe(t,e,...n){if(t=hs(t),arguments.length===1&&(e=zR.newId()),aq("doc","path",e),t instanceof zS){const r=Sn.fromString(e,...n);return nB(r),new si(t,null,new tt(r))}{if(!(t instanceof si||t instanceof dc))throw new Ke(Re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Sn.fromString(e,...n));return nB(r),new si(t.firestore,t instanceof dc?t.converter:null,new tt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WB="AsyncQueue";class GB{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Jq(this,"async_queue_retry"),this._c=()=>{const r=k_();r&&ze(WB,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=k_();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=k_();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new fc;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!rm(e))throw e;ze(WB,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Hl("INTERNAL UNHANDLED ERROR: ",HB(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=oD.createAndSchedule(this,e,n,r,(s=>this.hc(s)));return this.tc.push(i),i}uc(){this.nc&&at(47125,{Pc:HB(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function HB(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class hD extends zS{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new GB,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new GB(e),this._firestoreClient=void 0,await e}}}function b9(t,e){const n=typeof t=="object"?t:VR(),r=typeof t=="string"?t:W1,i=Df(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=xce("firestore");s&&Qpe(i,...s)}return i}function x9(t){if(t._terminated)throw new Ke(Re.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Jpe(t),t._firestoreClient}function Jpe(t){const e=t._freezeSettings(),n=(function(i,s,o,a){return new yfe(i,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,g9(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Hpe(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(i){const s=i?._online.build();return{_offline:i?._offline.build(s),_online:s}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new uo(ai.fromBase64String(e))}catch(n){throw new Ke(Re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new uo(ai.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:uo._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(cv(e,uo._jsonSchema))return uo.fromBase64String(e.bytes)}}uo._jsonSchemaVersion="firestore/bytes/1.0",uo._jsonSchema={type:cr("string",uo._jsonSchemaVersion),bytes:cr("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ke(Re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ii(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ke(Re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ke(Re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Nt(this._lat,e._lat)||Nt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:za._jsonSchemaVersion}}static fromJSON(e){if(cv(e,za._jsonSchema))return new za(e.latitude,e.longitude)}}za._jsonSchemaVersion="firestore/geoPoint/1.0",za._jsonSchema={type:cr("string",za._jsonSchemaVersion),latitude:cr("number"),longitude:cr("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ua._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(cv(e,Ua._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Ua(e.vectorValues);throw new Ke(Re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ua._jsonSchemaVersion="firestore/vectorValue/1.0",Ua._jsonSchema={type:cr("string",Ua._jsonSchemaVersion),vectorValues:cr("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eme=/^__.*__$/;class tme{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Pf(e,this.data,this.fieldMask,n,this.fieldTransforms):new hv(e,this.data,n,this.fieldTransforms)}}function w9(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw at(40011,{Ac:t})}}class pD{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new pD({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return J1(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(w9(this.Ac)&&eme.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class nme{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||FS(e)}Cc(e,n,r,i=!1){return new pD({Ac:e,methodName:n,Dc:r,path:ii.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function rme(t){const e=t._freezeSettings(),n=FS(t._databaseId);return new nme(t._databaseId,!!e.ignoreUndefinedProperties,n)}function ime(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);E9("Data must be an object, but it was:",o,r);const a=T9(r,o);let l,u;if(s.merge)l=new Ko(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const p=sme(e,d,n);if(!o.contains(p))throw new Ke(Re.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);ame(h,p)||h.push(p)}l=new Ko(h),u=o.fieldTransforms.filter((d=>l.covers(d.field)))}else l=null,u=o.fieldTransforms;return new tme(new lo(a),l,u)}class mD extends dD{_toFieldTransform(e){return new Wfe(e.path,new Ny)}isEqual(e){return e instanceof mD}}function S9(t,e){if(C9(t=hs(t)))return E9("Unsupported field value:",e,t),T9(t,e);if(t instanceof dD)return(function(r,i){if(!w9(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const s=[];let o=0;for(const a of r){let l=S9(a,i.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}})(t,e)}return(function(r,i){if((r=hs(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return zfe(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Tn.fromDate(r);return{timestampValue:X1(i.serializer,s)}}if(r instanceof Tn){const s=new Tn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:X1(i.serializer,s)}}if(r instanceof za)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof uo)return{bytesValue:Uq(i.serializer,r._byteString)};if(r instanceof si){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:QR(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ua)return(function(o,a){return{mapValue:{fields:{[gq]:{stringValue:yq},[G1]:{arrayValue:{values:o.toArray().map((u=>{if(typeof u!="number")throw a.Sc("VectorValues must only contain numeric values.");return KR(a.serializer,u)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${UR(r)}`)})(t,e)}function T9(t,e){const n={};return cq(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$f(t,((r,i)=>{const s=S9(i,e.mc(r));s!=null&&(n[r]=s)})),{mapValue:{fields:n}}}function C9(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Tn||t instanceof za||t instanceof uo||t instanceof si||t instanceof dD||t instanceof Ua)}function E9(t,e,n){if(!C9(n)||!lq(n)){const r=UR(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function sme(t,e,n){if((e=hs(e))instanceof fD)return e._internalPath;if(typeof e=="string")return I9(t,e);throw J1("Field path arguments must be of type string or ",t,!1,void 0,n)}const ome=new RegExp("[~\\*/\\[\\]]");function I9(t,e,n){if(e.search(ome)>=0)throw J1(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new fD(...e.split("."))._internalPath}catch{throw J1(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function J1(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Ke(Re.INVALID_ARGUMENT,a+t+l)}function ame(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _9{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new si(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new lme(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(A9("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class lme extends _9{data(){return super.data()}}function A9(t,e){return typeof e=="string"?I9(t,e):e instanceof fD?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ume(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ke(Re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class cme{convertValue(e,n="none"){switch(Ic(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ec(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw at(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return $f(e,((i,s)=>{r[i]=this.convertValue(s,n)})),r}convertVectorValue(e){const n=e.fields?.[G1].arrayValue?.values?.map((r=>Xn(r.doubleValue)));return new Ua(n)}convertGeoPoint(e){return new za(Xn(e.latitude),Xn(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=RS(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(_y(e));default:return null}}convertTimestamp(e){const n=Cc(e);return new Tn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Sn.fromString(e);Xt(Kq(r),9688,{name:e});const i=new Ay(r.get(1),r.get(3)),s=new tt(r.popFirst(5));return i.isEqual(n)||Hl(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hme(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Dx{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class sp extends _9{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new v1(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(A9("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ke(Re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=sp._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}sp._jsonSchemaVersion="firestore/documentSnapshot/1.0",sp._jsonSchema={type:cr("string",sp._jsonSchemaVersion),bundleSource:cr("string","DocumentSnapshot"),bundleName:cr("string"),bundle:cr("string")};class v1 extends sp{data(e={}){return super.data(e)}}class op{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Dx(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new v1(this._firestore,this._userDataWriter,r.key,r,new Dx(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ke(Re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map((a=>{const l=new v1(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Dx(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((a=>s||a.type!==3)).map((a=>{const l=new v1(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Dx(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:fme(a.type),doc:l,oldIndex:u,newIndex:h}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ke(Re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=op._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=zR.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach((s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function fme(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return at(61501,{type:t})}}op._jsonSchemaVersion="firestore/querySnapshot/1.0",op._jsonSchema={type:cr("string",op._jsonSchemaVersion),bundleSource:cr("string","QuerySnapshot"),bundleName:cr("string"),bundle:cr("string")};class dme extends cme{constructor(e){super(),this.firestore=e}convertBytes(e){return new uo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new si(this.firestore,null,n)}}function pme(t){t=U1(t,US);const e=U1(t.firestore,hD),n=x9(e),r=new dme(e);return ume(t._query),Ype(n,t._query).then((i=>new op(e,r,t,i)))}function mme(t,e){const n=U1(t.firestore,hD),r=Zpe(t),i=hme(t.converter,e);return gme(n,[ime(rme(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Bl.exists(!1))]).then((()=>r))}function gme(t,e){return(function(r,i){const s=new fc;return r.asyncQueue.enqueueAndForget((async()=>Mpe(await Kpe(r),i,s))),s.promise})(x9(t),e)}function yme(){return new mD("serverTimestamp")}(function(e,n=!0){(function(i){tm=i})(em),Za(new ea("firestore",((r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new hD(new Zhe(r.getProvider("auth-internal")),new tfe(o,r.getProvider("app-check-internal")),(function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Ke(Re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ay(u.options.projectId,h)})(o,i),o);return s={useFetchStreams:n,...s},a._setSettings(s),a}),"PUBLIC").setMultipleInstances(!0)),yo(Z4,J4,e),yo(Z4,J4,"esm2020")})();var vme="firebase",bme="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yo(vme,bme,"app");const k9="@firebase/installations",gD="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N9=1e4,R9=`w:${gD}`,D9="FIS_v2",xme="https://firebaseinstallations.googleapis.com/v1",wme=3600*1e3,Sme="installations",Tme="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cme={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},af=new Rf(Sme,Tme,Cme);function $9(t){return t instanceof sa&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O9({projectId:t}){return`${xme}/projects/${t}/installations`}function P9(t){return{token:t.token,requestStatus:2,expiresIn:Ime(t.expiresIn),creationTime:Date.now()}}async function M9(t,e){const r=(await e.json()).error;return af.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function L9({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Eme(t,{refreshToken:e}){const n=L9(t);return n.append("Authorization",_me(e)),n}async function F9(t){const e=await t();return e.status>=500&&e.status<600?t():e}function Ime(t){return Number(t.replace("s","000"))}function _me(t){return`${D9} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ame({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=O9(t),i=L9(t),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={fid:n,authVersion:D9,appId:t.appId,sdkVersion:R9},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await F9(()=>fetch(r,a));if(l.ok){const u=await l.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:P9(u.authToken)}}else throw await M9("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V9(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kme(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nme=/^[cdef][\w-]{21}$/,w2="";function Rme(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=Dme(t);return Nme.test(n)?n:w2}catch{return w2}}function Dme(t){return kme(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jS(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B9=new Map;function z9(t,e){const n=jS(t);U9(n,e),$me(n,e)}function U9(t,e){const n=B9.get(t);if(n)for(const r of n)r(e)}function $me(t,e){const n=Ome();n&&n.postMessage({key:t,fid:e}),Pme()}let jh=null;function Ome(){return!jh&&"BroadcastChannel"in self&&(jh=new BroadcastChannel("[Firebase] FID Change"),jh.onmessage=t=>{U9(t.data.key,t.data.fid)}),jh}function Pme(){B9.size===0&&jh&&(jh.close(),jh=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mme="firebase-installations-database",Lme=1,lf="firebase-installations-store";let R_=null;function yD(){return R_||(R_=XH(Mme,Lme,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(lf)}}})),R_}async function ew(t,e){const n=jS(t),i=(await yD()).transaction(lf,"readwrite"),s=i.objectStore(lf),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&z9(t,e.fid),e}async function j9(t){const e=jS(t),r=(await yD()).transaction(lf,"readwrite");await r.objectStore(lf).delete(e),await r.done}async function WS(t,e){const n=jS(t),i=(await yD()).transaction(lf,"readwrite"),s=i.objectStore(lf),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&z9(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vD(t){let e;const n=await WS(t.appConfig,r=>{const i=Fme(r),s=Vme(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===w2?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function Fme(t){const e=t||{fid:Rme(),registrationStatus:0};return W9(e)}function Vme(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(af.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=Bme(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:zme(t)}:{installationEntry:e}}async function Bme(t,e){try{const n=await Ame(t,e);return ew(t.appConfig,n)}catch(n){throw $9(n)&&n.customData.serverCode===409?await j9(t.appConfig):await ew(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function zme(t){let e=await qB(t.appConfig);for(;e.registrationStatus===1;)await V9(100),e=await qB(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await vD(t);return r||n}return e}function qB(t){return WS(t,e=>{if(!e)throw af.create("installation-not-found");return W9(e)})}function W9(t){return Ume(t)?{fid:t.fid,registrationStatus:0}:t}function Ume(t){return t.registrationStatus===1&&t.registrationTime+N9<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jme({appConfig:t,heartbeatServiceProvider:e},n){const r=Wme(t,n),i=Eme(t,n),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={installation:{sdkVersion:R9,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await F9(()=>fetch(r,a));if(l.ok){const u=await l.json();return P9(u)}else throw await M9("Generate Auth Token",l)}function Wme(t,{fid:e}){return`${O9(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bD(t,e=!1){let n;const r=await WS(t.appConfig,s=>{if(!G9(s))throw af.create("not-registered");const o=s.authToken;if(!e&&qme(o))return s;if(o.requestStatus===1)return n=Gme(t,e),s;{if(!navigator.onLine)throw af.create("app-offline");const a=Xme(s);return n=Hme(t,a),a}});return n?await n:r.authToken}async function Gme(t,e){let n=await KB(t.appConfig);for(;n.authToken.requestStatus===1;)await V9(100),n=await KB(t.appConfig);const r=n.authToken;return r.requestStatus===0?bD(t,e):r}function KB(t){return WS(t,e=>{if(!G9(e))throw af.create("not-registered");const n=e.authToken;return Yme(n)?{...e,authToken:{requestStatus:0}}:e})}async function Hme(t,e){try{const n=await jme(t,e),r={...e,authToken:n};return await ew(t.appConfig,r),n}catch(n){if($9(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await j9(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await ew(t.appConfig,r)}throw n}}function G9(t){return t!==void 0&&t.registrationStatus===2}function qme(t){return t.requestStatus===2&&!Kme(t)}function Kme(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+wme}function Xme(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function Yme(t){return t.requestStatus===1&&t.requestTime+N9<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qme(t){const e=t,{installationEntry:n,registrationPromise:r}=await vD(e);return r?r.catch(console.error):bD(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zme(t,e=!1){const n=t;return await Jme(n),(await bD(n,e)).token}async function Jme(t){const{registrationPromise:e}=await vD(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ege(t){if(!t||!t.options)throw D_("App Configuration");if(!t.name)throw D_("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw D_(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function D_(t){return af.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H9="installations",tge="installations-internal",nge=t=>{const e=t.getProvider("app").getImmediate(),n=ege(e),r=Df(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},rge=t=>{const e=t.getProvider("app").getImmediate(),n=Df(e,H9).getImmediate();return{getId:()=>Qme(n),getToken:i=>Zme(n,i)}};function ige(){Za(new ea(H9,nge,"PUBLIC")),Za(new ea(tge,rge,"PRIVATE"))}ige();yo(k9,gD);yo(k9,gD,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw="analytics",sge="firebase_id",oge="origin",age=60*1e3,lge="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",xD="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi=new AS("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uge={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ns=new Rf("analytics","Analytics",uge);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cge(t){if(!t.startsWith(xD)){const e=Ns.create("invalid-gtag-resource",{gtagURL:t});return Bi.warn(e.message),""}return t}function q9(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function hge(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function fge(t,e){const n=hge("firebase-js-sdk-policy",{createScriptURL:cge}),r=document.createElement("script"),i=`${xD}?l=${t}&id=${e}`;r.src=n?n?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function dge(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function pge(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const l=(await q9(n)).find(u=>u.measurementId===i);l&&await e[l.appId]}}catch(a){Bi.error(a)}t("config",i,s)}async function mge(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=await q9(n);for(const l of o){const u=a.find(d=>d.measurementId===l),h=u&&e[u.appId];if(h)s.push(h);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){Bi.error(s)}}function gge(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[a,l]=o;await mge(t,e,n,a,l)}else if(s==="config"){const[a,l]=o;await pge(t,e,n,r,a,l)}else if(s==="consent"){const[a,l]=o;t("consent",a,l)}else if(s==="get"){const[a,l,u]=o;t("get",a,l,u)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){Bi.error(a)}}return i}function yge(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=gge(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function vge(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(xD)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bge=30,xge=1e3;class wge{constructor(e={},n=xge){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const K9=new wge;function Sge(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function Tge(t){const{appId:e,apiKey:n}=t,r={method:"GET",headers:Sge(n)},i=lge.replace("{app-id}",e),s=await fetch(i,r);if(s.status!==200&&s.status!==304){let o="";try{const a=await s.json();a.error?.message&&(o=a.error.message)}catch{}throw Ns.create("config-fetch-failed",{httpStatus:s.status,responseMessage:o})}return s.json()}async function Cge(t,e=K9,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw Ns.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Ns.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new _ge;return setTimeout(async()=>{a.abort()},age),X9({appId:r,apiKey:i,measurementId:s},o,a,e)}async function X9(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=K9){const{appId:s,measurementId:o}=t;try{await Ege(r,e)}catch(a){if(o)return Bi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${a?.message}]`),{appId:s,measurementId:o};throw a}try{const a=await Tge(t);return i.deleteThrottleMetadata(s),a}catch(a){const l=a;if(!Ige(l)){if(i.deleteThrottleMetadata(s),o)return Bi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${l?.message}]`),{appId:s,measurementId:o};throw a}const u=Number(l?.customData?.httpStatus)===503?U4(n,i.intervalMillis,bge):U4(n,i.intervalMillis),h={throttleEndTimeMillis:Date.now()+u,backoffCount:n+1};return i.setThrottleMetadata(s,h),Bi.debug(`Calling attemptFetch again in ${u} millis`),X9(t,h,r,i)}}function Ege(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Ns.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Ige(t){if(!(t instanceof sa)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class _ge{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function Age(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o={...r,send_to:s};t("event",n,o)}}async function kge(t,e,n,r){if(r&&r.global){const i={};for(const s of Object.keys(n))i[`user_properties.${s}`]=n[s];return t("set",i),Promise.resolve()}else{const i=await e;t("config",i,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nge(){if(GH())try{await HH()}catch(t){return Bi.warn(Ns.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}else return Bi.warn(Ns.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Rge(t,e,n,r,i,s,o){const a=Cge(t);a.then(p=>{n[p.measurementId]=p.appId,t.options.measurementId&&p.measurementId!==t.options.measurementId&&Bi.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${p.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(p=>Bi.error(p)),e.push(a);const l=Nge().then(p=>{if(p)return r.getId()}),[u,h]=await Promise.all([a,l]);vge(s)||fge(s,u.measurementId),i("js",new Date);const d=o?.config??{};return d[oge]="firebase",d.update=!0,h!=null&&(d[sge]=h),i("config",u.measurementId,d),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dge{constructor(e){this.app=e}_delete(){return delete ap[this.app.options.appId],Promise.resolve()}}let ap={},XB=[];const YB={};let $_="dataLayer",$ge="gtag",QB,wD,ZB=!1;function Oge(){const t=[];if(WH()&&t.push("This is a browser extension environment."),Rce()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Ns.create("invalid-analytics-context",{errorInfo:e});Bi.warn(n.message)}}function Pge(t,e,n){Oge();const r=t.options.appId;if(!r)throw Ns.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Bi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ns.create("no-api-key");if(ap[r]!=null)throw Ns.create("already-exists",{id:r});if(!ZB){dge($_);const{wrappedGtag:s,gtagCore:o}=yge(ap,XB,YB,$_,$ge);wD=s,QB=o,ZB=!0}return ap[r]=Rge(t,XB,YB,e,QB,$_,n),new Dge(t)}function Mge(t=VR()){t=hs(t);const e=Df(t,tw);return e.isInitialized()?e.getImmediate():Lge(t)}function Lge(t,e={}){const n=Df(t,tw);if(n.isInitialized()){const i=n.getImmediate();if(Sc(e,n.getOptions()))return i;throw Ns.create("already-initialized")}return n.initialize({options:e})}function Fge(t,e,n){t=hs(t),kge(wD,ap[t.app.options.appId],e,n).catch(r=>Bi.error(r))}function Vge(t,e,n,r){t=hs(t),Age(wD,ap[t.app.options.appId],e,n,r).catch(i=>Bi.error(i))}const JB="@firebase/analytics",ez="0.10.19";function Bge(){Za(new ea(tw,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return Pge(r,i,n)},"PUBLIC")),Za(new ea("analytics-internal",t,"PRIVATE")),yo(JB,ez),yo(JB,ez,"esm2020");function t(e){try{const n=e.getProvider(tw).getImmediate();return{logEvent:(r,i,s)=>Vge(n,r,i,s),setUserProperties:(r,i)=>Fge(n,r,i)}}catch(n){throw Ns.create("interop-component-reg-failed",{reason:n})}}}Bge();function Y9(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const zge=Y9,Q9=new Rf("auth","Firebase",Y9());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw=new AS("@firebase/auth");function Uge(t,...e){nw.logLevel<=kt.WARN&&nw.warn(`Auth (${em}): ${t}`,...e)}function b1(t,...e){nw.logLevel<=kt.ERROR&&nw.error(`Auth (${em}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kl(t,...e){throw SD(t,...e)}function ja(t,...e){return SD(t,...e)}function Z9(t,e,n){const r={...zge(),[e]:n};return new Rf("auth","Firebase",r).create(e,{appName:t.name})}function pc(t){return Z9(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function SD(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Q9.create(t,...e)}function ct(t,e,...n){if(!t)throw SD(e,...n)}function Pl(t){const e="INTERNAL ASSERTION FAILED: "+t;throw b1(e),new Error(e)}function Xl(t,e){t||Pl(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S2(){return typeof self<"u"&&self.location?.href||""}function jge(){return tz()==="http:"||tz()==="https:"}function tz(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wge(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(jge()||WH()||"connection"in navigator)?navigator.onLine:!0}function Gge(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{constructor(e,n){this.shortDelay=e,this.longDelay=n,Xl(n>e,"Short delay should be less than long delay!"),this.isMobile=Ece()||Ace()}get(){return Wge()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TD(t,e){Xl(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J9{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Pl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Pl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Pl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hge={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qge=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Kge=new mv(3e4,6e4);function GS(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function sm(t,e,n,r,i={}){return e8(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=uv({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...s};return _ce()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Jp(t.emulatorConfig.host)&&(u.credentials="include"),J9.fetch()(await n8(t,t.config.apiHost,n,a),u)})}async function e8(t,e,n){t._canInitEmulator=!1;const r={...Hge,...e};try{const i=new Xge(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw $x(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw $x(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw $x(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw $x(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Z9(t,h,u);Kl(t,h)}}catch(i){if(i instanceof sa)throw i;Kl(t,"network-request-failed",{message:String(i)})}}async function t8(t,e,n,r,i={}){const s=await sm(t,e,n,r,i);return"mfaPendingCredential"in s&&Kl(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function n8(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?TD(t.config,i):`${t.config.apiScheme}://${i}`;return qge.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}class Xge{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ja(this.auth,"network-request-failed")),Kge.get())})}}function $x(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=ja(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yge(t,e){return sm(t,"POST","/v1/accounts:delete",e)}async function rw(t,e){return sm(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function py(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Qge(t,e=!1){const n=hs(t),r=await n.getIdToken(e),i=CD(r);ct(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:py(O_(i.auth_time)),issuedAtTime:py(O_(i.iat)),expirationTime:py(O_(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function O_(t){return Number(t)*1e3}function CD(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return b1("JWT malformed, contained fewer than 3 sections"),null;try{const i=FH(n);return i?JSON.parse(i):(b1("Failed to decode base64 JWT payload"),null)}catch(i){return b1("Caught error parsing JWT payload as JSON",i?.toString()),null}}function nz(t){const e=CD(t);return ct(e,"internal-error"),ct(typeof e.exp<"u","internal-error"),ct(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $y(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof sa&&Zge(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Zge({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jge{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=py(this.lastLoginAt),this.creationTime=py(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iw(t){const e=t.auth,n=await t.getIdToken(),r=await $y(t,rw(e,{idToken:n}));ct(r?.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=i.providerUserInfo?.length?r8(i.providerUserInfo):[],o=tye(t.providerData,s),a=t.isAnonymous,l=!(t.email&&i.passwordHash)&&!o?.length,u=a?l:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new T2(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function eye(t){const e=hs(t);await iw(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function tye(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function r8(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nye(t,e){const n=await e8(t,{},async()=>{const r=uv({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await n8(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&Jp(t.emulatorConfig.host)&&(l.credentials="include"),J9.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function rye(t,e){return sm(t,"POST","/v2/accounts:revokeToken",GS(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ct(e.idToken,"internal-error"),ct(typeof e.idToken<"u","internal-error"),ct(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):nz(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ct(e.length!==0,"internal-error");const n=nz(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ct(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await nye(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new lp;return r&&(ct(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ct(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ct(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new lp,this.toJSON())}_performRefresh(){return Pl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xu(t,e){ct(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Xo{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new Jge(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new T2(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await $y(this,this.stsTokenManager.getToken(this.auth,e));return ct(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Qge(this,e)}reload(){return eye(this)}_assign(e){this!==e&&(ct(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Xo({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ct(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await iw(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Go(this.auth.app))return Promise.reject(pc(this.auth));const e=await this.getIdToken();return await $y(this,Yge(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:d,emailVerified:p,isAnonymous:g,providerData:y,stsTokenManager:b}=n;ct(d&&b,e,"internal-error");const x=lp.fromJSON(this.name,b);ct(typeof d=="string",e,"internal-error"),Xu(r,e.name),Xu(i,e.name),ct(typeof p=="boolean",e,"internal-error"),ct(typeof g=="boolean",e,"internal-error"),Xu(s,e.name),Xu(o,e.name),Xu(a,e.name),Xu(l,e.name),Xu(u,e.name),Xu(h,e.name);const w=new Xo({uid:d,auth:e,email:i,emailVerified:p,displayName:r,isAnonymous:g,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:x,createdAt:u,lastLoginAt:h});return y&&Array.isArray(y)&&(w.providerData=y.map(C=>({...C}))),l&&(w._redirectEventId=l),w}static async _fromIdTokenResponse(e,n,r=!1){const i=new lp;i.updateFromServerResponse(n);const s=new Xo({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await iw(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ct(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?r8(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new lp;a.updateFromIdToken(r);const l=new Xo({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new T2(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rz=new Map;function Ml(t){Xl(t instanceof Function,"Expected a class definition");let e=rz.get(t);return e?(Xl(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,rz.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i8{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}i8.type="NONE";const iz=i8;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x1(t,e,n){return`firebase:${t}:${e}:${n}`}class up{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=x1(this.userKey,i.apiKey,s),this.fullPersistenceKey=x1("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await rw(this.auth,{idToken:e}).catch(()=>{});return n?Xo._fromGetAccountInfoResponse(this.auth,n,e):null}return Xo._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new up(Ml(iz),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Ml(iz);const o=x1(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){let d;if(typeof h=="string"){const p=await rw(e,{idToken:h}).catch(()=>{});if(!p)break;d=await Xo._fromGetAccountInfoResponse(e,p,h)}else d=Xo._fromJSON(e,h);u!==s&&(a=d),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new up(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new up(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sz(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(l8(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(s8(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(c8(e))return"Blackberry";if(h8(e))return"Webos";if(o8(e))return"Safari";if((e.includes("chrome/")||a8(e))&&!e.includes("edge/"))return"Chrome";if(u8(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function s8(t=Ii()){return/firefox\//i.test(t)}function o8(t=Ii()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function a8(t=Ii()){return/crios\//i.test(t)}function l8(t=Ii()){return/iemobile/i.test(t)}function u8(t=Ii()){return/android/i.test(t)}function c8(t=Ii()){return/blackberry/i.test(t)}function h8(t=Ii()){return/webos/i.test(t)}function ED(t=Ii()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function iye(t=Ii()){return ED(t)&&!!window.navigator?.standalone}function sye(){return kce()&&document.documentMode===10}function f8(t=Ii()){return ED(t)||u8(t)||h8(t)||c8(t)||/windows phone/i.test(t)||l8(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d8(t,e=[]){let n;switch(t){case"Browser":n=sz(Ii());break;case"Worker":n=`${sz(Ii())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${em}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oye{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aye(t,e={}){return sm(t,"GET","/v2/passwordPolicy",GS(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lye=6;class uye{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??lye,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cye{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new oz(this),this.idTokenSubscription=new oz(this),this.beforeStateQueue=new oye(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Q9,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ml(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await up.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await rw(this,{idToken:e}),r=await Xo._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Go(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=this.redirectUser?._redirectEventId,o=r?._redirectEventId,a=await this.tryRedirectSignIn(e);(!s||s===o)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ct(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await iw(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Gge()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Go(this.app))return Promise.reject(pc(this));const n=e?hs(e):null;return n&&ct(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ct(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Go(this.app)?Promise.reject(pc(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Go(this.app)?Promise.reject(pc(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ml(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await aye(this),n=new uye(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Rf("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await rye(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ml(e)||this._popupRedirectResolver;ct(n,this,"argument-error"),this.redirectPersistenceManager=await up.create(this,[Ml(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ct(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ct(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=d8(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Go(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Uge(`Error while retrieving App Check token: ${e.error}`),e?.token}}function HS(t){return hs(t)}class oz{constructor(e){this.auth=e,this.observer=null,this.addObserver=Mce(n=>this.observer=n)}get next(){return ct(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ID={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function hye(t){ID=t}function fye(t){return ID.loadJS(t)}function dye(){return ID.gapiScript}function pye(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mye(t,e){const n=Df(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Sc(s,e??{}))return i;Kl(i,"already-initialized")}return n.initialize({options:e})}function gye(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Ml);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function yye(t,e,n){const r=HS(t);ct(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=p8(e),{host:o,port:a}=vye(e),l=a===null?"":`:${a}`,u={url:`${s}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ct(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ct(Sc(u,r.config.emulator)&&Sc(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Jp(o)?(UH(`${s}//${o}${l}`),jH("Auth",!0)):bye()}function p8(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function vye(t){const e=p8(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:az(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:az(o)}}}function az(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function bye(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m8{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Pl("not implemented")}_getIdTokenResponse(e){return Pl("not implemented")}_linkToIdToken(e,n){return Pl("not implemented")}_getReauthenticationResolver(e){return Pl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cp(t,e){return t8(t,"POST","/v1/accounts:signInWithIdp",GS(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xye="http://localhost";class uf extends m8{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new uf(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Kl("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new uf(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return cp(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,cp(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,cp(e,n)}buildRequest(){const e={requestUri:xye,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=uv(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g8{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv extends g8{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec extends gv{constructor(){super("facebook.com")}static credential(e){return uf._fromParams({providerId:ec.PROVIDER_ID,signInMethod:ec.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ec.credentialFromTaggedObject(e)}static credentialFromError(e){return ec.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ec.credential(e.oauthAccessToken)}catch{return null}}}ec.FACEBOOK_SIGN_IN_METHOD="facebook.com";ec.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc extends gv{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return uf._fromParams({providerId:tc.PROVIDER_ID,signInMethod:tc.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return tc.credentialFromTaggedObject(e)}static credentialFromError(e){return tc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return tc.credential(n,r)}catch{return null}}}tc.GOOGLE_SIGN_IN_METHOD="google.com";tc.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc extends gv{constructor(){super("github.com")}static credential(e){return uf._fromParams({providerId:nc.PROVIDER_ID,signInMethod:nc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return nc.credentialFromTaggedObject(e)}static credentialFromError(e){return nc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return nc.credential(e.oauthAccessToken)}catch{return null}}}nc.GITHUB_SIGN_IN_METHOD="github.com";nc.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc extends gv{constructor(){super("twitter.com")}static credential(e,n){return uf._fromParams({providerId:rc.PROVIDER_ID,signInMethod:rc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return rc.credentialFromTaggedObject(e)}static credentialFromError(e){return rc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return rc.credential(n,r)}catch{return null}}}rc.TWITTER_SIGN_IN_METHOD="twitter.com";rc.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wye(t,e){return t8(t,"POST","/v1/accounts:signUp",GS(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Xo._fromIdTokenResponse(e,r,i),o=lz(r);return new kc({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=lz(r);return new kc({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function lz(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sye(t){if(Go(t.app))return Promise.reject(pc(t));const e=HS(t);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new kc({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await wye(e,{returnSecureToken:!0}),r=await kc._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw extends sa{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,sw.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new sw(e,n,r,i)}}function y8(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?sw._fromErrorAndOperation(t,s,e,r):s})}async function Tye(t,e,n=!1){const r=await $y(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return kc._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cye(t,e,n=!1){const{auth:r}=t;if(Go(r.app))return Promise.reject(pc(r));const i="reauthenticate";try{const s=await $y(t,y8(r,i,e,t),n);ct(s.idToken,r,"internal-error");const o=CD(s.idToken);ct(o,r,"internal-error");const{sub:a}=o;return ct(t.uid===a,r,"user-mismatch"),kc._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Kl(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eye(t,e,n=!1){if(Go(t.app))return Promise.reject(pc(t));const r="signIn",i=await y8(t,r,e),s=await kc._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function Iye(t,e,n,r){return hs(t).onIdTokenChanged(e,n,r)}function _ye(t,e,n){return hs(t).beforeAuthStateChanged(e,n)}const ow="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v8{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ow,"1"),this.storage.removeItem(ow),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aye=1e3,kye=10;class b8 extends v8{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=f8(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);sye()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,kye):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Aye)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}b8.type="LOCAL";const Nye=b8;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x8 extends v8{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}x8.type="SESSION";const w8=x8;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rye(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new qS(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await Rye(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}qS.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _D(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dye{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=_D("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const p=d;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wa(){return window}function $ye(t){Wa().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S8(){return typeof Wa().WorkerGlobalScope<"u"&&typeof Wa().importScripts=="function"}async function Oye(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Pye(){return navigator?.serviceWorker?.controller||null}function Mye(){return S8()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T8="firebaseLocalStorageDb",Lye=1,aw="firebaseLocalStorage",C8="fbase_key";class yv{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function KS(t,e){return t.transaction([aw],e?"readwrite":"readonly").objectStore(aw)}function Fye(){const t=indexedDB.deleteDatabase(T8);return new yv(t).toPromise()}function C2(){const t=indexedDB.open(T8,Lye);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(aw,{keyPath:C8})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(aw)?e(r):(r.close(),await Fye(),e(await C2()))})})}async function uz(t,e,n){const r=KS(t,!0).put({[C8]:e,value:n});return new yv(r).toPromise()}async function Vye(t,e){const n=KS(t,!1).get(e),r=await new yv(n).toPromise();return r===void 0?null:r.value}function cz(t,e){const n=KS(t,!0).delete(e);return new yv(n).toPromise()}const Bye=800,zye=3;class E8{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await C2(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>zye)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return S8()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=qS._getInstance(Mye()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Oye(),!this.activeServiceWorker)return;this.sender=new Dye(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Pye()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await C2();return await uz(e,ow,"1"),await cz(e,ow),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>uz(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Vye(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>cz(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=KS(i,!1).getAll();return new yv(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Bye)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}E8.type="LOCAL";const Uye=E8;new mv(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jye(t,e){return e?Ml(e):(ct(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD extends m8{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return cp(e,this._buildIdpRequest())}_linkToIdToken(e,n){return cp(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return cp(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Wye(t){return Eye(t.auth,new AD(t),t.bypassAuthState)}function Gye(t){const{auth:e,user:n}=t;return ct(n,e,"internal-error"),Cye(n,new AD(t),t.bypassAuthState)}async function Hye(t){const{auth:e,user:n}=t;return ct(n,e,"internal-error"),Tye(n,new AD(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I8{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Wye;case"linkViaPopup":case"linkViaRedirect":return Hye;case"reauthViaPopup":case"reauthViaRedirect":return Gye;default:Kl(this.auth,"internal-error")}}resolve(e){Xl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Xl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qye=new mv(2e3,1e4);class tp extends I8{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,tp.currentPopupAction&&tp.currentPopupAction.cancel(),tp.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ct(e,this.auth,"internal-error"),e}async onExecution(){Xl(this.filter.length===1,"Popup operations only handle one event");const e=_D();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ja(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ja(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,tp.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ja(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,qye.get())};e()}}tp.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kye="pendingRedirect",w1=new Map;class Xye extends I8{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=w1.get(this.auth._key());if(!e){try{const r=await Yye(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}w1.set(this.auth._key(),e)}return this.bypassAuthState||w1.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Yye(t,e){const n=Jye(e),r=Zye(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Qye(t,e){w1.set(t._key(),e)}function Zye(t){return Ml(t._redirectPersistence)}function Jye(t){return x1(Kye,t.config.apiKey,t.name)}async function eve(t,e,n=!1){if(Go(t.app))return Promise.reject(pc(t));const r=HS(t),i=jye(r,e),o=await new Xye(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tve=600*1e3;class nve{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!rve(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!_8(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(ja(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tve&&this.cachedEventUids.clear(),this.cachedEventUids.has(hz(e))}saveEventToCache(e){this.cachedEventUids.add(hz(e)),this.lastProcessedEventTime=Date.now()}}function hz(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function _8({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function rve(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _8(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ive(t,e={}){return sm(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sve=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ove=/^https?/;async function ave(t){if(t.config.emulator)return;const{authorizedDomains:e}=await ive(t);for(const n of e)try{if(lve(n))return}catch{}Kl(t,"unauthorized-domain")}function lve(t){const e=S2(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!ove.test(n))return!1;if(sve.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uve=new mv(3e4,6e4);function fz(){const t=Wa().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function cve(t){return new Promise((e,n)=>{function r(){fz(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fz(),n(ja(t,"network-request-failed"))},timeout:uve.get()})}if(Wa().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Wa().gapi?.load)r();else{const i=pye("iframefcb");return Wa()[i]=()=>{gapi.load?r():n(ja(t,"network-request-failed"))},fye(`${dye()}?onload=${i}`).catch(s=>n(s))}}).catch(e=>{throw S1=null,e})}let S1=null;function hve(t){return S1=S1||cve(t),S1}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fve=new mv(5e3,15e3),dve="__/auth/iframe",pve="emulator/auth/iframe",mve={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gve=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yve(t){const e=t.config;ct(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?TD(e,pve):`https://${t.config.authDomain}/${dve}`,r={apiKey:e.apiKey,appName:t.name,v:em},i=gve.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${uv(r).slice(1)}`}async function vve(t){const e=await hve(t),n=Wa().gapi;return ct(n,t,"internal-error"),e.open({where:document.body,url:yve(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mve,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=ja(t,"network-request-failed"),a=Wa().setTimeout(()=>{s(o)},fve.get());function l(){Wa().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bve={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},xve=500,wve=600,Sve="_blank",Tve="http://localhost";class dz{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Cve(t,e,n,r=xve,i=wve){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...bve,width:r.toString(),height:i.toString(),top:s,left:o},u=Ii().toLowerCase();n&&(a=a8(u)?Sve:n),s8(u)&&(e=e||Tve,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[g,y])=>`${p}${g}=${y},`,"");if(iye(u)&&a!=="_self")return Eve(e||"",a),new dz(null);const d=window.open(e||"",a,h);ct(d,t,"popup-blocked");try{d.focus()}catch{}return new dz(d)}function Eve(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ive="__/auth/handler",_ve="emulator/auth/handler",Ave=encodeURIComponent("fac");async function pz(t,e,n,r,i,s){ct(t.config.authDomain,t,"auth-domain-config-required"),ct(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:em,eventId:i};if(e instanceof g8){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Pce(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof gv){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${Ave}=${encodeURIComponent(l)}`:"";return`${kve(t)}?${uv(a).slice(1)}${u}`}function kve({config:t}){return t.emulator?TD(t,_ve):`https://${t.authDomain}/${Ive}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_="webStorageSupport";class Nve{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=w8,this._completeRedirectFn=eve,this._overrideRedirectResult=Qye}async _openPopup(e,n,r,i){Xl(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const s=await pz(e,n,r,S2(),i);return Cve(e,s,_D())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await pz(e,n,r,S2(),i);return $ye(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Xl(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await vve(e),r=new nve(e);return n.register("authEvent",i=>(ct(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(P_,{type:P_},i=>{const s=i?.[0]?.[P_];s!==void 0&&n(!!s),Kl(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ave(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return f8()||o8()||ED()}}const Rve=Nve;var mz="@firebase/auth",gz="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dve{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ct(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $ve(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Ove(t){Za(new ea("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ct(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:d8(t)},u=new cye(r,i,s,l);return gye(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Za(new ea("auth-internal",e=>{const n=HS(e.getProvider("auth").getImmediate());return(r=>new Dve(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),yo(mz,gz,$ve(t)),yo(mz,gz,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pve=300,Mve=zH("authIdTokenMaxAge")||Pve;let yz=null;const Lve=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Mve)return;const i=n?.token;yz!==i&&(yz=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Fve(t=VR()){const e=Df(t,"auth");if(e.isInitialized())return e.getImmediate();const n=mye(t,{popupRedirectResolver:Rve,persistence:[Uye,Nye,w8]}),r=zH("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=Lve(s.toString());_ye(n,o,()=>o(n.currentUser)),Iye(n,a=>o(a))}}const i=VH("auth");return i&&yye(n,`http://${i}`),n}function Vve(){return document.getElementsByTagName("head")?.[0]??document}hye({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=ja("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",Vve().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Ove("Browser");const Bve={apiKey:"AIzaSyDDn0scNPa0ShKCzal-LA__jnJvJXu2Hhc",authDomain:"la-reserva-ad06d.firebaseapp.com",projectId:"la-reserva-ad06d",storageBucket:"la-reserva-ad06d.firebasestorage.app",messagingSenderId:"442213613501",appId:"1:442213613501:web:b4276ad3174f11513e5cd4",measurementId:"G-D4GYRPK8PQ"},XS=YH(Bve);let zve;try{zve=Mge(XS)}catch{}const Uve=Fve(XS),jve=b9(XS);Sye(Uve).catch(t=>console.error("Auth annima fall:",t));const Wve=b9(XS);async function Gve(){try{console.log(" Conectando a Firebase...");const t=await pme(v9(Wve,"test"));console.log(" Conexin exitosa a Firestore"),t.forEach(e=>{console.log(`${e.id} =>`,e.data())})}catch(t){console.error(" Error al conectar con Firebase:",t)}}async function Hve(t){const e={alias:t.alias?.trim()||null,direccion:t.direccion?.trim()||null,notas:t.notas?.trim()||null,observaciones:t.observaciones?.trim()||null,vecino:t.alias?.trim()||"(annimo)",items:(t.items||[]).filter(r=>(r?.cantidad??0)>0).map(r=>({materialId:r.materialId,cantidad:Number(r.cantidad||0),unidad:r.unidad||"kg/unidad",limpio:!!r.limpio,humedo:r.humedo??null,roto:r.roto??null})),createdAt:yme()};return(await mme(v9(jve,"aportes"),e)).id}/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qve=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Kve=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),vz=t=>{const e=Kve(t);return e.charAt(0).toUpperCase()+e.slice(1)},A8=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),Xve=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Yve={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qve=B.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>B.createElement("svg",{ref:l,...Yve,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:A8("lucide",i),...!s&&!Xve(a)&&{"aria-hidden":"true"},...a},[...o.map(([u,h])=>B.createElement(u,h)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ul=(t,e)=>{const n=B.forwardRef(({className:r,...i},s)=>B.createElement(Qve,{ref:s,iconNode:e,className:A8(`lucide-${qve(vz(t))}`,`lucide-${t}`,r),...i}));return n.displayName=vz(t),n};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zve=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Jve=ul("bell",Zve);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e0e=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],k8=ul("book-open",e0e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t0e=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M7 16h8",key:"srdodz"}],["path",{d:"M7 11h12",key:"127s9w"}],["path",{d:"M7 6h3",key:"w9rmul"}]],N8=ul("chart-bar",t0e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n0e=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],r0e=ul("image",n0e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i0e=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],s0e=ul("loader-circle",i0e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o0e=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}],["path",{d:"M7 11h10",key:"1twpyw"}],["path",{d:"M7 15h6",key:"d9of3u"}],["path",{d:"M7 7h8",key:"af5zfr"}]],E2=ul("message-square-text",o0e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a0e=[["path",{d:"M7 19H4.815a1.83 1.83 0 0 1-1.57-.881 1.785 1.785 0 0 1-.004-1.784L7.196 9.5",key:"x6z5xu"}],["path",{d:"M11 19h8.203a1.83 1.83 0 0 0 1.556-.89 1.784 1.784 0 0 0 0-1.775l-1.226-2.12",key:"1x4zh5"}],["path",{d:"m14 16-3 3 3 3",key:"f6jyew"}],["path",{d:"M8.293 13.596 7.196 9.5 3.1 10.598",key:"wf1obh"}],["path",{d:"m9.344 5.811 1.093-1.892A1.83 1.83 0 0 1 11.985 3a1.784 1.784 0 0 1 1.546.888l3.943 6.843",key:"9tzpgr"}],["path",{d:"m13.378 9.633 4.096 1.098 1.097-4.096",key:"1oe83g"}]],bz=ul("recycle",a0e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l0e=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],u0e=ul("settings",l0e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c0e=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],h0e=ul("upload",c0e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f0e=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],d0e=ul("users",f0e);function R8(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=R8(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function vn(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=R8(t))&&(r&&(r+=" "),r+=e);return r}var p0e=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function kD(t){if(typeof t!="string")return!1;var e=p0e;return e.includes(t)}var m0e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function D8(t){if(typeof t!="string")return!1;var e=m0e;return e.includes(t)}function $8(t){return typeof t=="string"&&t.startsWith("data-")}function Yl(t){var e=Object.entries(t).filter(n=>{var[r]=n;return D8(r)||$8(r)});return Object.fromEntries(e)}function ND(t){if(t==null)return null;if(B.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return Yl(e)}return typeof t=="object"&&!Array.isArray(t)?Yl(t):null}function vo(t){var e=Object.entries(t).filter(n=>{var[r]=n;return D8(r)||$8(r)||kD(r)});return Object.fromEntries(e)}var g0e=["children","width","height","viewBox","className","style","title","desc"];function I2(){return I2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},I2.apply(null,arguments)}function y0e(t,e){if(t==null)return{};var n,r,i=v0e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function v0e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var RD=B.forwardRef((t,e)=>{var{children:n,width:r,height:i,viewBox:s,className:o,style:a,title:l,desc:u}=t,h=y0e(t,g0e),d=s||{width:r,height:i,x:0,y:0},p=vn("recharts-surface",o);return B.createElement("svg",I2({},vo(h),{className:p,width:r,height:i,style:a,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height),ref:e}),B.createElement("title",null,l),B.createElement("desc",null,u),n)}),b0e=["children","className"];function _2(){return _2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_2.apply(null,arguments)}function x0e(t,e){if(t==null)return{};var n,r,i=w0e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function w0e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Nc=B.forwardRef((t,e)=>{var{children:n,className:r}=t,i=x0e(t,b0e),s=vn("recharts-layer",r);return B.createElement("g",_2({className:s},vo(i),{ref:e}),n)}),O8=i5(),P8=B.createContext(null),S0e=()=>B.useContext(P8);function gn(t){return function(){return t}}const M8=Math.cos,lw=Math.sin,oa=Math.sqrt,uw=Math.PI,YS=2*uw,A2=Math.PI,k2=2*A2,$h=1e-6,T0e=k2-$h;function L8(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function C0e(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return L8;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class E0e{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?L8:C0e(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,o){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=r-e,u=i-n,h=o-e,d=a-n,p=h*h+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(p>$h)if(!(Math.abs(d*l-u*h)>$h)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let g=r-o,y=i-a,b=l*l+u*u,x=g*g+y*y,w=Math.sqrt(b),C=Math.sqrt(p),E=s*Math.tan((A2-Math.acos((b+p-x)/(2*w*C)))/2),_=E/C,A=E/w;Math.abs(_-1)>$h&&this._append`L${e+_*h},${n+_*d}`,this._append`A${s},${s},0,0,${+(d*g>h*y)},${this._x1=e+A*l},${this._y1=n+A*u}`}}arc(e,n,r,i,s,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),u=e+a,h=n+l,d=1^o,p=o?i-s:s-i;this._x1===null?this._append`M${u},${h}`:(Math.abs(this._x1-u)>$h||Math.abs(this._y1-h)>$h)&&this._append`L${u},${h}`,r&&(p<0&&(p=p%k2+k2),p>T0e?this._append`A${r},${r},0,1,${d},${e-a},${n-l}A${r},${r},0,1,${d},${this._x1=u},${this._y1=h}`:p>$h&&this._append`A${r},${r},0,${+(p>=A2)},${d},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function DD(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new E0e(e)}function $D(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function F8(t){this._context=t}F8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function QS(t){return new F8(t)}function V8(t){return t[0]}function B8(t){return t[1]}function z8(t,e){var n=gn(!0),r=null,i=QS,s=null,o=DD(a);t=typeof t=="function"?t:t===void 0?V8:gn(t),e=typeof e=="function"?e:e===void 0?B8:gn(e);function a(l){var u,h=(l=$D(l)).length,d,p=!1,g;for(r==null&&(s=i(g=o())),u=0;u<=h;++u)!(u<h&&n(d=l[u],u,l))===p&&((p=!p)?s.lineStart():s.lineEnd()),p&&s.point(+t(d,u,l),+e(d,u,l));if(g)return s=null,g+""||null}return a.x=function(l){return arguments.length?(t=typeof l=="function"?l:gn(+l),a):t},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:gn(+l),a):e},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:gn(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,r!=null&&(s=i(r)),a):i},a.context=function(l){return arguments.length?(l==null?r=s=null:s=i(r=l),a):r},a}function Ox(t,e,n){var r=null,i=gn(!0),s=null,o=QS,a=null,l=DD(u);t=typeof t=="function"?t:t===void 0?V8:gn(+t),e=typeof e=="function"?e:gn(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?B8:gn(+n);function u(d){var p,g,y,b=(d=$D(d)).length,x,w=!1,C,E=new Array(b),_=new Array(b);for(s==null&&(a=o(C=l())),p=0;p<=b;++p){if(!(p<b&&i(x=d[p],p,d))===w)if(w=!w)g=p,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),y=p-1;y>=g;--y)a.point(E[y],_[y]);a.lineEnd(),a.areaEnd()}w&&(E[p]=+t(x,p,d),_[p]=+e(x,p,d),a.point(r?+r(x,p,d):E[p],n?+n(x,p,d):_[p]))}if(C)return a=null,C+""||null}function h(){return z8().defined(i).curve(o).context(s)}return u.x=function(d){return arguments.length?(t=typeof d=="function"?d:gn(+d),r=null,u):t},u.x0=function(d){return arguments.length?(t=typeof d=="function"?d:gn(+d),u):t},u.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:gn(+d),u):r},u.y=function(d){return arguments.length?(e=typeof d=="function"?d:gn(+d),n=null,u):e},u.y0=function(d){return arguments.length?(e=typeof d=="function"?d:gn(+d),u):e},u.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:gn(+d),u):n},u.lineX0=u.lineY0=function(){return h().x(t).y(e)},u.lineY1=function(){return h().x(t).y(n)},u.lineX1=function(){return h().x(r).y(e)},u.defined=function(d){return arguments.length?(i=typeof d=="function"?d:gn(!!d),u):i},u.curve=function(d){return arguments.length?(o=d,s!=null&&(a=o(s)),u):o},u.context=function(d){return arguments.length?(d==null?s=a=null:a=o(s=d),u):s},u}class U8{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function I0e(t){return new U8(t,!0)}function _0e(t){return new U8(t,!1)}const OD={draw(t,e){const n=oa(e/uw);t.moveTo(n,0),t.arc(0,0,n,0,YS)}},A0e={draw(t,e){const n=oa(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},j8=oa(1/3),k0e=j8*2,N0e={draw(t,e){const n=oa(e/k0e),r=n*j8;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},R0e={draw(t,e){const n=oa(e),r=-n/2;t.rect(r,r,n,n)}},D0e=.8908130915292852,W8=lw(uw/10)/lw(7*uw/10),$0e=lw(YS/10)*W8,O0e=-M8(YS/10)*W8,P0e={draw(t,e){const n=oa(e*D0e),r=$0e*n,i=O0e*n;t.moveTo(0,-n),t.lineTo(r,i);for(let s=1;s<5;++s){const o=YS*s/5,a=M8(o),l=lw(o);t.lineTo(l*n,-a*n),t.lineTo(a*r-l*i,l*r+a*i)}t.closePath()}},M_=oa(3),M0e={draw(t,e){const n=-oa(e/(M_*3));t.moveTo(0,n*2),t.lineTo(-M_*n,-n),t.lineTo(M_*n,-n),t.closePath()}},Js=-.5,eo=oa(3)/2,N2=1/oa(12),L0e=(N2/2+1)*3,F0e={draw(t,e){const n=oa(e/L0e),r=n/2,i=n*N2,s=r,o=n*N2+n,a=-s,l=o;t.moveTo(r,i),t.lineTo(s,o),t.lineTo(a,l),t.lineTo(Js*r-eo*i,eo*r+Js*i),t.lineTo(Js*s-eo*o,eo*s+Js*o),t.lineTo(Js*a-eo*l,eo*a+Js*l),t.lineTo(Js*r+eo*i,Js*i-eo*r),t.lineTo(Js*s+eo*o,Js*o-eo*s),t.lineTo(Js*a+eo*l,Js*l-eo*a),t.closePath()}};function V0e(t,e){let n=null,r=DD(i);t=typeof t=="function"?t:gn(t||OD),e=typeof e=="function"?e:gn(e===void 0?64:+e);function i(){let s;if(n||(n=s=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(t=typeof s=="function"?s:gn(s),i):t},i.size=function(s){return arguments.length?(e=typeof s=="function"?s:gn(+s),i):e},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function cw(){}function hw(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function G8(t){this._context=t}G8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:hw(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:hw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function B0e(t){return new G8(t)}function H8(t){this._context=t}H8.prototype={areaStart:cw,areaEnd:cw,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:hw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function z0e(t){return new H8(t)}function q8(t){this._context=t}q8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:hw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function U0e(t){return new q8(t)}function K8(t){this._context=t}K8.prototype={areaStart:cw,areaEnd:cw,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function j0e(t){return new K8(t)}function xz(t){return t<0?-1:1}function wz(t,e,n){var r=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(xz(s)+xz(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function Sz(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function L_(t,e,n){var r=t._x0,i=t._y0,s=t._x1,o=t._y1,a=(s-r)/3;t._context.bezierCurveTo(r+a,i+a*e,s-a,o-a*n,s,o)}function fw(t){this._context=t}fw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:L_(this,this._t0,Sz(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,L_(this,Sz(this,n=wz(this,t,e)),n);break;default:L_(this,this._t0,n=wz(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function X8(t){this._context=new Y8(t)}(X8.prototype=Object.create(fw.prototype)).point=function(t,e){fw.prototype.point.call(this,e,t)};function Y8(t){this._context=t}Y8.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,s){this._context.bezierCurveTo(e,t,r,n,s,i)}};function W0e(t){return new fw(t)}function G0e(t){return new X8(t)}function Q8(t){this._context=t}Q8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=Tz(t),i=Tz(e),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function Tz(t){var e,n=t.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/s[e-1],s[e]-=r,o[e]-=r*o[e-1];for(i[n-1]=o[n-1]/s[n-1],e=n-2;e>=0;--e)i[e]=(o[e]-i[e+1])/s[e];for(s[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function H0e(t){return new Q8(t)}function ZS(t,e){this._context=t,this._t=e}ZS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function q0e(t){return new ZS(t,.5)}function K0e(t){return new ZS(t,0)}function X0e(t){return new ZS(t,1)}function Ip(t,e){if((o=t.length)>1)for(var n=1,r,i,s=t[e[0]],o,a=s.length;n<o;++n)for(i=s,s=t[e[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function R2(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function Y0e(t,e){return t[e]}function Q0e(t){const e=[];return e.key=t,e}function Z0e(){var t=gn([]),e=R2,n=Ip,r=Y0e;function i(s){var o=Array.from(t.apply(this,arguments),Q0e),a,l=o.length,u=-1,h;for(const d of s)for(a=0,++u;a<l;++a)(o[a][u]=[0,+r(d,o[a].key,u,s)]).data=d;for(a=0,h=$D(e(o));a<l;++a)o[h[a]].index=a;return n(o,h),o}return i.keys=function(s){return arguments.length?(t=typeof s=="function"?s:gn(Array.from(s)),i):t},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:gn(+s),i):r},i.order=function(s){return arguments.length?(e=s==null?R2:typeof s=="function"?s:gn(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(n=s??Ip,i):n},i}function J0e(t,e){if((r=t.length)>0){for(var n,r,i=0,s=t[0].length,o;i<s;++i){for(o=n=0;n<r;++n)o+=t[n][i][1]||0;if(o)for(n=0;n<r;++n)t[n][i][1]/=o}Ip(t,e)}}function ebe(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,s=r.length;n<s;++n){for(var o=0,a=0;o<i;++o)a+=t[o][n][1]||0;r[n][1]+=r[n][0]=-a/2}Ip(t,e)}}function tbe(t,e){if(!(!((o=t.length)>0)||!((s=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,s,o;r<s;++r){for(var a=0,l=0,u=0;a<o;++a){for(var h=t[e[a]],d=h[r][1]||0,p=h[r-1][1]||0,g=(d-p)/2,y=0;y<a;++y){var b=t[e[y]],x=b[r][1]||0,w=b[r-1][1]||0;g+=x-w}l+=d,u+=g*d}i[r-1][1]+=i[r-1][0]=n,l&&(n-=u/l)}i[r-1][1]+=i[r-1][0]=n,Ip(t,e)}}var F_={},V_={},Cz;function nbe(){return Cz||(Cz=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(V_)),V_}var B_={},Ez;function Z8(){return Ez||(Ez=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(B_)),B_}var z_={},Iz;function PD(){return Iz||(Iz=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}t.toKey=e})(z_)),z_}var U_={},j_={},_z;function rbe(){return _z||(_z=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(e).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}t.toString=e})(j_)),j_}var Az;function MD(){return Az||(Az=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=rbe(),n=PD();function r(i){if(Array.isArray(i))return i.map(n.toKey);if(typeof i=="symbol")return[i];i=e.toString(i);const s=[],o=i.length;if(o===0)return s;let a=0,l="",u="",h=!1;for(i.charCodeAt(0)===46&&(s.push(""),a++);a<o;){const d=i[a];u?d==="\\"&&a+1<o?(a++,l+=i[a]):d===u?u="":l+=d:h?d==='"'||d==="'"?u=d:d==="]"?(h=!1,s.push(l),l=""):l+=d:d==="["?(h=!0,l&&(s.push(l),l="")):d==="."?l&&(s.push(l),l=""):l+=d,a++}return l&&s.push(l),s}t.toPath=r})(U_)),U_}var kz;function LD(){return kz||(kz=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=nbe(),n=Z8(),r=PD(),i=MD();function s(a,l,u){if(a==null)return u;switch(typeof l){case"string":{if(e.isUnsafeProperty(l))return u;const h=a[l];return h===void 0?n.isDeepKey(l)?s(a,i.toPath(l),u):u:h}case"number":case"symbol":{typeof l=="number"&&(l=r.toKey(l));const h=a[l];return h===void 0?u:h}default:{if(Array.isArray(l))return o(a,l,u);if(Object.is(l?.valueOf(),-0)?l="-0":l=String(l),e.isUnsafeProperty(l))return u;const h=a[l];return h===void 0?u:h}}}function o(a,l,u){if(l.length===0)return u;let h=a;for(let d=0;d<l.length;d++){if(h==null||e.isUnsafeProperty(l[d]))return u;h=h[l[d]]}return h===void 0?u:h}t.get=s})(F_)),F_}var W_,Nz;function ibe(){return Nz||(Nz=1,W_=LD().get),W_}var sbe=ibe();const _p=ll(sbe);var ls=t=>t===0?0:t>0?1:-1,bo=t=>typeof t=="number"&&t!=+t,Ql=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,Ye=t=>(typeof t=="number"||t instanceof Number)&&!bo(t),tl=t=>Ye(t)||typeof t=="string",obe=0,Oy=t=>{var e=++obe;return"".concat(t||"").concat(e)},ta=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ye(e)&&typeof e!="string")return r;var s;if(Ql(e)){if(n==null)return r;var o=e.indexOf("%");s=n*parseFloat(e.slice(0,o))/100}else s=+e;return bo(s)&&(s=r),i&&n!=null&&s>n&&(s=n),s},J8=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[t[r]])n[t[r]]=!0;else return!0;return!1};function $i(t,e,n){return Ye(t)&&Ye(e)?t+n*(e-t):e}function abe(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):_p(r,e))===n)}var Vr=t=>t===null||typeof t>"u",vv=t=>Vr(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1)),lbe=["type","size","sizeType"];function D2(){return D2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},D2.apply(null,arguments)}function Rz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Dz(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Rz(Object(n),!0).forEach(function(r){ube(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Rz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ube(t,e,n){return(e=cbe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cbe(t){var e=hbe(t,"string");return typeof e=="symbol"?e:e+""}function hbe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fbe(t,e){if(t==null)return{};var n,r,i=dbe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function dbe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var eK={symbolCircle:OD,symbolCross:A0e,symbolDiamond:N0e,symbolSquare:R0e,symbolStar:P0e,symbolTriangle:M0e,symbolWye:F0e},pbe=Math.PI/180,mbe=t=>{var e="symbol".concat(vv(t));return eK[e]||OD},gbe=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*pbe;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},ybe=(t,e)=>{eK["symbol".concat(vv(t))]=e},FD=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,i=fbe(t,lbe),s=Dz(Dz({},i),{},{type:e,size:n,sizeType:r}),o="circle";typeof e=="string"&&(o=e);var a=()=>{var p=mbe(o),g=V0e().type(p).size(gbe(n,r,o)),y=g();if(y!==null)return y},{className:l,cx:u,cy:h}=s,d=vo(s);return u===+u&&h===+h&&n===+n?B.createElement("path",D2({},d,{className:vn("recharts-symbols",l),transform:"translate(".concat(u,", ").concat(h,")"),d:a()})):null};FD.registerSymbol=ybe;var vbe=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(B.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{kD(i)&&(r[i]=(s=>n[i](n,s)))}),r},bbe=(t,e,n)=>r=>(t(e,n,r),null),JS=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(i=>{var s=t[i];kD(i)&&typeof s=="function"&&(r||(r={}),r[i]=bbe(s,e,n))}),r};function $2(){return $2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$2.apply(null,arguments)}function $z(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xbe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$z(Object(n),!0).forEach(function(r){VD(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$z(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function VD(t,e,n){return(e=wbe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wbe(t){var e=Sbe(t,"string");return typeof e=="symbol"?e:e+""}function Sbe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var to=32;class BD extends B.PureComponent{renderIcon(e,n){var{inactiveColor:r}=this.props,i=to/2,s=to/6,o=to/3,a=e.inactive?r:e.color,l=n??e.type;if(l==="none")return null;if(l==="plainline")return B.createElement("line",{strokeWidth:4,fill:"none",stroke:a,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:i,x2:to,y2:i,className:"recharts-legend-icon"});if(l==="line")return B.createElement("path",{strokeWidth:4,fill:"none",stroke:a,d:"M0,".concat(i,"h").concat(o,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*o,",").concat(i,`
            H`).concat(to,"M").concat(2*o,",").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(o,",").concat(i),className:"recharts-legend-icon"});if(l==="rect")return B.createElement("path",{stroke:"none",fill:a,d:"M0,".concat(to/8,"h").concat(to,"v").concat(to*3/4,"h").concat(-to,"z"),className:"recharts-legend-icon"});if(B.isValidElement(e.legendIcon)){var u=xbe({},e);return delete u.legendIcon,B.cloneElement(e.legendIcon,u)}return B.createElement(FD,{fill:a,cx:i,cy:i,size:to,sizeType:"diameter",type:l})}renderItems(){var{payload:e,iconSize:n,layout:r,formatter:i,inactiveColor:s,iconType:o}=this.props,a={x:0,y:0,width:to,height:to},l={display:r==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((h,d)=>{var p=h.formatter||i,g=vn({"recharts-legend-item":!0,["legend-item-".concat(d)]:!0,inactive:h.inactive});if(h.type==="none")return null;var y=h.inactive?s:h.color,b=p?p(h.value,h,d):h.value;return B.createElement("li",$2({className:g,style:l,key:"legend-item-".concat(d)},JS(this.props,h,d)),B.createElement(RD,{width:n,height:n,viewBox:a,style:u,"aria-label":"".concat(b," legend icon")},this.renderIcon(h,o)),B.createElement("span",{className:"recharts-legend-item-text",style:{color:y}},b))})}render(){var{payload:e,layout:n,align:r}=this.props;if(!e||!e.length)return null;var i={padding:0,margin:0,textAlign:n==="horizontal"?r:"left"};return B.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}VD(BD,"displayName","Legend");VD(BD,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var G_={},H_={},Oz;function Tbe(){return Oz||(Oz=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const i=new Map;for(let s=0;s<n.length;s++){const o=n[s],a=r(o);i.has(a)||i.set(a,o)}return Array.from(i.values())}t.uniqBy=e})(H_)),H_}var q_={},Pz;function tK(){return Pz||(Pz=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(q_)),q_}var K_={},X_={},Y_={},Mz;function Cbe(){return Mz||(Mz=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(Y_)),Y_}var Lz;function zD(){return Lz||(Lz=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Cbe();function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(X_)),X_}var Q_={},Fz;function Ebe(){return Fz||(Fz=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(Q_)),Q_}var Vz;function Ibe(){return Vz||(Vz=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zD(),n=Ebe();function r(i){return n.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=r})(K_)),K_}var Z_={},J_={},Bz;function _be(){return Bz||(Bz=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=LD();function n(r){return function(i){return e.get(i,r)}}t.property=n})(J_)),J_}var eA={},tA={},nA={},rA={},zz;function nK(){return zz||(zz=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(rA)),rA}var iA={},Uz;function rK(){return Uz||(Uz=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(iA)),iA}var sA={},jz;function iK(){return jz||(jz=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.eq=e})(sA)),sA}var Wz;function Abe(){return Wz||(Wz=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=UD(),n=nK(),r=rK(),i=iK();function s(d,p,g){return typeof g!="function"?e.isMatch(d,p):o(d,p,function y(b,x,w,C,E,_){const A=g(b,x,w,C,E,_);return A!==void 0?!!A:o(b,x,y,_)},new Map)}function o(d,p,g,y){if(p===d)return!0;switch(typeof p){case"object":return a(d,p,g,y);case"function":return Object.keys(p).length>0?o(d,{...p},g,y):i.eq(d,p);default:return n.isObject(d)?typeof p=="string"?p==="":!0:i.eq(d,p)}}function a(d,p,g,y){if(p==null)return!0;if(Array.isArray(p))return u(d,p,g,y);if(p instanceof Map)return l(d,p,g,y);if(p instanceof Set)return h(d,p,g,y);const b=Object.keys(p);if(d==null)return b.length===0;if(b.length===0)return!0;if(y&&y.has(p))return y.get(p)===d;y&&y.set(p,d);try{for(let x=0;x<b.length;x++){const w=b[x];if(!r.isPrimitive(d)&&!(w in d)||p[w]===void 0&&d[w]!==void 0||p[w]===null&&d[w]!==null||!g(d[w],p[w],w,d,p,y))return!1}return!0}finally{y&&y.delete(p)}}function l(d,p,g,y){if(p.size===0)return!0;if(!(d instanceof Map))return!1;for(const[b,x]of p.entries()){const w=d.get(b);if(g(w,x,b,d,p,y)===!1)return!1}return!0}function u(d,p,g,y){if(p.length===0)return!0;if(!Array.isArray(d))return!1;const b=new Set;for(let x=0;x<p.length;x++){const w=p[x];let C=!1;for(let E=0;E<d.length;E++){if(b.has(E))continue;const _=d[E];let A=!1;if(g(_,w,x,d,p,y)&&(A=!0),A){b.add(E),C=!0;break}}if(!C)return!1}return!0}function h(d,p,g,y){return p.size===0?!0:d instanceof Set?u([...d],[...p],g,y):!1}t.isMatchWith=s,t.isSetMatch=h})(nA)),nA}var Gz;function UD(){return Gz||(Gz=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Abe();function n(r,i){return e.isMatchWith(r,i,()=>{})}t.isMatch=n})(tA)),tA}var oA={},aA={},lA={},Hz;function kbe(){return Hz||(Hz=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})(lA)),lA}var uA={},qz;function sK(){return qz||(qz=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(uA)),uA}var cA={},Kz;function oK(){return Kz||(Kz=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",s="[object Arguments]",o="[object Symbol]",a="[object Date]",l="[object Map]",u="[object Set]",h="[object Array]",d="[object Function]",p="[object ArrayBuffer]",g="[object Object]",y="[object Error]",b="[object DataView]",x="[object Uint8Array]",w="[object Uint8ClampedArray]",C="[object Uint16Array]",E="[object Uint32Array]",_="[object BigUint64Array]",A="[object Int8Array]",P="[object Int16Array]",N="[object Int32Array]",R="[object BigInt64Array]",D="[object Float32Array]",O="[object Float64Array]";t.argumentsTag=s,t.arrayBufferTag=p,t.arrayTag=h,t.bigInt64ArrayTag=R,t.bigUint64ArrayTag=_,t.booleanTag=i,t.dataViewTag=b,t.dateTag=a,t.errorTag=y,t.float32ArrayTag=D,t.float64ArrayTag=O,t.functionTag=d,t.int16ArrayTag=P,t.int32ArrayTag=N,t.int8ArrayTag=A,t.mapTag=l,t.numberTag=r,t.objectTag=g,t.regexpTag=e,t.setTag=u,t.stringTag=n,t.symbolTag=o,t.uint16ArrayTag=C,t.uint32ArrayTag=E,t.uint8ArrayTag=x,t.uint8ClampedArrayTag=w})(cA)),cA}var hA={},Xz;function Nbe(){return Xz||(Xz=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(hA)),hA}var Yz;function aK(){return Yz||(Yz=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=kbe(),n=sK(),r=oK(),i=rK(),s=Nbe();function o(h,d){return a(h,void 0,h,new Map,d)}function a(h,d,p,g=new Map,y=void 0){const b=y?.(h,d,p,g);if(b!==void 0)return b;if(i.isPrimitive(h))return h;if(g.has(h))return g.get(h);if(Array.isArray(h)){const x=new Array(h.length);g.set(h,x);for(let w=0;w<h.length;w++)x[w]=a(h[w],w,p,g,y);return Object.hasOwn(h,"index")&&(x.index=h.index),Object.hasOwn(h,"input")&&(x.input=h.input),x}if(h instanceof Date)return new Date(h.getTime());if(h instanceof RegExp){const x=new RegExp(h.source,h.flags);return x.lastIndex=h.lastIndex,x}if(h instanceof Map){const x=new Map;g.set(h,x);for(const[w,C]of h)x.set(w,a(C,w,p,g,y));return x}if(h instanceof Set){const x=new Set;g.set(h,x);for(const w of h)x.add(a(w,void 0,p,g,y));return x}if(typeof Buffer<"u"&&Buffer.isBuffer(h))return h.subarray();if(s.isTypedArray(h)){const x=new(Object.getPrototypeOf(h)).constructor(h.length);g.set(h,x);for(let w=0;w<h.length;w++)x[w]=a(h[w],w,p,g,y);return x}if(h instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&h instanceof SharedArrayBuffer)return h.slice(0);if(h instanceof DataView){const x=new DataView(h.buffer.slice(0),h.byteOffset,h.byteLength);return g.set(h,x),l(x,h,p,g,y),x}if(typeof File<"u"&&h instanceof File){const x=new File([h],h.name,{type:h.type});return g.set(h,x),l(x,h,p,g,y),x}if(typeof Blob<"u"&&h instanceof Blob){const x=new Blob([h],{type:h.type});return g.set(h,x),l(x,h,p,g,y),x}if(h instanceof Error){const x=new h.constructor;return g.set(h,x),x.message=h.message,x.name=h.name,x.stack=h.stack,x.cause=h.cause,l(x,h,p,g,y),x}if(h instanceof Boolean){const x=new Boolean(h.valueOf());return g.set(h,x),l(x,h,p,g,y),x}if(h instanceof Number){const x=new Number(h.valueOf());return g.set(h,x),l(x,h,p,g,y),x}if(h instanceof String){const x=new String(h.valueOf());return g.set(h,x),l(x,h,p,g,y),x}if(typeof h=="object"&&u(h)){const x=Object.create(Object.getPrototypeOf(h));return g.set(h,x),l(x,h,p,g,y),x}return h}function l(h,d,p=h,g,y){const b=[...Object.keys(d),...e.getSymbols(d)];for(let x=0;x<b.length;x++){const w=b[x],C=Object.getOwnPropertyDescriptor(h,w);(C==null||C.writable)&&(h[w]=a(d[w],w,p,g,y))}}function u(h){switch(n.getTag(h)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=o,t.cloneDeepWithImpl=a,t.copyProperties=l})(aA)),aA}var Qz;function Rbe(){return Qz||(Qz=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=aK();function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})(oA)),oA}var Zz;function Dbe(){return Zz||(Zz=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=UD(),n=Rbe();function r(i){return i=n.cloneDeep(i),s=>e.isMatch(s,i)}t.matches=r})(eA)),eA}var fA={},dA={},pA={},Jz;function $be(){return Jz||(Jz=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=aK(),n=oK();function r(i,s){return e.cloneDeepWith(i,(o,a,l,u)=>{const h=s?.(o,a,l,u);if(h!==void 0)return h;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const d=new i.constructor(i?.valueOf());return e.copyProperties(d,i),d}case n.argumentsTag:{const d={};return e.copyProperties(d,i),d.length=i.length,d[Symbol.iterator]=i[Symbol.iterator],d}default:return}})}t.cloneDeepWith=r})(pA)),pA}var eU;function Obe(){return eU||(eU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$be();function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(dA)),dA}var mA={},gA={},tU;function lK(){return tU||(tU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})(gA)),gA}var yA={},nU;function Pbe(){return nU||(nU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=sK();function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(yA)),yA}var rU;function Mbe(){return rU||(rU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Z8(),n=lK(),r=Pbe(),i=MD();function s(o,a){let l;if(Array.isArray(a)?l=a:typeof a=="string"&&e.isDeepKey(a)&&o?.[a]==null?l=i.toPath(a):l=[a],l.length===0)return!1;let u=o;for(let h=0;h<l.length;h++){const d=l[h];if((u==null||!Object.hasOwn(u,d))&&!((Array.isArray(u)||r.isArguments(u))&&n.isIndex(d)&&d<u.length))return!1;u=u[d]}return!0}t.has=s})(mA)),mA}var iU;function Lbe(){return iU||(iU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=UD(),n=PD(),r=Obe(),i=LD(),s=Mbe();function o(a,l){switch(typeof a){case"object":{Object.is(a?.valueOf(),-0)&&(a="-0");break}case"number":{a=n.toKey(a);break}}return l=r.cloneDeep(l),function(u){const h=i.get(u,a);return h===void 0?s.has(u,a):l===void 0?h===void 0:e.isMatch(h,l)}}t.matchesProperty=o})(fA)),fA}var sU;function Fbe(){return sU||(sU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=tK(),n=_be(),r=Dbe(),i=Lbe();function s(o){if(o==null)return e.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?i.matchesProperty(o[0],o[1]):r.matches(o);case"string":case"symbol":case"number":return n.property(o)}}t.iteratee=s})(Z_)),Z_}var oU;function Vbe(){return oU||(oU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Tbe(),n=tK(),r=Ibe(),i=Fbe();function s(o,a=n.identity){return r.isArrayLikeObject(o)?e.uniqBy(Array.from(o),i.iteratee(a)):[]}t.uniqBy=s})(G_)),G_}var vA,aU;function Bbe(){return aU||(aU=1,vA=Vbe().uniqBy),vA}var zbe=Bbe();const lU=ll(zbe);function uK(t,e,n){return e===!0?lU(t,n):typeof e=="function"?lU(t,e):t}var bA={exports:{}},xA={},wA={exports:{}},SA={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uU;function Ube(){if(uU)return SA;uU=1;var t=Xp();function e(d,p){return d===p&&(d!==0||1/d===1/p)||d!==d&&p!==p}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function a(d,p){var g=p(),y=r({inst:{value:g,getSnapshot:p}}),b=y[0].inst,x=y[1];return s(function(){b.value=g,b.getSnapshot=p,l(b)&&x({inst:b})},[d,g,p]),i(function(){return l(b)&&x({inst:b}),d(function(){l(b)&&x({inst:b})})},[d]),o(g),g}function l(d){var p=d.getSnapshot;d=d.value;try{var g=p();return!n(d,g)}catch{return!0}}function u(d,p){return p()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:a;return SA.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:h,SA}var cU;function jbe(){return cU||(cU=1,wA.exports=Ube()),wA.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hU;function Wbe(){if(hU)return xA;hU=1;var t=Xp(),e=jbe();function n(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,a=t.useMemo,l=t.useDebugValue;return xA.useSyncExternalStoreWithSelector=function(u,h,d,p,g){var y=s(null);if(y.current===null){var b={hasValue:!1,value:null};y.current=b}else b=y.current;y=a(function(){function w(P){if(!C){if(C=!0,E=P,P=p(P),g!==void 0&&b.hasValue){var N=b.value;if(g(N,P))return _=N}return _=P}if(N=_,r(E,P))return N;var R=p(P);return g!==void 0&&g(N,R)?(E=P,N):(E=P,_=R)}var C=!1,E,_,A=d===void 0?null:d;return[function(){return w(h())},A===null?void 0:function(){return w(A())}]},[h,d,p,g]);var x=i(u,y[0],y[1]);return o(function(){b.hasValue=!0,b.value=x},[x]),l(x),x},xA}var fU;function Gbe(){return fU||(fU=1,bA.exports=Wbe()),bA.exports}var Hbe=Gbe(),jD=B.createContext(null),qbe=t=>t,Zn=()=>{var t=B.useContext(jD);return t?t.store.dispatch:qbe},T1=()=>{},Kbe=()=>T1,Xbe=(t,e)=>t===e;function Je(t){var e=B.useContext(jD);return Hbe.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:Kbe,e?e.store.getState:T1,e?e.store.getState:T1,e?t:T1,Xbe)}function Ybe(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function Qbe(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function Zbe(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var dU=t=>Array.isArray(t)?t:[t];function Jbe(t){const e=Array.isArray(t[0])?t[0]:t;return Zbe(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function exe(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var txe=class{constructor(t){this.value=t}deref(){return this.value}},nxe=typeof WeakRef<"u"?WeakRef:txe,rxe=0,pU=1;function Px(){return{s:rxe,v:void 0,o:null,p:null}}function cK(t,e={}){let n=Px();const{resultEqualityCheck:r}=e;let i,s=0;function o(){let a=n;const{length:l}=arguments;for(let d=0,p=l;d<p;d++){const g=arguments[d];if(typeof g=="function"||typeof g=="object"&&g!==null){let y=a.o;y===null&&(a.o=y=new WeakMap);const b=y.get(g);b===void 0?(a=Px(),y.set(g,a)):a=b}else{let y=a.p;y===null&&(a.p=y=new Map);const b=y.get(g);b===void 0?(a=Px(),y.set(g,a)):a=b}}const u=a;let h;if(a.s===pU)h=a.v;else if(h=t.apply(null,arguments),s++,r){const d=i?.deref?.()??i;d!=null&&r(d,h)&&(h=d,s!==0&&s--),i=typeof h=="object"&&h!==null||typeof h=="function"?new nxe(h):h}return u.s=pU,u.v=h,h}return o.clearCache=()=>{n=Px(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function ixe(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let s=0,o=0,a,l={},u=i.pop();typeof u=="object"&&(l=u,u=i.pop()),Ybe(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const h={...n,...l},{memoize:d,memoizeOptions:p=[],argsMemoize:g=cK,argsMemoizeOptions:y=[]}=h,b=dU(p),x=dU(y),w=Jbe(i),C=d(function(){return s++,u.apply(null,arguments)},...b),E=g(function(){o++;const A=exe(w,arguments);return a=C.apply(null,A),a},...x);return Object.assign(E,{resultFunc:u,memoizedResultFunc:C,dependencies:w,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:d,argsMemoize:g})};return Object.assign(r,{withTypes:()=>r}),r}var Te=ixe(cK),sxe=Object.assign((t,e=Te)=>{Qbe(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(s=>t[s]);return e(r,(...s)=>s.reduce((o,a,l)=>(o[n[l]]=a,o),{}))},{withTypes:()=>sxe}),TA={},CA={},EA={},mU;function oxe(){return mU||(mU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,s)=>{if(r!==i){const o=e(r),a=e(i);if(o===a&&o===0){if(r<i)return s==="desc"?1:-1;if(r>i)return s==="desc"?-1:1}return s==="desc"?a-o:o-a}return 0};t.compareValues=n})(EA)),EA}var IA={},_A={},gU;function hK(){return gU||(gU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(_A)),_A}var yU;function axe(){return yU||(yU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=hK(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,o){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||e.isSymbol(s)?!0:typeof s=="string"&&(r.test(s)||!n.test(s))||o!=null&&Object.hasOwn(o,s)}t.isKey=i})(IA)),IA}var vU;function lxe(){return vU||(vU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=oxe(),n=axe(),r=MD();function i(s,o,a,l){if(s==null)return[];a=l?void 0:a,Array.isArray(s)||(s=Object.values(s)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(a)||(a=a==null?[]:[a]),a=a.map(g=>String(g));const u=(g,y)=>{let b=g;for(let x=0;x<y.length&&b!=null;++x)b=b[y[x]];return b},h=(g,y)=>y==null||g==null?y:typeof g=="object"&&"key"in g?Object.hasOwn(y,g.key)?y[g.key]:u(y,g.path):typeof g=="function"?g(y):Array.isArray(g)?u(y,g):typeof y=="object"?y[g]:y,d=o.map(g=>(Array.isArray(g)&&g.length===1&&(g=g[0]),g==null||typeof g=="function"||Array.isArray(g)||n.isKey(g)?g:{key:g,path:r.toPath(g)}));return s.map(g=>({original:g,criteria:d.map(y=>h(y,g))})).slice().sort((g,y)=>{for(let b=0;b<d.length;b++){const x=e.compareValues(g.criteria[b],y.criteria[b],a[b]);if(x!==0)return x}return 0}).map(g=>g.original)}t.orderBy=i})(CA)),CA}var AA={},bU;function uxe(){return bU||(bU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const i=[],s=Math.floor(r),o=(a,l)=>{for(let u=0;u<a.length;u++){const h=a[u];Array.isArray(h)&&l<s?o(h,l+1):i.push(h)}};return o(n,0),i}t.flatten=e})(AA)),AA}var kA={},xU;function fK(){return xU||(xU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=lK(),n=zD(),r=nK(),i=iK();function s(o,a,l){return r.isObject(l)&&(typeof a=="number"&&n.isArrayLike(l)&&e.isIndex(a)&&a<l.length||typeof a=="string"&&a in l)?i.eq(l[a],o):!1}t.isIterateeCall=s})(kA)),kA}var wU;function cxe(){return wU||(wU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=lxe(),n=uxe(),r=fK();function i(s,...o){const a=o.length;return a>1&&r.isIterateeCall(s,o[0],o[1])?o=[]:a>2&&r.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),e.orderBy(s,n.flatten(o),["asc"])}t.sortBy=i})(TA)),TA}var NA,SU;function hxe(){return SU||(SU=1,NA=cxe().sortBy),NA}var fxe=hxe();const eT=ll(fxe);var dK=t=>t.legend.settings,dxe=t=>t.legend.size,pxe=t=>t.legend.payload,mxe=Te([pxe,dK],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?eT(r,n):r});function gxe(){return Je(mxe)}var Mx=1;function pK(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=B.useState({height:0,left:0,top:0,width:0}),r=B.useCallback(i=>{if(i!=null){var s=i.getBoundingClientRect(),o={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(o.height-e.height)>Mx||Math.abs(o.left-e.left)>Mx||Math.abs(o.top-e.top)>Mx||Math.abs(o.width-e.width)>Mx)&&n({height:o.height,left:o.left,top:o.top,width:o.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function ei(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var yxe=typeof Symbol=="function"&&Symbol.observable||"@@observable",TU=yxe,RA=()=>Math.random().toString(36).substring(7).split("").join("."),vxe={INIT:`@@redux/INIT${RA()}`,REPLACE:`@@redux/REPLACE${RA()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${RA()}`},dw=vxe;function WD(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function mK(t,e,n){if(typeof t!="function")throw new Error(ei(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(ei(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(ei(1));return n(mK)(t,e)}let r=t,i=e,s=new Map,o=s,a=0,l=!1;function u(){o===s&&(o=new Map,s.forEach((x,w)=>{o.set(w,x)}))}function h(){if(l)throw new Error(ei(3));return i}function d(x){if(typeof x!="function")throw new Error(ei(4));if(l)throw new Error(ei(5));let w=!0;u();const C=a++;return o.set(C,x),function(){if(w){if(l)throw new Error(ei(6));w=!1,u(),o.delete(C),s=null}}}function p(x){if(!WD(x))throw new Error(ei(7));if(typeof x.type>"u")throw new Error(ei(8));if(typeof x.type!="string")throw new Error(ei(17));if(l)throw new Error(ei(9));try{l=!0,i=r(i,x)}finally{l=!1}return(s=o).forEach(C=>{C()}),x}function g(x){if(typeof x!="function")throw new Error(ei(10));r=x,p({type:dw.REPLACE})}function y(){const x=d;return{subscribe(w){if(typeof w!="object"||w===null)throw new Error(ei(11));function C(){const _=w;_.next&&_.next(h())}return C(),{unsubscribe:x(C)}},[TU](){return this}}}return p({type:dw.INIT}),{dispatch:p,subscribe:d,getState:h,replaceReducer:g,[TU]:y}}function bxe(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:dw.INIT})>"u")throw new Error(ei(12));if(typeof n(void 0,{type:dw.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ei(13))})}function gK(t){const e=Object.keys(t),n={};for(let s=0;s<e.length;s++){const o=e[s];typeof t[o]=="function"&&(n[o]=t[o])}const r=Object.keys(n);let i;try{bxe(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let l=!1;const u={};for(let h=0;h<r.length;h++){const d=r[h],p=n[d],g=o[d],y=p(g,a);if(typeof y>"u")throw a&&a.type,new Error(ei(14));u[d]=y,l=l||y!==g}return l=l||r.length!==Object.keys(o).length,l?u:o}}function pw(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function xxe(...t){return e=>(n,r)=>{const i=e(n,r);let s=()=>{throw new Error(ei(15))};const o={getState:i.getState,dispatch:(l,...u)=>s(l,...u)},a=t.map(l=>l(o));return s=pw(...a)(i.dispatch),{...i,dispatch:s}}}function yK(t){return WD(t)&&"type"in t&&typeof t.type=="string"}var vK=Symbol.for("immer-nothing"),CU=Symbol.for("immer-draftable"),$s=Symbol.for("immer-state");function Ho(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Ap=Object.getPrototypeOf;function cf(t){return!!t&&!!t[$s]}function Zl(t){return t?bK(t)||Array.isArray(t)||!!t[CU]||!!t.constructor?.[CU]||bv(t)||nT(t):!1}var wxe=Object.prototype.constructor.toString();function bK(t){if(!t||typeof t!="object")return!1;const e=Ap(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===wxe}function mw(t,e){tT(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,r)=>e(r,n,t))}function tT(t){const e=t[$s];return e?e.type_:Array.isArray(t)?1:bv(t)?2:nT(t)?3:0}function O2(t,e){return tT(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function xK(t,e,n){const r=tT(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function Sxe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function bv(t){return t instanceof Map}function nT(t){return t instanceof Set}function Oh(t){return t.copy_||t.base_}function P2(t,e){if(bv(t))return new Map(t);if(nT(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=bK(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[$s];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:t[o]})}return Object.create(Ap(t),r)}else{const r=Ap(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function GD(t,e=!1){return rT(t)||cf(t)||!Zl(t)||(tT(t)>1&&Object.defineProperties(t,{set:{value:Lx},add:{value:Lx},clear:{value:Lx},delete:{value:Lx}}),Object.freeze(t),e&&Object.values(t).forEach(n=>GD(n,!0))),t}function Lx(){Ho(2)}function rT(t){return Object.isFrozen(t)}var Txe={};function hf(t){const e=Txe[t];return e||Ho(0,t),e}var Py;function wK(){return Py}function Cxe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function EU(t,e){e&&(hf("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function M2(t){L2(t),t.drafts_.forEach(Exe),t.drafts_=null}function L2(t){t===Py&&(Py=t.parent_)}function IU(t){return Py=Cxe(Py,t)}function Exe(t){const e=t[$s];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function _U(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[$s].modified_&&(M2(e),Ho(4)),Zl(t)&&(t=gw(e,t),e.parent_||yw(e,t)),e.patches_&&hf("Patches").generateReplacementPatches_(n[$s].base_,t,e.patches_,e.inversePatches_)):t=gw(e,n,[]),M2(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==vK?t:void 0}function gw(t,e,n){if(rT(e))return e;const r=e[$s];if(!r)return mw(e,(i,s)=>AU(t,r,e,i,s,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return yw(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),mw(s,(a,l)=>AU(t,r,i,a,l,n,o)),yw(t,i,!1),n&&t.patches_&&hf("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function AU(t,e,n,r,i,s,o){if(cf(i)){const a=s&&e&&e.type_!==3&&!O2(e.assigned_,r)?s.concat(r):void 0,l=gw(t,i,a);if(xK(n,r,l),cf(l))t.canAutoFreeze_=!1;else return}else o&&n.add(i);if(Zl(i)&&!rT(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;gw(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(bv(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&yw(t,i)}}function yw(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&GD(e,n)}function Ixe(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:wK(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=HD;n&&(i=[r],s=My);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var HD={get(t,e){if(e===$s)return t;const n=Oh(t);if(!O2(n,e))return _xe(t,n,e);const r=n[e];return t.finalized_||!Zl(r)?r:r===DA(t.base_,e)?($A(t),t.copy_[e]=V2(r,t)):r},has(t,e){return e in Oh(t)},ownKeys(t){return Reflect.ownKeys(Oh(t))},set(t,e,n){const r=SK(Oh(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=DA(Oh(t),e),s=i?.[$s];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(Sxe(n,i)&&(n!==void 0||O2(t.base_,e)))return!0;$A(t),F2(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return DA(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,$A(t),F2(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Oh(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){Ho(11)},getPrototypeOf(t){return Ap(t.base_)},setPrototypeOf(){Ho(12)}},My={};mw(HD,(t,e)=>{My[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});My.deleteProperty=function(t,e){return My.set.call(this,t,e,void 0)};My.set=function(t,e,n){return HD.set.call(this,t[0],e,n,t[0])};function DA(t,e){const n=t[$s];return(n?Oh(n):t)[e]}function _xe(t,e,n){const r=SK(e,n);return r?"value"in r?r.value:r.get?.call(t.draft_):void 0}function SK(t,e){if(!(e in t))return;let n=Ap(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Ap(n)}}function F2(t){t.modified_||(t.modified_=!0,t.parent_&&F2(t.parent_))}function $A(t){t.copy_||(t.copy_=P2(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Axe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const s=n;n=e;const o=this;return function(l=s,...u){return o.produce(l,h=>n.call(this,h,...u))}}typeof n!="function"&&Ho(6),r!==void 0&&typeof r!="function"&&Ho(7);let i;if(Zl(e)){const s=IU(this),o=V2(e,void 0);let a=!0;try{i=n(o),a=!1}finally{a?M2(s):L2(s)}return EU(s,r),_U(i,s)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===vK&&(i=void 0),this.autoFreeze_&&GD(i,!0),r){const s=[],o=[];hf("Patches").generateReplacementPatches_(e,i,s,o),r(s,o)}return i}else Ho(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(o,...a)=>this.produceWithPatches(o,l=>e(l,...a));let r,i;return[this.produce(e,n,(o,a)=>{r=o,i=a}),r,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){Zl(t)||Ho(8),cf(t)&&(t=zl(t));const e=IU(this),n=V2(t,void 0);return n[$s].isManual_=!0,L2(e),n}finishDraft(t,e){const n=t&&t[$s];(!n||!n.isManual_)&&Ho(9);const{scope_:r}=n;return EU(r,e),_U(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=hf("Patches").applyPatches_;return cf(t)?r(t,e):this.produce(t,i=>r(i,e))}};function V2(t,e){const n=bv(t)?hf("MapSet").proxyMap_(t,e):nT(t)?hf("MapSet").proxySet_(t,e):Ixe(t,e);return(e?e.scope_:wK()).drafts_.push(n),n}function zl(t){return cf(t)||Ho(10,t),TK(t)}function TK(t){if(!Zl(t)||rT(t))return t;const e=t[$s];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=P2(t,e.scope_.immer_.useStrictShallowCopy_)}else n=P2(t,!0);return mw(n,(r,i)=>{xK(n,r,TK(i))}),e&&(e.finalized_=!1),n}var kxe=new Axe,CK=kxe.produce;function EK(t){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,t):i(s)}var Nxe=EK(),Rxe=EK,Dxe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?pw:pw.apply(null,arguments)};function xo(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(Rs(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>yK(r)&&r.type===t,n}var IK=class Yg extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Yg.prototype)}static get[Symbol.species](){return Yg}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Yg(...e[0].concat(this)):new Yg(...e.concat(this))}};function kU(t){return Zl(t)?CK(t,()=>{}):t}function Fx(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function $xe(t){return typeof t=="boolean"}var Oxe=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=e??{};let o=new IK;return n&&($xe(n)?o.push(Nxe):o.push(Rxe(n.extraArgument))),o},_K="RTK_autoBatch",Oi=()=>t=>({payload:t,meta:{[_K]:!0}}),NU=t=>e=>{setTimeout(e,t)},AK=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,s=!1,o=!1;const a=new Set,l=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:NU(10):t.type==="callback"?t.queueNotification:NU(t.timeout),u=()=>{o=!1,s&&(s=!1,a.forEach(h=>h()))};return Object.assign({},r,{subscribe(h){const d=()=>i&&h(),p=r.subscribe(d);return a.add(h),()=>{p(),a.delete(h)}},dispatch(h){try{return i=!h?.meta?.[_K],s=!i,s&&(o||(o=!0,l(u))),r.dispatch(h)}finally{i=!0}}})},Pxe=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new IK(t);return r&&i.push(AK(typeof r=="object"?r:void 0)),i};function Mxe(t){const e=Oxe(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=t||{};let a;if(typeof n=="function")a=n;else if(WD(n))a=gK(n);else throw new Error(Rs(1));let l;typeof r=="function"?l=r(e):l=e();let u=pw;i&&(u=Dxe({trace:!1,...typeof i=="object"&&i}));const h=xxe(...l),d=Pxe(h);let p=typeof o=="function"?o(d):d();const g=u(...p);return mK(a,s,g)}function kK(t){const e={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(Rs(28));if(a in e)throw new Error(Rs(29));return e[a]=o,i},addAsyncThunk(s,o){return o.pending&&(e[s.pending.type]=o.pending),o.rejected&&(e[s.rejected.type]=o.rejected),o.fulfilled&&(e[s.fulfilled.type]=o.fulfilled),o.settled&&n.push({matcher:s.settled,reducer:o.settled}),i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return t(i),[e,n,r]}function Lxe(t){return typeof t=="function"}function Fxe(t,e){let[n,r,i]=kK(e),s;if(Lxe(t))s=()=>kU(t());else{const a=kU(t);s=()=>a}function o(a=s(),l){let u=[n[l.type],...r.filter(({matcher:h})=>h(l)).map(({reducer:h})=>h)];return u.filter(h=>!!h).length===0&&(u=[i]),u.reduce((h,d)=>{if(d)if(cf(h)){const g=d(h,l);return g===void 0?h:g}else{if(Zl(h))return CK(h,p=>d(p,l));{const p=d(h,l);if(p===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return p}}return h},a)}return o.getInitialState=s,o}var Vxe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Bxe=(t=21)=>{let e="",n=t;for(;n--;)e+=Vxe[Math.random()*64|0];return e},zxe=Symbol.for("rtk-slice-createasyncthunk");function Uxe(t,e){return`${t}/${e}`}function jxe({creators:t}={}){const e=t?.asyncThunk?.[zxe];return function(r){const{name:i,reducerPath:s=i}=r;if(!i)throw new Error(Rs(11));const o=(typeof r.reducers=="function"?r.reducers(Gxe()):r.reducers)||{},a=Object.keys(o),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(E,_){const A=typeof E=="string"?E:E.type;if(!A)throw new Error(Rs(12));if(A in l.sliceCaseReducersByType)throw new Error(Rs(13));return l.sliceCaseReducersByType[A]=_,u},addMatcher(E,_){return l.sliceMatchers.push({matcher:E,reducer:_}),u},exposeAction(E,_){return l.actionCreators[E]=_,u},exposeCaseReducer(E,_){return l.sliceCaseReducersByName[E]=_,u}};a.forEach(E=>{const _=o[E],A={reducerName:E,type:Uxe(i,E),createNotation:typeof r.reducers=="function"};qxe(_)?Xxe(A,_,u,e):Hxe(A,_,u)});function h(){const[E={},_=[],A=void 0]=typeof r.extraReducers=="function"?kK(r.extraReducers):[r.extraReducers],P={...E,...l.sliceCaseReducersByType};return Fxe(r.initialState,N=>{for(let R in P)N.addCase(R,P[R]);for(let R of l.sliceMatchers)N.addMatcher(R.matcher,R.reducer);for(let R of _)N.addMatcher(R.matcher,R.reducer);A&&N.addDefaultCase(A)})}const d=E=>E,p=new Map,g=new WeakMap;let y;function b(E,_){return y||(y=h()),y(E,_)}function x(){return y||(y=h()),y.getInitialState()}function w(E,_=!1){function A(N){let R=N[E];return typeof R>"u"&&_&&(R=Fx(g,A,x)),R}function P(N=d){const R=Fx(p,_,()=>new WeakMap);return Fx(R,N,()=>{const D={};for(const[O,k]of Object.entries(r.selectors??{}))D[O]=Wxe(k,N,()=>Fx(g,N,x),_);return D})}return{reducerPath:E,getSelectors:P,get selectors(){return P(A)},selectSlice:A}}const C={name:i,reducer:b,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:x,...w(s),injectInto(E,{reducerPath:_,...A}={}){const P=_??s;return E.inject({reducerPath:P,reducer:b},A),{...C,...w(P,!0)}}};return C}}function Wxe(t,e,n,r){function i(s,...o){let a=e(s);return typeof a>"u"&&r&&(a=n()),t(a,...o)}return i.unwrapped=t,i}var Ps=jxe();function Gxe(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function Hxe({type:t,reducerName:e,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!Kxe(r))throw new Error(Rs(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(t,s).exposeCaseReducer(e,s).exposeAction(e,o?xo(t,o):xo(t))}function qxe(t){return t._reducerDefinitionType==="asyncThunk"}function Kxe(t){return t._reducerDefinitionType==="reducerWithPrepare"}function Xxe({type:t,reducerName:e},n,r,i){if(!i)throw new Error(Rs(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:l,settled:u,options:h}=n,d=i(t,s,h);r.exposeAction(e,d),o&&r.addCase(d.fulfilled,o),a&&r.addCase(d.pending,a),l&&r.addCase(d.rejected,l),u&&r.addMatcher(d.settled,u),r.exposeCaseReducer(e,{fulfilled:o||Vx,pending:a||Vx,rejected:l||Vx,settled:u||Vx})}function Vx(){}var Yxe="task",NK="listener",RK="completed",qD="cancelled",Qxe=`task-${qD}`,Zxe=`task-${RK}`,B2=`${NK}-${qD}`,Jxe=`${NK}-${RK}`,iT=class{constructor(t){this.code=t,this.message=`${Yxe} ${qD} (reason: ${t})`}name="TaskAbortError";message},KD=(t,e)=>{if(typeof t!="function")throw new TypeError(Rs(32))},vw=()=>{},DK=(t,e=vw)=>(t.catch(e),t),$K=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),Qh=(t,e)=>{const n=t.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:e,configurable:!0,writable:!0}),t.abort(e))},Zh=t=>{if(t.aborted){const{reason:e}=t;throw new iT(e)}};function OK(t,e){let n=vw;return new Promise((r,i)=>{const s=()=>i(new iT(t.reason));if(t.aborted){s();return}n=$K(t,s),e.finally(()=>n()).then(r,i)}).finally(()=>{n=vw})}var e1e=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof iT?"cancelled":"rejected",error:n}}finally{e?.()}},bw=t=>e=>DK(OK(t,e).then(n=>(Zh(t),n))),PK=t=>{const e=bw(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:hp}=Object,RU={},sT="listenerMiddleware",t1e=(t,e)=>{const n=r=>$K(t,()=>Qh(r,t.reason));return(r,i)=>{KD(r);const s=new AbortController;n(s);const o=e1e(async()=>{Zh(t),Zh(s.signal);const a=await r({pause:bw(s.signal),delay:PK(s.signal),signal:s.signal});return Zh(s.signal),a},()=>Qh(s,Zxe));return i?.autoJoin&&e.push(o.catch(vw)),{result:bw(t)(o),cancel(){Qh(s,Qxe)}}}},n1e=(t,e)=>{const n=async(r,i)=>{Zh(e);let s=()=>{};const a=[new Promise((l,u)=>{let h=t({predicate:r,effect:(d,p)=>{p.unsubscribe(),l([d,p.getState(),p.getOriginalState()])}});s=()=>{h(),u()}})];i!=null&&a.push(new Promise(l=>setTimeout(l,i,null)));try{const l=await OK(e,Promise.race(a));return Zh(e),l}finally{s()}};return(r,i)=>DK(n(r,i))},MK=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:s}=t;if(e)i=xo(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Rs(21));return KD(s),{predicate:i,type:e,effect:s}},LK=hp(t=>{const{type:e,predicate:n,effect:r}=MK(t);return{id:Bxe(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Rs(22))}}},{withTypes:()=>LK}),DU=(t,e)=>{const{type:n,effect:r,predicate:i}=MK(e);return Array.from(t.values()).find(s=>(typeof n=="string"?s.type===n:s.predicate===i)&&s.effect===r)},z2=t=>{t.pending.forEach(e=>{Qh(e,B2)})},r1e=(t,e)=>()=>{for(const n of e.keys())z2(n);t.clear()},$U=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},FK=hp(xo(`${sT}/add`),{withTypes:()=>FK}),i1e=xo(`${sT}/removeAll`),VK=hp(xo(`${sT}/remove`),{withTypes:()=>VK}),s1e=(...t)=>{console.error(`${sT}/error`,...t)},xv=(t={})=>{const e=new Map,n=new Map,r=g=>{const y=n.get(g)??0;n.set(g,y+1)},i=g=>{const y=n.get(g)??1;y===1?n.delete(g):n.set(g,y-1)},{extra:s,onError:o=s1e}=t;KD(o);const a=g=>(g.unsubscribe=()=>e.delete(g.id),e.set(g.id,g),y=>{g.unsubscribe(),y?.cancelActive&&z2(g)}),l=g=>{const y=DU(e,g)??LK(g);return a(y)};hp(l,{withTypes:()=>l});const u=g=>{const y=DU(e,g);return y&&(y.unsubscribe(),g.cancelActive&&z2(y)),!!y};hp(u,{withTypes:()=>u});const h=async(g,y,b,x)=>{const w=new AbortController,C=n1e(l,w.signal),E=[];try{g.pending.add(w),r(g),await Promise.resolve(g.effect(y,hp({},b,{getOriginalState:x,condition:(_,A)=>C(_,A).then(Boolean),take:C,delay:PK(w.signal),pause:bw(w.signal),extra:s,signal:w.signal,fork:t1e(w.signal,E),unsubscribe:g.unsubscribe,subscribe:()=>{e.set(g.id,g)},cancelActiveListeners:()=>{g.pending.forEach((_,A,P)=>{_!==w&&(Qh(_,B2),P.delete(_))})},cancel:()=>{Qh(w,B2),g.pending.delete(w)},throwIfCancelled:()=>{Zh(w.signal)}})))}catch(_){_ instanceof iT||$U(o,_,{raisedBy:"effect"})}finally{await Promise.all(E),Qh(w,Jxe),i(g),g.pending.delete(w)}},d=r1e(e,n);return{middleware:g=>y=>b=>{if(!yK(b))return y(b);if(FK.match(b))return l(b.payload);if(i1e.match(b)){d();return}if(VK.match(b))return u(b.payload);let x=g.getState();const w=()=>{if(x===RU)throw new Error(Rs(23));return x};let C;try{if(C=y(b),e.size>0){const E=g.getState(),_=Array.from(e.values());for(const A of _){let P=!1;try{P=A.predicate(b,E,x)}catch(N){P=!1,$U(o,N,{raisedBy:"predicate"})}P&&h(A,b,g,w)}}}finally{x=RU}return C},startListening:l,stopListening:u,clearListeners:d}};function Rs(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var o1e={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},BK=Ps({name:"chartLayout",initialState:o1e,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,r,i,s;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,t.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,t.margin.left=(s=e.payload.left)!==null&&s!==void 0?s:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:a1e,setLayout:l1e,setChartSize:u1e,setScale:c1e}=BK.actions,h1e=BK.reducer;function OU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function PU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OU(Object(n),!0).forEach(function(r){f1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function f1e(t,e,n){return(e=d1e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d1e(t){var e=p1e(t,"string");return typeof e=="symbol"?e:e+""}function p1e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var xw=Math.PI/180,m1e=t=>t*180/Math.PI,oi=(t,e,n,r)=>({x:t+Math.cos(-xw*r)*n,y:e+Math.sin(-xw*r)*n}),g1e=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},y1e=(t,e)=>{var{x:n,y:r}=t,{x:i,y:s}=e;return Math.sqrt((n-i)**2+(r-s)**2)},v1e=(t,e)=>{var{x:n,y:r}=t,{cx:i,cy:s}=e,o=y1e({x:n,y:r},{x:i,y:s});if(o<=0)return{radius:o,angle:0};var a=(n-i)/o,l=Math.acos(a);return r>s&&(l=2*Math.PI-l),{radius:o,angle:m1e(l),angleInRadian:l}},b1e=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),i=Math.floor(n/360),s=Math.min(r,i);return{startAngle:e-s*360,endAngle:n-s*360}},x1e=(t,e)=>{var{startAngle:n,endAngle:r}=e,i=Math.floor(n/360),s=Math.floor(r/360),o=Math.min(i,s);return t+o*360},w1e=(t,e)=>{var{x:n,y:r}=t,{radius:i,angle:s}=v1e({x:n,y:r},e),{innerRadius:o,outerRadius:a}=e;if(i<o||i>a||i===0)return null;var{startAngle:l,endAngle:u}=b1e(e),h=s,d;if(l<=u){for(;h>u;)h-=360;for(;h<l;)h+=360;d=h>=l&&h<=u}else{for(;h>l;)h-=360;for(;h<u;)h+=360;d=h>=u&&h<=l}return d?PU(PU({},e),{},{radius:i,angle:x1e(h,e)}):null};function zK(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function MU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ao(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MU(Object(n),!0).forEach(function(r){S1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function S1e(t,e,n){return(e=T1e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function T1e(t){var e=C1e(t,"string");return typeof e=="symbol"?e:e+""}function C1e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zi(t,e,n){return Vr(t)||Vr(e)?n:tl(e)?_p(t,e,n):typeof e=="function"?e(t):n}var E1e=(t,e,n,r,i)=>{var s,o=-1,a=(s=e?.length)!==null&&s!==void 0?s:0;if(a<=1||t==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var l=0;l<a;l++){var u=l>0?n[l-1].coordinate:n[a-1].coordinate,h=n[l].coordinate,d=l>=a-1?n[0].coordinate:n[l+1].coordinate,p=void 0;if(ls(h-u)!==ls(d-h)){var g=[];if(ls(d-h)===ls(i[1]-i[0])){p=d;var y=h+i[1]-i[0];g[0]=Math.min(y,(y+u)/2),g[1]=Math.max(y,(y+u)/2)}else{p=u;var b=d+i[1]-i[0];g[0]=Math.min(h,(b+h)/2),g[1]=Math.max(h,(b+h)/2)}var x=[Math.min(h,(p+h)/2),Math.max(h,(p+h)/2)];if(t>x[0]&&t<=x[1]||t>=g[0]&&t<=g[1]){({index:o}=n[l]);break}}else{var w=Math.min(u,d),C=Math.max(u,d);if(t>(w+h)/2&&t<=(C+h)/2){({index:o}=n[l]);break}}}else if(e){for(var E=0;E<a;E++)if(E===0&&t<=(e[E].coordinate+e[E+1].coordinate)/2||E>0&&E<a-1&&t>(e[E].coordinate+e[E-1].coordinate)/2&&t<=(e[E].coordinate+e[E+1].coordinate)/2||E===a-1&&t>(e[E].coordinate+e[E-1].coordinate)/2){({index:o}=e[E]);break}}return o},I1e=(t,e,n)=>{if(e&&n){var{width:r,height:i}=n,{align:s,verticalAlign:o,layout:a}=e;if((a==="vertical"||a==="horizontal"&&o==="middle")&&s!=="center"&&Ye(t[s]))return ao(ao({},t),{},{[s]:t[s]+(r||0)});if((a==="horizontal"||a==="vertical"&&s==="center")&&o!=="middle"&&Ye(t[o]))return ao(ao({},t),{},{[o]:t[o]+(i||0)})}return t},Lf=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",UK=(t,e,n,r)=>{if(r)return t.map(a=>a.coordinate);var i,s,o=t.map(a=>(a.coordinate===e&&(i=!0),a.coordinate===n&&(s=!0),a.coordinate));return i||o.push(e),s||o.push(n),o},jK=(t,e,n)=>{if(!t)return null;var{duplicateDomain:r,type:i,range:s,scale:o,realScaleType:a,isCategorical:l,categoricalDomain:u,tickCount:h,ticks:d,niceTicks:p,axisType:g}=t;if(!o)return null;var y=a==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,b=i==="category"&&o.bandwidth?o.bandwidth()/y:0;if(b=g==="angleAxis"&&s&&s.length>=2?ls(s[0]-s[1])*2*b:b,d||p){var x=(d||p||[]).map((w,C)=>{var E=r?r.indexOf(w):w;return{coordinate:o(E)+b,value:w,offset:b,index:C}});return x.filter(w=>!bo(w.coordinate))}return l&&u?u.map((w,C)=>({coordinate:o(w)+b,value:w,index:C,offset:b})):o.ticks&&h!=null?o.ticks(h).map((w,C)=>({coordinate:o(w)+b,value:w,offset:b,index:C})):o.domain().map((w,C)=>({coordinate:o(w)+b,value:r?r[w]:w,index:C,offset:b}))},LU=1e-4,_1e=t=>{var e=t.domain();if(!(!e||e.length<=2)){var n=e.length,r=t.range(),i=Math.min(r[0],r[1])-LU,s=Math.max(r[0],r[1])+LU,o=t(e[0]),a=t(e[n-1]);(o<i||o>s||a<i||a>s)&&t.domain([e[0],e[n-1]])}},A1e=(t,e)=>{if(!e||e.length!==2||!Ye(e[0])||!Ye(e[1]))return t;var n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]),i=[t[0],t[1]];return(!Ye(t[0])||t[0]<n)&&(i[0]=n),(!Ye(t[1])||t[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},k1e=t=>{var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var i=0,s=0,o=0;o<e;++o){var a=bo(t[o][n][1])?t[o][n][0]:t[o][n][1];a>=0?(t[o][n][0]=i,t[o][n][1]=i+a,i=t[o][n][1]):(t[o][n][0]=s,t[o][n][1]=s+a,s=t[o][n][1])}},N1e=t=>{var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var i=0,s=0;s<e;++s){var o=bo(t[s][n][1])?t[s][n][0]:t[s][n][1];o>=0?(t[s][n][0]=i,t[s][n][1]=i+o,i=t[s][n][1]):(t[s][n][0]=0,t[s][n][1]=0)}},R1e={sign:k1e,expand:J0e,none:Ip,silhouette:ebe,wiggle:tbe,positive:N1e},D1e=(t,e,n)=>{var r=R1e[n],i=Z0e().keys(e).value((s,o)=>+zi(s,o,0)).order(R2).offset(r);return i(t)};function $1e(t){return t==null?void 0:String(t)}var FU=t=>{var{axis:e,ticks:n,offset:r,bandSize:i,entry:s,index:o}=t;if(e.type==="category")return n[o]?n[o].coordinate+r:null;var a=zi(s,e.dataKey,e.scale.domain()[o]);return Vr(a)?null:e.scale(a)-i/2+r},O1e=t=>{var{numericAxis:e}=t,n=e.scale.domain();if(e.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},P1e=t=>{var e=t.flat(2).filter(Ye);return[Math.min(...e),Math.max(...e)]},M1e=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],L1e=(t,e,n)=>{if(t!=null)return M1e(Object.keys(t).reduce((r,i)=>{var s=t[i],{stackedData:o}=s,a=o.reduce((l,u)=>{var h=zK(u,e,n),d=P1e(h);return[Math.min(l[0],d[0]),Math.max(l[1],d[1])]},[1/0,-1/0]);return[Math.min(a[0],r[0]),Math.max(a[1],r[1])]},[1/0,-1/0]))},VU=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,BU=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,XD=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var i=eT(e,h=>h.coordinate),s=1/0,o=1,a=i.length;o<a;o++){var l=i[o],u=i[o-1];s=Math.min((l.coordinate||0)-(u.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0};function zU(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:i,name:s}=t;return ao(ao({},e),{},{dataKey:n,payload:r,value:i,name:s})}function WK(t,e){if(t)return String(t);if(typeof e=="string")return e}function F1e(t,e,n,r,i){if(n==="horizontal"||n==="vertical"){var s=t>=i.left&&t<=i.left+i.width&&e>=i.top&&e<=i.top+i.height;return s?{x:t,y:e}:null}return r?w1e({x:t,y:e},r):null}var V1e=(t,e,n,r)=>{var i=e.find(u=>u&&u.index===n);if(i){if(t==="horizontal")return{x:i.coordinate,y:r.y};if(t==="vertical")return{x:r.x,y:i.coordinate};if(t==="centric"){var s=i.coordinate,{radius:o}=r;return ao(ao(ao({},r),oi(r.cx,r.cy,o,s)),{},{angle:s,radius:o})}var a=i.coordinate,{angle:l}=r;return ao(ao(ao({},r),oi(r.cx,r.cy,a,l)),{},{angle:l,radius:a})}return{x:0,y:0}},B1e=(t,e)=>e==="horizontal"?t.x:e==="vertical"?t.y:e==="centric"?t.angle:t.radius,ou=t=>t.layout.width,au=t=>t.layout.height,z1e=t=>t.layout.scale,GK=t=>t.layout.margin,oT=Te(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),aT=Te(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),U1e="data-recharts-item-index",j1e="data-recharts-item-data-key",wv=60;function UU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Bx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UU(Object(n),!0).forEach(function(r){W1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function W1e(t,e,n){return(e=G1e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function G1e(t){var e=H1e(t,"string");return typeof e=="symbol"?e:e+""}function H1e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var q1e=t=>t.brush.height;function K1e(t){var e=aT(t);return e.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:wv;return n+i}return n},0)}function X1e(t){var e=aT(t);return e.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:wv;return n+i}return n},0)}function Y1e(t){var e=oT(t);return e.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function Q1e(t){var e=oT(t);return e.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var Br=Te([ou,au,GK,q1e,K1e,X1e,Y1e,Q1e,dK,dxe],(t,e,n,r,i,s,o,a,l,u)=>{var h={left:(n.left||0)+i,right:(n.right||0)+s},d={top:(n.top||0)+o,bottom:(n.bottom||0)+a},p=Bx(Bx({},d),h),g=p.bottom;p.bottom+=r,p=I1e(p,l,u);var y=t-p.left-p.right,b=e-p.top-p.bottom;return Bx(Bx({brushBottom:g},p),{},{width:Math.max(y,0),height:Math.max(b,0)})}),Z1e=Te(Br,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),YD=Te(ou,au,(t,e)=>({x:0,y:0,width:t,height:e})),J1e=B.createContext(null),Ms=()=>B.useContext(J1e)!=null,lT=t=>t.brush,uT=Te([lT,Br,GK],(t,e,n)=>({height:t.height,x:Ye(t.x)?t.x:e.left,y:Ye(t.y)?t.y:e.top+e.height+e.brushBottom-(n?.bottom||0),width:Ye(t.width)?t.width:e.width})),OA={},PA={},MA={},jU;function ewe(){return jU||(jU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:i,edges:s}={}){let o,a=null;const l=s!=null&&s.includes("leading"),u=s==null||s.includes("trailing"),h=()=>{a!==null&&(n.apply(o,a),o=void 0,a=null)},d=()=>{u&&h(),b()};let p=null;const g=()=>{p!=null&&clearTimeout(p),p=setTimeout(()=>{p=null,d()},r)},y=()=>{p!==null&&(clearTimeout(p),p=null)},b=()=>{y(),o=void 0,a=null},x=()=>{h()},w=function(...C){if(i?.aborted)return;o=this,a=C;const E=p==null;g(),l&&E&&h()};return w.schedule=g,w.cancel=b,w.flush=x,i?.addEventListener("abort",b,{once:!0}),w}t.debounce=e})(MA)),MA}var WU;function twe(){return WU||(WU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ewe();function n(r,i=0,s={}){typeof s!="object"&&(s={});const{leading:o=!1,trailing:a=!0,maxWait:l}=s,u=Array(2);o&&(u[0]="leading"),a&&(u[1]="trailing");let h,d=null;const p=e.debounce(function(...b){h=r.apply(this,b),d=null},i,{edges:u}),g=function(...b){return l!=null&&(d===null&&(d=Date.now()),Date.now()-d>=l)?(h=r.apply(this,b),d=Date.now(),p.cancel(),p.schedule(),h):(p.apply(this,b),h)},y=()=>(p.flush(),h);return g.cancel=p.cancel,g.flush=y,g}t.debounce=n})(PA)),PA}var GU;function nwe(){return GU||(GU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=twe();function n(r,i=0,s={}){const{leading:o=!0,trailing:a=!0}=s;return e.debounce(r,i,{leading:o,maxWait:i,trailing:a})}t.throttle=n})(OA)),OA}var LA,HU;function rwe(){return HU||(HU=1,LA=nwe().throttle),LA}var iwe=rwe();const swe=ll(iwe);var ww=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s]},HK=(t,e,n)=>{var{width:r="100%",height:i="100%",aspect:s,maxHeight:o}=n,a=Ql(r)?t:Number(r),l=Ql(i)?e:Number(i);return s&&s>0&&(a?l=a/s:l&&(a=l*s),o&&l>o&&(l=o)),{calculatedWidth:a,calculatedHeight:l}},owe={width:0,height:0,overflow:"visible"},awe={width:0,overflowX:"visible"},lwe={height:0,overflowY:"visible"},uwe={},cwe=t=>{var{width:e,height:n}=t,r=Ql(e),i=Ql(n);return r&&i?owe:r?awe:i?lwe:uwe};function hwe(t){var{width:e,height:n,aspect:r}=t,i=e,s=n;return i===void 0&&s===void 0?(i="100%",s="100%"):i===void 0?i=r&&r>0?void 0:"100%":s===void 0&&(s=r&&r>0?void 0:"100%"),{width:i,height:s}}function _i(t){return Number.isFinite(t)}function kp(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function U2(){return U2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},U2.apply(null,arguments)}function qU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function KU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qU(Object(n),!0).forEach(function(r){fwe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fwe(t,e,n){return(e=dwe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dwe(t){var e=pwe(t,"string");return typeof e=="symbol"?e:e+""}function pwe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qK=B.createContext({width:-1,height:-1});function KK(t){var{children:e,width:n,height:r}=t,i=B.useMemo(()=>({width:n,height:r}),[n,r]);return n<=0||r<=0?null:B.createElement(qK.Provider,{value:i},e)}var QD=()=>B.useContext(qK),mwe=B.forwardRef((t,e)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i,height:s,minWidth:o=0,minHeight:a,maxHeight:l,children:u,debounce:h=0,id:d,className:p,onResize:g,style:y={}}=t,b=B.useRef(null),x=B.useRef();x.current=g,B.useImperativeHandle(e,()=>b.current);var[w,C]=B.useState({containerWidth:r.width,containerHeight:r.height}),E=B.useCallback((R,D)=>{C(O=>{var k=Math.round(R),F=Math.round(D);return O.containerWidth===k&&O.containerHeight===F?O:{containerWidth:k,containerHeight:F}})},[]);B.useEffect(()=>{var R=F=>{var L,{width:q,height:Y}=F[0].contentRect;E(q,Y),(L=x.current)===null||L===void 0||L.call(x,q,Y)};h>0&&(R=swe(R,h,{trailing:!0,leading:!1}));var D=new ResizeObserver(R),{width:O,height:k}=b.current.getBoundingClientRect();return E(O,k),D.observe(b.current),()=>{D.disconnect()}},[E,h]);var{containerWidth:_,containerHeight:A}=w;ww(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:P,calculatedHeight:N}=HK(_,A,{width:i,height:s,aspect:n,maxHeight:l});return ww(P>0||N>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,P,N,i,s,o,a,n),B.createElement("div",{id:d?"".concat(d):void 0,className:vn("recharts-responsive-container",p),style:KU(KU({},y),{},{width:i,height:s,minWidth:o,minHeight:a,maxHeight:l}),ref:b},B.createElement("div",{style:cwe({width:i,height:s})},B.createElement(KK,{width:P,height:N},u)))}),XU=B.forwardRef((t,e)=>{var n=QD();if(kp(n.width)&&kp(n.height))return t.children;var{width:r,height:i}=hwe({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:s,calculatedHeight:o}=HK(void 0,void 0,{width:r,height:i,aspect:t.aspect,maxHeight:t.maxHeight});return Ye(s)&&Ye(o)?B.createElement(KK,{width:s,height:o},t.children):B.createElement(mwe,U2({},t,{width:r,height:i,ref:e}))}),cT=()=>{var t,e=Ms(),n=Je(Z1e),r=Je(uT),i=(t=Je(lT))===null||t===void 0?void 0:t.padding;return!e||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},gwe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},XK=()=>{var t;return(t=Je(Br))!==null&&t!==void 0?t:gwe},ZD=()=>Je(ou),JD=()=>Je(au),ywe=()=>Je(t=>t.layout.margin),nn=t=>t.layout.layoutType,e$=()=>Je(nn),hT=t=>{var e=Zn(),n=Ms(),{width:r,height:i}=t,s=QD(),o=r,a=i;return s&&(o=s.width>0?s.width:r,a=s.height>0?s.height:i),B.useEffect(()=>{!n&&kp(o)&&kp(a)&&e(u1e({width:o,height:a}))},[e,n,o,a]),null},vwe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},YK=Ps({name:"legend",initialState:vwe,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:Oi()},removeLegendPayload:{reducer(t,e){var n=zl(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)},prepare:Oi()}}}),{setLegendSize:YU,setLegendSettings:bwe,addLegendPayload:xwe,removeLegendPayload:wwe}=YK.actions,Swe=YK.reducer,Twe=["contextPayload"];function j2(){return j2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},j2.apply(null,arguments)}function QU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Np(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QU(Object(n),!0).forEach(function(r){t$(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function t$(t,e,n){return(e=Cwe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cwe(t){var e=Ewe(t,"string");return typeof e=="symbol"?e:e+""}function Ewe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Iwe(t,e){if(t==null)return{};var n,r,i=_we(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function _we(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Awe(t){return t.value}function kwe(t){var{contextPayload:e}=t,n=Iwe(t,Twe),r=uK(e,t.payloadUniqBy,Awe),i=Np(Np({},n),{},{payload:r});return B.isValidElement(t.content)?B.cloneElement(t.content,i):typeof t.content=="function"?B.createElement(t.content,i):B.createElement(BD,i)}function Nwe(t,e,n,r,i,s){var{layout:o,align:a,verticalAlign:l}=e,u,h;return(!t||(t.left===void 0||t.left===null)&&(t.right===void 0||t.right===null))&&(a==="center"&&o==="vertical"?u={left:((r||0)-s.width)/2}:u=a==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!t||(t.top===void 0||t.top===null)&&(t.bottom===void 0||t.bottom===null))&&(l==="middle"?h={top:((i||0)-s.height)/2}:h=l==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),Np(Np({},u),h)}function Rwe(t){var e=Zn();return B.useEffect(()=>{e(bwe(t))},[e,t]),null}function Dwe(t){var e=Zn();return B.useEffect(()=>(e(YU(t)),()=>{e(YU({width:0,height:0}))}),[e,t]),null}function $we(t){var e=gxe(),n=S0e(),r=ywe(),{width:i,height:s,wrapperStyle:o,portal:a}=t,[l,u]=pK([e]),h=ZD(),d=JD();if(h==null||d==null)return null;var p=h-(r.left||0)-(r.right||0),g=Ly.getWidthOrHeight(t.layout,s,i,p),y=a?o:Np(Np({position:"absolute",width:g?.width||i||"auto",height:g?.height||s||"auto"},Nwe(o,t,r,h,d,l)),o),b=a??n;if(b==null)return null;var x=B.createElement("div",{className:"recharts-legend-wrapper",style:y,ref:u},B.createElement(Rwe,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),B.createElement(Dwe,{width:l.width,height:l.height}),B.createElement(kwe,j2({},t,g,{margin:r,chartWidth:h,chartHeight:d,contextPayload:e})));return O8.createPortal(x,b)}class Ly extends B.PureComponent{static getWidthOrHeight(e,n,r,i){return e==="vertical"&&Ye(n)?{height:n}:e==="horizontal"?{width:r||i}:null}render(){return B.createElement($we,this.props)}}t$(Ly,"displayName","Legend");t$(Ly,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function W2(){return W2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},W2.apply(null,arguments)}function ZU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function FA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZU(Object(n),!0).forEach(function(r){Owe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Owe(t,e,n){return(e=Pwe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pwe(t){var e=Mwe(t,"string");return typeof e=="symbol"?e:e+""}function Mwe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Lwe(t){return Array.isArray(t)&&tl(t[0])&&tl(t[1])?t.join(" ~ "):t}var Fwe=t=>{var{separator:e=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:s,formatter:o,itemSorter:a,wrapperClassName:l,labelClassName:u,label:h,labelFormatter:d,accessibilityLayer:p=!1}=t,g=()=>{if(s&&s.length){var A={padding:0,margin:0},P=(a?eT(s,a):s).map((N,R)=>{if(N.type==="none")return null;var D=N.formatter||o||Lwe,{value:O,name:k}=N,F=O,L=k;if(D){var q=D(O,k,N,R,s);if(Array.isArray(q))[F,L]=q;else if(q!=null)F=q;else return null}var Y=FA({display:"block",paddingTop:4,paddingBottom:4,color:N.color||"#000"},r);return B.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(R),style:Y},tl(L)?B.createElement("span",{className:"recharts-tooltip-item-name"},L):null,tl(L)?B.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,B.createElement("span",{className:"recharts-tooltip-item-value"},F),B.createElement("span",{className:"recharts-tooltip-item-unit"},N.unit||""))});return B.createElement("ul",{className:"recharts-tooltip-item-list",style:A},P)}return null},y=FA({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),b=FA({margin:0},i),x=!Vr(h),w=x?h:"",C=vn("recharts-default-tooltip",l),E=vn("recharts-tooltip-label",u);x&&d&&s!==void 0&&s!==null&&(w=d(h,s));var _=p?{role:"status","aria-live":"assertive"}:{};return B.createElement("div",W2({className:C,style:y},_),B.createElement("p",{className:E,style:b},B.isValidElement(w)?w:"".concat(w)),g())},Og="recharts-tooltip-wrapper",Vwe={visibility:"hidden"};function Bwe(t){var{coordinate:e,translateX:n,translateY:r}=t;return vn(Og,{["".concat(Og,"-right")]:Ye(n)&&e&&Ye(e.x)&&n>=e.x,["".concat(Og,"-left")]:Ye(n)&&e&&Ye(e.x)&&n<e.x,["".concat(Og,"-bottom")]:Ye(r)&&e&&Ye(e.y)&&r>=e.y,["".concat(Og,"-top")]:Ye(r)&&e&&Ye(e.y)&&r<e.y})}function JU(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offsetTopLeft:i,position:s,reverseDirection:o,tooltipDimension:a,viewBox:l,viewBoxDimension:u}=t;if(s&&Ye(s[r]))return s[r];var h=n[r]-a-(i>0?i:0),d=n[r]+i;if(e[r])return o[r]?h:d;var p=l[r];if(p==null)return 0;if(o[r]){var g=h,y=p;return g<y?Math.max(d,p):Math.max(h,p)}if(u==null)return 0;var b=d+a,x=p+u;return b>x?Math.max(h,p):Math.max(d,p)}function zwe(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function Uwe(t){var{allowEscapeViewBox:e,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:s,tooltipBox:o,useTranslate3d:a,viewBox:l}=t,u,h,d;return o.height>0&&o.width>0&&n?(h=JU({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:o.width,viewBox:l,viewBoxDimension:l.width}),d=JU({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:o.height,viewBox:l,viewBoxDimension:l.height}),u=zwe({translateX:h,translateY:d,useTranslate3d:a})):u=Vwe,{cssProperties:u,cssClasses:Bwe({translateX:h,translateY:d,coordinate:n})}}function ej(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ej(Object(n),!0).forEach(function(r){G2(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ej(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function G2(t,e,n){return(e=jwe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jwe(t){var e=Wwe(t,"string");return typeof e=="symbol"?e:e+""}function Wwe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class Gwe extends B.PureComponent{constructor(){super(...arguments),G2(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),G2(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,i,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:s,coordinate:o,hasPayload:a,isAnimationActive:l,offset:u,position:h,reverseDirection:d,useTranslate3d:p,viewBox:g,wrapperStyle:y,lastBoundingBox:b,innerRef:x,hasPortalFromProps:w}=this.props,{cssClasses:C,cssProperties:E}=Uwe({allowEscapeViewBox:n,coordinate:o,offsetTopLeft:u,position:h,reverseDirection:d,tooltipBox:{height:b.height,width:b.width},useTranslate3d:p,viewBox:g}),_=w?{}:zx(zx({transition:l&&e?"transform ".concat(r,"ms ").concat(i):void 0},E),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&a?"visible":"hidden",position:"absolute",top:0,left:0}),A=zx(zx({},_),{},{visibility:!this.state.dismissed&&e&&a?"visible":"hidden"},y);return B.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:C,style:A,ref:x},s)}}var Hwe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),om={devToolsEnabled:!1,isSsr:Hwe()},QK=()=>Je(t=>t.rootProps.accessibilityLayer);function H2(){return H2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},H2.apply(null,arguments)}function tj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function nj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tj(Object(n),!0).forEach(function(r){qwe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qwe(t,e,n){return(e=Kwe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kwe(t){var e=Xwe(t,"string");return typeof e=="symbol"?e:e+""}function Xwe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var rj={curveBasisClosed:z0e,curveBasisOpen:U0e,curveBasis:B0e,curveBumpX:I0e,curveBumpY:_0e,curveLinearClosed:j0e,curveLinear:QS,curveMonotoneX:W0e,curveMonotoneY:G0e,curveNatural:H0e,curveStep:q0e,curveStepAfter:X0e,curveStepBefore:K0e},Ux=t=>_i(t.x)&&_i(t.y),Pg=t=>t.x,Mg=t=>t.y,Ywe=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(vv(t));return(n==="curveMonotone"||n==="curveBump")&&e?rj["".concat(n).concat(e==="vertical"?"Y":"X")]:rj[n]||QS},Qwe=t=>{var{type:e="linear",points:n=[],baseLine:r,layout:i,connectNulls:s=!1}=t,o=Ywe(e,i),a=s?n.filter(Ux):n,l;if(Array.isArray(r)){var u=s?r.filter(d=>Ux(d)):r,h=a.map((d,p)=>nj(nj({},d),{},{base:u[p]}));return i==="vertical"?l=Ox().y(Mg).x1(Pg).x0(d=>d.base.x):l=Ox().x(Pg).y1(Mg).y0(d=>d.base.y),l.defined(Ux).curve(o),l(h)}return i==="vertical"&&Ye(r)?l=Ox().y(Mg).x1(Pg).x0(r):Ye(r)?l=Ox().x(Pg).y1(Mg).y0(r):l=z8().x(Pg).y(Mg),l.defined(Ux).curve(o),l(a)},Zwe=t=>{var{className:e,points:n,path:r,pathRef:i}=t;if((!n||!n.length)&&!r)return null;var s=n&&n.length?Qwe(t):r;return B.createElement("path",H2({},Yl(t),vbe(t),{className:vn("recharts-curve",e),d:s===null?void 0:s,ref:i}))},Jwe=["x","y","top","left","width","height","className"];function q2(){return q2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},q2.apply(null,arguments)}function ij(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function eSe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ij(Object(n),!0).forEach(function(r){tSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ij(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tSe(t,e,n){return(e=nSe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nSe(t){var e=rSe(t,"string");return typeof e=="symbol"?e:e+""}function rSe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function iSe(t,e){if(t==null)return{};var n,r,i=sSe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function sSe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var oSe=(t,e,n,r,i,s)=>"M".concat(t,",").concat(i,"v").concat(r,"M").concat(s,",").concat(e,"h").concat(n),aSe=t=>{var{x:e=0,y:n=0,top:r=0,left:i=0,width:s=0,height:o=0,className:a}=t,l=iSe(t,Jwe),u=eSe({x:e,y:n,top:r,left:i,width:s,height:o},l);return!Ye(e)||!Ye(n)||!Ye(s)||!Ye(o)||!Ye(r)||!Ye(i)?null:B.createElement("path",q2({},vo(u),{className:vn("recharts-cross",a),d:oSe(e,n,s,o,r,i)}))};function lSe(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function sj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function uSe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sj(Object(n),!0).forEach(function(r){cSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cSe(t,e,n){return(e=hSe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hSe(t){var e=fSe(t,"string");return typeof e=="symbol"?e:e+""}function fSe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Co(t,e){var n=uSe({},t),r=e,i=Object.keys(e),s=i.reduce((o,a)=>(o[a]===void 0&&r[a]!==void 0&&(o[a]=r[a]),o),n);return s}function dSe(){}function pSe(t){return t!=null}function oj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function aj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oj(Object(n),!0).forEach(function(r){mSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mSe(t,e,n){return(e=gSe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gSe(t){var e=ySe(t,"string");return typeof e=="symbol"?e:e+""}function ySe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vSe=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),ZK=(t,e,n)=>t.map(r=>"".concat(vSe(r)," ").concat(e,"ms ").concat(n)).join(","),bSe=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(i=>r.includes(i))),Fy=(t,e)=>Object.keys(e).reduce((n,r)=>aj(aj({},n),{},{[r]:t(r,e[r])}),{});function lj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ri(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lj(Object(n),!0).forEach(function(r){xSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xSe(t,e,n){return(e=wSe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wSe(t){var e=SSe(t,"string");return typeof e=="symbol"?e:e+""}function SSe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Sw=(t,e,n)=>t+(e-t)*n,K2=t=>{var{from:e,to:n}=t;return e!==n},JK=(t,e,n)=>{var r=Fy((i,s)=>{if(K2(s)){var[o,a]=t(s.from,s.to,s.velocity);return ri(ri({},s),{},{from:o,velocity:a})}return s},e);return n<1?Fy((i,s)=>K2(s)?ri(ri({},s),{},{velocity:Sw(s.velocity,r[i].velocity,n),from:Sw(s.from,r[i].from,n)}):s,e):JK(t,r,n-1)};function TSe(t,e,n,r,i,s){var o,a=r.reduce((p,g)=>ri(ri({},p),{},{[g]:{from:t[g],velocity:0,to:e[g]}}),{}),l=()=>Fy((p,g)=>g.from,a),u=()=>!Object.values(a).filter(K2).length,h=null,d=p=>{o||(o=p);var g=p-o,y=g/n.dt;a=JK(n,a,y),i(ri(ri(ri({},t),e),l())),o=p,u()||(h=s.setTimeout(d))};return()=>(h=s.setTimeout(d),()=>{h()})}function CSe(t,e,n,r,i,s,o){var a=null,l=i.reduce((d,p)=>ri(ri({},d),{},{[p]:[t[p],e[p]]}),{}),u,h=d=>{u||(u=d);var p=(d-u)/r,g=Fy((b,x)=>Sw(...x,n(p)),l);if(s(ri(ri(ri({},t),e),g)),p<1)a=o.setTimeout(h);else{var y=Fy((b,x)=>Sw(...x,n(1)),l);s(ri(ri(ri({},t),e),y))}};return()=>(a=o.setTimeout(h),()=>{a()})}const ESe=(t,e,n,r,i,s)=>{var o=bSe(t,e);return n.isStepper===!0?TSe(t,e,n,o,i,s):CSe(t,e,n,r,o,i,s)};var Tw=1e-4,e7=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],t7=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),uj=(t,e)=>n=>{var r=e7(t,e);return t7(r,n)},ISe=(t,e)=>n=>{var r=e7(t,e),i=[...r.map((s,o)=>s*o).slice(1),0];return t7(i,n)},cj=function(){for(var e,n,r,i,s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];if(o.length===1)switch(o[0]){case"linear":[e,r,n,i]=[0,0,1,1];break;case"ease":[e,r,n,i]=[.25,.1,.25,1];break;case"ease-in":[e,r,n,i]=[.42,0,1,1];break;case"ease-out":[e,r,n,i]=[.42,0,.58,1];break;case"ease-in-out":[e,r,n,i]=[0,0,.58,1];break;default:{var l=o[0].split("(");l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4&&([e,r,n,i]=l[1].split(")")[0].split(",").map(y=>parseFloat(y)))}}else o.length===4&&([e,r,n,i]=o);var u=uj(e,n),h=uj(r,i),d=ISe(e,n),p=y=>y>1?1:y<0?0:y,g=y=>{for(var b=y>1?1:y,x=b,w=0;w<8;++w){var C=u(x)-b,E=d(x);if(Math.abs(C-b)<Tw||E<Tw)return h(x);x=p(x-C/E)}return h(x)};return g.isStepper=!1,g},_Se=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=e,s=(o,a,l)=>{var u=-(o-a)*n,h=l*r,d=l+(u-h)*i/1e3,p=l*i/1e3+o;return Math.abs(p-a)<Tw&&Math.abs(d)<Tw?[a,0]:[p,d]};return s.isStepper=!0,s.dt=i,s},ASe=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return cj(t);case"spring":return _Se();default:if(t.split("(")[0]==="cubic-bezier")return cj(t)}return typeof t=="function"?t:null};function kSe(t){var e,n=()=>null,r=!1,i=null,s=o=>{if(!r){if(Array.isArray(o)){if(!o.length)return;var a=o,[l,...u]=a;if(typeof l=="number"){i=t.setTimeout(s.bind(null,u),l);return}s(l),i=t.setTimeout(s.bind(null,u));return}typeof o=="string"&&(e=o,n(e)),typeof o=="object"&&(e=o,n(e)),typeof o=="function"&&o()}};return{stop:()=>{r=!0},start:o=>{r=!1,i&&(i(),i=null),s(o)},subscribe:o=>(n=o,()=>{n=()=>null}),getTimeoutController:()=>t}}class NSe{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,s=o=>{o-r>=n?e(o):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(s))};return i=requestAnimationFrame(s),()=>{cancelAnimationFrame(i)}}}function RSe(){return kSe(new NSe)}var DSe=B.createContext(RSe);function $Se(t,e){var n=B.useContext(DSe);return B.useMemo(()=>e??n(t),[t,e,n])}var OSe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},hj={t:0},VA={t:1};function n$(t){var e=Co(t,OSe),{isActive:n,canBegin:r,duration:i,easing:s,begin:o,onAnimationEnd:a,onAnimationStart:l,children:u}=e,h=$Se(e.animationId,e.animationManager),[d,p]=B.useState(n?hj:VA),g=B.useRef(null);return B.useEffect(()=>{n||p(VA)},[n]),B.useEffect(()=>{if(!n||!r)return dSe;var y=ESe(hj,VA,ASe(s),i,p,h.getTimeoutController()),b=()=>{g.current=y()};return h.start([l,o,b,i,a]),()=>{h.stop(),g.current&&g.current(),a()}},[n,r,i,s,o,l,a,h]),u(d.t)}function r$(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=B.useRef(Oy(e)),r=B.useRef(t);return r.current!==t&&(n.current=Oy(e),r.current=t),n.current}var PSe=["radius"],MSe=["radius"];function fj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function dj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fj(Object(n),!0).forEach(function(r){LSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function LSe(t,e,n){return(e=FSe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FSe(t){var e=VSe(t,"string");return typeof e=="symbol"?e:e+""}function VSe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Cw(){return Cw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cw.apply(null,arguments)}function pj(t,e){if(t==null)return{};var n,r,i=BSe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function BSe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var mj=(t,e,n,r,i)=>{var s=Math.min(Math.abs(n)/2,Math.abs(r)/2),o=r>=0?1:-1,a=n>=0?1:-1,l=r>=0&&n>=0||r<0&&n<0?1:0,u;if(s>0&&i instanceof Array){for(var h=[0,0,0,0],d=0,p=4;d<p;d++)h[d]=i[d]>s?s:i[d];u="M".concat(t,",").concat(e+o*h[0]),h[0]>0&&(u+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(l,",").concat(t+a*h[0],",").concat(e)),u+="L ".concat(t+n-a*h[1],",").concat(e),h[1]>0&&(u+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(l,`,
        `).concat(t+n,",").concat(e+o*h[1])),u+="L ".concat(t+n,",").concat(e+r-o*h[2]),h[2]>0&&(u+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(l,`,
        `).concat(t+n-a*h[2],",").concat(e+r)),u+="L ".concat(t+a*h[3],",").concat(e+r),h[3]>0&&(u+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(l,`,
        `).concat(t,",").concat(e+r-o*h[3])),u+="Z"}else if(s>0&&i===+i&&i>0){var g=Math.min(s,i);u="M ".concat(t,",").concat(e+o*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(l,",").concat(t+a*g,",").concat(e,`
            L `).concat(t+n-a*g,",").concat(e,`
            A `).concat(g,",").concat(g,",0,0,").concat(l,",").concat(t+n,",").concat(e+o*g,`
            L `).concat(t+n,",").concat(e+r-o*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(l,",").concat(t+n-a*g,",").concat(e+r,`
            L `).concat(t+a*g,",").concat(e+r,`
            A `).concat(g,",").concat(g,",0,0,").concat(l,",").concat(t,",").concat(e+r-o*g," Z")}else u="M ".concat(t,",").concat(e," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return u},zSe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},n7=t=>{var e=Co(t,zSe),n=B.useRef(null),[r,i]=B.useState(-1);B.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var H=n.current.getTotalLength();H&&i(H)}catch{}},[]);var{x:s,y:o,width:a,height:l,radius:u,className:h}=e,{animationEasing:d,animationDuration:p,animationBegin:g,isAnimationActive:y,isUpdateAnimationActive:b}=e,x=B.useRef(a),w=B.useRef(l),C=B.useRef(s),E=B.useRef(o),_=B.useMemo(()=>({x:s,y:o,width:a,height:l,radius:u}),[s,o,a,l,u]),A=r$(_,"rectangle-");if(s!==+s||o!==+o||a!==+a||l!==+l||a===0||l===0)return null;var P=vn("recharts-rectangle",h);if(!b){var N=vo(e),{radius:R}=N,D=pj(N,PSe);return B.createElement("path",Cw({},D,{radius:typeof u=="number"?u:void 0,className:P,d:mj(s,o,a,l,u)}))}var O=x.current,k=w.current,F=C.current,L=E.current,q="0px ".concat(r===-1?1:r,"px"),Y="".concat(r,"px 0px"),W=ZK(["strokeDasharray"],p,typeof d=="string"?d:void 0);return B.createElement(n$,{animationId:A,key:A,canBegin:r>0,duration:p,easing:d,isActive:b,begin:g},H=>{var X=$i(O,a,H),ee=$i(k,l,H),ce=$i(F,s,H),j=$i(L,o,H);n.current&&(x.current=X,w.current=ee,C.current=ce,E.current=j);var Q;y?H>0?Q={transition:W,strokeDasharray:Y}:Q={strokeDasharray:q}:Q={strokeDasharray:Y};var ie=vo(e),{radius:me}=ie,ve=pj(ie,MSe);return B.createElement("path",Cw({},ve,{radius:typeof u=="number"?u:void 0,className:P,d:mj(ce,j,X,ee,u),ref:n,style:dj(dj({},Q),e.style)}))})};function r7(t){var{cx:e,cy:n,radius:r,startAngle:i,endAngle:s}=t,o=oi(e,n,r,i),a=oi(e,n,r,s);return{points:[o,a],cx:e,cy:n,radius:r,startAngle:i,endAngle:s}}function X2(){return X2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},X2.apply(null,arguments)}var USe=(t,e)=>{var n=ls(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},jx=t=>{var{cx:e,cy:n,radius:r,angle:i,sign:s,isExternal:o,cornerRadius:a,cornerIsExternal:l}=t,u=a*(o?1:-1)+r,h=Math.asin(a/u)/xw,d=l?i:i+s*h,p=oi(e,n,u,d),g=oi(e,n,r,d),y=l?i-s*h:i,b=oi(e,n,u*Math.cos(h*xw),y);return{center:p,circleTangency:g,lineTangency:b,theta:h}},i7=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:s,endAngle:o}=t,a=USe(s,o),l=s+a,u=oi(e,n,i,s),h=oi(e,n,i,l),d="M ".concat(u.x,",").concat(u.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(a)>180),",").concat(+(s>l),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(r>0){var p=oi(e,n,r,s),g=oi(e,n,r,l);d+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(a)>180),",").concat(+(s<=l),`,
            `).concat(p.x,",").concat(p.y," Z")}else d+="L ".concat(e,",").concat(n," Z");return d},jSe=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:a,startAngle:l,endAngle:u}=t,h=ls(u-l),{circleTangency:d,lineTangency:p,theta:g}=jx({cx:e,cy:n,radius:i,angle:l,sign:h,cornerRadius:s,cornerIsExternal:a}),{circleTangency:y,lineTangency:b,theta:x}=jx({cx:e,cy:n,radius:i,angle:u,sign:-h,cornerRadius:s,cornerIsExternal:a}),w=a?Math.abs(l-u):Math.abs(l-u)-g-x;if(w<0)return o?"M ".concat(p.x,",").concat(p.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):i7({cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:l,endAngle:u});var C="M ".concat(p.x,",").concat(p.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(d.x,",").concat(d.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(w>180),",").concat(+(h<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(b.x,",").concat(b.y,`
  `);if(r>0){var{circleTangency:E,lineTangency:_,theta:A}=jx({cx:e,cy:n,radius:r,angle:l,sign:h,isExternal:!0,cornerRadius:s,cornerIsExternal:a}),{circleTangency:P,lineTangency:N,theta:R}=jx({cx:e,cy:n,radius:r,angle:u,sign:-h,isExternal:!0,cornerRadius:s,cornerIsExternal:a}),D=a?Math.abs(l-u):Math.abs(l-u)-A-R;if(D<0&&s===0)return"".concat(C,"L").concat(e,",").concat(n,"Z");C+="L".concat(N.x,",").concat(N.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(P.x,",").concat(P.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(D>180),",").concat(+(h>0),",").concat(E.x,",").concat(E.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(_.x,",").concat(_.y,"Z")}else C+="L".concat(e,",").concat(n,"Z");return C},WSe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},s7=t=>{var e=Co(t,WSe),{cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:o,forceCornerRadius:a,cornerIsExternal:l,startAngle:u,endAngle:h,className:d}=e;if(s<i||u===h)return null;var p=vn("recharts-sector",d),g=s-i,y=ta(o,g,0,!0),b;return y>0&&Math.abs(u-h)<360?b=jSe({cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:Math.min(y,g/2),forceCornerRadius:a,cornerIsExternal:l,startAngle:u,endAngle:h}):b=i7({cx:n,cy:r,innerRadius:i,outerRadius:s,startAngle:u,endAngle:h}),B.createElement("path",X2({},vo(e),{className:p,d:b}))};function GSe(t,e,n){var r,i,s,o;if(t==="horizontal")r=e.x,s=r,i=n.top,o=n.top+n.height;else if(t==="vertical")i=e.y,o=i,r=n.left,s=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var{cx:a,cy:l,innerRadius:u,outerRadius:h,angle:d}=e,p=oi(a,l,u,d),g=oi(a,l,h,d);r=p.x,i=p.y,s=g.x,o=g.y}else return r7(e);return[{x:r,y:i},{x:s,y:o}]}var BA={},zA={},UA={},gj;function HSe(){return gj||(gj=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=hK();function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})(UA)),UA}var yj;function qSe(){return yj||(yj=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=HSe();function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(zA)),zA}var vj;function KSe(){return vj||(vj=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=fK(),n=qSe();function r(i,s,o){o&&typeof o!="number"&&e.isIterateeCall(i,s,o)&&(s=o=void 0),i=n.toFinite(i),s===void 0?(s=i,i=0):s=n.toFinite(s),o=o===void 0?i<s?1:-1:n.toFinite(o);const a=Math.max(Math.ceil((s-i)/(o||1)),0),l=new Array(a);for(let u=0;u<a;u++)l[u]=i,i+=o;return l}t.range=r})(BA)),BA}var jA,bj;function XSe(){return bj||(bj=1,jA=KSe().range),jA}var YSe=XSe();const o7=ll(YSe);function mc(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function QSe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function i$(t){let e,n,r;t.length!==2?(e=mc,n=(a,l)=>mc(t(a),l),r=(a,l)=>t(a)-l):(e=t===mc||t===QSe?t:ZSe,n=t,r=t);function i(a,l,u=0,h=a.length){if(u<h){if(e(l,l)!==0)return h;do{const d=u+h>>>1;n(a[d],l)<0?u=d+1:h=d}while(u<h)}return u}function s(a,l,u=0,h=a.length){if(u<h){if(e(l,l)!==0)return h;do{const d=u+h>>>1;n(a[d],l)<=0?u=d+1:h=d}while(u<h)}return u}function o(a,l,u=0,h=a.length){const d=i(a,l,u,h-1);return d>u&&r(a[d-1],l)>-r(a[d],l)?d-1:d}return{left:i,center:o,right:s}}function ZSe(){return 0}function a7(t){return t===null?NaN:+t}function*JSe(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const eTe=i$(mc),Sv=eTe.right;i$(a7).center;class xj extends Map{constructor(e,n=rTe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(wj(this,e))}has(e){return super.has(wj(this,e))}set(e,n){return super.set(tTe(this,e),n)}delete(e){return super.delete(nTe(this,e))}}function wj({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function tTe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function nTe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function rTe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function iTe(t=mc){if(t===mc)return l7;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function l7(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const sTe=Math.sqrt(50),oTe=Math.sqrt(10),aTe=Math.sqrt(2);function Ew(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=sTe?10:s>=oTe?5:s>=aTe?2:1;let a,l,u;return i<0?(u=Math.pow(10,-i)/o,a=Math.round(t*u),l=Math.round(e*u),a/u<t&&++a,l/u>e&&--l,u=-u):(u=Math.pow(10,i)*o,a=Math.round(t/u),l=Math.round(e/u),a*u<t&&++a,l*u>e&&--l),l<a&&.5<=n&&n<2?Ew(t,e,n*2):[a,l,u]}function Y2(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,o]=r?Ew(e,t,n):Ew(t,e,n);if(!(s>=i))return[];const a=s-i+1,l=new Array(a);if(r)if(o<0)for(let u=0;u<a;++u)l[u]=(s-u)/-o;else for(let u=0;u<a;++u)l[u]=(s-u)*o;else if(o<0)for(let u=0;u<a;++u)l[u]=(i+u)/-o;else for(let u=0;u<a;++u)l[u]=(i+u)*o;return l}function Q2(t,e,n){return e=+e,t=+t,n=+n,Ew(t,e,n)[2]}function Z2(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Q2(e,t,n):Q2(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function Sj(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function Tj(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function u7(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?l7:iTe(i);r>n;){if(r-n>600){const l=r-n+1,u=e-n+1,h=Math.log(l),d=.5*Math.exp(2*h/3),p=.5*Math.sqrt(h*d*(l-d)/l)*(u-l/2<0?-1:1),g=Math.max(n,Math.floor(e-u*d/l+p)),y=Math.min(r,Math.floor(e+(l-u)*d/l+p));u7(t,e,g,y,i)}const s=t[e];let o=n,a=r;for(Lg(t,n,e),i(t[r],s)>0&&Lg(t,n,r);o<a;){for(Lg(t,o,a),++o,--a;i(t[o],s)<0;)++o;for(;i(t[a],s)>0;)--a}i(t[n],s)===0?Lg(t,n,a):(++a,Lg(t,a,r)),a<=e&&(n=a+1),e<=a&&(r=a-1)}return t}function Lg(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function lTe(t,e,n){if(t=Float64Array.from(JSe(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return Tj(t);if(e>=1)return Sj(t);var r,i=(r-1)*e,s=Math.floor(i),o=Sj(u7(t,s).subarray(0,s+1)),a=Tj(t.subarray(s+1));return o+(a-o)*(i-s)}}function uTe(t,e,n=a7){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,s=Math.floor(i),o=+n(t[s],s,t),a=+n(t[s+1],s+1,t);return o+(a-o)*(i-s)}}function cTe(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}function Eo(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function lu(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const J2=Symbol("implicit");function s$(){var t=new xj,e=[],n=[],r=J2;function i(s){let o=t.get(s);if(o===void 0){if(r!==J2)return r;t.set(s,o=e.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new xj;for(const o of s)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return s$(e,n).unknown(r)},Eo.apply(i,arguments),i}function o$(){var t=s$().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,s,o,a=!1,l=0,u=0,h=.5;delete t.unknown;function d(){var p=e().length,g=i<r,y=g?i:r,b=g?r:i;s=(b-y)/Math.max(1,p-l+u*2),a&&(s=Math.floor(s)),y+=(b-y-s*(p-l))*h,o=s*(1-l),a&&(y=Math.round(y),o=Math.round(o));var x=cTe(p).map(function(w){return y+s*w});return n(g?x.reverse():x)}return t.domain=function(p){return arguments.length?(e(p),d()):e()},t.range=function(p){return arguments.length?([r,i]=p,r=+r,i=+i,d()):[r,i]},t.rangeRound=function(p){return[r,i]=p,r=+r,i=+i,a=!0,d()},t.bandwidth=function(){return o},t.step=function(){return s},t.round=function(p){return arguments.length?(a=!!p,d()):a},t.padding=function(p){return arguments.length?(l=Math.min(1,u=+p),d()):l},t.paddingInner=function(p){return arguments.length?(l=Math.min(1,p),d()):l},t.paddingOuter=function(p){return arguments.length?(u=+p,d()):u},t.align=function(p){return arguments.length?(h=Math.max(0,Math.min(1,p)),d()):h},t.copy=function(){return o$(e(),[r,i]).round(a).paddingInner(l).paddingOuter(u).align(h)},Eo.apply(d(),arguments)}function c7(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return c7(e())},t}function hTe(){return c7(o$.apply(null,arguments).paddingInner(1))}function a$(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function h7(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Tv(){}var Vy=.7,Iw=1/Vy,fp="\\s*([+-]?\\d+)\\s*",By="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ga="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",fTe=/^#([0-9a-f]{3,8})$/,dTe=new RegExp(`^rgb\\(${fp},${fp},${fp}\\)$`),pTe=new RegExp(`^rgb\\(${Ga},${Ga},${Ga}\\)$`),mTe=new RegExp(`^rgba\\(${fp},${fp},${fp},${By}\\)$`),gTe=new RegExp(`^rgba\\(${Ga},${Ga},${Ga},${By}\\)$`),yTe=new RegExp(`^hsl\\(${By},${Ga},${Ga}\\)$`),vTe=new RegExp(`^hsla\\(${By},${Ga},${Ga},${By}\\)$`),Cj={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};a$(Tv,zy,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ej,formatHex:Ej,formatHex8:bTe,formatHsl:xTe,formatRgb:Ij,toString:Ij});function Ej(){return this.rgb().formatHex()}function bTe(){return this.rgb().formatHex8()}function xTe(){return f7(this).formatHsl()}function Ij(){return this.rgb().formatRgb()}function zy(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=fTe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?_j(e):n===3?new us(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Wx(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Wx(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=dTe.exec(t))?new us(e[1],e[2],e[3],1):(e=pTe.exec(t))?new us(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=mTe.exec(t))?Wx(e[1],e[2],e[3],e[4]):(e=gTe.exec(t))?Wx(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=yTe.exec(t))?Nj(e[1],e[2]/100,e[3]/100,1):(e=vTe.exec(t))?Nj(e[1],e[2]/100,e[3]/100,e[4]):Cj.hasOwnProperty(t)?_j(Cj[t]):t==="transparent"?new us(NaN,NaN,NaN,0):null}function _j(t){return new us(t>>16&255,t>>8&255,t&255,1)}function Wx(t,e,n,r){return r<=0&&(t=e=n=NaN),new us(t,e,n,r)}function wTe(t){return t instanceof Tv||(t=zy(t)),t?(t=t.rgb(),new us(t.r,t.g,t.b,t.opacity)):new us}function eN(t,e,n,r){return arguments.length===1?wTe(t):new us(t,e,n,r??1)}function us(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}a$(us,eN,h7(Tv,{brighter(t){return t=t==null?Iw:Math.pow(Iw,t),new us(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Vy:Math.pow(Vy,t),new us(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new us(Jh(this.r),Jh(this.g),Jh(this.b),_w(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Aj,formatHex:Aj,formatHex8:STe,formatRgb:kj,toString:kj}));function Aj(){return`#${Wh(this.r)}${Wh(this.g)}${Wh(this.b)}`}function STe(){return`#${Wh(this.r)}${Wh(this.g)}${Wh(this.b)}${Wh((isNaN(this.opacity)?1:this.opacity)*255)}`}function kj(){const t=_w(this.opacity);return`${t===1?"rgb(":"rgba("}${Jh(this.r)}, ${Jh(this.g)}, ${Jh(this.b)}${t===1?")":`, ${t})`}`}function _w(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Jh(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Wh(t){return t=Jh(t),(t<16?"0":"")+t.toString(16)}function Nj(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new qo(t,e,n,r)}function f7(t){if(t instanceof qo)return new qo(t.h,t.s,t.l,t.opacity);if(t instanceof Tv||(t=zy(t)),!t)return new qo;if(t instanceof qo)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(e===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-e)/a+2:o=(e-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new qo(o,a,l,t.opacity)}function TTe(t,e,n,r){return arguments.length===1?f7(t):new qo(t,e,n,r??1)}function qo(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}a$(qo,TTe,h7(Tv,{brighter(t){return t=t==null?Iw:Math.pow(Iw,t),new qo(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Vy:Math.pow(Vy,t),new qo(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new us(WA(t>=240?t-240:t+120,i,r),WA(t,i,r),WA(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new qo(Rj(this.h),Gx(this.s),Gx(this.l),_w(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=_w(this.opacity);return`${t===1?"hsl(":"hsla("}${Rj(this.h)}, ${Gx(this.s)*100}%, ${Gx(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Rj(t){return t=(t||0)%360,t<0?t+360:t}function Gx(t){return Math.max(0,Math.min(1,t||0))}function WA(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const l$=t=>()=>t;function CTe(t,e){return function(n){return t+n*e}}function ETe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function ITe(t){return(t=+t)==1?d7:function(e,n){return n-e?ETe(e,n,t):l$(isNaN(e)?n:e)}}function d7(t,e){var n=e-t;return n?CTe(t,n):l$(isNaN(t)?e:t)}const Dj=(function t(e){var n=ITe(e);function r(i,s){var o=n((i=eN(i)).r,(s=eN(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),u=d7(i.opacity,s.opacity);return function(h){return i.r=o(h),i.g=a(h),i.b=l(h),i.opacity=u(h),i+""}}return r.gamma=t,r})(1);function _Te(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function ATe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function kTe(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=am(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function NTe(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Aw(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function RTe(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=am(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var tN=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,GA=new RegExp(tN.source,"g");function DTe(t){return function(){return t}}function $Te(t){return function(e){return t(e)+""}}function OTe(t,e){var n=tN.lastIndex=GA.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(t=t+"",e=e+"";(r=tN.exec(t))&&(i=GA.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:Aw(r,i)})),n=GA.lastIndex;return n<e.length&&(s=e.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?$Te(l[0].x):DTe(e):(e=l.length,function(u){for(var h=0,d;h<e;++h)a[(d=l[h]).i]=d.x(u);return a.join("")})}function am(t,e){var n=typeof e,r;return e==null||n==="boolean"?l$(e):(n==="number"?Aw:n==="string"?(r=zy(e))?(e=r,Dj):OTe:e instanceof zy?Dj:e instanceof Date?NTe:ATe(e)?_Te:Array.isArray(e)?kTe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?RTe:Aw)(t,e)}function u$(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function PTe(t,e){e===void 0&&(e=t,t=am);for(var n=0,r=e.length-1,i=e[0],s=new Array(r<0?0:r);n<r;)s[n]=t(i,i=e[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function MTe(t){return function(){return t}}function kw(t){return+t}var $j=[0,1];function Vi(t){return t}function nN(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:MTe(isNaN(e)?NaN:.5)}function LTe(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function FTe(t,e,n){var r=t[0],i=t[1],s=e[0],o=e[1];return i<r?(r=nN(i,r),s=n(o,s)):(r=nN(r,i),s=n(s,o)),function(a){return s(r(a))}}function VTe(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=nN(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(a){var l=Sv(t,a,1,r)-1;return s[l](i[l](a))}}function Cv(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function fT(){var t=$j,e=$j,n=am,r,i,s,o=Vi,a,l,u;function h(){var p=Math.min(t.length,e.length);return o!==Vi&&(o=LTe(t[0],t[p-1])),a=p>2?VTe:FTe,l=u=null,d}function d(p){return p==null||isNaN(p=+p)?s:(l||(l=a(t.map(r),e,n)))(r(o(p)))}return d.invert=function(p){return o(i((u||(u=a(e,t.map(r),Aw)))(p)))},d.domain=function(p){return arguments.length?(t=Array.from(p,kw),h()):t.slice()},d.range=function(p){return arguments.length?(e=Array.from(p),h()):e.slice()},d.rangeRound=function(p){return e=Array.from(p),n=u$,h()},d.clamp=function(p){return arguments.length?(o=p?!0:Vi,h()):o!==Vi},d.interpolate=function(p){return arguments.length?(n=p,h()):n},d.unknown=function(p){return arguments.length?(s=p,d):s},function(p,g){return r=p,i=g,h()}}function c$(){return fT()(Vi,Vi)}function BTe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Nw(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Rp(t){return t=Nw(Math.abs(t)),t?t[1]:NaN}function zTe(t,e){return function(n,r){for(var i=n.length,s=[],o=0,a=t[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),s.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=t[o=(o+1)%t.length];return s.reverse().join(e)}}function UTe(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var jTe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Uy(t){if(!(e=jTe.exec(t)))throw new Error("invalid format: "+t);var e;return new h$({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Uy.prototype=h$.prototype;function h$(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}h$.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function WTe(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var p7;function GTe(t,e){var n=Nw(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(p7=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Nw(t,Math.max(0,e+s-1))[0]}function Oj(t,e){var n=Nw(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Pj={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:BTe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Oj(t*100,e),r:Oj,s:GTe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Mj(t){return t}var Lj=Array.prototype.map,Fj=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function HTe(t){var e=t.grouping===void 0||t.thousands===void 0?Mj:zTe(Lj.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?Mj:UTe(Lj.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(d){d=Uy(d);var p=d.fill,g=d.align,y=d.sign,b=d.symbol,x=d.zero,w=d.width,C=d.comma,E=d.precision,_=d.trim,A=d.type;A==="n"?(C=!0,A="g"):Pj[A]||(E===void 0&&(E=12),_=!0,A="g"),(x||p==="0"&&g==="=")&&(x=!0,p="0",g="=");var P=b==="$"?n:b==="#"&&/[boxX]/.test(A)?"0"+A.toLowerCase():"",N=b==="$"?r:/[%p]/.test(A)?o:"",R=Pj[A],D=/[defgprs%]/.test(A);E=E===void 0?6:/[gprs]/.test(A)?Math.max(1,Math.min(21,E)):Math.max(0,Math.min(20,E));function O(k){var F=P,L=N,q,Y,W;if(A==="c")L=R(k)+L,k="";else{k=+k;var H=k<0||1/k<0;if(k=isNaN(k)?l:R(Math.abs(k),E),_&&(k=WTe(k)),H&&+k==0&&y!=="+"&&(H=!1),F=(H?y==="("?y:a:y==="-"||y==="("?"":y)+F,L=(A==="s"?Fj[8+p7/3]:"")+L+(H&&y==="("?")":""),D){for(q=-1,Y=k.length;++q<Y;)if(W=k.charCodeAt(q),48>W||W>57){L=(W===46?i+k.slice(q+1):k.slice(q))+L,k=k.slice(0,q);break}}}C&&!x&&(k=e(k,1/0));var X=F.length+k.length+L.length,ee=X<w?new Array(w-X+1).join(p):"";switch(C&&x&&(k=e(ee+k,ee.length?w-L.length:1/0),ee=""),g){case"<":k=F+k+L+ee;break;case"=":k=F+ee+k+L;break;case"^":k=ee.slice(0,X=ee.length>>1)+F+k+L+ee.slice(X);break;default:k=ee+F+k+L;break}return s(k)}return O.toString=function(){return d+""},O}function h(d,p){var g=u((d=Uy(d),d.type="f",d)),y=Math.max(-8,Math.min(8,Math.floor(Rp(p)/3)))*3,b=Math.pow(10,-y),x=Fj[8+y/3];return function(w){return g(b*w)+x}}return{format:u,formatPrefix:h}}var Hx,f$,m7;qTe({thousands:",",grouping:[3],currency:["$",""]});function qTe(t){return Hx=HTe(t),f$=Hx.format,m7=Hx.formatPrefix,Hx}function KTe(t){return Math.max(0,-Rp(Math.abs(t)))}function XTe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Rp(e)/3)))*3-Rp(Math.abs(t)))}function YTe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Rp(e)-Rp(t))+1}function g7(t,e,n,r){var i=Z2(t,e,n),s;switch(r=Uy(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=XTe(i,o))&&(r.precision=s),m7(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=YTe(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=KTe(i))&&(r.precision=s-(r.type==="%")*2);break}}return f$(r)}function Vc(t){var e=t.domain;return t.ticks=function(n){var r=e();return Y2(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return g7(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,o=r[i],a=r[s],l,u,h=10;for(a<o&&(u=o,o=a,a=u,u=i,i=s,s=u);h-- >0;){if(u=Q2(o,a,n),u===l)return r[i]=o,r[s]=a,e(r);if(u>0)o=Math.floor(o/u)*u,a=Math.ceil(a/u)*u;else if(u<0)o=Math.ceil(o*u)/u,a=Math.floor(a*u)/u;else break;l=u}return t},t}function y7(){var t=c$();return t.copy=function(){return Cv(t,y7())},Eo.apply(t,arguments),Vc(t)}function v7(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,kw),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return v7(t).unknown(e)},t=arguments.length?Array.from(t,kw):[0,1],Vc(n)}function b7(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],s=t[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),t[n]=e.floor(i),t[r]=e.ceil(s),t}function Vj(t){return Math.log(t)}function Bj(t){return Math.exp(t)}function QTe(t){return-Math.log(-t)}function ZTe(t){return-Math.exp(-t)}function JTe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function eCe(t){return t===10?JTe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function tCe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function zj(t){return(e,n)=>-t(-e,n)}function d$(t){const e=t(Vj,Bj),n=e.domain;let r=10,i,s;function o(){return i=tCe(r),s=eCe(r),n()[0]<0?(i=zj(i),s=zj(s),t(QTe,ZTe)):t(Vj,Bj),e}return e.base=function(a){return arguments.length?(r=+a,o()):r},e.domain=function(a){return arguments.length?(n(a),o()):n()},e.ticks=a=>{const l=n();let u=l[0],h=l[l.length-1];const d=h<u;d&&([u,h]=[h,u]);let p=i(u),g=i(h),y,b;const x=a==null?10:+a;let w=[];if(!(r%1)&&g-p<x){if(p=Math.floor(p),g=Math.ceil(g),u>0){for(;p<=g;++p)for(y=1;y<r;++y)if(b=p<0?y/s(-p):y*s(p),!(b<u)){if(b>h)break;w.push(b)}}else for(;p<=g;++p)for(y=r-1;y>=1;--y)if(b=p>0?y/s(-p):y*s(p),!(b<u)){if(b>h)break;w.push(b)}w.length*2<x&&(w=Y2(u,h,x))}else w=Y2(p,g,Math.min(g-p,x)).map(s);return d?w.reverse():w},e.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=Uy(l)).precision==null&&(l.trim=!0),l=f$(l)),a===1/0)return l;const u=Math.max(1,r*a/e.ticks().length);return h=>{let d=h/s(Math.round(i(h)));return d*r<r-.5&&(d*=r),d<=u?l(h):""}},e.nice=()=>n(b7(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),e}function x7(){const t=d$(fT()).domain([1,10]);return t.copy=()=>Cv(t,x7()).base(t.base()),Eo.apply(t,arguments),t}function Uj(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function jj(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function p$(t){var e=1,n=t(Uj(e),jj(e));return n.constant=function(r){return arguments.length?t(Uj(e=+r),jj(e)):e},Vc(n)}function w7(){var t=p$(fT());return t.copy=function(){return Cv(t,w7()).constant(t.constant())},Eo.apply(t,arguments)}function Wj(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function nCe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function rCe(t){return t<0?-t*t:t*t}function m$(t){var e=t(Vi,Vi),n=1;function r(){return n===1?t(Vi,Vi):n===.5?t(nCe,rCe):t(Wj(n),Wj(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Vc(e)}function g$(){var t=m$(fT());return t.copy=function(){return Cv(t,g$()).exponent(t.exponent())},Eo.apply(t,arguments),t}function iCe(){return g$.apply(null,arguments).exponent(.5)}function Gj(t){return Math.sign(t)*t*t}function sCe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function S7(){var t=c$(),e=[0,1],n=!1,r;function i(s){var o=sCe(t(s));return isNaN(o)?r:n?Math.round(o):o}return i.invert=function(s){return t.invert(Gj(s))},i.domain=function(s){return arguments.length?(t.domain(s),i):t.domain()},i.range=function(s){return arguments.length?(t.range((e=Array.from(s,kw)).map(Gj)),i):e.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(t.clamp(s),i):t.clamp()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return S7(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Eo.apply(i,arguments),Vc(i)}function T7(){var t=[],e=[],n=[],r;function i(){var o=0,a=Math.max(1,e.length);for(n=new Array(a-1);++o<a;)n[o-1]=uTe(t,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:e[Sv(n,o)]}return s.invertExtent=function(o){var a=e.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:t[0],a<n.length?n[a]:t[t.length-1]]},s.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let a of o)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(mc),i()},s.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return T7().domain(t).range(e).unknown(r)},Eo.apply(s,arguments)}function C7(){var t=0,e=1,n=1,r=[.5],i=[0,1],s;function o(l){return l!=null&&l<=l?i[Sv(r,l,0,n)]:s}function a(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return o}return o.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,a()):[t,e]},o.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,a()):i.slice()},o.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},o.unknown=function(l){return arguments.length&&(s=l),o},o.thresholds=function(){return r.slice()},o.copy=function(){return C7().domain([t,e]).range(i).unknown(s)},Eo.apply(Vc(o),arguments)}function E7(){var t=[.5],e=[0,1],n,r=1;function i(s){return s!=null&&s<=s?e[Sv(t,s,0,r)]:n}return i.domain=function(s){return arguments.length?(t=Array.from(s),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var o=e.indexOf(s);return[t[o-1],t[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return E7().domain(t).range(e).unknown(n)},Eo.apply(i,arguments)}const HA=new Date,qA=new Date;function _r(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const l=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;let u;do l.push(u=new Date(+s)),e(s,a),t(s);while(u<s&&s<o);return l},i.filter=s=>_r(o=>{if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;e(o,-1),!s(o););else for(;--a>=0;)for(;e(o,1),!s(o););}),n&&(i.count=(s,o)=>(HA.setTime(+s),qA.setTime(+o),t(HA),t(qA),Math.floor(n(HA,qA))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const Rw=_r(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Rw.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?_r(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Rw);Rw.range;const Ll=1e3,fo=Ll*60,Fl=fo*60,Jl=Fl*24,y$=Jl*7,Hj=Jl*30,KA=Jl*365,Gh=_r(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Ll)},(t,e)=>(e-t)/Ll,t=>t.getUTCSeconds());Gh.range;const v$=_r(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ll)},(t,e)=>{t.setTime(+t+e*fo)},(t,e)=>(e-t)/fo,t=>t.getMinutes());v$.range;const b$=_r(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*fo)},(t,e)=>(e-t)/fo,t=>t.getUTCMinutes());b$.range;const x$=_r(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ll-t.getMinutes()*fo)},(t,e)=>{t.setTime(+t+e*Fl)},(t,e)=>(e-t)/Fl,t=>t.getHours());x$.range;const w$=_r(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Fl)},(t,e)=>(e-t)/Fl,t=>t.getUTCHours());w$.range;const Ev=_r(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*fo)/Jl,t=>t.getDate()-1);Ev.range;const dT=_r(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Jl,t=>t.getUTCDate()-1);dT.range;const I7=_r(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Jl,t=>Math.floor(t/Jl));I7.range;function Ff(t){return _r(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*fo)/y$)}const pT=Ff(0),Dw=Ff(1),oCe=Ff(2),aCe=Ff(3),Dp=Ff(4),lCe=Ff(5),uCe=Ff(6);pT.range;Dw.range;oCe.range;aCe.range;Dp.range;lCe.range;uCe.range;function Vf(t){return _r(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/y$)}const mT=Vf(0),$w=Vf(1),cCe=Vf(2),hCe=Vf(3),$p=Vf(4),fCe=Vf(5),dCe=Vf(6);mT.range;$w.range;cCe.range;hCe.range;$p.range;fCe.range;dCe.range;const S$=_r(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());S$.range;const T$=_r(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());T$.range;const eu=_r(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());eu.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:_r(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});eu.range;const tu=_r(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());tu.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:_r(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});tu.range;function _7(t,e,n,r,i,s){const o=[[Gh,1,Ll],[Gh,5,5*Ll],[Gh,15,15*Ll],[Gh,30,30*Ll],[s,1,fo],[s,5,5*fo],[s,15,15*fo],[s,30,30*fo],[i,1,Fl],[i,3,3*Fl],[i,6,6*Fl],[i,12,12*Fl],[r,1,Jl],[r,2,2*Jl],[n,1,y$],[e,1,Hj],[e,3,3*Hj],[t,1,KA]];function a(u,h,d){const p=h<u;p&&([u,h]=[h,u]);const g=d&&typeof d.range=="function"?d:l(u,h,d),y=g?g.range(u,+h+1):[];return p?y.reverse():y}function l(u,h,d){const p=Math.abs(h-u)/d,g=i$(([,,x])=>x).right(o,p);if(g===o.length)return t.every(Z2(u/KA,h/KA,d));if(g===0)return Rw.every(Math.max(Z2(u,h,d),1));const[y,b]=o[p/o[g-1][2]<o[g][2]/p?g-1:g];return y.every(b)}return[a,l]}const[pCe,mCe]=_7(tu,T$,mT,I7,w$,b$),[gCe,yCe]=_7(eu,S$,pT,Ev,x$,v$);function XA(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function YA(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Fg(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function vCe(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,o=t.shortDays,a=t.months,l=t.shortMonths,u=Vg(i),h=Bg(i),d=Vg(s),p=Bg(s),g=Vg(o),y=Bg(o),b=Vg(a),x=Bg(a),w=Vg(l),C=Bg(l),E={a:H,A:X,b:ee,B:ce,c:null,d:Zj,e:Zj,f:zCe,g:QCe,G:JCe,H:FCe,I:VCe,j:BCe,L:A7,m:UCe,M:jCe,p:j,q:Q,Q:t6,s:n6,S:WCe,u:GCe,U:HCe,V:qCe,w:KCe,W:XCe,x:null,X:null,y:YCe,Y:ZCe,Z:eEe,"%":e6},_={a:ie,A:me,b:ve,B:_e,c:null,d:Jj,e:Jj,f:iEe,g:pEe,G:gEe,H:tEe,I:nEe,j:rEe,L:N7,m:sEe,M:oEe,p:De,q:Fe,Q:t6,s:n6,S:aEe,u:lEe,U:uEe,V:cEe,w:hEe,W:fEe,x:null,X:null,y:dEe,Y:mEe,Z:yEe,"%":e6},A={a:O,A:k,b:F,B:L,c:q,d:Yj,e:Yj,f:OCe,g:Xj,G:Kj,H:Qj,I:Qj,j:NCe,L:$Ce,m:kCe,M:RCe,p:D,q:ACe,Q:MCe,s:LCe,S:DCe,u:TCe,U:CCe,V:ECe,w:SCe,W:ICe,x:Y,X:W,y:Xj,Y:Kj,Z:_Ce,"%":PCe};E.x=P(n,E),E.X=P(r,E),E.c=P(e,E),_.x=P(n,_),_.X=P(r,_),_.c=P(e,_);function P(ue,Oe){return function(Me){var Ce=[],ot=-1,He=0,ut=ue.length,nt,Tt,Mt;for(Me instanceof Date||(Me=new Date(+Me));++ot<ut;)ue.charCodeAt(ot)===37&&(Ce.push(ue.slice(He,ot)),(Tt=qj[nt=ue.charAt(++ot)])!=null?nt=ue.charAt(++ot):Tt=nt==="e"?" ":"0",(Mt=Oe[nt])&&(nt=Mt(Me,Tt)),Ce.push(nt),He=ot+1);return Ce.push(ue.slice(He,ot)),Ce.join("")}}function N(ue,Oe){return function(Me){var Ce=Fg(1900,void 0,1),ot=R(Ce,ue,Me+="",0),He,ut;if(ot!=Me.length)return null;if("Q"in Ce)return new Date(Ce.Q);if("s"in Ce)return new Date(Ce.s*1e3+("L"in Ce?Ce.L:0));if(Oe&&!("Z"in Ce)&&(Ce.Z=0),"p"in Ce&&(Ce.H=Ce.H%12+Ce.p*12),Ce.m===void 0&&(Ce.m="q"in Ce?Ce.q:0),"V"in Ce){if(Ce.V<1||Ce.V>53)return null;"w"in Ce||(Ce.w=1),"Z"in Ce?(He=YA(Fg(Ce.y,0,1)),ut=He.getUTCDay(),He=ut>4||ut===0?$w.ceil(He):$w(He),He=dT.offset(He,(Ce.V-1)*7),Ce.y=He.getUTCFullYear(),Ce.m=He.getUTCMonth(),Ce.d=He.getUTCDate()+(Ce.w+6)%7):(He=XA(Fg(Ce.y,0,1)),ut=He.getDay(),He=ut>4||ut===0?Dw.ceil(He):Dw(He),He=Ev.offset(He,(Ce.V-1)*7),Ce.y=He.getFullYear(),Ce.m=He.getMonth(),Ce.d=He.getDate()+(Ce.w+6)%7)}else("W"in Ce||"U"in Ce)&&("w"in Ce||(Ce.w="u"in Ce?Ce.u%7:"W"in Ce?1:0),ut="Z"in Ce?YA(Fg(Ce.y,0,1)).getUTCDay():XA(Fg(Ce.y,0,1)).getDay(),Ce.m=0,Ce.d="W"in Ce?(Ce.w+6)%7+Ce.W*7-(ut+5)%7:Ce.w+Ce.U*7-(ut+6)%7);return"Z"in Ce?(Ce.H+=Ce.Z/100|0,Ce.M+=Ce.Z%100,YA(Ce)):XA(Ce)}}function R(ue,Oe,Me,Ce){for(var ot=0,He=Oe.length,ut=Me.length,nt,Tt;ot<He;){if(Ce>=ut)return-1;if(nt=Oe.charCodeAt(ot++),nt===37){if(nt=Oe.charAt(ot++),Tt=A[nt in qj?Oe.charAt(ot++):nt],!Tt||(Ce=Tt(ue,Me,Ce))<0)return-1}else if(nt!=Me.charCodeAt(Ce++))return-1}return Ce}function D(ue,Oe,Me){var Ce=u.exec(Oe.slice(Me));return Ce?(ue.p=h.get(Ce[0].toLowerCase()),Me+Ce[0].length):-1}function O(ue,Oe,Me){var Ce=g.exec(Oe.slice(Me));return Ce?(ue.w=y.get(Ce[0].toLowerCase()),Me+Ce[0].length):-1}function k(ue,Oe,Me){var Ce=d.exec(Oe.slice(Me));return Ce?(ue.w=p.get(Ce[0].toLowerCase()),Me+Ce[0].length):-1}function F(ue,Oe,Me){var Ce=w.exec(Oe.slice(Me));return Ce?(ue.m=C.get(Ce[0].toLowerCase()),Me+Ce[0].length):-1}function L(ue,Oe,Me){var Ce=b.exec(Oe.slice(Me));return Ce?(ue.m=x.get(Ce[0].toLowerCase()),Me+Ce[0].length):-1}function q(ue,Oe,Me){return R(ue,e,Oe,Me)}function Y(ue,Oe,Me){return R(ue,n,Oe,Me)}function W(ue,Oe,Me){return R(ue,r,Oe,Me)}function H(ue){return o[ue.getDay()]}function X(ue){return s[ue.getDay()]}function ee(ue){return l[ue.getMonth()]}function ce(ue){return a[ue.getMonth()]}function j(ue){return i[+(ue.getHours()>=12)]}function Q(ue){return 1+~~(ue.getMonth()/3)}function ie(ue){return o[ue.getUTCDay()]}function me(ue){return s[ue.getUTCDay()]}function ve(ue){return l[ue.getUTCMonth()]}function _e(ue){return a[ue.getUTCMonth()]}function De(ue){return i[+(ue.getUTCHours()>=12)]}function Fe(ue){return 1+~~(ue.getUTCMonth()/3)}return{format:function(ue){var Oe=P(ue+="",E);return Oe.toString=function(){return ue},Oe},parse:function(ue){var Oe=N(ue+="",!1);return Oe.toString=function(){return ue},Oe},utcFormat:function(ue){var Oe=P(ue+="",_);return Oe.toString=function(){return ue},Oe},utcParse:function(ue){var Oe=N(ue+="",!0);return Oe.toString=function(){return ue},Oe}}}var qj={"-":"",_:" ",0:"0"},zr=/^\s*\d+/,bCe=/^%/,xCe=/[\\^$*+?|[\]().{}]/g;function jt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function wCe(t){return t.replace(xCe,"\\$&")}function Vg(t){return new RegExp("^(?:"+t.map(wCe).join("|")+")","i")}function Bg(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function SCe(t,e,n){var r=zr.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function TCe(t,e,n){var r=zr.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function CCe(t,e,n){var r=zr.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function ECe(t,e,n){var r=zr.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function ICe(t,e,n){var r=zr.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Kj(t,e,n){var r=zr.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Xj(t,e,n){var r=zr.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function _Ce(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function ACe(t,e,n){var r=zr.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function kCe(t,e,n){var r=zr.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Yj(t,e,n){var r=zr.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function NCe(t,e,n){var r=zr.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function Qj(t,e,n){var r=zr.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function RCe(t,e,n){var r=zr.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function DCe(t,e,n){var r=zr.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function $Ce(t,e,n){var r=zr.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function OCe(t,e,n){var r=zr.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function PCe(t,e,n){var r=bCe.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function MCe(t,e,n){var r=zr.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function LCe(t,e,n){var r=zr.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function Zj(t,e){return jt(t.getDate(),e,2)}function FCe(t,e){return jt(t.getHours(),e,2)}function VCe(t,e){return jt(t.getHours()%12||12,e,2)}function BCe(t,e){return jt(1+Ev.count(eu(t),t),e,3)}function A7(t,e){return jt(t.getMilliseconds(),e,3)}function zCe(t,e){return A7(t,e)+"000"}function UCe(t,e){return jt(t.getMonth()+1,e,2)}function jCe(t,e){return jt(t.getMinutes(),e,2)}function WCe(t,e){return jt(t.getSeconds(),e,2)}function GCe(t){var e=t.getDay();return e===0?7:e}function HCe(t,e){return jt(pT.count(eu(t)-1,t),e,2)}function k7(t){var e=t.getDay();return e>=4||e===0?Dp(t):Dp.ceil(t)}function qCe(t,e){return t=k7(t),jt(Dp.count(eu(t),t)+(eu(t).getDay()===4),e,2)}function KCe(t){return t.getDay()}function XCe(t,e){return jt(Dw.count(eu(t)-1,t),e,2)}function YCe(t,e){return jt(t.getFullYear()%100,e,2)}function QCe(t,e){return t=k7(t),jt(t.getFullYear()%100,e,2)}function ZCe(t,e){return jt(t.getFullYear()%1e4,e,4)}function JCe(t,e){var n=t.getDay();return t=n>=4||n===0?Dp(t):Dp.ceil(t),jt(t.getFullYear()%1e4,e,4)}function eEe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+jt(e/60|0,"0",2)+jt(e%60,"0",2)}function Jj(t,e){return jt(t.getUTCDate(),e,2)}function tEe(t,e){return jt(t.getUTCHours(),e,2)}function nEe(t,e){return jt(t.getUTCHours()%12||12,e,2)}function rEe(t,e){return jt(1+dT.count(tu(t),t),e,3)}function N7(t,e){return jt(t.getUTCMilliseconds(),e,3)}function iEe(t,e){return N7(t,e)+"000"}function sEe(t,e){return jt(t.getUTCMonth()+1,e,2)}function oEe(t,e){return jt(t.getUTCMinutes(),e,2)}function aEe(t,e){return jt(t.getUTCSeconds(),e,2)}function lEe(t){var e=t.getUTCDay();return e===0?7:e}function uEe(t,e){return jt(mT.count(tu(t)-1,t),e,2)}function R7(t){var e=t.getUTCDay();return e>=4||e===0?$p(t):$p.ceil(t)}function cEe(t,e){return t=R7(t),jt($p.count(tu(t),t)+(tu(t).getUTCDay()===4),e,2)}function hEe(t){return t.getUTCDay()}function fEe(t,e){return jt($w.count(tu(t)-1,t),e,2)}function dEe(t,e){return jt(t.getUTCFullYear()%100,e,2)}function pEe(t,e){return t=R7(t),jt(t.getUTCFullYear()%100,e,2)}function mEe(t,e){return jt(t.getUTCFullYear()%1e4,e,4)}function gEe(t,e){var n=t.getUTCDay();return t=n>=4||n===0?$p(t):$p.ceil(t),jt(t.getUTCFullYear()%1e4,e,4)}function yEe(){return"+0000"}function e6(){return"%"}function t6(t){return+t}function n6(t){return Math.floor(+t/1e3)}var Fd,D7,$7;vEe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function vEe(t){return Fd=vCe(t),D7=Fd.format,Fd.parse,$7=Fd.utcFormat,Fd.utcParse,Fd}function bEe(t){return new Date(t)}function xEe(t){return t instanceof Date?+t:+new Date(+t)}function C$(t,e,n,r,i,s,o,a,l,u){var h=c$(),d=h.invert,p=h.domain,g=u(".%L"),y=u(":%S"),b=u("%I:%M"),x=u("%I %p"),w=u("%a %d"),C=u("%b %d"),E=u("%B"),_=u("%Y");function A(P){return(l(P)<P?g:a(P)<P?y:o(P)<P?b:s(P)<P?x:r(P)<P?i(P)<P?w:C:n(P)<P?E:_)(P)}return h.invert=function(P){return new Date(d(P))},h.domain=function(P){return arguments.length?p(Array.from(P,xEe)):p().map(bEe)},h.ticks=function(P){var N=p();return t(N[0],N[N.length-1],P??10)},h.tickFormat=function(P,N){return N==null?A:u(N)},h.nice=function(P){var N=p();return(!P||typeof P.range!="function")&&(P=e(N[0],N[N.length-1],P??10)),P?p(b7(N,P)):h},h.copy=function(){return Cv(h,C$(t,e,n,r,i,s,o,a,l,u))},h}function wEe(){return Eo.apply(C$(gCe,yCe,eu,S$,pT,Ev,x$,v$,Gh,D7).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function SEe(){return Eo.apply(C$(pCe,mCe,tu,T$,mT,dT,w$,b$,Gh,$7).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function gT(){var t=0,e=1,n,r,i,s,o=Vi,a=!1,l;function u(d){return d==null||isNaN(d=+d)?l:o(i===0?.5:(d=(s(d)-n)*i,a?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([t,e]=d,n=s(t=+t),r=s(e=+e),i=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(d){return arguments.length?(a=!!d,u):a},u.interpolator=function(d){return arguments.length?(o=d,u):o};function h(d){return function(p){var g,y;return arguments.length?([g,y]=p,o=d(g,y),u):[o(0),o(1)]}}return u.range=h(am),u.rangeRound=h(u$),u.unknown=function(d){return arguments.length?(l=d,u):l},function(d){return s=d,n=d(t),r=d(e),i=n===r?0:1/(r-n),u}}function Bc(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function O7(){var t=Vc(gT()(Vi));return t.copy=function(){return Bc(t,O7())},lu.apply(t,arguments)}function P7(){var t=d$(gT()).domain([1,10]);return t.copy=function(){return Bc(t,P7()).base(t.base())},lu.apply(t,arguments)}function M7(){var t=p$(gT());return t.copy=function(){return Bc(t,M7()).constant(t.constant())},lu.apply(t,arguments)}function E$(){var t=m$(gT());return t.copy=function(){return Bc(t,E$()).exponent(t.exponent())},lu.apply(t,arguments)}function TEe(){return E$.apply(null,arguments).exponent(.5)}function L7(){var t=[],e=Vi;function n(r){if(r!=null&&!isNaN(r=+r))return e((Sv(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(mc),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,s)=>lTe(t,s/r))},n.copy=function(){return L7(e).domain(t)},lu.apply(n,arguments)}function yT(){var t=0,e=.5,n=1,r=1,i,s,o,a,l,u=Vi,h,d=!1,p;function g(b){return isNaN(b=+b)?p:(b=.5+((b=+h(b))-s)*(r*b<r*s?a:l),u(d?Math.max(0,Math.min(1,b)):b))}g.domain=function(b){return arguments.length?([t,e,n]=b,i=h(t=+t),s=h(e=+e),o=h(n=+n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,g):[t,e,n]},g.clamp=function(b){return arguments.length?(d=!!b,g):d},g.interpolator=function(b){return arguments.length?(u=b,g):u};function y(b){return function(x){var w,C,E;return arguments.length?([w,C,E]=x,u=PTe(b,[w,C,E]),g):[u(0),u(.5),u(1)]}}return g.range=y(am),g.rangeRound=y(u$),g.unknown=function(b){return arguments.length?(p=b,g):p},function(b){return h=b,i=b(t),s=b(e),o=b(n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,g}}function F7(){var t=Vc(yT()(Vi));return t.copy=function(){return Bc(t,F7())},lu.apply(t,arguments)}function V7(){var t=d$(yT()).domain([.1,1,10]);return t.copy=function(){return Bc(t,V7()).base(t.base())},lu.apply(t,arguments)}function B7(){var t=p$(yT());return t.copy=function(){return Bc(t,B7()).constant(t.constant())},lu.apply(t,arguments)}function I$(){var t=m$(yT());return t.copy=function(){return Bc(t,I$()).exponent(t.exponent())},lu.apply(t,arguments)}function CEe(){return I$.apply(null,arguments).exponent(.5)}const Qg=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:o$,scaleDiverging:F7,scaleDivergingLog:V7,scaleDivergingPow:I$,scaleDivergingSqrt:CEe,scaleDivergingSymlog:B7,scaleIdentity:v7,scaleImplicit:J2,scaleLinear:y7,scaleLog:x7,scaleOrdinal:s$,scalePoint:hTe,scalePow:g$,scaleQuantile:T7,scaleQuantize:C7,scaleRadial:S7,scaleSequential:O7,scaleSequentialLog:P7,scaleSequentialPow:E$,scaleSequentialQuantile:L7,scaleSequentialSqrt:TEe,scaleSequentialSymlog:M7,scaleSqrt:iCe,scaleSymlog:w7,scaleThreshold:E7,scaleTime:wEe,scaleUtc:SEe,tickFormat:g7},Symbol.toStringTag,{value:"Module"}));var zc=t=>t.chartData,EEe=Te([zc],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),_$=(t,e,n,r)=>r?EEe(t):zc(t);function ff(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(_i(e)&&_i(n))return!0}return!1}function r6(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function z7(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,i,s;if(_i(n))i=n;else if(typeof n=="function")return;if(_i(r))s=r;else if(typeof r=="function")return;var o=[i,s];if(ff(o))return o}}function IEe(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(ff(r))return r6(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[i,s]=t,o,a;if(i==="auto")e!=null&&(o=Math.min(...e));else if(Ye(i))o=i;else if(typeof i=="function")try{e!=null&&(o=i(e?.[0]))}catch{}else if(typeof i=="string"&&VU.test(i)){var l=VU.exec(i);if(l==null||e==null)o=void 0;else{var u=+l[1];o=e[0]-u}}else o=e?.[0];if(s==="auto")e!=null&&(a=Math.max(...e));else if(Ye(s))a=s;else if(typeof s=="function")try{e!=null&&(a=s(e?.[1]))}catch{}else if(typeof s=="string"&&BU.test(s)){var h=BU.exec(s);if(h==null||e==null)a=void 0;else{var d=+h[1];a=e[1]+d}}else a=e?.[1];var p=[o,a];if(ff(p))return e==null?p:r6(p,e,n)}}}var lm=1e9,_Ee={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},k$,kn=!0,wo="[DecimalError] ",ef=wo+"Invalid argument: ",A$=wo+"Exponent out of range: ",um=Math.floor,Ph=Math.pow,AEe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,_s,Mr=1e7,wn=7,U7=9007199254740991,Ow=um(U7/wn),Ue={};Ue.absoluteValue=Ue.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Ue.comparedTo=Ue.cmp=function(t){var e,n,r,i,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(r=s.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};Ue.decimalPlaces=Ue.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*wn;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Ue.dividedBy=Ue.div=function(t){return Ul(this,new this.constructor(t))};Ue.dividedToIntegerBy=Ue.idiv=function(t){var e=this,n=e.constructor;return pn(Ul(e,new n(t),0,1),n.precision)};Ue.equals=Ue.eq=function(t){return!this.cmp(t)};Ue.exponent=function(){return dr(this)};Ue.greaterThan=Ue.gt=function(t){return this.cmp(t)>0};Ue.greaterThanOrEqualTo=Ue.gte=function(t){return this.cmp(t)>=0};Ue.isInteger=Ue.isint=function(){return this.e>this.d.length-2};Ue.isNegative=Ue.isneg=function(){return this.s<0};Ue.isPositive=Ue.ispos=function(){return this.s>0};Ue.isZero=function(){return this.s===0};Ue.lessThan=Ue.lt=function(t){return this.cmp(t)<0};Ue.lessThanOrEqualTo=Ue.lte=function(t){return this.cmp(t)<1};Ue.logarithm=Ue.log=function(t){var e,n=this,r=n.constructor,i=r.precision,s=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(_s))throw Error(wo+"NaN");if(n.s<1)throw Error(wo+(n.s?"NaN":"-Infinity"));return n.eq(_s)?new r(0):(kn=!1,e=Ul(jy(n,s),jy(t,s),s),kn=!0,pn(e,i))};Ue.minus=Ue.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?G7(e,t):j7(e,(t.s=-t.s,t))};Ue.modulo=Ue.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(wo+"NaN");return n.s?(kn=!1,e=Ul(n,t,0,1).times(t),kn=!0,n.minus(e)):pn(new r(n),i)};Ue.naturalExponential=Ue.exp=function(){return W7(this)};Ue.naturalLogarithm=Ue.ln=function(){return jy(this)};Ue.negated=Ue.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Ue.plus=Ue.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?j7(e,t):G7(e,(t.s=-t.s,t))};Ue.precision=Ue.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(ef+t);if(e=dr(i)+1,r=i.d.length-1,n=r*wn+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Ue.squareRoot=Ue.sqrt=function(){var t,e,n,r,i,s,o,a=this,l=a.constructor;if(a.s<1){if(!a.s)return new l(0);throw Error(wo+"NaN")}for(t=dr(a),kn=!1,i=Math.sqrt(+a),i==0||i==1/0?(e=Pa(a.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=um((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(i.toString()),n=l.precision,i=o=n+3;;)if(s=r,r=s.plus(Ul(a,s,o+2)).times(.5),Pa(s.d).slice(0,o)===(e=Pa(r.d)).slice(0,o)){if(e=e.slice(o-3,o+1),i==o&&e=="4999"){if(pn(s,n+1,0),s.times(s).eq(a)){r=s;break}}else if(e!="9999")break;o+=4}return kn=!0,pn(r,n)};Ue.times=Ue.mul=function(t){var e,n,r,i,s,o,a,l,u,h=this,d=h.constructor,p=h.d,g=(t=new d(t)).d;if(!h.s||!t.s)return new d(0);for(t.s*=h.s,n=h.e+t.e,l=p.length,u=g.length,l<u&&(s=p,p=g,g=s,o=l,l=u,u=o),s=[],o=l+u,r=o;r--;)s.push(0);for(r=u;--r>=0;){for(e=0,i=l+r;i>r;)a=s[i]+g[r]*p[i-r-1]+e,s[i--]=a%Mr|0,e=a/Mr|0;s[i]=(s[i]+e)%Mr|0}for(;!s[--o];)s.pop();return e?++n:s.shift(),t.d=s,t.e=n,kn?pn(t,d.precision):t};Ue.toDecimalPlaces=Ue.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(nl(t,0,lm),e===void 0?e=r.rounding:nl(e,0,8),pn(n,t+dr(n)+1,e))};Ue.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=df(r,!0):(nl(t,0,lm),e===void 0?e=i.rounding:nl(e,0,8),r=pn(new i(r),t+1,e),n=df(r,!0,t+1)),n};Ue.toFixed=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?df(i):(nl(t,0,lm),e===void 0?e=s.rounding:nl(e,0,8),r=pn(new s(i),t+dr(i)+1,e),n=df(r.abs(),!1,t+dr(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Ue.toInteger=Ue.toint=function(){var t=this,e=t.constructor;return pn(new e(t),dr(t)+1,e.rounding)};Ue.toNumber=function(){return+this};Ue.toPower=Ue.pow=function(t){var e,n,r,i,s,o,a=this,l=a.constructor,u=12,h=+(t=new l(t));if(!t.s)return new l(_s);if(a=new l(a),!a.s){if(t.s<1)throw Error(wo+"Infinity");return a}if(a.eq(_s))return a;if(r=l.precision,t.eq(_s))return pn(a,r);if(e=t.e,n=t.d.length-1,o=e>=n,s=a.s,o){if((n=h<0?-h:h)<=U7){for(i=new l(_s),e=Math.ceil(r/wn+4),kn=!1;n%2&&(i=i.times(a),s6(i.d,e)),n=um(n/2),n!==0;)a=a.times(a),s6(a.d,e);return kn=!0,t.s<0?new l(_s).div(i):pn(i,r)}}else if(s<0)throw Error(wo+"NaN");return s=s<0&&t.d[Math.max(e,n)]&1?-1:1,a.s=1,kn=!1,i=t.times(jy(a,r+u)),kn=!0,i=W7(i),i.s=s,i};Ue.toPrecision=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?(n=dr(i),r=df(i,n<=s.toExpNeg||n>=s.toExpPos)):(nl(t,1,lm),e===void 0?e=s.rounding:nl(e,0,8),i=pn(new s(i),t,e),n=dr(i),r=df(i,t<=n||n<=s.toExpNeg,t)),r};Ue.toSignificantDigits=Ue.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(nl(t,1,lm),e===void 0?e=r.rounding:nl(e,0,8)),pn(new r(n),t,e)};Ue.toString=Ue.valueOf=Ue.val=Ue.toJSON=Ue[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=dr(t),n=t.constructor;return df(t,e<=n.toExpNeg||e>=n.toExpPos)};function j7(t,e){var n,r,i,s,o,a,l,u,h=t.constructor,d=h.precision;if(!t.s||!e.s)return e.s||(e=new h(t)),kn?pn(e,d):e;if(l=t.d,u=e.d,o=t.e,i=e.e,l=l.slice(),s=o-i,s){for(s<0?(r=l,s=-s,a=u.length):(r=u,i=o,a=l.length),o=Math.ceil(d/wn),a=o>a?o+1:a+1,s>a&&(s=a,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(a=l.length,s=u.length,a-s<0&&(s=a,r=u,u=l,l=r),n=0;s;)n=(l[--s]=l[s]+u[s]+n)/Mr|0,l[s]%=Mr;for(n&&(l.unshift(n),++i),a=l.length;l[--a]==0;)l.pop();return e.d=l,e.e=i,kn?pn(e,d):e}function nl(t,e,n){if(t!==~~t||t<e||t>n)throw Error(ef+t)}function Pa(t){var e,n,r,i=t.length-1,s="",o=t[0];if(i>0){for(s+=o,e=1;e<i;e++)r=t[e]+"",n=wn-r.length,n&&(s+=Qu(n)),s+=r;o=t[e],r=o+"",n=wn-r.length,n&&(s+=Qu(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var Ul=(function(){function t(r,i){var s,o=0,a=r.length;for(r=r.slice();a--;)s=r[a]*i+o,r[a]=s%Mr|0,o=s/Mr|0;return o&&r.unshift(o),r}function e(r,i,s,o){var a,l;if(s!=o)l=s>o?1:-1;else for(a=l=0;a<s;a++)if(r[a]!=i[a]){l=r[a]>i[a]?1:-1;break}return l}function n(r,i,s){for(var o=0;s--;)r[s]-=o,o=r[s]<i[s]?1:0,r[s]=o*Mr+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,o){var a,l,u,h,d,p,g,y,b,x,w,C,E,_,A,P,N,R,D=r.constructor,O=r.s==i.s?1:-1,k=r.d,F=i.d;if(!r.s)return new D(r);if(!i.s)throw Error(wo+"Division by zero");for(l=r.e-i.e,N=F.length,A=k.length,g=new D(O),y=g.d=[],u=0;F[u]==(k[u]||0);)++u;if(F[u]>(k[u]||0)&&--l,s==null?C=s=D.precision:o?C=s+(dr(r)-dr(i))+1:C=s,C<0)return new D(0);if(C=C/wn+2|0,u=0,N==1)for(h=0,F=F[0],C++;(u<A||h)&&C--;u++)E=h*Mr+(k[u]||0),y[u]=E/F|0,h=E%F|0;else{for(h=Mr/(F[0]+1)|0,h>1&&(F=t(F,h),k=t(k,h),N=F.length,A=k.length),_=N,b=k.slice(0,N),x=b.length;x<N;)b[x++]=0;R=F.slice(),R.unshift(0),P=F[0],F[1]>=Mr/2&&++P;do h=0,a=e(F,b,N,x),a<0?(w=b[0],N!=x&&(w=w*Mr+(b[1]||0)),h=w/P|0,h>1?(h>=Mr&&(h=Mr-1),d=t(F,h),p=d.length,x=b.length,a=e(d,b,p,x),a==1&&(h--,n(d,N<p?R:F,p))):(h==0&&(a=h=1),d=F.slice()),p=d.length,p<x&&d.unshift(0),n(b,d,x),a==-1&&(x=b.length,a=e(F,b,N,x),a<1&&(h++,n(b,N<x?R:F,x))),x=b.length):a===0&&(h++,b=[0]),y[u++]=h,a&&b[0]?b[x++]=k[_]||0:(b=[k[_]],x=1);while((_++<A||b[0]!==void 0)&&C--)}return y[0]||y.shift(),g.e=l,pn(g,o?s+dr(g)+1:s)}})();function W7(t,e){var n,r,i,s,o,a,l=0,u=0,h=t.constructor,d=h.precision;if(dr(t)>16)throw Error(A$+dr(t));if(!t.s)return new h(_s);for(kn=!1,a=d,o=new h(.03125);t.abs().gte(.1);)t=t.times(o),u+=5;for(r=Math.log(Ph(2,u))/Math.LN10*2+5|0,a+=r,n=i=s=new h(_s),h.precision=a;;){if(i=pn(i.times(t),a),n=n.times(++l),o=s.plus(Ul(i,n,a)),Pa(o.d).slice(0,a)===Pa(s.d).slice(0,a)){for(;u--;)s=pn(s.times(s),a);return h.precision=d,e==null?(kn=!0,pn(s,d)):s}s=o}}function dr(t){for(var e=t.e*wn,n=t.d[0];n>=10;n/=10)e++;return e}function QA(t,e,n){if(e>t.LN10.sd())throw kn=!0,n&&(t.precision=n),Error(wo+"LN10 precision limit exceeded");return pn(new t(t.LN10),e)}function Qu(t){for(var e="";t--;)e+="0";return e}function jy(t,e){var n,r,i,s,o,a,l,u,h,d=1,p=10,g=t,y=g.d,b=g.constructor,x=b.precision;if(g.s<1)throw Error(wo+(g.s?"NaN":"-Infinity"));if(g.eq(_s))return new b(0);if(e==null?(kn=!1,u=x):u=e,g.eq(10))return e==null&&(kn=!0),QA(b,u);if(u+=p,b.precision=u,n=Pa(y),r=n.charAt(0),s=dr(g),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)g=g.times(t),n=Pa(g.d),r=n.charAt(0),d++;s=dr(g),r>1?(g=new b("0."+n),s++):g=new b(r+"."+n.slice(1))}else return l=QA(b,u+2,x).times(s+""),g=jy(new b(r+"."+n.slice(1)),u-p).plus(l),b.precision=x,e==null?(kn=!0,pn(g,x)):g;for(a=o=g=Ul(g.minus(_s),g.plus(_s),u),h=pn(g.times(g),u),i=3;;){if(o=pn(o.times(h),u),l=a.plus(Ul(o,new b(i),u)),Pa(l.d).slice(0,u)===Pa(a.d).slice(0,u))return a=a.times(2),s!==0&&(a=a.plus(QA(b,u+2,x).times(s+""))),a=Ul(a,new b(d),u),b.precision=x,e==null?(kn=!0,pn(a,x)):a;a=l,i+=2}}function i6(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=um(n/wn),t.d=[],r=(n+1)%wn,n<0&&(r+=wn),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=wn;r<i;)t.d.push(+e.slice(r,r+=wn));e=e.slice(r),r=wn-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),kn&&(t.e>Ow||t.e<-Ow))throw Error(A$+n)}else t.s=0,t.e=0,t.d=[0];return t}function pn(t,e,n){var r,i,s,o,a,l,u,h,d=t.d;for(o=1,s=d[0];s>=10;s/=10)o++;if(r=e-o,r<0)r+=wn,i=e,u=d[h=0];else{if(h=Math.ceil((r+1)/wn),s=d.length,h>=s)return t;for(u=s=d[h],o=1;s>=10;s/=10)o++;r%=wn,i=r-wn+o}if(n!==void 0&&(s=Ph(10,o-i-1),a=u/s%10|0,l=e<0||d[h+1]!==void 0||u%s,l=n<4?(a||l)&&(n==0||n==(t.s<0?3:2)):a>5||a==5&&(n==4||l||n==6&&(r>0?i>0?u/Ph(10,o-i):0:d[h-1])%10&1||n==(t.s<0?8:7))),e<1||!d[0])return l?(s=dr(t),d.length=1,e=e-s-1,d[0]=Ph(10,(wn-e%wn)%wn),t.e=um(-e/wn)||0):(d.length=1,d[0]=t.e=t.s=0),t;if(r==0?(d.length=h,s=1,h--):(d.length=h+1,s=Ph(10,wn-r),d[h]=i>0?(u/Ph(10,o-i)%Ph(10,i)|0)*s:0),l)for(;;)if(h==0){(d[0]+=s)==Mr&&(d[0]=1,++t.e);break}else{if(d[h]+=s,d[h]!=Mr)break;d[h--]=0,s=1}for(r=d.length;d[--r]===0;)d.pop();if(kn&&(t.e>Ow||t.e<-Ow))throw Error(A$+dr(t));return t}function G7(t,e){var n,r,i,s,o,a,l,u,h,d,p=t.constructor,g=p.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new p(t),kn?pn(e,g):e;if(l=t.d,d=e.d,r=e.e,u=t.e,l=l.slice(),o=u-r,o){for(h=o<0,h?(n=l,o=-o,a=d.length):(n=d,r=u,a=l.length),i=Math.max(Math.ceil(g/wn),a)+2,o>i&&(o=i,n.length=1),n.reverse(),i=o;i--;)n.push(0);n.reverse()}else{for(i=l.length,a=d.length,h=i<a,h&&(a=i),i=0;i<a;i++)if(l[i]!=d[i]){h=l[i]<d[i];break}o=0}for(h&&(n=l,l=d,d=n,e.s=-e.s),a=l.length,i=d.length-a;i>0;--i)l[a++]=0;for(i=d.length;i>o;){if(l[--i]<d[i]){for(s=i;s&&l[--s]===0;)l[s]=Mr-1;--l[s],l[i]+=Mr}l[i]-=d[i]}for(;l[--a]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,kn?pn(e,g):e):new p(0)}function df(t,e,n){var r,i=dr(t),s=Pa(t.d),o=s.length;return e?(n&&(r=n-o)>0?s=s.charAt(0)+"."+s.slice(1)+Qu(r):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+Qu(-i-1)+s,n&&(r=n-o)>0&&(s+=Qu(r))):i>=o?(s+=Qu(i+1-o),n&&(r=n-i-1)>0&&(s=s+"."+Qu(r))):((r=i+1)<o&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(s+="."),s+=Qu(r))),t.s<0?"-"+s:s}function s6(t,e){if(t.length>e)return t.length=e,!0}function H7(t){var e,n,r;function i(s){var o=this;if(!(o instanceof i))return new i(s);if(o.constructor=i,s instanceof i){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(ef+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return i6(o,s.toString())}else if(typeof s!="string")throw Error(ef+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,AEe.test(s))i6(o,s);else throw Error(ef+s)}if(i.prototype=Ue,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=H7,i.config=i.set=kEe,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function kEe(t){if(!t||typeof t!="object")throw Error(wo+"Object expected");var e,n,r,i=["precision",1,lm,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(um(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(ef+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(ef+n+": "+r);return this}var k$=H7(_Ee);_s=new k$(1);const en=k$;var NEe=t=>t,q7={},K7=t=>t===q7,o6=t=>function e(){return arguments.length===0||arguments.length===1&&K7(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},X7=(t,e)=>t===1?e:o6(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=r.filter(o=>o!==q7).length;return s>=t?e(...r):X7(t-s,o6(function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];var u=r.map(h=>K7(h)?a.shift():h);return e(...u,...a)}))}),vT=t=>X7(t.length,t),rN=(t,e)=>{for(var n=[],r=t;r<e;++r)n[r-t]=r;return n},REe=vT((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(n=>e[n]).map(t)),DEe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return NEe;var i=n.reverse(),s=i[0],o=i.slice(1);return function(){return o.reduce((a,l)=>l(a),s(...arguments))}},iN=t=>Array.isArray(t)?t.reverse():t.split("").reverse().join(""),Y7=t=>{var e=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return e&&i.every((o,a)=>{var l;return o===((l=e)===null||l===void 0?void 0:l[a])})||(e=i,n=t(...i)),n}};function Q7(t){var e;return t===0?e=1:e=Math.floor(new en(t).abs().log(10).toNumber())+1,e}function Z7(t,e,n){for(var r=new en(t),i=0,s=[];r.lt(e)&&i<1e5;)s.push(r.toNumber()),r=r.add(n),i++;return s}vT((t,e,n)=>{var r=+t,i=+e;return r+n*(i-r)});vT((t,e,n)=>{var r=e-+t;return r=r||1/0,(n-t)/r});vT((t,e,n)=>{var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});var J7=t=>{var[e,n]=t,[r,i]=[e,n];return e>n&&([r,i]=[n,e]),[r,i]},eX=(t,e,n)=>{if(t.lte(0))return new en(0);var r=Q7(t.toNumber()),i=new en(10).pow(r),s=t.div(i),o=r!==1?.05:.1,a=new en(Math.ceil(s.div(o).toNumber())).add(n).mul(o),l=a.mul(i);return e?new en(l.toNumber()):new en(Math.ceil(l.toNumber()))},$Ee=(t,e,n)=>{var r=new en(1),i=new en(t);if(!i.isint()&&n){var s=Math.abs(t);s<1?(r=new en(10).pow(Q7(t)-1),i=new en(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new en(Math.floor(t)))}else t===0?i=new en(Math.floor((e-1)/2)):n||(i=new en(Math.floor(t)));var o=Math.floor((e-1)/2),a=DEe(REe(l=>i.add(new en(l-o).mul(r)).toNumber()),rN);return a(0,e)},tX=function(e,n,r,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new en(0),tickMin:new en(0),tickMax:new en(0)};var o=eX(new en(n).sub(e).div(r-1),i,s),a;e<=0&&n>=0?a=new en(0):(a=new en(e).add(n).div(2),a=a.sub(new en(a).mod(o)));var l=Math.ceil(a.sub(e).div(o).toNumber()),u=Math.ceil(new en(n).sub(a).div(o).toNumber()),h=l+u+1;return h>r?tX(e,n,r,i,s+1):(h<r&&(u=n>0?u+(r-h):u,l=n>0?l:l+(r-h)),{step:o,tickMin:a.sub(new en(l).mul(o)),tickMax:a.add(new en(u).mul(o))})};function OEe(t){var[e,n]=t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(r,2),[o,a]=J7([e,n]);if(o===-1/0||a===1/0){var l=a===1/0?[o,...rN(0,r-1).map(()=>1/0)]:[...rN(0,r-1).map(()=>-1/0),a];return e>n?iN(l):l}if(o===a)return $Ee(o,r,i);var{step:u,tickMin:h,tickMax:d}=tX(o,a,s,i,0),p=Z7(h,d.add(new en(.1).mul(u)),u);return e>n?iN(p):p}function PEe(t,e){var[n,r]=t,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,o]=J7([n,r]);if(s===-1/0||o===1/0)return[n,r];if(s===o)return[s];var a=Math.max(e,2),l=eX(new en(o).sub(s).div(a-1),i,0),u=[...Z7(new en(s),new en(o),l),o];return i===!1&&(u=u.map(h=>Math.round(h))),n>r?iN(u):u}var MEe=Y7(OEe),LEe=Y7(PEe),nX=t=>t.rootProps.maxBarSize,FEe=t=>t.rootProps.barGap,rX=t=>t.rootProps.barCategoryGap,VEe=t=>t.rootProps.barSize,bT=t=>t.rootProps.stackOffset,N$=t=>t.options.chartName,R$=t=>t.rootProps.syncId,iX=t=>t.rootProps.syncMethod,D$=t=>t.options.eventEmitter,Dl={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Is={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},xT=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},BEe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Dl.angleAxisId,includeHidden:!1,name:void 0,reversed:Dl.reversed,scale:Dl.scale,tick:Dl.tick,tickCount:void 0,ticks:void 0,type:Dl.type,unit:void 0},zEe={allowDataOverflow:Is.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Is.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Is.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Is.scale,tick:Is.tick,tickCount:Is.tickCount,ticks:void 0,type:Is.type,unit:void 0},UEe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Dl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Dl.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Dl.scale,tick:Dl.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},jEe={allowDataOverflow:Is.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Is.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Is.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Is.scale,tick:Is.tick,tickCount:Is.tickCount,ticks:void 0,type:"category",unit:void 0},$$=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?UEe:BEe,O$=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?jEe:zEe,wT=t=>t.polarOptions,P$=Te([ou,au,Br],g1e),sX=Te([wT,P$],(t,e)=>{if(t!=null)return ta(t.innerRadius,e,0)}),oX=Te([wT,P$],(t,e)=>{if(t!=null)return ta(t.outerRadius,e,e*.8)}),WEe=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},aX=Te([wT],WEe);Te([$$,aX],xT);var lX=Te([P$,sX,oX],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});Te([O$,lX],xT);var uX=Te([nn,wT,sX,oX,ou,au],(t,e,n,r,i,s)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:o,cy:a,startAngle:l,endAngle:u}=e;return{cx:ta(o,i,i/2),cy:ta(a,s,s/2),innerRadius:n,outerRadius:r,startAngle:l,endAngle:u,clockWise:!1}}}),Ar=(t,e)=>e,ST=(t,e,n)=>n;function M$(t){return t?.id}var kr=t=>{var e=nn(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},cm=t=>t.tooltip.settings.axisId,Nr=t=>{var e=kr(t),n=cm(t);return Iv(t,e,n)},cX=Te([Nr],t=>t?.dataKey);function hX(t,e,n){var{chartData:r=[]}=e,{allowDuplicatedCategory:i,dataKey:s}=n,o=new Map;return t.forEach(a=>{var l,u=(l=a.data)!==null&&l!==void 0?l:r;if(!(u==null||u.length===0)){var h=M$(a);u.forEach((d,p)=>{var g=s==null||i?p:String(zi(d,s,null)),y=zi(d,a.dataKey,0),b;o.has(g)?b=o.get(g):b={},Object.assign(b,{[h]:y}),o.set(g,b)})}}),Array.from(o.values())}function TT(t){return t.stackId!=null&&t.dataKey!=null}var CT=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function ET(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function a6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Pw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?a6(Object(n),!0).forEach(function(r){GEe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function GEe(t,e,n){return(e=HEe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function HEe(t){var e=qEe(t,"string");return typeof e=="symbol"?e:e+""}function qEe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var sN=[0,"auto"],Cs={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},fX=(t,e)=>t.cartesianAxis.xAxis[e],uu=(t,e)=>{var n=fX(t,e);return n??Cs},Es={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:sN,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:wv},dX=(t,e)=>t.cartesianAxis.yAxis[e],cu=(t,e)=>{var n=dX(t,e);return n??Es},KEe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},L$=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??KEe},Gi=(t,e,n)=>{switch(e){case"xAxis":return uu(t,n);case"yAxis":return cu(t,n);case"zAxis":return L$(t,n);case"angleAxis":return $$(t,n);case"radiusAxis":return O$(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},XEe=(t,e,n)=>{switch(e){case"xAxis":return uu(t,n);case"yAxis":return cu(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Iv=(t,e,n)=>{switch(e){case"xAxis":return uu(t,n);case"yAxis":return cu(t,n);case"angleAxis":return $$(t,n);case"radiusAxis":return O$(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},pX=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function mX(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var F$=t=>t.graphicalItems.cartesianItems,YEe=Te([Ar,ST],mX),gX=(t,e,n)=>t.filter(n).filter(r=>e?.includeHidden===!0?!0:!r.hide),_v=Te([F$,Gi,YEe],gX,{memoizeOptions:{resultEqualityCheck:ET}}),yX=Te([_v],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(TT)),vX=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),QEe=Te([_v],vX),bX=t=>t.map(e=>e.data).filter(Boolean).flat(1),ZEe=Te([_v],bX,{memoizeOptions:{resultEqualityCheck:ET}}),xX=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=e;return t.length>0?t:n.slice(r,i+1)},V$=Te([ZEe,_$],xX),wX=(t,e,n)=>e?.dataKey!=null?t.map(r=>({value:zi(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(i=>({value:zi(i,r)}))):t.map(r=>({value:r})),IT=Te([V$,Gi,_v],wX);function SX(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function C1(t){if(tl(t)||t instanceof Date){var e=Number(t);if(_i(e))return e}}function l6(t){if(Array.isArray(t)){var e=[C1(t[0]),C1(t[1])];return ff(e)?e:void 0}var n=C1(t);if(n!=null)return[n,n]}function hm(t){return t.map(C1).filter(pSe)}function JEe(t,e,n){return!n||typeof e!="number"||bo(e)?[]:n.length?hm(n.flatMap(r=>{var i=zi(t,r.dataKey),s,o;if(Array.isArray(i)?[s,o]=i:s=o=i,!(!_i(s)||!_i(o)))return[e-s,e+o]})):[]}var eIe=Te([yX,_$,Nr],hX),TX=(t,e,n)=>{var r={},i=e.reduce((s,o)=>(o.stackId==null||(s[o.stackId]==null&&(s[o.stackId]=[]),s[o.stackId].push(o)),s),r);return Object.fromEntries(Object.entries(i).map(s=>{var[o,a]=s,l=a.map(M$);return[o,{stackedData:D1e(t,l,n),graphicalItems:a}]}))},oN=Te([eIe,yX,bT],TX),CX=(t,e,n,r)=>{var{dataStartIndex:i,dataEndIndex:s}=e;if(r==null&&n!=="zAxis"){var o=L1e(t,i,s);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},tIe=Te([Gi],t=>t.allowDataOverflow),B$=t=>{var e;if(t==null||!("domain"in t))return sN;if(t.domain!=null)return t.domain;if(t.ticks!=null){if(t.type==="number"){var n=hm(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t?.domain)!==null&&e!==void 0?e:sN},EX=Te([Gi],B$),IX=Te([EX,tIe],z7),nIe=Te([oN,zc,Ar,IX],CX,{memoizeOptions:{resultEqualityCheck:CT}}),z$=t=>t.errorBars,rIe=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>SX(n,r)),Mw=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var s=i.flat(),o=Math.min(...s),a=Math.max(...s);return[o,a]}},_X=(t,e,n,r,i)=>{var s,o;if(n.length>0&&t.forEach(a=>{n.forEach(l=>{var u,h,d=(u=r[l.id])===null||u===void 0?void 0:u.filter(w=>SX(i,w)),p=zi(a,(h=e.dataKey)!==null&&h!==void 0?h:l.dataKey),g=JEe(a,p,d);if(g.length>=2){var y=Math.min(...g),b=Math.max(...g);(s==null||y<s)&&(s=y),(o==null||b>o)&&(o=b)}var x=l6(p);x!=null&&(s=s==null?x[0]:Math.min(s,x[0]),o=o==null?x[1]:Math.max(o,x[1]))})}),e?.dataKey!=null&&t.forEach(a=>{var l=l6(zi(a,e.dataKey));l!=null&&(s=s==null?l[0]:Math.min(s,l[0]),o=o==null?l[1]:Math.max(o,l[1]))}),_i(s)&&_i(o))return[s,o]},iIe=Te([V$,Gi,QEe,z$,Ar],_X,{memoizeOptions:{resultEqualityCheck:CT}});function sIe(t){var{value:e}=t;if(tl(e)||e instanceof Date)return e}var oIe=(t,e,n)=>{var r=t.map(sIe).filter(i=>i!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&J8(r))?o7(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},AX=t=>t.referenceElements.dots,fm=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),aIe=Te([AX,Ar,ST],fm),kX=t=>t.referenceElements.areas,lIe=Te([kX,Ar,ST],fm),NX=t=>t.referenceElements.lines,uIe=Te([NX,Ar,ST],fm),RX=(t,e)=>{var n=hm(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},cIe=Te(aIe,Ar,RX),DX=(t,e)=>{var n=hm(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},hIe=Te([lIe,Ar],DX),$X=(t,e)=>{var n=hm(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},fIe=Te(uIe,Ar,$X),dIe=Te(cIe,fIe,hIe,(t,e,n)=>Mw(t,n,e)),OX=(t,e,n,r,i,s,o,a)=>{if(n!=null)return n;var l=o==="vertical"&&a==="xAxis"||o==="horizontal"&&a==="yAxis",u=l?Mw(r,s,i):Mw(s,i);return IEe(e,u,t.allowDataOverflow)},pIe=Te([Gi,EX,IX,nIe,iIe,dIe,nn,Ar],OX,{memoizeOptions:{resultEqualityCheck:CT}}),mIe=[0,1],PX=(t,e,n,r,i,s,o)=>{if(!((t==null||n==null||n.length===0)&&o===void 0)){var{dataKey:a,type:l}=t,u=Lf(e,s);return u&&a==null?o7(0,n.length):l==="category"?oIe(r,t,u):i==="expand"?mIe:o}},U$=Te([Gi,nn,V$,IT,bT,Ar,pIe],PX),MX=(t,e,n,r,i)=>{if(t!=null){var{scale:s,type:o}=t;if(s==="auto")return e==="radial"&&i==="radiusAxis"?"band":e==="radial"&&i==="angleAxis"?"linear":o==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":o==="category"?"band":"linear";if(typeof s=="string"){var a="scale".concat(vv(s));return a in Qg?a:"point"}}},Av=Te([Gi,nn,pX,N$,Ar],MX);function gIe(t){if(t!=null){if(t in Qg)return Qg[t]();var e="scale".concat(vv(t));if(e in Qg)return Qg[e]()}}function j$(t,e,n,r){if(!(n==null||r==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(r);var i=gIe(e);if(i!=null){var s=i.domain(n).range(r);return _1e(s),s}}}var LX=(t,e,n)=>{var r=B$(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&ff(t))return MEe(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&ff(t))return LEe(t,e.tickCount,e.allowDecimals)}},W$=Te([U$,Iv,Av],LX),FX=(t,e,n,r)=>{if(r!=="angleAxis"&&t?.type==="number"&&ff(e)&&Array.isArray(n)&&n.length>0){var i=e[0],s=n[0],o=e[1],a=n[n.length-1];return[Math.min(i,s),Math.max(o,a)]}return e},yIe=Te([Gi,U$,W$,Ar],FX),vIe=Te(IT,Gi,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(hm(t.map(a=>a.value))).sort((a,l)=>a-l);if(r.length<2)return 1/0;var i=r[r.length-1]-r[0];if(i===0)return 1/0;for(var s=0;s<r.length-1;s++){var o=r[s+1]-r[s];n=Math.min(n,o)}return n/i}}),VX=Te(vIe,nn,rX,Br,(t,e,n,r)=>r,(t,e,n,r,i)=>{if(!_i(t))return 0;var s=e==="vertical"?r.height:r.width;if(i==="gap")return t*s/2;if(i==="no-gap"){var o=ta(n,t*s),a=t*s/2;return a-o-(a-o)/s*o}return 0}),bIe=(t,e)=>{var n=uu(t,e);return n==null||typeof n.padding!="string"?0:VX(t,"xAxis",e,n.padding)},xIe=(t,e)=>{var n=cu(t,e);return n==null||typeof n.padding!="string"?0:VX(t,"yAxis",e,n.padding)},wIe=Te(uu,bIe,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((n=i.left)!==null&&n!==void 0?n:0)+e,right:((r=i.right)!==null&&r!==void 0?r:0)+e}}),SIe=Te(cu,xIe,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((n=i.top)!==null&&n!==void 0?n:0)+e,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+e}}),TIe=Te([Br,wIe,uT,lT,(t,e,n)=>n],(t,e,n,r,i)=>{var{padding:s}=r;return i?[s.left,n.width-s.right]:[t.left+e.left,t.left+t.width-e.right]}),CIe=Te([Br,nn,SIe,uT,lT,(t,e,n)=>n],(t,e,n,r,i,s)=>{var{padding:o}=i;return s?[r.height-o.bottom,o.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),kv=(t,e,n,r)=>{var i;switch(e){case"xAxis":return TIe(t,n,r);case"yAxis":return CIe(t,n,r);case"zAxis":return(i=L$(t,n))===null||i===void 0?void 0:i.range;case"angleAxis":return aX(t);case"radiusAxis":return lX(t,n);default:return}},BX=Te([Gi,kv],xT),dm=Te([Gi,Av,yIe,BX],j$);Te([_v,z$,Ar],rIe);function zX(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var _T=(t,e)=>e,AT=(t,e,n)=>n,EIe=Te(oT,_T,AT,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(zX)),IIe=Te(aT,_T,AT,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(zX)),UX=(t,e)=>({width:t.width,height:e.height}),_Ie=(t,e)=>{var n=typeof e.width=="number"?e.width:wv;return{width:n,height:t.height}},jX=Te(Br,uu,UX),AIe=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},kIe=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},NIe=Te(au,Br,EIe,_T,AT,(t,e,n,r,i)=>{var s={},o;return n.forEach(a=>{var l=UX(e,a);o==null&&(o=AIe(e,r,t));var u=r==="top"&&!i||r==="bottom"&&i;s[a.id]=o-Number(u)*l.height,o+=(u?-1:1)*l.height}),s}),RIe=Te(ou,Br,IIe,_T,AT,(t,e,n,r,i)=>{var s={},o;return n.forEach(a=>{var l=_Ie(e,a);o==null&&(o=kIe(e,r,t));var u=r==="left"&&!i||r==="right"&&i;s[a.id]=o-Number(u)*l.width,o+=(u?-1:1)*l.width}),s}),DIe=(t,e)=>{var n=uu(t,e);if(n!=null)return NIe(t,n.orientation,n.mirror)},$Ie=Te([Br,uu,DIe,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n?.[r];return i==null?{x:t.left,y:0}:{x:t.left,y:i}}}),OIe=(t,e)=>{var n=cu(t,e);if(n!=null)return RIe(t,n.orientation,n.mirror)},PIe=Te([Br,cu,OIe,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n?.[r];return i==null?{x:0,y:t.top}:{x:i,y:t.top}}}),WX=Te(Br,cu,(t,e)=>{var n=typeof e.width=="number"?e.width:wv;return{width:n,height:t.height}}),u6=(t,e,n)=>{switch(e){case"xAxis":return jX(t,n).width;case"yAxis":return WX(t,n).height;default:return}},GX=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:s,dataKey:o}=n,a=Lf(t,r),l=e.map(u=>u.value);if(o&&a&&s==="category"&&i&&J8(l))return l}},G$=Te([nn,IT,Gi,Ar],GX),HX=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:s}=n,o=Lf(t,r);if(o&&(i==="number"||s!=="auto"))return e.map(a=>a.value)}},H$=Te([nn,IT,Iv,Ar],HX),c6=Te([nn,XEe,Av,dm,G$,H$,kv,W$,Ar],(t,e,n,r,i,s,o,a,l)=>{if(e==null)return null;var u=Lf(t,l);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:l,categoricalDomain:s,duplicateDomain:i,isCategorical:u,niceTicks:a,range:o,realScaleType:n,scale:r}}),MIe=(t,e,n,r,i,s,o,a,l)=>{if(!(e==null||r==null)){var u=Lf(t,l),{type:h,ticks:d,tickCount:p}=e,g=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,y=h==="category"&&r.bandwidth?r.bandwidth()/g:0;y=l==="angleAxis"&&s!=null&&s.length>=2?ls(s[0]-s[1])*2*y:y;var b=d||i;if(b){var x=b.map((w,C)=>{var E=o?o.indexOf(w):w;return{index:C,coordinate:r(E)+y,value:w,offset:y}});return x.filter(w=>!bo(w.coordinate))}return u&&a?a.map((w,C)=>({coordinate:r(w)+y,value:w,index:C,offset:y})):r.ticks?r.ticks(p).map(w=>({coordinate:r(w)+y,value:w,offset:y})):r.domain().map((w,C)=>({coordinate:r(w)+y,value:o?o[w]:w,index:C,offset:y}))}},qX=Te([nn,Iv,Av,dm,W$,kv,G$,H$,Ar],MIe),LIe=(t,e,n,r,i,s,o)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var a=Lf(t,o),{tickCount:l}=e,u=0;return u=o==="angleAxis"&&r?.length>=2?ls(r[0]-r[1])*2*u:u,a&&s?s.map((h,d)=>({coordinate:n(h)+u,value:h,index:d,offset:u})):n.ticks?n.ticks(l).map(h=>({coordinate:n(h)+u,value:h,offset:u})):n.domain().map((h,d)=>({coordinate:n(h)+u,value:i?i[h]:h,index:d,offset:u}))}},Op=Te([nn,Iv,dm,kv,G$,H$,Ar],LIe),Pp=Te(Gi,dm,(t,e)=>{if(!(t==null||e==null))return Pw(Pw({},t),{},{scale:e})}),FIe=Te([Gi,Av,U$,BX],j$);Te((t,e,n)=>L$(t,n),FIe,(t,e)=>{if(!(t==null||e==null))return Pw(Pw({},t),{},{scale:e})});var VIe=Te([nn,oT,aT],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),KX=t=>t.options.defaultTooltipEventType,XX=t=>t.options.validateTooltipEventTypes;function YX(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function q$(t,e){var n=KX(t),r=XX(t);return YX(e,n,r)}function BIe(t){return Je(e=>q$(e,t))}var QX=(t,e)=>{var n,r=Number(e);if(!(bo(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},zIe=t=>t.tooltip.settings,ic={active:!1,index:null,dataKey:void 0,coordinate:void 0},UIe={itemInteraction:{click:ic,hover:ic},axisInteraction:{click:ic,hover:ic},keyboardInteraction:ic,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},ZX=Ps({name:"tooltip",initialState:UIe,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:Oi()},removeTooltipEntrySettings:{reducer(t,e){var n=zl(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:Oi()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate,t.keyboardInteraction.dataKey=e.payload.activeDataKey}}}),{addTooltipEntrySettings:jIe,removeTooltipEntrySettings:WIe,setTooltipSettingsState:GIe,setActiveMouseOverItemIndex:JX,mouseLeaveItem:HIe,mouseLeaveChart:eY,setActiveClickItemIndex:qIe,setMouseOverAxisIndex:tY,setMouseClickAxisIndex:KIe,setSyncInteraction:aN,setKeyboardInteraction:lN}=ZX.actions,XIe=ZX.reducer;function h6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?h6(Object(n),!0).forEach(function(r){YIe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function YIe(t,e,n){return(e=QIe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function QIe(t){var e=ZIe(t,"string");return typeof e=="symbol"?e:e+""}function ZIe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function JIe(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function e_e(t){return t.index!=null}var nY=(t,e,n,r)=>{if(e==null)return ic;var i=JIe(t,e,n);if(i==null)return ic;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var s=t.settings.active===!0;if(e_e(i)){if(s)return qx(qx({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r};return qx(qx({},ic),{},{coordinate:i.coordinate})},K$=(t,e)=>{var n=t?.index;if(n==null)return null;var r=Number(n);if(!_i(r))return n;var i=0,s=1/0;return e.length>0&&(s=e.length-1),String(Math.max(i,Math.min(r,s)))},rY=(t,e,n,r,i,s,o,a)=>{if(!(s==null||a==null)){var l=o[0],u=l==null?void 0:a(l.positions,s);if(u!=null)return u;var h=i?.[Number(s)];if(h)switch(n){case"horizontal":return{x:h.coordinate,y:(r.top+e)/2};default:return{x:(r.left+t)/2,y:h.coordinate}}}},iY=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;return n==="hover"?i=t.itemInteraction.hover.dataKey:i=t.itemInteraction.click.dataKey,i==null&&r!=null?[t.tooltipItemPayloads[0]]:t.tooltipItemPayloads.filter(s=>{var o;return((o=s.settings)===null||o===void 0?void 0:o.dataKey)===i})},Nv=t=>t.options.tooltipPayloadSearcher,pm=t=>t.tooltip;function f6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function d6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?f6(Object(n),!0).forEach(function(r){t_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function t_e(t,e,n){return(e=n_e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function n_e(t){var e=r_e(t,"string");return typeof e=="symbol"?e:e+""}function r_e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function i_e(t,e){return t??e}var sY=(t,e,n,r,i,s,o)=>{if(!(e==null||s==null)){var{chartData:a,computedData:l,dataStartIndex:u,dataEndIndex:h}=n,d=[];return t.reduce((p,g)=>{var y,{dataDefinedOnItem:b,settings:x}=g,w=i_e(b,a),C=Array.isArray(w)?zK(w,u,h):w,E=(y=x?.dataKey)!==null&&y!==void 0?y:r,_=x?.nameKey,A;if(r&&Array.isArray(C)&&!Array.isArray(C[0])&&o==="axis"?A=abe(C,r,i):A=s(C,e,l,_),Array.isArray(A))A.forEach(N=>{var R=d6(d6({},x),{},{name:N.name,unit:N.unit,color:void 0,fill:void 0});p.push(zU({tooltipEntrySettings:R,dataKey:N.dataKey,payload:N.payload,value:zi(N.payload,N.dataKey),name:N.name}))});else{var P;p.push(zU({tooltipEntrySettings:x,dataKey:E,payload:A,value:zi(A,E),name:(P=zi(A,_))!==null&&P!==void 0?P:x?.name}))}return p},d)}},X$=Te([Nr,nn,pX,N$,kr],MX),s_e=Te([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),o_e=Te([kr,cm],mX),Rv=Te([s_e,Nr,o_e],gX,{memoizeOptions:{resultEqualityCheck:ET}}),a_e=Te([Rv],t=>t.filter(TT)),l_e=Te([Rv],bX,{memoizeOptions:{resultEqualityCheck:ET}}),mm=Te([l_e,zc],xX),u_e=Te([a_e,zc,Nr],hX),Y$=Te([mm,Nr,Rv],wX),oY=Te([Nr],B$),c_e=Te([Nr],t=>t.allowDataOverflow),aY=Te([oY,c_e],z7),h_e=Te([Rv],t=>t.filter(TT)),f_e=Te([u_e,h_e,bT],TX),d_e=Te([f_e,zc,kr,aY],CX),p_e=Te([Rv],vX),m_e=Te([mm,Nr,p_e,z$,kr],_X,{memoizeOptions:{resultEqualityCheck:CT}}),g_e=Te([AX,kr,cm],fm),y_e=Te([g_e,kr],RX),v_e=Te([kX,kr,cm],fm),b_e=Te([v_e,kr],DX),x_e=Te([NX,kr,cm],fm),w_e=Te([x_e,kr],$X),S_e=Te([y_e,w_e,b_e],Mw),T_e=Te([Nr,oY,aY,d_e,m_e,S_e,nn,kr],OX),lY=Te([Nr,nn,mm,Y$,bT,kr,T_e],PX),C_e=Te([lY,Nr,X$],LX),E_e=Te([Nr,lY,C_e,kr],FX),uY=t=>{var e=kr(t),n=cm(t),r=!1;return kv(t,e,n,r)},cY=Te([Nr,uY],xT),hY=Te([Nr,X$,E_e,cY],j$),I_e=Te([nn,Y$,Nr,kr],GX),__e=Te([nn,Y$,Nr,kr],HX),A_e=(t,e,n,r,i,s,o,a)=>{if(e){var{type:l}=e,u=Lf(t,a);if(r){var h=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,d=l==="category"&&r.bandwidth?r.bandwidth()/h:0;return d=a==="angleAxis"&&i!=null&&i?.length>=2?ls(i[0]-i[1])*2*d:d,u&&o?o.map((p,g)=>({coordinate:r(p)+d,value:p,index:g,offset:d})):r.domain().map((p,g)=>({coordinate:r(p)+d,value:s?s[p]:p,index:g,offset:d}))}}},hu=Te([nn,Nr,X$,hY,uY,I_e,__e,kr],A_e),Q$=Te([KX,XX,zIe],(t,e,n)=>YX(n.shared,t,e)),fY=t=>t.tooltip.settings.trigger,Z$=t=>t.tooltip.settings.defaultIndex,kT=Te([pm,Q$,fY,Z$],nY),Mp=Te([kT,mm],K$),dY=Te([hu,Mp],QX),pY=Te([kT],t=>{if(t)return t.dataKey}),mY=Te([pm,Q$,fY,Z$],iY),k_e=Te([ou,au,nn,Br,hu,Z$,mY,Nv],rY),N_e=Te([kT,k_e],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),R_e=Te([kT],t=>t.active),D_e=Te([mY,Mp,zc,cX,dY,Nv,Q$],sY);Te([D_e],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function p6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function m6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?p6(Object(n),!0).forEach(function(r){$_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $_e(t,e,n){return(e=O_e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function O_e(t){var e=P_e(t,"string");return typeof e=="symbol"?e:e+""}function P_e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var M_e=()=>Je(Nr),L_e=()=>{var t=M_e(),e=Je(hu),n=Je(hY);return XD(m6(m6({},t),{},{scale:n}),e)},F_e=()=>Je(N$),J$=(t,e)=>e,gY=(t,e,n)=>n,eO=(t,e,n,r)=>r,V_e=Te(hu,t=>eT(t,e=>e.coordinate)),tO=Te([pm,J$,gY,eO],nY),yY=Te([tO,mm],K$),B_e=(t,e,n)=>{if(e!=null){var r=pm(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},vY=Te([pm,J$,gY,eO],iY),Lw=Te([ou,au,nn,Br,hu,eO,vY,Nv],rY),z_e=Te([tO,Lw],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),bY=Te(hu,yY,QX),U_e=Te([vY,yY,zc,cX,bY,Nv,J$],sY),j_e=Te([tO],t=>({isActive:t.active,activeIndex:t.index})),W_e=(t,e,n,r,i,s,o,a)=>{if(!(!t||!e||!r||!i||!s)){var l=F1e(t.chartX,t.chartY,e,n,a);if(l){var u=B1e(l,e),h=E1e(u,o,s,r,i),d=V1e(e,s,h,l);return{activeIndex:String(h),activeCoordinate:d}}}};function uN(){return uN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uN.apply(null,arguments)}function g6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Kx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?g6(Object(n),!0).forEach(function(r){G_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function G_e(t,e,n){return(e=H_e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function H_e(t){var e=q_e(t,"string");return typeof e=="symbol"?e:e+""}function q_e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function K_e(t){var{coordinate:e,payload:n,index:r,offset:i,tooltipAxisBandSize:s,layout:o,cursor:a,tooltipEventType:l,chartName:u}=t,h=e,d=n,p=r;if(!a||!h||u!=="ScatterChart"&&l!=="axis")return null;var g,y;if(u==="ScatterChart")g=h,y=aSe;else if(u==="BarChart")g=lSe(o,h,i,s),y=n7;else if(o==="radial"){var{cx:b,cy:x,radius:w,startAngle:C,endAngle:E}=r7(h);g={cx:b,cy:x,startAngle:C,endAngle:E,innerRadius:w,outerRadius:w},y=s7}else g={points:GSe(o,h,i)},y=Zwe;var _=typeof a=="object"&&"className"in a?a.className:void 0,A=Kx(Kx(Kx(Kx({stroke:"#ccc",pointerEvents:"none"},i),g),ND(a)),{},{payload:d,payloadIndex:p,className:vn("recharts-tooltip-cursor",_)});return B.isValidElement(a)?B.cloneElement(a,A):B.createElement(y,A)}function X_e(t){var e=L_e(),n=XK(),r=e$(),i=F_e();return B.createElement(K_e,uN({},t,{coordinate:t.coordinate,index:t.index,payload:t.payload,offset:n,layout:r,tooltipAxisBandSize:e,chartName:i}))}var xY=B.createContext(null),Y_e=()=>B.useContext(xY),ZA={exports:{}},y6;function Q_e(){return y6||(y6=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,u,h){this.fn=l,this.context=u,this.once=h||!1}function s(l,u,h,d,p){if(typeof h!="function")throw new TypeError("The listener must be a function");var g=new i(h,d||l,p),y=n?n+u:u;return l._events[y]?l._events[y].fn?l._events[y]=[l._events[y],g]:l._events[y].push(g):(l._events[y]=g,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new r:delete l._events[u]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],h,d;if(this._eventsCount===0)return u;for(d in h=this._events)e.call(h,d)&&u.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(h)):u},a.prototype.listeners=function(u){var h=n?n+u:u,d=this._events[h];if(!d)return[];if(d.fn)return[d.fn];for(var p=0,g=d.length,y=new Array(g);p<g;p++)y[p]=d[p].fn;return y},a.prototype.listenerCount=function(u){var h=n?n+u:u,d=this._events[h];return d?d.fn?1:d.length:0},a.prototype.emit=function(u,h,d,p,g,y){var b=n?n+u:u;if(!this._events[b])return!1;var x=this._events[b],w=arguments.length,C,E;if(x.fn){switch(x.once&&this.removeListener(u,x.fn,void 0,!0),w){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,h),!0;case 3:return x.fn.call(x.context,h,d),!0;case 4:return x.fn.call(x.context,h,d,p),!0;case 5:return x.fn.call(x.context,h,d,p,g),!0;case 6:return x.fn.call(x.context,h,d,p,g,y),!0}for(E=1,C=new Array(w-1);E<w;E++)C[E-1]=arguments[E];x.fn.apply(x.context,C)}else{var _=x.length,A;for(E=0;E<_;E++)switch(x[E].once&&this.removeListener(u,x[E].fn,void 0,!0),w){case 1:x[E].fn.call(x[E].context);break;case 2:x[E].fn.call(x[E].context,h);break;case 3:x[E].fn.call(x[E].context,h,d);break;case 4:x[E].fn.call(x[E].context,h,d,p);break;default:if(!C)for(A=1,C=new Array(w-1);A<w;A++)C[A-1]=arguments[A];x[E].fn.apply(x[E].context,C)}}return!0},a.prototype.on=function(u,h,d){return s(this,u,h,d,!1)},a.prototype.once=function(u,h,d){return s(this,u,h,d,!0)},a.prototype.removeListener=function(u,h,d,p){var g=n?n+u:u;if(!this._events[g])return this;if(!h)return o(this,g),this;var y=this._events[g];if(y.fn)y.fn===h&&(!p||y.once)&&(!d||y.context===d)&&o(this,g);else{for(var b=0,x=[],w=y.length;b<w;b++)(y[b].fn!==h||p&&!y[b].once||d&&y[b].context!==d)&&x.push(y[b]);x.length?this._events[g]=x.length===1?x[0]:x:o(this,g)}return this},a.prototype.removeAllListeners=function(u){var h;return u?(h=n?n+u:u,this._events[h]&&o(this,h)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(ZA)),ZA.exports}var Z_e=Q_e();const J_e=ll(Z_e);var Wy=new J_e,cN="recharts.syncEvent.tooltip",v6="recharts.syncEvent.brush";function eAe(t,e){if(e){var n=Number.parseInt(e,10);if(!bo(n))return t?.[n]}}var tAe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},wY=Ps({name:"options",initialState:tAe,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),nAe=wY.reducer,{createEventEmitter:rAe}=wY.actions;function iAe(t){return t.tooltip.syncInteraction}var sAe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},SY=Ps({name:"chartData",initialState:sAe,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:b6,setDataStartEndIndexes:oAe,setComputedData:Ktt}=SY.actions,aAe=SY.reducer,lAe=["x","y"];function x6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Vd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?x6(Object(n),!0).forEach(function(r){uAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uAe(t,e,n){return(e=cAe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cAe(t){var e=hAe(t,"string");return typeof e=="symbol"?e:e+""}function hAe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fAe(t,e){if(t==null)return{};var n,r,i=dAe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function dAe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var TY=()=>{};function pAe(){var t=Je(R$),e=Je(D$),n=Zn(),r=Je(iX),i=Je(hu),s=e$(),o=cT(),a=Je(l=>l.rootProps.className);B.useEffect(()=>{if(t==null)return TY;var l=(u,h,d)=>{if(e!==d&&t===u){if(r==="index"){var p;if(o&&h!==null&&h!==void 0&&(p=h.payload)!==null&&p!==void 0&&p.coordinate&&h.payload.sourceViewBox){var g=h.payload.coordinate,{x:y,y:b}=g,x=fAe(g,lAe),{x:w,y:C,width:E,height:_}=h.payload.sourceViewBox,A=Vd(Vd({},x),{},{x:o.x+(E?(y-w)/E:0)*o.width,y:o.y+(_?(b-C)/_:0)*o.height});n(Vd(Vd({},h),{},{payload:Vd(Vd({},h.payload),{},{coordinate:A})}))}else n(h);return}if(i!=null){var P;if(typeof r=="function"){var N={activeTooltipIndex:h.payload.index==null?void 0:Number(h.payload.index),isTooltipActive:h.payload.active,activeIndex:h.payload.index==null?void 0:Number(h.payload.index),activeLabel:h.payload.label,activeDataKey:h.payload.dataKey,activeCoordinate:h.payload.coordinate},R=r(i,N);P=i[R]}else r==="value"&&(P=i.find(W=>String(W.value)===h.payload.label));var{coordinate:D}=h.payload;if(P==null||h.payload.active===!1||D==null||o==null){n(aN({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}));return}var{x:O,y:k}=D,F=Math.min(O,o.x+o.width),L=Math.min(k,o.y+o.height),q={x:s==="horizontal"?P.coordinate:F,y:s==="horizontal"?L:P.coordinate},Y=aN({active:h.payload.active,coordinate:q,dataKey:h.payload.dataKey,index:String(P.index),label:h.payload.label,sourceViewBox:h.payload.sourceViewBox});n(Y)}}};return Wy.on(cN,l),()=>{Wy.off(cN,l)}},[a,n,e,t,r,i,s,o])}function mAe(){var t=Je(R$),e=Je(D$),n=Zn();B.useEffect(()=>{if(t==null)return TY;var r=(i,s,o)=>{e!==o&&t===i&&n(oAe(s))};return Wy.on(v6,r),()=>{Wy.off(v6,r)}},[n,e,t])}function gAe(){var t=Zn();B.useEffect(()=>{t(rAe())},[t]),pAe(),mAe()}function yAe(t,e,n,r,i,s){var o=Je(g=>B_e(g,t,e)),a=Je(D$),l=Je(R$),u=Je(iX),h=Je(iAe),d=h?.active,p=cT();B.useEffect(()=>{if(!d&&l!=null&&a!=null){var g=aN({active:s,coordinate:n,dataKey:o,index:i,label:typeof r=="number"?String(r):r,sourceViewBox:p});Wy.emit(cN,l,g,a)}},[d,n,o,i,r,a,l,u,s,p])}function w6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function S6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?w6(Object(n),!0).forEach(function(r){vAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vAe(t,e,n){return(e=bAe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bAe(t){var e=xAe(t,"string");return typeof e=="symbol"?e:e+""}function xAe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wAe(t){return t.dataKey}function SAe(t,e){return B.isValidElement(t)?B.cloneElement(t,e):typeof t=="function"?B.createElement(t,e):B.createElement(Fwe,e)}var T6=[],TAe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!om.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function C6(t){var e=Co(t,TAe),{active:n,allowEscapeViewBox:r,animationDuration:i,animationEasing:s,content:o,filterNull:a,isAnimationActive:l,offset:u,payloadUniqBy:h,position:d,reverseDirection:p,useTranslate3d:g,wrapperStyle:y,cursor:b,shared:x,trigger:w,defaultIndex:C,portal:E,axisId:_}=e,A=Zn(),P=typeof C=="number"?String(C):C;B.useEffect(()=>{A(GIe({shared:x,trigger:w,axisId:_,active:n,defaultIndex:P}))},[A,x,w,_,n,P]);var N=cT(),R=QK(),D=BIe(x),{activeIndex:O,isActive:k}=Je(ve=>j_e(ve,D,w,P)),F=Je(ve=>U_e(ve,D,w,P)),L=Je(ve=>bY(ve,D,w,P)),q=Je(ve=>z_e(ve,D,w,P)),Y=F,W=Y_e(),H=n??k,[X,ee]=pK([Y,H]),ce=D==="axis"?L:void 0;yAe(D,w,q,ce,O,H);var j=E??W;if(j==null)return null;var Q=Y??T6;H||(Q=T6),a&&Q.length&&(Q=uK(Y.filter(ve=>ve.value!=null&&(ve.hide!==!0||e.includeHidden)),h,wAe));var ie=Q.length>0,me=B.createElement(Gwe,{allowEscapeViewBox:r,animationDuration:i,animationEasing:s,isAnimationActive:l,active:H,coordinate:q,hasPayload:ie,offset:u,position:d,reverseDirection:p,useTranslate3d:g,viewBox:N,wrapperStyle:y,lastBoundingBox:X,innerRef:ee,hasPortalFromProps:!!E},SAe(o,S6(S6({},e),{},{payload:Q,label:ce,active:H,coordinate:q,accessibilityLayer:R})));return B.createElement(B.Fragment,null,O8.createPortal(me,j),H&&B.createElement(X_e,{cursor:b,tooltipEventType:D,coordinate:q,payload:Y,index:O}))}var CY=t=>null;CY.displayName="Cell";function CAe(t,e,n){return(e=EAe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function EAe(t){var e=IAe(t,"string");return typeof e=="symbol"?e:e+""}function IAe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class _Ae{constructor(e){CAe(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function E6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function AAe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?E6(Object(n),!0).forEach(function(r){kAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kAe(t,e,n){return(e=NAe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function NAe(t){var e=RAe(t,"string");return typeof e=="symbol"?e:e+""}function RAe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var DAe={cacheSize:2e3,enableCache:!0},EY=AAe({},DAe),I6=new _Ae(EY.cacheSize),$Ae={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},_6="recharts_measurement_span";function OAe(t,e){var n=e.fontSize||"",r=e.fontFamily||"",i=e.fontWeight||"",s=e.fontStyle||"",o=e.letterSpacing||"",a=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(s,"|").concat(o,"|").concat(a)}var A6=(t,e)=>{try{var n=document.getElementById(_6);n||(n=document.createElement("span"),n.setAttribute("id",_6),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,$Ae,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},my=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||om.isSsr)return{width:0,height:0};if(!EY.enableCache)return A6(e,n);var r=OAe(e,n),i=I6.get(r);if(i)return i;var s=A6(e,n);return I6.set(r,s),s},k6=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,N6=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,PAe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,MAe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,IY={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},LAe=Object.keys(IY),np="NaN";function FAe(t,e){return t*IY[e]}class is{static parse(e){var n,[,r,i]=(n=MAe.exec(e))!==null&&n!==void 0?n:[];return new is(parseFloat(r),i??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,bo(e)&&(this.unit=""),n!==""&&!PAe.test(n)&&(this.num=NaN,this.unit=""),LAe.includes(n)&&(this.num=FAe(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new is(NaN,""):new is(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new is(NaN,""):new is(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new is(NaN,""):new is(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new is(NaN,""):new is(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return bo(this.num)}}function _Y(t){if(t.includes(np))return np;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,i,s]=(n=k6.exec(e))!==null&&n!==void 0?n:[],o=is.parse(r??""),a=is.parse(s??""),l=i==="*"?o.multiply(a):o.divide(a);if(l.isNaN())return np;e=e.replace(k6,l.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var u,[,h,d,p]=(u=N6.exec(e))!==null&&u!==void 0?u:[],g=is.parse(h??""),y=is.parse(p??""),b=d==="+"?g.add(y):g.subtract(y);if(b.isNaN())return np;e=e.replace(N6,b.toString())}return e}var R6=/\(([^()]*)\)/;function VAe(t){for(var e=t,n;(n=R6.exec(e))!=null;){var[,r]=n;e=e.replace(R6,_Y(r))}return e}function BAe(t){var e=t.replace(/\s+/g,"");return e=VAe(e),e=_Y(e),e}function zAe(t){try{return BAe(t)}catch{return np}}function JA(t){var e=zAe(t.slice(5,-1));return e===np?"":e}var UAe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],jAe=["dx","dy","angle","className","breakAll"];function hN(){return hN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hN.apply(null,arguments)}function D6(t,e){if(t==null)return{};var n,r,i=WAe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function WAe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var AY=/[ \f\n\r\t\v\u2028\u2029]+/,kY=t=>{var{children:e,breakAll:n,style:r}=t;try{var i=[];Vr(e)||(n?i=e.toString().split(""):i=e.toString().split(AY));var s=i.map(a=>({word:a,width:my(a,r).width})),o=n?0:my("",r).width;return{wordsWithComputedWidth:s,spaceWidth:o}}catch{return null}},GAe=(t,e,n,r,i)=>{var{maxLines:s,children:o,style:a,breakAll:l}=t,u=Ye(s),h=o,d=function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return k.reduce((F,L)=>{var{word:q,width:Y}=L,W=F[F.length-1];if(W&&(r==null||i||W.width+Y+n<Number(r)))W.words.push(q),W.width+=Y+n;else{var H={words:[q],width:Y};F.push(H)}return F},[])},p=d(e),g=O=>O.reduce((k,F)=>k.width>F.width?k:F);if(!u||i)return p;var y=p.length>s||g(p).width>Number(r);if(!y)return p;for(var b="",x=O=>{var k=h.slice(0,O),F=kY({breakAll:l,style:a,children:k+b}).wordsWithComputedWidth,L=d(F),q=L.length>s||g(L).width>Number(r);return[q,L]},w=0,C=h.length-1,E=0,_;w<=C&&E<=h.length-1;){var A=Math.floor((w+C)/2),P=A-1,[N,R]=x(P),[D]=x(A);if(!N&&!D&&(w=A+1),N&&D&&(C=A-1),!N&&D){_=R;break}E++}return _||p},$6=t=>{var e=Vr(t)?[]:t.toString().split(AY);return[{words:e}]},HAe=t=>{var{width:e,scaleToFit:n,children:r,style:i,breakAll:s,maxLines:o}=t;if((e||n)&&!om.isSsr){var a,l,u=kY({breakAll:s,children:r,style:i});if(u){var{wordsWithComputedWidth:h,spaceWidth:d}=u;a=h,l=d}else return $6(r);return GAe({breakAll:s,children:r,maxLines:o,style:i},a,l,e,n)}return $6(r)},O6="#808080",nO=B.forwardRef((t,e)=>{var{x:n=0,y:r=0,lineHeight:i="1em",capHeight:s="0.71em",scaleToFit:o=!1,textAnchor:a="start",verticalAnchor:l="end",fill:u=O6}=t,h=D6(t,UAe),d=B.useMemo(()=>HAe({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:o,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,o,h.style,h.width]),{dx:p,dy:g,angle:y,className:b,breakAll:x}=h,w=D6(h,jAe);if(!tl(n)||!tl(r)||d.length===0)return null;var C=n+(Ye(p)?p:0),E=r+(Ye(g)?g:0),_;switch(l){case"start":_=JA("calc(".concat(s,")"));break;case"middle":_=JA("calc(".concat((d.length-1)/2," * -").concat(i," + (").concat(s," / 2))"));break;default:_=JA("calc(".concat(d.length-1," * -").concat(i,")"));break}var A=[];if(o){var P=d[0].width,{width:N}=h;A.push("scale(".concat(Ye(N)?N/P:1,")"))}return y&&A.push("rotate(".concat(y,", ").concat(C,", ").concat(E,")")),A.length&&(w.transform=A.join(" ")),B.createElement("text",hN({},vo(w),{ref:e,x:C,y:E,className:vn("recharts-text",b),textAnchor:a,fill:u.includes("url")?O6:u}),d.map((R,D)=>{var O=R.words.join(x?"":" ");return B.createElement("tspan",{x:C,dy:D===0?_:i,key:"".concat(O,"-").concat(D)},O)}))});nO.displayName="Text";var qAe=["labelRef"];function KAe(t,e){if(t==null)return{};var n,r,i=XAe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function XAe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function P6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?P6(Object(n),!0).forEach(function(r){YAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function YAe(t,e,n){return(e=QAe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function QAe(t){var e=ZAe(t,"string");return typeof e=="symbol"?e:e+""}function ZAe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $l(){return $l=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$l.apply(null,arguments)}var NY=B.createContext(null),JAe=t=>{var{x:e,y:n,width:r,height:i,children:s}=t,o=B.useMemo(()=>({x:e,y:n,width:r,height:i}),[e,n,r,i]);return B.createElement(NY.Provider,{value:o},s)},RY=()=>{var t=B.useContext(NY),e=cT();return t||e},eke=B.createContext(null),tke=()=>{var t=B.useContext(eke),e=Je(uX);return t||e},nke=t=>{var{value:e,formatter:n}=t,r=Vr(t.children)?e:t.children;return typeof n=="function"?n(r):r},rO=t=>t!=null&&typeof t=="function",rke=(t,e)=>{var n=ls(e-t),r=Math.min(Math.abs(e-t),360);return n*r},ike=(t,e,n,r,i)=>{var{offset:s,className:o}=t,{cx:a,cy:l,innerRadius:u,outerRadius:h,startAngle:d,endAngle:p,clockWise:g}=i,y=(u+h)/2,b=rke(d,p),x=b>=0?1:-1,w,C;switch(e){case"insideStart":w=d+x*s,C=g;break;case"insideEnd":w=p-x*s,C=!g;break;case"end":w=p+x*s,C=g;break;default:throw new Error("Unsupported position ".concat(e))}C=b<=0?C:!C;var E=oi(a,l,y,w),_=oi(a,l,y,w+(C?1:-1)*359),A="M".concat(E.x,",").concat(E.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(C?0:1,`,
    `).concat(_.x,",").concat(_.y),P=Vr(t.id)?Oy("recharts-radial-line-"):t.id;return B.createElement("text",$l({},r,{dominantBaseline:"central",className:vn("recharts-radial-bar-label",o)}),B.createElement("defs",null,B.createElement("path",{id:P,d:A})),B.createElement("textPath",{xlinkHref:"#".concat(P)},n))},ske=(t,e,n)=>{var{cx:r,cy:i,innerRadius:s,outerRadius:o,startAngle:a,endAngle:l}=t,u=(a+l)/2;if(n==="outside"){var{x:h,y:d}=oi(r,i,o+e,u);return{x:h,y:d,textAnchor:h>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var p=(s+o)/2,{x:g,y}=oi(r,i,p,u);return{x:g,y,textAnchor:"middle",verticalAnchor:"middle"}},DY=t=>"cx"in t&&Ye(t.cx),oke=(t,e)=>{var{parentViewBox:n,offset:r,position:i}=t,s;n!=null&&!DY(n)&&(s=n);var{x:o,y:a,width:l,height:u}=e,h=u>=0?1:-1,d=h*r,p=h>0?"end":"start",g=h>0?"start":"end",y=l>=0?1:-1,b=y*r,x=y>0?"end":"start",w=y>0?"start":"end";if(i==="top"){var C={x:o+l/2,y:a-h*r,textAnchor:"middle",verticalAnchor:p};return qn(qn({},C),s?{height:Math.max(a-s.y,0),width:l}:{})}if(i==="bottom"){var E={x:o+l/2,y:a+u+d,textAnchor:"middle",verticalAnchor:g};return qn(qn({},E),s?{height:Math.max(s.y+s.height-(a+u),0),width:l}:{})}if(i==="left"){var _={x:o-b,y:a+u/2,textAnchor:x,verticalAnchor:"middle"};return qn(qn({},_),s?{width:Math.max(_.x-s.x,0),height:u}:{})}if(i==="right"){var A={x:o+l+b,y:a+u/2,textAnchor:w,verticalAnchor:"middle"};return qn(qn({},A),s?{width:Math.max(s.x+s.width-A.x,0),height:u}:{})}var P=s?{width:l,height:u}:{};return i==="insideLeft"?qn({x:o+b,y:a+u/2,textAnchor:w,verticalAnchor:"middle"},P):i==="insideRight"?qn({x:o+l-b,y:a+u/2,textAnchor:x,verticalAnchor:"middle"},P):i==="insideTop"?qn({x:o+l/2,y:a+d,textAnchor:"middle",verticalAnchor:g},P):i==="insideBottom"?qn({x:o+l/2,y:a+u-d,textAnchor:"middle",verticalAnchor:p},P):i==="insideTopLeft"?qn({x:o+b,y:a+d,textAnchor:w,verticalAnchor:g},P):i==="insideTopRight"?qn({x:o+l-b,y:a+d,textAnchor:x,verticalAnchor:g},P):i==="insideBottomLeft"?qn({x:o+b,y:a+u-d,textAnchor:w,verticalAnchor:p},P):i==="insideBottomRight"?qn({x:o+l-b,y:a+u-d,textAnchor:x,verticalAnchor:p},P):i&&typeof i=="object"&&(Ye(i.x)||Ql(i.x))&&(Ye(i.y)||Ql(i.y))?qn({x:o+ta(i.x,l),y:a+ta(i.y,u),textAnchor:"end",verticalAnchor:"end"},P):qn({x:o+l/2,y:a+u/2,textAnchor:"middle",verticalAnchor:"middle"},P)},ake={offset:5};function Zu(t){var e=Co(t,ake),{viewBox:n,position:r,value:i,children:s,content:o,className:a="",textBreakAll:l,labelRef:u}=e,h=tke(),d=RY(),p=r==="center"?d:h??d,g=n||p;if(!g||Vr(i)&&Vr(s)&&!B.isValidElement(o)&&typeof o!="function")return null;var y=qn(qn({},e),{},{viewBox:g});if(B.isValidElement(o)){var{labelRef:b}=y,x=KAe(y,qAe);return B.cloneElement(o,x)}var w;if(typeof o=="function"){if(w=B.createElement(o,y),B.isValidElement(w))return w}else w=nke(e);var C=DY(g),E=vo(e);if(C&&(r==="insideStart"||r==="insideEnd"||r==="end"))return ike(e,r,w,E,g);var _=C?ske(g,e.offset,e.position):oke(e,g);return B.createElement(nO,$l({ref:u,className:vn("recharts-label",a)},E,_,{breakAll:l}),w)}Zu.displayName="Label";var lke=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?B.createElement(Zu,$l({key:"label-implicit"},r)):tl(t)?B.createElement(Zu,$l({key:"label-implicit",value:t},r)):B.isValidElement(t)?t.type===Zu?B.cloneElement(t,qn({key:"label-implicit"},r)):B.createElement(Zu,$l({key:"label-implicit",content:t},r)):rO(t)?B.createElement(Zu,$l({key:"label-implicit",content:t},r)):t&&typeof t=="object"?B.createElement(Zu,$l({},t,{key:"label-implicit"},r)):null};function uke(t){var{label:e,labelRef:n}=t,r=RY();return lke(e,r,n)||null}var ek={},tk={},M6;function cke(){return M6||(M6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(tk)),tk}var nk={},L6;function hke(){return L6||(L6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(nk)),nk}var F6;function fke(){return F6||(F6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=cke(),n=hke(),r=zD();function i(s){if(r.isArrayLike(s))return e.last(n.toArray(s))}t.last=i})(ek)),ek}var rk,V6;function dke(){return V6||(V6=1,rk=fke().last),rk}var pke=dke();const mke=ll(pke);var gke=["valueAccessor"],yke=["dataKey","clockWise","id","textBreakAll"];function Fw(){return Fw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fw.apply(null,arguments)}function B6(t,e){if(t==null)return{};var n,r,i=vke(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function vke(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var bke=t=>Array.isArray(t.value)?mke(t.value):t.value,$Y=B.createContext(void 0),xke=$Y.Provider,OY=B.createContext(void 0);OY.Provider;function wke(){return B.useContext($Y)}function Ske(){return B.useContext(OY)}function E1(t){var{valueAccessor:e=bke}=t,n=B6(t,gke),{dataKey:r,clockWise:i,id:s,textBreakAll:o}=n,a=B6(n,yke),l=wke(),u=Ske(),h=l||u;return!h||!h.length?null:B.createElement(Nc,{className:"recharts-label-list"},h.map((d,p)=>{var g,y=Vr(r)?e(d,p):zi(d&&d.payload,r),b=Vr(s)?{}:{id:"".concat(s,"-").concat(p)};return B.createElement(Zu,Fw({key:"label-".concat(p)},vo(d),a,b,{fill:(g=n.fill)!==null&&g!==void 0?g:d.fill,parentViewBox:d.parentViewBox,value:y,textBreakAll:o,viewBox:d.viewBox,index:p}))}))}E1.displayName="LabelList";function Tke(t){var{label:e}=t;return e?e===!0?B.createElement(E1,{key:"labelList-implicit"}):B.isValidElement(e)||rO(e)?B.createElement(E1,{key:"labelList-implicit",content:e}):typeof e=="object"?B.createElement(E1,Fw({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}var Cke={radiusAxis:{},angleAxis:{}},PY=Ps({name:"polarAxis",initialState:Cke,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:Xtt,removeRadiusAxis:Ytt,addAngleAxis:Qtt,removeAngleAxis:Ztt}=PY.actions,Eke=PY.reducer,ik={exports:{}},ln={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z6;function Ike(){if(z6)return ln;z6=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.for("react.view_transition"),g=Symbol.for("react.client.reference");function y(b){if(typeof b=="object"&&b!==null){var x=b.$$typeof;switch(x){case t:switch(b=b.type,b){case n:case i:case r:case l:case u:case p:return b;default:switch(b=b&&b.$$typeof,b){case o:case a:case d:case h:return b;case s:return b;default:return x}}case e:return x}}}return ln.ContextConsumer=s,ln.ContextProvider=o,ln.Element=t,ln.ForwardRef=a,ln.Fragment=n,ln.Lazy=d,ln.Memo=h,ln.Portal=e,ln.Profiler=i,ln.StrictMode=r,ln.Suspense=l,ln.SuspenseList=u,ln.isContextConsumer=function(b){return y(b)===s},ln.isContextProvider=function(b){return y(b)===o},ln.isElement=function(b){return typeof b=="object"&&b!==null&&b.$$typeof===t},ln.isForwardRef=function(b){return y(b)===a},ln.isFragment=function(b){return y(b)===n},ln.isLazy=function(b){return y(b)===d},ln.isMemo=function(b){return y(b)===h},ln.isPortal=function(b){return y(b)===e},ln.isProfiler=function(b){return y(b)===i},ln.isStrictMode=function(b){return y(b)===r},ln.isSuspense=function(b){return y(b)===l},ln.isSuspenseList=function(b){return y(b)===u},ln.isValidElementType=function(b){return typeof b=="string"||typeof b=="function"||b===n||b===i||b===r||b===l||b===u||typeof b=="object"&&b!==null&&(b.$$typeof===d||b.$$typeof===h||b.$$typeof===o||b.$$typeof===s||b.$$typeof===a||b.$$typeof===g||b.getModuleId!==void 0)},ln.typeOf=y,ln}var U6;function _ke(){return U6||(U6=1,ik.exports=Ike()),ik.exports}var Ake=_ke(),j6=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",W6=null,sk=null,MY=t=>{if(t===W6&&Array.isArray(sk))return sk;var e=[];return B.Children.forEach(t,n=>{Vr(n)||(Ake.isFragment(n)?e=e.concat(MY(n.props.children)):e.push(n))}),sk=e,W6=t,e};function kke(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(i=>j6(i)):r=[j6(e)],MY(t).forEach(i=>{var s=_p(i,"type.displayName")||_p(i,"type.name");r.indexOf(s)!==-1&&n.push(i)}),n}var ok={},G6;function Nke(){return G6||(G6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const i=n[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${i}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}t.isPlainObject=e})(ok)),ok}var ak,H6;function Rke(){return H6||(H6=1,ak=Nke().isPlainObject),ak}var Dke=Rke();const $ke=ll(Dke);function q6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function K6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?q6(Object(n),!0).forEach(function(r){Oke(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Oke(t,e,n){return(e=Pke(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pke(t){var e=Mke(t,"string");return typeof e=="symbol"?e:e+""}function Mke(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vw(){return Vw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vw.apply(null,arguments)}var X6=(t,e,n,r,i)=>{var s=n-r,o;return o="M ".concat(t,",").concat(e),o+="L ".concat(t+n,",").concat(e),o+="L ".concat(t+n-s/2,",").concat(e+i),o+="L ".concat(t+n-s/2-r,",").concat(e+i),o+="L ".concat(t,",").concat(e," Z"),o},Lke={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Fke=t=>{var e=Co(t,Lke),{x:n,y:r,upperWidth:i,lowerWidth:s,height:o,className:a}=e,{animationEasing:l,animationDuration:u,animationBegin:h,isUpdateAnimationActive:d}=e,p=B.useRef(null),[g,y]=B.useState(-1),b=B.useRef(i),x=B.useRef(s),w=B.useRef(o),C=B.useRef(n),E=B.useRef(r),_=r$(t,"trapezoid-");if(B.useEffect(()=>{if(p.current&&p.current.getTotalLength)try{var q=p.current.getTotalLength();q&&y(q)}catch{}},[]),n!==+n||r!==+r||i!==+i||s!==+s||o!==+o||i===0&&s===0||o===0)return null;var A=vn("recharts-trapezoid",a);if(!d)return B.createElement("g",null,B.createElement("path",Vw({},vo(e),{className:A,d:X6(n,r,i,s,o)})));var P=b.current,N=x.current,R=w.current,D=C.current,O=E.current,k="0px ".concat(g===-1?1:g,"px"),F="".concat(g,"px 0px"),L=ZK(["strokeDasharray"],u,l);return B.createElement(n$,{animationId:_,key:_,canBegin:g>0,duration:u,easing:l,isActive:d,begin:h},q=>{var Y=$i(P,i,q),W=$i(N,s,q),H=$i(R,o,q),X=$i(D,n,q),ee=$i(O,r,q);p.current&&(b.current=Y,x.current=W,w.current=H,C.current=X,E.current=ee);var ce=q>0?{transition:L,strokeDasharray:F}:{strokeDasharray:k};return B.createElement("path",Vw({},vo(e),{className:A,d:X6(X,ee,Y,W,H),ref:p,style:K6(K6({},ce),e.style)}))})},Vke=["option","shapeType","propTransformer","activeClassName","isActive"];function Bke(t,e){if(t==null)return{};var n,r,i=zke(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function zke(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Y6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Bw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Y6(Object(n),!0).forEach(function(r){Uke(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Uke(t,e,n){return(e=jke(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jke(t){var e=Wke(t,"string");return typeof e=="symbol"?e:e+""}function Wke(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Gke(t,e){return Bw(Bw({},e),t)}function Hke(t,e){return t==="symbols"}function Q6(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return B.createElement(n7,n);case"trapezoid":return B.createElement(Fke,n);case"sector":return B.createElement(s7,n);case"symbols":if(Hke(e))return B.createElement(FD,n);break;default:return null}}function qke(t){return B.isValidElement(t)?t.props:t}function Kke(t){var{option:e,shapeType:n,propTransformer:r=Gke,activeClassName:i="recharts-active-shape",isActive:s}=t,o=Bke(t,Vke),a;if(B.isValidElement(e))a=B.cloneElement(e,Bw(Bw({},o),qke(e)));else if(typeof e=="function")a=e(o);else if($ke(e)&&typeof e!="boolean"){var l=r(e,o);a=B.createElement(Q6,{shapeType:n,elementProps:l})}else{var u=o;a=B.createElement(Q6,{shapeType:n,elementProps:u})}return s?B.createElement(Nc,{className:i},a):a}var LY=(t,e)=>{var n=Zn();return(r,i)=>s=>{t?.(r,i,s),n(JX({activeIndex:String(i),activeDataKey:e,activeCoordinate:r.tooltipPosition}))}},FY=t=>{var e=Zn();return(n,r)=>i=>{t?.(n,r,i),e(HIe())}},VY=(t,e)=>{var n=Zn();return(r,i)=>s=>{t?.(r,i,s),n(qIe({activeIndex:String(i),activeDataKey:e,activeCoordinate:r.tooltipPosition}))}};function Xke(t){var{fn:e,args:n}=t,r=Zn(),i=Ms();return B.useLayoutEffect(()=>{if(!i){var s=e(n);return r(jIe(s)),()=>{r(WIe(s))}}},[e,n,r,i]),null}var Yke=()=>{};function Qke(t){var{legendPayload:e}=t,n=Zn(),r=Ms();return B.useLayoutEffect(()=>r?Yke:(n(xwe(e)),()=>{n(wwe(e))}),[n,r,e]),null}var lk,Zke=()=>{var[t]=B.useState(()=>Oy("uid-"));return t},Jke=(lk=Ise.useId)!==null&&lk!==void 0?lk:Zke;function e2e(t,e){var n=Jke();return e||(t?"".concat(t,"-").concat(n):n)}var t2e=B.createContext(void 0),n2e=t=>{var{id:e,type:n,children:r}=t,i=e2e("recharts-".concat(n),e);return B.createElement(t2e.Provider,{value:i},r(i))},r2e={cartesianItems:[],polarItems:[]},BY=Ps({name:"graphicalItems",initialState:r2e,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:Oi()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:n,next:r}=e.payload,i=zl(t).cartesianItems.indexOf(n);i>-1&&(t.cartesianItems[i]=r)},prepare:Oi()},removeCartesianGraphicalItem:{reducer(t,e){var n=zl(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:Oi()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:Oi()},removePolarGraphicalItem:{reducer(t,e){var n=zl(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)},prepare:Oi()}}}),{addCartesianGraphicalItem:i2e,replaceCartesianGraphicalItem:s2e,removeCartesianGraphicalItem:o2e,addPolarGraphicalItem:Jtt,removePolarGraphicalItem:ent}=BY.actions,a2e=BY.reducer;function l2e(t){var e=Zn(),n=B.useRef(null);return B.useLayoutEffect(()=>{n.current===null?e(i2e(t)):n.current!==t&&e(s2e({prev:n.current,next:t})),n.current=t},[e,t]),B.useLayoutEffect(()=>()=>{n.current&&(e(o2e(n.current)),n.current=null)},[e]),null}function Z6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function J6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Z6(Object(n),!0).forEach(function(r){u2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function u2e(t,e,n){return(e=c2e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c2e(t){var e=h2e(t,"string");return typeof e=="symbol"?e:e+""}function h2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var f2e={xAxis:{},yAxis:{},zAxis:{}},zY=Ps({name:"cartesianAxis",initialState:f2e,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:Oi()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:Oi()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:Oi()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:Oi()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:Oi()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:Oi()},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload,i=t.yAxis[n];if(i){var s=i.widthHistory||[];if(s.length===3&&s[0]===s[2]&&r===s[1]&&r!==i.width&&Math.abs(r-s[0])<=1)return;var o=[...s,r].slice(-3);t.yAxis[n]=J6(J6({},t.yAxis[n]),{},{width:r,widthHistory:o})}}}}),{addXAxis:d2e,removeXAxis:p2e,addYAxis:m2e,removeYAxis:g2e,addZAxis:tnt,removeZAxis:nnt,updateYAxisWidth:y2e}=zY.actions,v2e=zY.reducer,b2e=Te([Br],t=>{if(t)return{top:t.top,bottom:t.bottom,left:t.left,right:t.right}}),x2e=Te([b2e,ou,au],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),UY=()=>Je(x2e),w2e="Invariant failed";function S2e(t,e){throw new Error(w2e)}var T2e=["x","y"];function fN(){return fN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fN.apply(null,arguments)}function eW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eW(Object(n),!0).forEach(function(r){C2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function C2e(t,e,n){return(e=E2e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function E2e(t){var e=I2e(t,"string");return typeof e=="symbol"?e:e+""}function I2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _2e(t,e){if(t==null)return{};var n,r,i=A2e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function A2e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function k2e(t,e){var{x:n,y:r}=t,i=_2e(t,T2e),s="".concat(n),o=parseInt(s,10),a="".concat(r),l=parseInt(a,10),u="".concat(e.height||i.height),h=parseInt(u,10),d="".concat(e.width||i.width),p=parseInt(d,10);return zg(zg(zg(zg(zg({},e),i),o?{x:o}:{}),l?{y:l}:{}),{},{height:h,width:p,name:e.name,radius:e.radius})}function iO(t){return B.createElement(Kke,fN({shapeType:"rectangle",propTransformer:k2e,activeClassName:"recharts-active-bar"},t))}var N2e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(Ye(e))return e;var s=Ye(r)||Vr(r);return s?e(r,i):(s||S2e(),n)}},R2e={},jY=Ps({name:"errorBars",initialState:R2e,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:r,next:i}=e.payload;t[n]&&(t[n]=t[n].map(s=>s.dataKey===r.dataKey&&s.direction===r.direction?i:s))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:rnt,replaceErrorBar:int,removeErrorBar:snt}=jY.actions,D2e=jY.reducer,$2e=["children"];function O2e(t,e){if(t==null)return{};var n,r,i=P2e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function P2e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var M2e={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},L2e=B.createContext(M2e);function F2e(t){var{children:e}=t,n=O2e(t,$2e);return B.createElement(L2e.Provider,{value:n},e)}function WY(t,e){var n,r,i=Je(u=>uu(u,t)),s=Je(u=>cu(u,e)),o=(n=i?.allowDataOverflow)!==null&&n!==void 0?n:Cs.allowDataOverflow,a=(r=s?.allowDataOverflow)!==null&&r!==void 0?r:Es.allowDataOverflow,l=o||a;return{needClip:l,needClipX:o,needClipY:a}}function V2e(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,i=UY(),{needClipX:s,needClipY:o,needClip:a}=WY(e,n);if(!a)return null;var{x:l,y:u,width:h,height:d}=i;return B.createElement("clipPath",{id:"clipPath-".concat(r)},B.createElement("rect",{x:s?l:l-h/2,y:o?u:u-d/2,width:s?h:h*2,height:o?d:d*2}))}var B2e=["onMouseEnter","onMouseLeave","onClick"],z2e=["value","background","tooltipPosition"],U2e=["id"],j2e=["onMouseEnter","onClick","onMouseLeave"];function Rc(){return Rc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Rc.apply(null,arguments)}function tW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Pi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tW(Object(n),!0).forEach(function(r){W2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function W2e(t,e,n){return(e=G2e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function G2e(t){var e=H2e(t,"string");return typeof e=="symbol"?e:e+""}function H2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zw(t,e){if(t==null)return{};var n,r,i=q2e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function q2e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var K2e=t=>{var{dataKey:e,name:n,fill:r,legendType:i,hide:s}=t;return[{inactive:s,dataKey:e,type:i,color:r,value:WK(n,e),payload:t}]};function X2e(t){var{dataKey:e,stroke:n,strokeWidth:r,fill:i,name:s,hide:o,unit:a}=t;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:e,nameKey:void 0,name:WK(s,e),hide:o,type:t.tooltipType,color:t.fill,unit:a}}}function Y2e(t){var e=Je(Mp),{data:n,dataKey:r,background:i,allOtherBarProps:s}=t,{onMouseEnter:o,onMouseLeave:a,onClick:l}=s,u=zw(s,B2e),h=LY(o,r),d=FY(a),p=VY(l,r);if(!i||n==null)return null;var g=ND(i);return B.createElement(B.Fragment,null,n.map((y,b)=>{var{value:x,background:w,tooltipPosition:C}=y,E=zw(y,z2e);if(!w)return null;var _=h(y,b),A=d(y,b),P=p(y,b),N=Pi(Pi(Pi(Pi(Pi({option:i,isActive:String(b)===e},E),{},{fill:"#eee"},w),g),JS(u,y,b)),{},{onMouseEnter:_,onMouseLeave:A,onClick:P,dataKey:r,index:b,className:"recharts-bar-background-rectangle"});return B.createElement(iO,Rc({key:"background-bar-".concat(b)},N))}))}function Q2e(t){var{showLabels:e,children:n,rects:r}=t,i=r?.map(s=>{var o={x:s.x,y:s.y,width:s.width,height:s.height};return Pi(Pi({},o),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:o,fill:s.fill})});return B.createElement(xke,{value:e?i:void 0},n)}function Z2e(t){var{shape:e,activeBar:n,baseProps:r,entry:i,index:s,dataKey:o}=t,a=Je(Mp),l=Je(pY),u=n&&String(s)===a&&(l==null||o===l),h=u?n:e;return B.createElement(iO,Rc({},r,{name:String(r.name)},i,{isActive:u,option:h,index:s,dataKey:o}))}function J2e(t){var{shape:e,baseProps:n,entry:r,index:i,dataKey:s}=t;return B.createElement(iO,Rc({},n,{name:String(n.name)},r,{isActive:!1,option:e,index:i,dataKey:s}))}function eNe(t){var{data:e,props:n}=t,r=Yl(n),{id:i}=r,s=zw(r,U2e),{shape:o,dataKey:a,activeBar:l}=n,{onMouseEnter:u,onClick:h,onMouseLeave:d}=n,p=zw(n,j2e),g=LY(u,a),y=FY(d),b=VY(h,a);return e?B.createElement(B.Fragment,null,e.map((x,w)=>B.createElement(Nc,Rc({key:"rectangle-".concat(x?.x,"-").concat(x?.y,"-").concat(x?.value,"-").concat(w),className:"recharts-bar-rectangle"},JS(p,x,w),{onMouseEnter:g(x,w),onMouseLeave:y(x,w),onClick:b(x,w)}),l?B.createElement(Z2e,{shape:o,activeBar:l,baseProps:s,entry:x,index:w,dataKey:a}):B.createElement(J2e,{shape:o,baseProps:s,entry:x,index:w,dataKey:a})))):null}function tNe(t){var{props:e,previousRectanglesRef:n}=t,{data:r,layout:i,isAnimationActive:s,animationBegin:o,animationDuration:a,animationEasing:l,onAnimationEnd:u,onAnimationStart:h}=e,d=n.current,p=r$(e,"recharts-bar-"),[g,y]=B.useState(!1),b=!g,x=B.useCallback(()=>{typeof u=="function"&&u(),y(!1)},[u]),w=B.useCallback(()=>{typeof h=="function"&&h(),y(!0)},[h]);return B.createElement(Q2e,{showLabels:b,rects:r},B.createElement(n$,{animationId:p,begin:o,duration:a,isActive:s,easing:l,onAnimationEnd:x,onAnimationStart:w,key:p},C=>{var E=C===1?r:r?.map((_,A)=>{var P=d&&d[A];if(P)return Pi(Pi({},_),{},{x:$i(P.x,_.x,C),y:$i(P.y,_.y,C),width:$i(P.width,_.width,C),height:$i(P.height,_.height,C)});if(i==="horizontal"){var N=$i(0,_.height,C);return Pi(Pi({},_),{},{y:_.y+_.height-N,height:N})}var R=$i(0,_.width,C);return Pi(Pi({},_),{},{width:R})});return C>0&&(n.current=E??null),E==null?null:B.createElement(Nc,null,B.createElement(eNe,{props:e,data:E}))}),B.createElement(Tke,{label:e.label}),e.children)}function nNe(t){var e=B.useRef(null);return B.createElement(tNe,{previousRectanglesRef:e,props:t})}var GY=0,rNe=(t,e)=>{var n=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:n,errorVal:zi(t,e)}};class iNe extends B.PureComponent{render(){var{hide:e,data:n,dataKey:r,className:i,xAxisId:s,yAxisId:o,needClip:a,background:l,id:u}=this.props;if(e||n==null)return null;var h=vn("recharts-bar",i),d=u;return B.createElement(Nc,{className:h,id:u},a&&B.createElement("defs",null,B.createElement(V2e,{clipPathId:d,xAxisId:s,yAxisId:o})),B.createElement(Nc,{className:"recharts-bar-rectangles",clipPath:a?"url(#clipPath-".concat(d,")"):void 0},B.createElement(Y2e,{data:n,dataKey:r,background:l,allOtherBarProps:this.props}),B.createElement(nNe,this.props)))}}var sNe={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!om.isSsr,legendType:"rect",minPointSize:GY,xAxisId:0,yAxisId:0};function oNe(t){var{xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:o,animationBegin:a,animationDuration:l,animationEasing:u,isAnimationActive:h}=t,{needClip:d}=WY(e,n),p=e$(),g=Ms(),y=kke(t.children,CY),b=Je(C=>ONe(C,e,n,g,t.id,y));if(p!=="vertical"&&p!=="horizontal")return null;var x,w=b?.[0];return w==null||w.height==null||w.width==null?x=0:x=p==="vertical"?w.height/2:w.width/2,B.createElement(F2e,{xAxisId:e,yAxisId:n,data:b,dataPointFormatter:rNe,errorBarOffset:x},B.createElement(iNe,Rc({},t,{layout:p,needClip:d,data:b,xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:o,animationBegin:a,animationDuration:l,animationEasing:u,isAnimationActive:h})))}function aNe(t){var{layout:e,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:s,xAxis:o,yAxis:a,xAxisTicks:l,yAxisTicks:u,stackedData:h,displayedData:d,offset:p,cells:g,parentViewBox:y}=t,b=e==="horizontal"?a:o,x=h?b.scale.domain():null,w=O1e({numericAxis:b});return d.map((C,E)=>{var _,A,P,N,R,D;h?_=A1e(h[E],x):(_=zi(C,n),Array.isArray(_)||(_=[w,_]));var O=N2e(r,GY)(_[1],E);if(e==="horizontal"){var k,[F,L]=[a.scale(_[0]),a.scale(_[1])];A=FU({axis:o,ticks:l,bandSize:s,offset:i.offset,entry:C,index:E}),P=(k=L??F)!==null&&k!==void 0?k:void 0,N=i.size;var q=F-L;if(R=bo(q)?0:q,D={x:A,y:p.top,width:N,height:p.height},Math.abs(O)>0&&Math.abs(R)<Math.abs(O)){var Y=ls(R||O)*(Math.abs(O)-Math.abs(R));P-=Y,R+=Y}}else{var[W,H]=[o.scale(_[0]),o.scale(_[1])];if(A=W,P=FU({axis:a,ticks:u,bandSize:s,offset:i.offset,entry:C,index:E}),N=H-W,R=i.size,D={x:p.left,y:P,width:p.width,height:R},Math.abs(O)>0&&Math.abs(N)<Math.abs(O)){var X=ls(N||O)*(Math.abs(O)-Math.abs(N));N+=X}}if(A==null||P==null||N==null||R==null)return null;var ee=Pi(Pi({},C),{},{x:A,y:P,width:N,height:R,value:h?_:_[1],payload:C,background:D,tooltipPosition:{x:A+N/2,y:P+R/2},parentViewBox:y},g&&g[E]&&g[E].props);return ee}).filter(Boolean)}function lNe(t){var e=Co(t,sNe),n=Ms();return B.createElement(n2e,{id:e.id,type:"bar"},r=>B.createElement(B.Fragment,null,B.createElement(Qke,{legendPayload:K2e(e)}),B.createElement(Xke,{fn:X2e,args:e}),B.createElement(l2e,{type:"bar",id:r,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:$1e(e.stackId),hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:n}),B.createElement(oNe,Rc({},e,{id:r}))))}var dN=B.memo(lNe);dN.displayName="Bar";function nW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Xx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nW(Object(n),!0).forEach(function(r){uNe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uNe(t,e,n){return(e=cNe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cNe(t){var e=hNe(t,"string");return typeof e=="symbol"?e:e+""}function hNe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fNe=(t,e)=>e,dNe=(t,e,n)=>n,pNe=(t,e,n,r)=>r,mNe=(t,e,n,r,i)=>i,Dv=Te([F$,mNe],(t,e)=>t.filter(n=>n.type==="bar").find(n=>n.id===e)),gNe=Te([Dv],t=>t?.maxBarSize),yNe=(t,e,n,r,i,s)=>s,rW=(t,e,n)=>{var r=n??t;if(!Vr(r))return ta(r,e,0)},vNe=Te([nn,F$,fNe,dNe,pNe],(t,e,n,r,i)=>e.filter(s=>t==="horizontal"?s.xAxisId===n:s.yAxisId===r).filter(s=>s.isPanorama===i).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),bNe=(t,e,n,r)=>{var i=nn(t);return i==="horizontal"?oN(t,"yAxis",n,r):oN(t,"xAxis",e,r)},xNe=(t,e,n)=>{var r=nn(t);return r==="horizontal"?u6(t,"xAxis",e):u6(t,"yAxis",n)},wNe=(t,e,n)=>{var r={},i=t.filter(TT),s=t.filter(u=>u.stackId==null),o=i.reduce((u,h)=>(u[h.stackId]||(u[h.stackId]=[]),u[h.stackId].push(h),u),r),a=Object.entries(o).map(u=>{var[h,d]=u,p=d.map(y=>y.dataKey),g=rW(e,n,d[0].barSize);return{stackId:h,dataKeys:p,barSize:g}}),l=s.map(u=>{var h=[u.dataKey].filter(p=>p!=null),d=rW(e,n,u.barSize);return{stackId:void 0,dataKeys:h,barSize:d}});return[...a,...l]},SNe=Te([vNe,VEe,xNe],wNe),TNe=(t,e,n,r,i)=>{var s,o,a=Dv(t,e,n,r,i);if(a!=null){var l=nn(t),u=nX(t),{maxBarSize:h}=a,d=Vr(h)?u:h,p,g;return l==="horizontal"?(p=Pp(t,"xAxis",e,r),g=Op(t,"xAxis",e,r)):(p=Pp(t,"yAxis",n,r),g=Op(t,"yAxis",n,r)),(s=(o=XD(p,g,!0))!==null&&o!==void 0?o:d)!==null&&s!==void 0?s:0}},HY=(t,e,n,r)=>{var i=nn(t),s,o;return i==="horizontal"?(s=Pp(t,"xAxis",e,r),o=Op(t,"xAxis",e,r)):(s=Pp(t,"yAxis",n,r),o=Op(t,"yAxis",n,r)),XD(s,o)};function CNe(t,e,n,r,i){var s=r.length;if(!(s<1)){var o=ta(t,n,0,!0),a,l=[];if(_i(r[0].barSize)){var u=!1,h=n/s,d=r.reduce((w,C)=>w+(C.barSize||0),0);d+=(s-1)*o,d>=n&&(d-=(s-1)*o,o=0),d>=n&&h>0&&(u=!0,h*=.9,d=s*h);var p=(n-d)/2>>0,g={offset:p-o,size:0};a=r.reduce((w,C)=>{var E,_={stackId:C.stackId,dataKeys:C.dataKeys,position:{offset:g.offset+g.size+o,size:u?h:(E=C.barSize)!==null&&E!==void 0?E:0}},A=[...w,_];return g=A[A.length-1].position,A},l)}else{var y=ta(e,n,0,!0);n-2*y-(s-1)*o<=0&&(o=0);var b=(n-2*y-(s-1)*o)/s;b>1&&(b>>=0);var x=_i(i)?Math.min(b,i):b;a=r.reduce((w,C,E)=>[...w,{stackId:C.stackId,dataKeys:C.dataKeys,position:{offset:y+(b+o)*E+(b-x)/2,size:x}}],l)}return a}}var ENe=(t,e,n,r,i,s,o)=>{var a=Vr(o)?e:o,l=CNe(n,r,i!==s?i:s,t,a);return i!==s&&l!=null&&(l=l.map(u=>Xx(Xx({},u),{},{position:Xx(Xx({},u.position),{},{offset:u.position.offset-i/2})}))),l},INe=Te([SNe,nX,FEe,rX,TNe,HY,gNe],ENe),_Ne=(t,e,n,r)=>Pp(t,"xAxis",e,r),ANe=(t,e,n,r)=>Pp(t,"yAxis",n,r),kNe=(t,e,n,r)=>Op(t,"xAxis",e,r),NNe=(t,e,n,r)=>Op(t,"yAxis",n,r),RNe=Te([INe,Dv],(t,e)=>{if(!(t==null||e==null)){var n=t.find(r=>r.stackId===e.stackId&&e.dataKey!=null&&r.dataKeys.includes(e.dataKey));if(n!=null)return n.position}}),DNe=(t,e)=>{var n=M$(e);if(!(!t||n==null||e==null)){var{stackId:r}=e;if(r!=null){var i=t[r];if(i){var{stackedData:s}=i;if(s)return s.find(o=>o.key===n)}}}},$Ne=Te([bNe,Dv],DNe),ONe=Te([Br,YD,_Ne,ANe,kNe,NNe,RNe,nn,_$,HY,$Ne,Dv,yNe],(t,e,n,r,i,s,o,a,l,u,h,d,p)=>{var{chartData:g,dataStartIndex:y,dataEndIndex:b}=l;if(!(d==null||o==null||e==null||a!=="horizontal"&&a!=="vertical"||n==null||r==null||i==null||s==null||u==null)){var{data:x}=d,w;if(x!=null&&x.length>0?w=x:w=g?.slice(y,b+1),w!=null)return aNe({layout:a,barSettings:d,pos:o,parentViewBox:e,bandSize:u,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:s,stackedData:h,displayedData:w,offset:t,cells:p})}}),PNe=t=>{var{chartData:e}=t,n=Zn(),r=Ms();return B.useEffect(()=>r?()=>{}:(n(b6(e)),()=>{n(b6(void 0))}),[e,n,r]),null},iW={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},qY=Ps({name:"brush",initialState:iW,reducers:{setBrushSettings(t,e){return e.payload==null?iW:e.payload}}}),{setBrushSettings:ont}=qY.actions,MNe=qY.reducer;function LNe(t,e,n){return(e=FNe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FNe(t){var e=VNe(t,"string");return typeof e=="symbol"?e:e+""}function VNe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class sO{static create(e){return new sO(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(r)switch(r){case"start":return this.scale(e);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(e)+s}default:return this.scale(e)}if(n){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+o}return this.scale(e)}}isInRange(e){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?e>=r&&e<=i:e>=i&&e<=r}}LNe(sO,"EPS",1e-4);function BNe(t){return(t%180+180)%180}var zNe=function(e){var{width:n,height:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=BNe(i),o=s*Math.PI/180,a=Math.atan(r/n),l=o>a&&o<Math.PI-a?r/Math.sin(o):n/Math.cos(o);return Math.abs(l)},UNe={dots:[],areas:[],lines:[]},KY=Ps({name:"referenceElements",initialState:UNe,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=zl(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=zl(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=zl(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:ant,removeDot:lnt,addArea:unt,removeArea:cnt,addLine:hnt,removeLine:fnt}=KY.actions,jNe=KY.reducer,WNe=B.createContext(void 0),GNe=t=>{var{children:e}=t,[n]=B.useState("".concat(Oy("recharts"),"-clip")),r=UY();if(r==null)return null;var{x:i,y:s,width:o,height:a}=r;return B.createElement(WNe.Provider,{value:n},B.createElement("defs",null,B.createElement("clipPath",{id:n},B.createElement("rect",{x:i,y:s,height:a,width:o}))),e)};function Lp(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function XY(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function HNe(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return zNe(r,n)}function qNe(t,e,n){var r=n==="width",{x:i,y:s,width:o,height:a}=t;return e===1?{start:r?i:s,end:r?i+o:s+a}:{start:r?i+o:s+a,end:r?i:s}}function Uw(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var s=n();return t*(e-t*s/2-r)>=0&&t*(e+t*s/2-i)<=0}function KNe(t,e){return XY(t,e+1)}function XNe(t,e,n,r,i){for(var s=(r||[]).slice(),{start:o,end:a}=e,l=0,u=1,h=o,d=function(){var y=r?.[l];if(y===void 0)return{v:XY(r,u)};var b=l,x,w=()=>(x===void 0&&(x=n(y,b)),x),C=y.coordinate,E=l===0||Uw(t,C,w,h,a);E||(l=0,h=o,u+=1),E&&(h=C+t*(w()/2+i),l+=u)},p;u<=s.length;)if(p=d(),p)return p.v;return[]}function sW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sW(Object(n),!0).forEach(function(r){YNe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function YNe(t,e,n){return(e=QNe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function QNe(t){var e=ZNe(t,"string");return typeof e=="symbol"?e:e+""}function ZNe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function JNe(t,e,n,r,i){for(var s=(r||[]).slice(),o=s.length,{start:a}=e,{end:l}=e,u=function(p){var g=s[p],y,b=()=>(y===void 0&&(y=n(g,p)),y);if(p===o-1){var x=t*(g.coordinate+t*b()/2-l);s[p]=g=yi(yi({},g),{},{tickCoord:x>0?g.coordinate-x*t:g.coordinate})}else s[p]=g=yi(yi({},g),{},{tickCoord:g.coordinate});var w=Uw(t,g.tickCoord,b,a,l);w&&(l=g.tickCoord-t*(b()/2+i),s[p]=yi(yi({},g),{},{isShow:!0}))},h=o-1;h>=0;h--)u(h);return s}function eRe(t,e,n,r,i,s){var o=(r||[]).slice(),a=o.length,{start:l,end:u}=e;if(s){var h=r[a-1],d=n(h,a-1),p=t*(h.coordinate+t*d/2-u);o[a-1]=h=yi(yi({},h),{},{tickCoord:p>0?h.coordinate-p*t:h.coordinate});var g=Uw(t,h.tickCoord,()=>d,l,u);g&&(u=h.tickCoord-t*(d/2+i),o[a-1]=yi(yi({},h),{},{isShow:!0}))}for(var y=s?a-1:a,b=function(C){var E=o[C],_,A=()=>(_===void 0&&(_=n(E,C)),_);if(C===0){var P=t*(E.coordinate-t*A()/2-l);o[C]=E=yi(yi({},E),{},{tickCoord:P<0?E.coordinate-P*t:E.coordinate})}else o[C]=E=yi(yi({},E),{},{tickCoord:E.coordinate});var N=Uw(t,E.tickCoord,A,l,u);N&&(l=E.tickCoord+t*(A()/2+i),o[C]=yi(yi({},E),{},{isShow:!0}))},x=0;x<y;x++)b(x);return o}function oO(t,e,n){var{tick:r,ticks:i,viewBox:s,minTickGap:o,orientation:a,interval:l,tickFormatter:u,unit:h,angle:d}=t;if(!i||!i.length||!r)return[];if(Ye(l)||om.isSsr){var p;return(p=KNe(i,Ye(l)?l:0))!==null&&p!==void 0?p:[]}var g=[],y=a==="top"||a==="bottom"?"width":"height",b=h&&y==="width"?my(h,{fontSize:e,letterSpacing:n}):{width:0,height:0},x=(E,_)=>{var A=typeof u=="function"?u(E.value,_):E.value;return y==="width"?HNe(my(A,{fontSize:e,letterSpacing:n}),b,d):my(A,{fontSize:e,letterSpacing:n})[y]},w=i.length>=2?ls(i[1].coordinate-i[0].coordinate):1,C=qNe(s,w,y);return l==="equidistantPreserveStart"?XNe(w,C,x,i,o):(l==="preserveStart"||l==="preserveStartEnd"?g=eRe(w,C,x,i,o,l==="preserveStartEnd"):g=JNe(w,C,x,i,o),g.filter(E=>E.isShow))}var tRe=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:s=0}=t,o=0;if(e){Array.from(e).forEach(h=>{if(h){var d=h.getBoundingClientRect();d.width>o&&(o=d.width)}});var a=n?n.getBoundingClientRect().width:0,l=i+s,u=o+l+a+(n?r:0);return Math.round(u)}return 0},nRe=["axisLine","width","height","className","hide","ticks"],rRe=["viewBox"],iRe=["viewBox"];function pN(t,e){if(t==null)return{};var n,r,i=sRe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function sRe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function pf(){return pf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pf.apply(null,arguments)}function oW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oW(Object(n),!0).forEach(function(r){oRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oRe(t,e,n){return(e=aRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aRe(t){var e=lRe(t,"string");return typeof e=="symbol"?e:e+""}function lRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var aO={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"};function uRe(t){var{x:e,y:n,width:r,height:i,orientation:s,mirror:o,axisLine:a,otherSvgProps:l}=t;if(!a)return null;var u=wr(wr(wr({},l),Yl(a)),{},{fill:"none"});if(s==="top"||s==="bottom"){var h=+(s==="top"&&!o||s==="bottom"&&o);u=wr(wr({},u),{},{x1:e,y1:n+h*i,x2:e+r,y2:n+h*i})}else{var d=+(s==="left"&&!o||s==="right"&&o);u=wr(wr({},u),{},{x1:e+d*r,y1:n,x2:e+d*r,y2:n+i})}return B.createElement("line",pf({},u,{className:vn("recharts-cartesian-axis-line",_p(a,"className"))}))}function cRe(t,e,n,r,i,s,o,a,l){var u,h,d,p,g,y,b=a?-1:1,x=t.tickSize||o,w=Ye(t.tickCoord)?t.tickCoord:t.coordinate;switch(s){case"top":u=h=t.coordinate,p=n+ +!a*i,d=p-b*x,y=d-b*l,g=w;break;case"left":d=p=t.coordinate,h=e+ +!a*r,u=h-b*x,g=u-b*l,y=w;break;case"right":d=p=t.coordinate,h=e+ +a*r,u=h+b*x,g=u+b*l,y=w;break;default:u=h=t.coordinate,p=n+ +a*i,d=p+b*x,y=d+b*l,g=w;break}return{line:{x1:u,y1:d,x2:h,y2:p},tick:{x:g,y}}}function hRe(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function fRe(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function dRe(t){var{option:e,tickProps:n,value:r}=t,i,s=vn(n.className,"recharts-cartesian-axis-tick-value");if(B.isValidElement(e))i=B.cloneElement(e,wr(wr({},n),{},{className:s}));else if(typeof e=="function")i=e(wr(wr({},n),{},{className:s}));else{var o="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(o=vn(o,e?.className)),i=B.createElement(nO,pf({},n,{className:o}),r)}return i}function pRe(t){var{ticks:e=[],tick:n,tickLine:r,stroke:i,tickFormatter:s,unit:o,padding:a,tickTextProps:l,orientation:u,mirror:h,x:d,y:p,width:g,height:y,tickSize:b,tickMargin:x,fontSize:w,letterSpacing:C,getTicksConfig:E,events:_}=t,A=oO(wr(wr({},E),{},{ticks:e}),w,C),P=hRe(u,h),N=fRe(u,h),R=Yl(E),D=ND(n),O={};typeof r=="object"&&(O=r);var k=wr(wr({},R),{},{fill:"none"},O),F=A.map((L,q)=>{var{line:Y,tick:W}=cRe(L,d,p,g,y,u,b,h,x),H=wr(wr(wr(wr({textAnchor:P,verticalAnchor:N},R),{},{stroke:"none",fill:i},D),W),{},{index:q,payload:L,visibleTicksCount:A.length,tickFormatter:s,padding:a},l);return B.createElement(Nc,pf({className:"recharts-cartesian-axis-tick",key:"tick-".concat(L.value,"-").concat(L.coordinate,"-").concat(L.tickCoord)},JS(_,L,q)),r&&B.createElement("line",pf({},k,Y,{className:vn("recharts-cartesian-axis-tick-line",_p(r,"className"))})),n&&B.createElement(dRe,{option:n,tickProps:H,value:"".concat(typeof s=="function"?s(L.value,q):L.value).concat(o||"")}))});return F.length>0?B.createElement("g",{className:"recharts-cartesian-axis-ticks"},F):null}var mRe=B.forwardRef((t,e)=>{var{axisLine:n,width:r,height:i,className:s,hide:o,ticks:a}=t,l=pN(t,nRe),[u,h]=B.useState(""),[d,p]=B.useState(""),g=B.useRef(null);B.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var b;return tRe({ticks:g.current,label:(b=t.labelRef)===null||b===void 0?void 0:b.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var y=B.useCallback(b=>{if(b){var x=b.getElementsByClassName("recharts-cartesian-axis-tick-value");g.current=x;var w=x[0];if(w){var C=window.getComputedStyle(w),E=C.fontSize,_=C.letterSpacing;(E!==u||_!==d)&&(h(E),p(_))}}},[u,d]);return o||r!=null&&r<=0||i!=null&&i<=0?null:B.createElement(Nc,{className:vn("recharts-cartesian-axis",s),ref:y},B.createElement(uRe,{x:t.x,y:t.y,width:r,height:i,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:Yl(t)}),B.createElement(pRe,{ticks:a,tick:t.tick,tickLine:t.tickLine,stroke:t.stroke,tickFormatter:t.tickFormatter,unit:t.unit,padding:t.padding,tickTextProps:t.tickTextProps,orientation:t.orientation,mirror:t.mirror,x:t.x,y:t.y,width:t.width,height:t.height,tickSize:t.tickSize,tickMargin:t.tickMargin,fontSize:u,letterSpacing:d,getTicksConfig:t,events:l}),B.createElement(JAe,{x:t.x,y:t.y,width:t.width,height:t.height},B.createElement(uke,{label:t.label,labelRef:t.labelRef}),t.children))}),gRe=B.memo(mRe,(t,e)=>{var{viewBox:n}=t,r=pN(t,rRe),{viewBox:i}=e,s=pN(e,iRe);return Lp(n,i)&&Lp(r,s)}),lO=B.forwardRef((t,e)=>{var n=Co(t,aO);return B.createElement(gRe,pf({},n,{ref:e}))});lO.displayName="CartesianAxis";var yRe=["x1","y1","x2","y2","key"],vRe=["offset"],bRe=["xAxisId","yAxisId"],xRe=["xAxisId","yAxisId"];function aW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aW(Object(n),!0).forEach(function(r){wRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wRe(t,e,n){return(e=SRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function SRe(t){var e=TRe(t,"string");return typeof e=="symbol"?e:e+""}function TRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Hh(){return Hh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hh.apply(null,arguments)}function jw(t,e){if(t==null)return{};var n,r,i=CRe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function CRe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var ERe=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:r,y:i,width:s,height:o,ry:a}=t;return B.createElement("rect",{x:r,y:i,ry:a,width:s,height:o,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function YY(t,e){var n;if(B.isValidElement(t))n=B.cloneElement(t,e);else if(typeof t=="function")n=t(e);else{var{x1:r,y1:i,x2:s,y2:o,key:a}=e,l=jw(e,yRe),u=Yl(l),{offset:h}=u,d=jw(u,vRe);n=B.createElement("line",Hh({},d,{x1:r,y1:i,x2:s,y2:o,fill:"none",key:a}))}return n}function IRe(t){var{x:e,width:n,horizontal:r=!0,horizontalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:o}=t,a=jw(t,bRe),l=i.map((u,h)=>{var d=wi(wi({},a),{},{x1:e,y1:u,x2:e+n,y2:u,key:"line-".concat(h),index:h});return YY(r,d)});return B.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function _Re(t){var{y:e,height:n,vertical:r=!0,verticalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:o}=t,a=jw(t,xRe),l=i.map((u,h)=>{var d=wi(wi({},a),{},{x1:u,y1:e,x2:u,y2:e+n,key:"line-".concat(h),index:h});return YY(r,d)});return B.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function ARe(t){var{horizontalFill:e,fillOpacity:n,x:r,y:i,width:s,height:o,horizontalPoints:a,horizontal:l=!0}=t;if(!l||!e||!e.length)return null;var u=a.map(d=>Math.round(d+i-i)).sort((d,p)=>d-p);i!==u[0]&&u.unshift(0);var h=u.map((d,p)=>{var g=!u[p+1],y=g?i+o-d:u[p+1]-d;if(y<=0)return null;var b=p%e.length;return B.createElement("rect",{key:"react-".concat(p),y:d,x:r,height:y,width:s,stroke:"none",fill:e[b],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return B.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function kRe(t){var{vertical:e=!0,verticalFill:n,fillOpacity:r,x:i,y:s,width:o,height:a,verticalPoints:l}=t;if(!e||!n||!n.length)return null;var u=l.map(d=>Math.round(d+i-i)).sort((d,p)=>d-p);i!==u[0]&&u.unshift(0);var h=u.map((d,p)=>{var g=!u[p+1],y=g?i+o-d:u[p+1]-d;if(y<=0)return null;var b=p%n.length;return B.createElement("rect",{key:"react-".concat(p),x:d,y:s,width:y,height:a,stroke:"none",fill:n[b],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return B.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var NRe=(t,e)=>{var{xAxis:n,width:r,height:i,offset:s}=t;return UK(oO(wi(wi(wi({},aO),n),{},{ticks:jK(n),viewBox:{x:0,y:0,width:r,height:i}})),s.left,s.left+s.width,e)},RRe=(t,e)=>{var{yAxis:n,width:r,height:i,offset:s}=t;return UK(oO(wi(wi(wi({},aO),n),{},{ticks:jK(n),viewBox:{x:0,y:0,width:r,height:i}})),s.top,s.top+s.height,e)},DRe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function mN(t){var e=ZD(),n=JD(),r=XK(),i=wi(wi({},Co(t,DRe)),{},{x:Ye(t.x)?t.x:r.left,y:Ye(t.y)?t.y:r.top,width:Ye(t.width)?t.width:r.width,height:Ye(t.height)?t.height:r.height}),{xAxisId:s,yAxisId:o,x:a,y:l,width:u,height:h,syncWithTicks:d,horizontalValues:p,verticalValues:g}=i,y=Ms(),b=Je(D=>c6(D,"xAxis",s,y)),x=Je(D=>c6(D,"yAxis",o,y));if(!Ye(u)||u<=0||!Ye(h)||h<=0||!Ye(a)||a!==+a||!Ye(l)||l!==+l)return null;var w=i.verticalCoordinatesGenerator||NRe,C=i.horizontalCoordinatesGenerator||RRe,{horizontalPoints:E,verticalPoints:_}=i;if((!E||!E.length)&&typeof C=="function"){var A=p&&p.length,P=C({yAxis:x?wi(wi({},x),{},{ticks:A?p:x.ticks}):void 0,width:e,height:n,offset:r},A?!0:d);ww(Array.isArray(P),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof P,"]")),Array.isArray(P)&&(E=P)}if((!_||!_.length)&&typeof w=="function"){var N=g&&g.length,R=w({xAxis:b?wi(wi({},b),{},{ticks:N?g:b.ticks}):void 0,width:e,height:n,offset:r},N?!0:d);ww(Array.isArray(R),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof R,"]")),Array.isArray(R)&&(_=R)}return B.createElement("g",{className:"recharts-cartesian-grid"},B.createElement(ERe,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),B.createElement(ARe,Hh({},i,{horizontalPoints:E})),B.createElement(kRe,Hh({},i,{verticalPoints:_})),B.createElement(IRe,Hh({},i,{offset:r,horizontalPoints:E,xAxis:b,yAxis:x})),B.createElement(_Re,Hh({},i,{offset:r,verticalPoints:_,xAxis:b,yAxis:x})))}mN.displayName="CartesianGrid";var $Re=["dangerouslySetInnerHTML","ticks"],ORe=["id"],PRe=["domain"],MRe=["domain"];function gN(){return gN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gN.apply(null,arguments)}function Ww(t,e){if(t==null)return{};var n,r,i=LRe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function LRe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function FRe(t){var e=Zn();return B.useLayoutEffect(()=>(e(d2e(t)),()=>{e(p2e(t))}),[t,e]),null}var VRe=t=>{var{xAxisId:e,className:n}=t,r=Je(YD),i=Ms(),s="xAxis",o=Je(x=>dm(x,s,e,i)),a=Je(x=>qX(x,s,e,i)),l=Je(x=>jX(x,e)),u=Je(x=>$Ie(x,e)),h=Je(x=>fX(x,e));if(l==null||u==null||h==null)return null;var{dangerouslySetInnerHTML:d,ticks:p}=t,g=Ww(t,$Re),{id:y}=h,b=Ww(h,ORe);return B.createElement(lO,gN({},g,b,{scale:o,x:u.x,y:u.y,width:l.width,height:l.height,className:vn("recharts-".concat(s," ").concat(s),n),viewBox:r,ticks:a}))},BRe={allowDataOverflow:Cs.allowDataOverflow,allowDecimals:Cs.allowDecimals,allowDuplicatedCategory:Cs.allowDuplicatedCategory,height:Cs.height,hide:!1,mirror:Cs.mirror,orientation:Cs.orientation,padding:Cs.padding,reversed:Cs.reversed,scale:Cs.scale,tickCount:Cs.tickCount,type:Cs.type,xAxisId:0},zRe=t=>{var e,n,r,i,s,o=Co(t,BRe);return B.createElement(B.Fragment,null,B.createElement(FRe,{interval:(e=o.interval)!==null&&e!==void 0?e:"preserveEnd",id:o.xAxisId,scale:o.scale,type:o.type,padding:o.padding,allowDataOverflow:o.allowDataOverflow,domain:o.domain,dataKey:o.dataKey,allowDuplicatedCategory:o.allowDuplicatedCategory,allowDecimals:o.allowDecimals,tickCount:o.tickCount,includeHidden:(n=o.includeHidden)!==null&&n!==void 0?n:!1,reversed:o.reversed,ticks:o.ticks,height:o.height,orientation:o.orientation,mirror:o.mirror,hide:o.hide,unit:o.unit,name:o.name,angle:(r=o.angle)!==null&&r!==void 0?r:0,minTickGap:(i=o.minTickGap)!==null&&i!==void 0?i:5,tick:(s=o.tick)!==null&&s!==void 0?s:!0,tickFormatter:o.tickFormatter}),B.createElement(VRe,o))},URe=(t,e)=>{var{domain:n}=t,r=Ww(t,PRe),{domain:i}=e,s=Ww(e,MRe);return Lp(r,s)?Array.isArray(n)&&n.length===2&&Array.isArray(i)&&i.length===2?n[0]===i[0]&&n[1]===i[1]:Lp({domain:n},{domain:i}):!1},yN=B.memo(zRe,URe);yN.displayName="XAxis";var jRe=["dangerouslySetInnerHTML","ticks"],WRe=["id"],GRe=["domain"],HRe=["domain"];function vN(){return vN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vN.apply(null,arguments)}function Gw(t,e){if(t==null)return{};var n,r,i=qRe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function qRe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function KRe(t){var e=Zn();return B.useLayoutEffect(()=>(e(m2e(t)),()=>{e(g2e(t))}),[t,e]),null}var XRe=t=>{var{yAxisId:e,className:n,width:r,label:i}=t,s=B.useRef(null),o=B.useRef(null),a=Je(YD),l=Ms(),u=Zn(),h="yAxis",d=Je(A=>dm(A,h,e,l)),p=Je(A=>WX(A,e)),g=Je(A=>PIe(A,e)),y=Je(A=>qX(A,h,e,l)),b=Je(A=>dX(A,e));if(B.useLayoutEffect(()=>{if(!(r!=="auto"||!p||rO(i)||B.isValidElement(i)||b==null)){var A=s.current;if(A){var P=A.getCalculatedWidth();Math.round(p.width)!==Math.round(P)&&u(y2e({id:e,width:P}))}}},[y,p,u,i,e,r,b]),p==null||g==null||b==null)return null;var{dangerouslySetInnerHTML:x,ticks:w}=t,C=Gw(t,jRe),{id:E}=b,_=Gw(b,WRe);return B.createElement(lO,vN({},C,_,{ref:s,labelRef:o,scale:d,x:g.x,y:g.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:p.width,height:p.height,className:vn("recharts-".concat(h," ").concat(h),n),viewBox:a,ticks:y}))},YRe={allowDataOverflow:Es.allowDataOverflow,allowDecimals:Es.allowDecimals,allowDuplicatedCategory:Es.allowDuplicatedCategory,hide:!1,mirror:Es.mirror,orientation:Es.orientation,padding:Es.padding,reversed:Es.reversed,scale:Es.scale,tickCount:Es.tickCount,type:Es.type,width:Es.width,yAxisId:0},QRe=t=>{var e,n,r,i,s,o=Co(t,YRe);return B.createElement(B.Fragment,null,B.createElement(KRe,{interval:(e=o.interval)!==null&&e!==void 0?e:"preserveEnd",id:o.yAxisId,scale:o.scale,type:o.type,domain:o.domain,allowDataOverflow:o.allowDataOverflow,dataKey:o.dataKey,allowDuplicatedCategory:o.allowDuplicatedCategory,allowDecimals:o.allowDecimals,tickCount:o.tickCount,padding:o.padding,includeHidden:(n=o.includeHidden)!==null&&n!==void 0?n:!1,reversed:o.reversed,ticks:o.ticks,width:o.width,orientation:o.orientation,mirror:o.mirror,hide:o.hide,unit:o.unit,name:o.name,angle:(r=o.angle)!==null&&r!==void 0?r:0,minTickGap:(i=o.minTickGap)!==null&&i!==void 0?i:5,tick:(s=o.tick)!==null&&s!==void 0?s:!0,tickFormatter:o.tickFormatter}),B.createElement(XRe,o))},ZRe=(t,e)=>{var{domain:n}=t,r=Gw(t,GRe),{domain:i}=e,s=Gw(e,HRe);return Lp(r,s)?Array.isArray(n)&&n.length===2&&Array.isArray(i)&&i.length===2?n[0]===i[0]&&n[1]===i[1]:Lp({domain:n},{domain:i}):!1},bN=B.memo(QRe,ZRe);bN.displayName="YAxis";var uk={exports:{}},ck={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lW;function JRe(){if(lW)return ck;lW=1;var t=Xp();function e(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,i=t.useRef,s=t.useEffect,o=t.useMemo,a=t.useDebugValue;return ck.useSyncExternalStoreWithSelector=function(l,u,h,d,p){var g=i(null);if(g.current===null){var y={hasValue:!1,value:null};g.current=y}else y=g.current;g=o(function(){function x(A){if(!w){if(w=!0,C=A,A=d(A),p!==void 0&&y.hasValue){var P=y.value;if(p(P,A))return E=P}return E=A}if(P=E,n(C,A))return P;var N=d(A);return p!==void 0&&p(P,N)?(C=A,P):(C=A,E=N)}var w=!1,C,E,_=h===void 0?null:h;return[function(){return x(u())},_===null?void 0:function(){return x(_())}]},[u,h,d,p]);var b=r(l,g[0],g[1]);return s(function(){y.hasValue=!0,y.value=b},[b]),a(b),b},ck}var uW;function eDe(){return uW||(uW=1,uk.exports=JRe()),uk.exports}eDe();function tDe(t){t()}function nDe(){let t=null,e=null;return{clear(){t=null,e=null},notify(){tDe(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var cW={notify(){},get:()=>[]};function rDe(t,e){let n,r=cW,i=0,s=!1;function o(b){h();const x=r.subscribe(b);let w=!1;return()=>{w||(w=!0,x(),d())}}function a(){r.notify()}function l(){y.onStateChange&&y.onStateChange()}function u(){return s}function h(){i++,n||(n=t.subscribe(l),r=nDe())}function d(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=cW)}function p(){s||(s=!0,h())}function g(){s&&(s=!1,d())}const y={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:u,trySubscribe:p,tryUnsubscribe:g,getListeners:()=>r};return y}var iDe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",sDe=iDe(),oDe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",aDe=oDe(),lDe=()=>sDe||aDe?B.useLayoutEffect:B.useEffect,uDe=lDe(),cDe=Symbol.for("react-redux-context"),hDe=typeof globalThis<"u"?globalThis:{};function fDe(){if(!B.createContext)return{};const t=hDe[cDe]??=new Map;let e=t.get(B.createContext);return e||(e=B.createContext(null),t.set(B.createContext,e)),e}var dDe=fDe();function pDe(t){const{children:e,context:n,serverState:r,store:i}=t,s=B.useMemo(()=>{const l=rDe(i);return{store:i,subscription:l,getServerState:r?()=>r:void 0}},[i,r]),o=B.useMemo(()=>i.getState(),[i]);uDe(()=>{const{subscription:l}=s;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),o!==i.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[s,o]);const a=n||dDe;return B.createElement(a.Provider,{value:s},e)}var mDe=pDe,gDe=(t,e)=>e,uO=Te([gDe,nn,uX,kr,cY,hu,V_e,Br],W_e),cO=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},QY=xo("mouseClick"),ZY=xv();ZY.startListening({actionCreator:QY,effect:(t,e)=>{var n=t.payload,r=uO(e.getState(),cO(n));r?.activeIndex!=null&&e.dispatch(KIe({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var xN=xo("mouseMove"),JY=xv();JY.startListening({actionCreator:xN,effect:(t,e)=>{var n=t.payload,r=e.getState(),i=q$(r,r.tooltip.settings.shared),s=uO(r,cO(n));i==="axis"&&(s?.activeIndex!=null?e.dispatch(tY({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):e.dispatch(eY()))}});var hW={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},eQ=Ps({name:"rootProps",initialState:hW,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:hW.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className}}}),yDe=eQ.reducer,{updateOptions:vDe}=eQ.actions,tQ=Ps({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:dnt}=tQ.actions,bDe=tQ.reducer,nQ=xo("keyDown"),rQ=xo("focus"),hO=xv();hO.startListening({actionCreator:nQ,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,s=t.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var o=Number(K$(i,mm(n))),a=hu(n);if(s==="Enter"){var l=Lw(n,"axis","hover",String(i.index));e.dispatch(lN({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:l}));return}var u=VIe(n),h=u==="left-to-right"?1:-1,d=s==="ArrowRight"?1:-1,p=o+d*h;if(!(a==null||p>=a.length||p<0)){var g=Lw(n,"axis","hover",String(p));e.dispatch(lN({active:!0,activeIndex:p.toString(),activeDataKey:void 0,activeCoordinate:g}))}}}}});hO.startListening({actionCreator:rQ,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var s="0",o=Lw(n,"axis","hover",String(s));e.dispatch(lN({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:o}))}}}});var io=xo("externalEvent"),iQ=xv();iQ.startListening({actionCreator:io,effect:(t,e)=>{if(t.payload.handler!=null){var n=e.getState(),r={activeCoordinate:N_e(n),activeDataKey:pY(n),activeIndex:Mp(n),activeLabel:dY(n),activeTooltipIndex:Mp(n),isTooltipActive:R_e(n)};t.payload.handler(r,t.payload.reactEvent)}}});var xDe=Te([pm],t=>t.tooltipItemPayloads),wDe=Te([xDe,Nv,(t,e,n)=>e,(t,e,n)=>n],(t,e,n,r)=>{var i=t.find(a=>a.settings.dataKey===r);if(i!=null){var{positions:s}=i;if(s!=null){var o=e(s,n);return o}}}),sQ=xo("touchMove"),oQ=xv();oQ.startListening({actionCreator:sQ,effect:(t,e)=>{var n=t.payload,r=e.getState(),i=q$(r,r.tooltip.settings.shared);if(i==="axis"){var s=uO(r,cO({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));s?.activeIndex!=null&&e.dispatch(tY({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(i==="item"){var o,a=n.touches[0],l=document.elementFromPoint(a.clientX,a.clientY);if(!l||!l.getAttribute)return;var u=l.getAttribute(U1e),h=(o=l.getAttribute(j1e))!==null&&o!==void 0?o:void 0,d=wDe(e.getState(),u,h);e.dispatch(JX({activeDataKey:h,activeIndex:u,activeCoordinate:d}))}}});var SDe=gK({brush:MNe,cartesianAxis:v2e,chartData:aAe,errorBars:D2e,graphicalItems:a2e,layout:h1e,legend:Swe,options:nAe,polarAxis:Eke,polarOptions:bDe,referenceElements:jNe,rootProps:yDe,tooltip:XIe}),TDe=function(e){return Mxe({reducer:SDe,preloadedState:e,middleware:n=>n({serializableCheck:!1}).concat([ZY.middleware,JY.middleware,hO.middleware,iQ.middleware,oQ.middleware]),enhancers:n=>{var r=n;return typeof n=="function"&&(r=n()),r.concat(AK({type:"raf"}))},devTools:om.devToolsEnabled})};function CDe(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,i=Ms(),s=B.useRef(null);if(i)return n;s.current==null&&(s.current=TDe(e));var o=jD;return B.createElement(mDe,{context:o,store:s.current},n)}function EDe(t){var{layout:e,margin:n}=t,r=Zn(),i=Ms();return B.useEffect(()=>{i||(r(l1e(e)),r(a1e(n)))},[r,i,e,n]),null}function IDe(t){var e=Zn();return B.useEffect(()=>{e(vDe(t))},[e,t]),null}var _De=["children"];function ADe(t,e){if(t==null)return{};var n,r,i=kDe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function kDe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Hw(){return Hw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hw.apply(null,arguments)}var NDe={width:"100%",height:"100%",display:"block"},RDe=B.forwardRef((t,e)=>{var n=ZD(),r=JD(),i=QK();if(!kp(n)||!kp(r))return null;var{children:s,otherAttributes:o,title:a,desc:l}=t,u,h;return typeof o.tabIndex=="number"?u=o.tabIndex:u=i?0:void 0,typeof o.role=="string"?h=o.role:h=i?"application":void 0,B.createElement(RD,Hw({},o,{title:a,desc:l,role:h,tabIndex:u,width:n,height:r,style:NDe,ref:e}),s)}),DDe=t=>{var{children:e}=t,n=Je(uT);if(!n)return null;var{width:r,height:i,y:s,x:o}=n;return B.createElement(RD,{width:r,height:i,x:o,y:s},e)},fW=B.forwardRef((t,e)=>{var{children:n}=t,r=ADe(t,_De),i=Ms();return i?B.createElement(DDe,null,n):B.createElement(RDe,Hw({ref:e},r),n)});function $De(){var t=Zn(),[e,n]=B.useState(null),r=Je(z1e);return B.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),s=i.width/e.offsetWidth;_i(s)&&s!==r&&t(c1e(s))}},[e,t,r]),n}function dW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ODe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dW(Object(n),!0).forEach(function(r){PDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function PDe(t,e,n){return(e=MDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MDe(t){var e=LDe(t,"string");return typeof e=="symbol"?e:e+""}function LDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mf(){return mf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mf.apply(null,arguments)}var FDe=()=>(gAe(),null);function qw(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var VDe=B.forwardRef((t,e)=>{var n,r,i=B.useRef(null),[s,o]=B.useState({containerWidth:qw((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:qw((r=t.style)===null||r===void 0?void 0:r.height)}),a=B.useCallback((u,h)=>{o(d=>{var p=Math.round(u),g=Math.round(h);return d.containerWidth===p&&d.containerHeight===g?d:{containerWidth:p,containerHeight:g}})},[]),l=B.useCallback(u=>{if(typeof e=="function"&&e(u),u!=null){var{width:h,height:d}=u.getBoundingClientRect();a(h,d);var p=y=>{var{width:b,height:x}=y[0].contentRect;a(b,x)},g=new ResizeObserver(p);g.observe(u),i.current=g}},[e,a]);return B.useEffect(()=>()=>{var u=i.current;u?.disconnect()},[a]),B.createElement(B.Fragment,null,B.createElement(hT,{width:s.containerWidth,height:s.containerHeight}),B.createElement("div",mf({ref:l},t)))}),BDe=B.forwardRef((t,e)=>{var{width:n,height:r}=t,[i,s]=B.useState({containerWidth:qw(n),containerHeight:qw(r)}),o=B.useCallback((l,u)=>{s(h=>{var d=Math.round(l),p=Math.round(u);return h.containerWidth===d&&h.containerHeight===p?h:{containerWidth:d,containerHeight:p}})},[]),a=B.useCallback(l=>{if(typeof e=="function"&&e(l),l!=null){var{width:u,height:h}=l.getBoundingClientRect();o(u,h)}},[e,o]);return B.createElement(B.Fragment,null,B.createElement(hT,{width:i.containerWidth,height:i.containerHeight}),B.createElement("div",mf({ref:a},t)))}),zDe=B.forwardRef((t,e)=>{var{width:n,height:r}=t;return B.createElement(B.Fragment,null,B.createElement(hT,{width:n,height:r}),B.createElement("div",mf({ref:e},t)))}),UDe=B.forwardRef((t,e)=>{var{width:n,height:r}=t;return Ql(n)||Ql(r)?B.createElement(BDe,mf({},t,{ref:e})):B.createElement(zDe,mf({},t,{ref:e}))});function jDe(t){return t===!0?VDe:UDe}var WDe=B.forwardRef((t,e)=>{var{children:n,className:r,height:i,onClick:s,onContextMenu:o,onDoubleClick:a,onMouseDown:l,onMouseEnter:u,onMouseLeave:h,onMouseMove:d,onMouseUp:p,onTouchEnd:g,onTouchMove:y,onTouchStart:b,style:x,width:w,responsive:C,dispatchTouchEvents:E=!0}=t,_=B.useRef(null),A=Zn(),[P,N]=B.useState(null),[R,D]=B.useState(null),O=$De(),k=QD(),F=k?.width>0?k.width:w,L=k?.height>0?k.height:i,q=B.useCallback(ue=>{O(ue),typeof e=="function"&&e(ue),N(ue),D(ue),ue!=null&&(_.current=ue)},[O,e,N,D]),Y=B.useCallback(ue=>{A(QY(ue)),A(io({handler:s,reactEvent:ue}))},[A,s]),W=B.useCallback(ue=>{A(xN(ue)),A(io({handler:u,reactEvent:ue}))},[A,u]),H=B.useCallback(ue=>{A(eY()),A(io({handler:h,reactEvent:ue}))},[A,h]),X=B.useCallback(ue=>{A(xN(ue)),A(io({handler:d,reactEvent:ue}))},[A,d]),ee=B.useCallback(()=>{A(rQ())},[A]),ce=B.useCallback(ue=>{A(nQ(ue.key))},[A]),j=B.useCallback(ue=>{A(io({handler:o,reactEvent:ue}))},[A,o]),Q=B.useCallback(ue=>{A(io({handler:a,reactEvent:ue}))},[A,a]),ie=B.useCallback(ue=>{A(io({handler:l,reactEvent:ue}))},[A,l]),me=B.useCallback(ue=>{A(io({handler:p,reactEvent:ue}))},[A,p]),ve=B.useCallback(ue=>{A(io({handler:b,reactEvent:ue}))},[A,b]),_e=B.useCallback(ue=>{E&&A(sQ(ue)),A(io({handler:y,reactEvent:ue}))},[A,E,y]),De=B.useCallback(ue=>{A(io({handler:g,reactEvent:ue}))},[A,g]),Fe=jDe(C);return B.createElement(xY.Provider,{value:P},B.createElement(P8.Provider,{value:R},B.createElement(Fe,{width:F??x?.width,height:L??x?.height,className:vn("recharts-wrapper",r),style:ODe({position:"relative",cursor:"default",width:F,height:L},x),onClick:Y,onContextMenu:j,onDoubleClick:Q,onFocus:ee,onKeyDown:ce,onMouseDown:ie,onMouseEnter:W,onMouseLeave:H,onMouseMove:X,onMouseUp:me,onTouchEnd:De,onTouchMove:_e,onTouchStart:ve,ref:q},B.createElement(FDe,null),n)))}),GDe=["width","height","responsive","children","className","style","compact","title","desc"];function HDe(t,e){if(t==null)return{};var n,r,i=qDe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function qDe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var KDe=B.forwardRef((t,e)=>{var{width:n,height:r,responsive:i,children:s,className:o,style:a,compact:l,title:u,desc:h}=t,d=HDe(t,GDe),p=Yl(d);return l?B.createElement(B.Fragment,null,B.createElement(hT,{width:n,height:r}),B.createElement(fW,{otherAttributes:p,title:u,desc:h},s)):B.createElement(WDe,{className:o,style:a,width:n,height:r,responsive:i,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},B.createElement(fW,{otherAttributes:p,title:u,desc:h,ref:e},B.createElement(GNe,null,s)))});function wN(){return wN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wN.apply(null,arguments)}var XDe={top:5,right:5,bottom:5,left:5},YDe={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:XDe,reverseStackOrder:!1,syncMethod:"index",responsive:!1},QDe=B.forwardRef(function(e,n){var r,i=Co(e.categoricalChartProps,YDe),{chartName:s,defaultTooltipEventType:o,validateTooltipEventTypes:a,tooltipPayloadSearcher:l,categoricalChartProps:u}=e,h={chartName:s,defaultTooltipEventType:o,validateTooltipEventTypes:a,tooltipPayloadSearcher:l,eventEmitter:void 0};return B.createElement(CDe,{preloadedState:{options:h},reduxStoreName:(r=u.id)!==null&&r!==void 0?r:s},B.createElement(PNe,{chartData:u.data}),B.createElement(EDe,{layout:i.layout,margin:i.margin}),B.createElement(IDe,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),B.createElement(KDe,wN({},i,{ref:n})))}),ZDe=["axis","item"],pW=B.forwardRef((t,e)=>B.createElement(QDe,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:ZDe,tooltipPayloadSearcher:eAe,categoricalChartProps:t,ref:e}));const hk=[{id:"aluminio",nombre:"Aluminio",tipo:"metal"},{id:"carton",nombre:"Cartn",tipo:"papel"},{id:"papel",nombre:"Papel",tipo:"papel"},{id:"chatarra",nombre:"Chatarra / Hojalata",tipo:"metal"},{id:"nylon",nombre:"Nylon",tipo:"plastico"},{id:"plasticos",nombre:"Plsticos",tipo:"plastico"},{id:"telgopor",nombre:"Telgopor",tipo:"plastico"},{id:"tetra",nombre:"Tetra",tipo:"compuesto"},{id:"vidrio",nombre:"Vidrio",tipo:"vidrio"}],JDe={aportes:"lareserva_aportes"};function e$e(t,e){try{const n=localStorage.getItem(t);return n?JSON.parse(n):e}catch{return e}}function t$e(t){const e=[];for(const n of t.items)["plasticos","nylon","tetra"].includes(n.materialId)&&!n.limpio&&e.push("Record enjuagar plsticos/nylon/tetra para mejorar la calidad."),n.materialId==="carton"&&n.humedo&&e.push("El cartn hmedo no se recupera: mantenelo seco."),n.materialId==="vidrio"&&n.roto&&e.push("Si el vidrio est roto, envolvelo para evitar riesgos.");return Array.from(new Set(e))}function n$e(){const t=hk.map(u=>({materialId:u.id,cantidad:0,unidad:"kg/unidad",limpio:!0,humedo:!1,roto:!1})),[e,n]=B.useState({alias:"",direccion:"",notas:"",observaciones:"",items:t}),[r,i]=B.useState([]);e$e(JDe.aportes,[]);const s=u=>n(h=>({...h,...u})),o=(u,h)=>n(d=>({...d,items:d.items.map(p=>p.materialId===u?{...p,...h}:p)}));function a(){const u={...e,id:crypto.randomUUID(),fecha:new Date().toISOString(),items:e.items.filter(h=>h.cantidad>0)};i(t$e(u))}async function l(){const u={...e};try{const h=await Hve(u);n({alias:"",direccion:"",notas:"",observaciones:"",items:hk.map(d=>({materialId:d.id,cantidad:0,unidad:"kg/unidad",limpio:!0,humedo:!1,roto:!1}))}),i([]),alert(`Gracias! Aporte guardado en Firebase. ID: ${h}`)}catch(h){console.error(h),alert(" No se pudo guardar en Firebase. Revis consola y reglas.")}}return se.jsxs("section",{className:"py-10",children:[se.jsx("h2",{className:"text-xl font-bold mb-2",children:"Cargar aporte vecinal"}),se.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Indic cantidades aproximadas (kg o unidades). Los datos sern usados para estadsticas comunitarias."}),se.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:hk.map(u=>{const h=e.items.find(d=>d.materialId===u.id)||{materialId:u.id,cantidad:0,limpio:!0,humedo:!1,roto:!1};return se.jsxs("div",{className:"rounded-2xl border bg-white p-4 space-y-3",children:[se.jsx("div",{className:"font-medium",children:u.nombre}),se.jsxs("div",{className:"flex items-center gap-2",children:[se.jsx("input",{type:"number",min:0,value:h.cantidad,onChange:d=>o(u.id,{cantidad:Number(d.target.value||0)}),className:"w-24 rounded-lg border px-2 py-1"}),se.jsx("span",{className:"text-sm text-slate-500",children:"kg/unid"})]}),se.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[se.jsx("input",{type:"checkbox",checked:h.limpio,onChange:d=>o(u.id,{limpio:d.target.checked})}),"Limpio"]}),u.id==="carton"&&se.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[se.jsx("input",{type:"checkbox",checked:h.humedo,onChange:d=>o(u.id,{humedo:d.target.checked})}),"Hmedo?"]}),u.id==="vidrio"&&se.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[se.jsx("input",{type:"checkbox",checked:h.roto,onChange:d=>o(u.id,{roto:d.target.checked})}),"Roto?"]})]},u.id)})}),se.jsxs("div",{className:"mt-6 grid md:grid-cols-2 gap-4",children:[se.jsxs("div",{className:"rounded-2xl border bg-white p-4",children:[se.jsx("label",{className:"text-sm font-medium",children:"Alias (opcional)"}),se.jsx("input",{value:e.alias,onChange:u=>s({alias:u.target.value}),className:"mt-1 w-full rounded-lg border px-3 py-2",placeholder:"Calle / Manzana / Alias"})]}),se.jsxs("div",{className:"rounded-2xl border bg-white p-4",children:[se.jsx("label",{className:"text-sm font-medium",children:"Notas"}),se.jsx("textarea",{value:e.notas,onChange:u=>s({notas:u.target.value}),className:"mt-1 w-full rounded-lg border px-3 py-2",rows:3,placeholder:"Observaciones breves"})]})]}),se.jsxs("div",{className:"flex flex-wrap gap-3 mt-5",children:[se.jsx("button",{onClick:a,className:"px-4 py-2 rounded-xl bg-emerald-50 border border-emerald-200",children:"Previsualizar sugerencias"}),se.jsx("button",{onClick:l,className:"px-4 py-2 rounded-xl bg-emerald-600 text-white",children:"Guardar aporte"})]}),r.length>0&&se.jsxs("div",{className:"mt-6 rounded-2xl border bg-white p-4",children:[se.jsx("div",{className:"font-medium mb-2",children:"Sugerencias educativas"}),se.jsx("ul",{className:"list-disc list-inside text-sm text-slate-700 space-y-1",children:r.map((u,h)=>se.jsx("li",{children:u},h))})]})]})}function r$e(){const t=load(LS_KEYS.aportes,[]),e=load(LS_KEYS.reportes,[]),[n,r]=useState("");function i(){if(n!=="TallerUNO"){alert("Acceso restringido: clave incorrecta");return}exportCSV(`aportes_${new Date().toISOString().slice(0,10)}`,t.flatMap(s=>s.items.map(o=>({aporte_id:s.id,fecha:s.fecha,vecino:s.vecino,material:o.materialId,cantidad:o.cantidad,limpio:o.limpio,humedo:!!o.humedo,roto:!!o.roto,notas:s.notas||""})))),exportCSV(`reportes_${new Date().toISOString().slice(0,10)}`,e.map(s=>({id:s.id,fecha:s.fecha,porcentajeNoReciclable:s.porcentajeNoReciclable,observaciones:s.observaciones||""})))}return se.jsxs("section",{className:"py-10",children:[se.jsx("h2",{className:"text-xl font-bold mb-2",children:"Administracin (Taller UNO)"}),se.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Descarg plantillas CSV con los datos comunitarios para anlisis en Excel."}),se.jsxs("div",{className:"grid md:grid-cols-3 gap-4 items-end",children:[se.jsxs("div",{className:"md:col-span-2 rounded-2xl border bg-white p-4",children:[se.jsx("label",{className:"text-sm font-medium",children:"Clave de acceso"}),se.jsx("input",{value:n,onChange:s=>r(s.target.value),className:"mt-1 w-full rounded-lg border px-3 py-2",placeholder:"Ingres la clave"})]}),se.jsxs("button",{onClick:i,className:"px-4 py-2 rounded-xl bg-emerald-600 text-white flex items-center gap-2",children:[se.jsx(FolderDown,{className:"w-4 h-4"})," Exportar CSV"]})]}),se.jsx("div",{className:"mt-6 rounded-2xl border bg-white p-4 text-sm text-slate-600",children:se.jsx("p",{children:"Nota: la app guarda datos localmente (localStorage) solo con fines demostrativos. En una versin productiva, los aportes se registraran en una base de datos y los recordatorios se enviaran por un servicio de mensajera (p. ej., WhatsApp/Facebook/Email)."})})]})}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i$e=1e-7,s$e=1e-4;class aQ{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class fO{refCount(e){return rs("refCount")}incRef(e){return rs("incRef")}timerAvailable(){return!0}time(e){return rs("time")}read(e){return rs("read")}readSync(e){return rs("readSync")}readToGPU(e,n){return rs("readToGPU")}numDataIds(){return rs("numDataIds")}disposeData(e,n){return rs("disposeData")}write(e,n,r){return rs("write")}move(e,n,r,i,s){return rs("move")}createTensorFromGPUData(e,n,r){return rs("createTensorFromGPUData")}memory(){return rs("memory")}floatPrecision(){return rs("floatPrecision")}epsilon(){return this.floatPrecision()===32?i$e:s$e}dispose(){return rs("dispose")}}function rs(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o$e(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,qd(t,e,n)}function gf(t,e,n){return Math.max(t,Math.min(e,n))}function dO(t){return t%2===0?t:t+1}function qd(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function a$e(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function U(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function pO(t,e,n=""){U(Wt(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function mO(t){U(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function Se(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function Wt(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Fp(t){return t%1===0}function SN(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function dp(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function mW(t,e=i=>0,n,r){return new Promise((i,s)=>{let o=0;const a=()=>{if(t()){i();return}o++;const l=e(o);if(n!=null&&o>=n){s();return}r!=null?r(a,l):setTimeout(a,l)};a()})}function lQ(t,e){let n=1,r=-1;for(let s=0;s<t.length;++s)if(t[s]>=0)n*=t[s];else if(t[s]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${s}`);r=s}else if(t[s]<0)throw Error(`Shapes can not be < 0. Found ${t[s]} at dim ${s}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const i=t.slice();return i[r]=e/n,i}function wt(t,e){const n=e.length;return t=t==null?e.map((r,i)=>i):[].concat(t),U(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),U(t.every(r=>Fp(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function Uc(t,e){const n=[],r=[],i=e!=null&&Array.isArray(e)&&e.length===0,s=e==null||i?null:wt(e,t).sort();let o=0;for(let a=0;a<t.length;++a){if(s!=null){if(s[o]===a&&t[a]!==1)throw new Error(`Can't squeeze axis ${a} since its dim '${t[a]}' is not 1`);(s[o]==null||s[o]>a)&&t[a]===1&&(n.push(t[a]),r.push(a)),s[o]<=a&&o++}t[a]!==1&&(n.push(t[a]),r.push(a))}return{newShape:n,keptDims:r}}function li(t,e){return Ln(t,e)}function Ln(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function l$e(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function u$e(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function uQ(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function Kw(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function c$e(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function $v(t){return typeof t=="string"||t instanceof String}function h$e(t){return typeof t=="boolean"}function TN(t){return typeof t=="number"}function gm(t){return Array.isArray(t)?gm(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":TN(t)?"float32":$v(t)?"string":h$e(t)?"bool":"float32"}function CN(t){return!!(t&&t.constructor&&t.call&&t.apply)}function EN(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function Xe(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function cQ(t,e,n,r=!1){const i=new Array;if(e.length===1){const s=e[0]*(r?2:1);for(let o=0;o<s;o++)i[o]=n[t+o]}else{const s=e[0],o=e.slice(1),a=o.reduce((l,u)=>l*u)*(r?2:1);for(let l=0;l<s;l++)i[l]=cQ(t+l*a,o,n,r)}return i}function Qo(t,e,n=!1){if(t.length===0)return e[0];const r=t.reduce((i,s)=>i*s)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return cQ(0,t,e,n)}function f$e(t,e){if(Array.isArray(t))return t;if(e==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(e==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${e}`)}function gO(t,e){const n=ui(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function ui(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function hQ(t,e){const n=t.reduce((r,i)=>r*i,1);if(e==null||e==="float32")return Qo(t,new Float32Array(n));if(e==="int32")return Qo(t,new Int32Array(n));if(e==="bool")return Qo(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function fu(t){t.forEach(e=>{U(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function Ha(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let i=0;i<t.length-1;++i)r+=n[i]*t[i];return r}function ym(t,e,n){if(e===0)return[];if(e===1)return[t];const r=new Array(e);for(let i=0;i<r.length-1;++i)r[i]=Math.floor(t/n[i]),t-=r[i]*n[i];return r[r.length-1]=t,r}function yO(t){return t&&t.then&&typeof t.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gW="tfjsflags";class d$e{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=p$e,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(ge().getBool("IS_TEST")||ge().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){const i=this.urlFlags[e];ge().getBool("IS_TEST")||ge().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${i}.`),this.set(e,i)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(yO(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);gW in e&&e[gW].split(",").forEach(r=>{const[i,s]=r.split(":");this.urlFlags[i]=g$e(i,s)})}}function p$e(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(m$e(e,r[0],r[1]),r.join("="))),e}function m$e(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function g$e(t,e){const n=e.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:e}function ge(){return fQ}let fQ=null;function y$e(t){fQ=t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let fk;function dQ(){if(fk==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");fk=t}return fk}function v$e(){const t=dQ();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function vO(t,e){const n=v$e();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const NT="Abs",Ov="Acos",Pv="Acosh",vm="Add",bO="AddN",xO="All",wO="Any",RT="ArgMax",DT="ArgMin",Mv="Asin",Lv="Asinh",Fv="Atan",Vv="Atanh",Bv="Atan2",$T="AvgPool",SO="AvgPoolGrad",OT="AvgPool3D",TO="AvgPool3DGrad",PT="BatchMatMul",MT="BatchToSpaceND",CO="Bincount",EO="BitwiseAnd",b$e="BroadcastTo",pQ="BroadcastArgs",zv="Cast",Uv="Ceil",jv="ClipByValue",IO="Complex",LT="ComplexAbs",FT="Concat",VT="Conv2D",_O="Conv2DBackpropFilter",BT="Conv2DBackpropInput",zT="Conv3D",AO="Conv3DBackpropFilterV2",kO="Conv3DBackpropInputV2",Wv="Cos",Gv="Cosh",NO="Cumprod",UT="Cumsum",RO="CropAndResize",DO="DenseBincount",$O="DepthToSpace",jT="DepthwiseConv2dNative",OO="DepthwiseConv2dNativeBackpropFilter",PO="DepthwiseConv2dNativeBackpropInput",mQ="Diag",WT="Dilation2D",IN="Dilation2DBackpropInput",_N="Dilation2DBackpropFilter",x$e="Draw",Hv="RealDiv",MO="Einsum",qv="Elu",LO="EluGrad",Kv="Erf",GT="Equal",Xv="Exp",HT="ExpandDims",Yv="Expm1",FO="FFT",VO="Fill",BO="FlipLeftRight",Qv="Floor",Zv="FloorDiv",qT="FusedBatchNorm",KT="GatherV2",gQ="GatherNd",XT="Greater",Jv="GreaterEqual",e0="Identity",zO="IFFT",UO="Imag",t0="IsFinite",n0="IsInf",r0="IsNan",YT="LeakyRelu",QT="Less",ZT="LessEqual",yQ="LinSpace",i0="Log",s0="Log1p",JT="LogicalAnd",eC="LogicalNot",tC="LogicalOr",w$e="LogSoftmax",nC="LRN",jO="LRNGrad",rC="Max",o0="Maximum",iC="MaxPool",WO="MaxPoolGrad",sC="MaxPool3D",GO="MaxPool3DGrad",vQ="MaxPoolWithArgmax",oC="Mean",aC="Min",a0="Minimum",lC="MirrorPad",l0="Mod",bQ="Multinomial",u0="Multiply",uC="Neg",cC="NotEqual",HO="NonMaxSuppressionV3",qO="NonMaxSuppressionV4",KO="NonMaxSuppressionV5",hC="OnesLike",fC="OneHot",dC="Pack",pC="PadV2",c0="Pow",mC="Prelu",gC="Prod",xQ="RaggedGather",wQ="RaggedRange",SQ="RaggedTensorToTensor",XO="Range",YO="Real",h0="Reciprocal",f0="Relu",yC="Reshape",vC="ResizeNearestNeighbor",QO="ResizeNearestNeighborGrad",bC="ResizeBilinear",ZO="ResizeBilinearGrad",d0="Relu6",xC="Reverse",p0="Round",m0="Rsqrt",TQ="ScatterNd",CQ="TensorScatterUpdate",EQ="SearchSorted",wC="Select",g0="Selu",SC="Slice",y0="Sin",v0="Sinh",b0="Sign",x0="Sigmoid",w0="Softplus",S0="Sqrt",TC="Sum",CC="SpaceToBatchND",EC="SplitV",IC="Softmax",IQ="SparseFillEmptyRows",_Q="SparseReshape",AQ="SparseSegmentMean",kQ="SparseSegmentSum",NQ="SparseToDense",T0="SquaredDifference",JO="Square",eP="StaticRegexReplace",tP="StridedSlice",RQ="StringNGrams",DQ="StringSplit",$Q="StringToHashBucketFast",C0="Sub",E0="Tan",I0="Tanh",_0="Tile",nP="TopK",rP="Transform",pp="Transpose",iP="Unique",_C="Unpack",AC="UnsortedSegmentSum",kC="ZerosLike",A0="Step",AN="FromPixels",sP="RotateWithOffset",Xw="_FusedMatMul",Yw="FusedConv2D",OQ="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function As(...t){ge().getBool("IS_TEST")||ge().getBool("PROD")||console.warn(...t)}function S$e(...t){ge().getBool("IS_TEST")||ge().getBool("PROD")||console.log(...t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qw=vO("kernelRegistry",()=>new Map),kN=vO("gradRegistry",()=>new Map);function NN(t,e){const n=MQ(t,e);return Qw.get(n)}function yW(t){return kN.get(t)}function vW(t){const e=Qw.entries(),n=[];for(;;){const{done:r,value:i}=e.next();if(r)break;const[s,o]=i,[a]=s.split("_");a===t&&n.push(o)}return n}function PQ(t){const{kernelName:e,backendName:n}=t,r=MQ(e,n);Qw.has(r)&&As(`The kernel '${e}' for backend '${n}' is already registered`),Qw.set(r,t)}function T$e(t){const{kernelName:e}=t;kN.has(e)&&ge().getBool("DEBUG")&&As(`Overriding the gradient for '${e}'`),kN.set(e,t)}function MQ(t,e){return`${e}_${t}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LQ(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var dk,bW;function C$e(){if(bW)return dk;bW=1,dk=e;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function e(O,k,F){this.low=O|0,this.high=k|0,this.unsigned=!!F}e.prototype.__isLong__,Object.defineProperty(e.prototype,"__isLong__",{value:!0});function n(O){return(O&&O.__isLong__)===!0}e.isLong=n;var r={},i={};function s(O,k){var F,L,q;return k?(O>>>=0,(q=0<=O&&O<256)&&(L=i[O],L)?L:(F=a(O,(O|0)<0?-1:0,!0),q&&(i[O]=F),F)):(O|=0,(q=-128<=O&&O<128)&&(L=r[O],L)?L:(F=a(O,O<0?-1:0,!1),q&&(r[O]=F),F))}e.fromInt=s;function o(O,k){if(isNaN(O))return k?C:w;if(k){if(O<0)return C;if(O>=y)return N}else{if(O<=-b)return R;if(O+1>=b)return P}return O<0?o(-O,k).neg():a(O%g|0,O/g|0,k)}e.fromNumber=o;function a(O,k,F){return new e(O,k,F)}e.fromBits=a;var l=Math.pow;function u(O,k,F){if(O.length===0)throw Error("empty string");if(O==="NaN"||O==="Infinity"||O==="+Infinity"||O==="-Infinity")return w;if(typeof k=="number"?(F=k,k=!1):k=!!k,F=F||10,F<2||36<F)throw RangeError("radix");var L;if((L=O.indexOf("-"))>0)throw Error("interior hyphen");if(L===0)return u(O.substring(1),k,F).neg();for(var q=o(l(F,8)),Y=w,W=0;W<O.length;W+=8){var H=Math.min(8,O.length-W),X=parseInt(O.substring(W,W+H),F);if(H<8){var ee=o(l(F,H));Y=Y.mul(ee).add(o(X))}else Y=Y.mul(q),Y=Y.add(o(X))}return Y.unsigned=k,Y}e.fromString=u;function h(O,k){return typeof O=="number"?o(O,k):typeof O=="string"?u(O,k):a(O.low,O.high,typeof k=="boolean"?k:O.unsigned)}e.fromValue=h;var d=65536,p=1<<24,g=d*d,y=g*g,b=y/2,x=s(p),w=s(0);e.ZERO=w;var C=s(0,!0);e.UZERO=C;var E=s(1);e.ONE=E;var _=s(1,!0);e.UONE=_;var A=s(-1);e.NEG_ONE=A;var P=a(-1,2147483647,!1);e.MAX_VALUE=P;var N=a(-1,-1,!0);e.MAX_UNSIGNED_VALUE=N;var R=a(0,-2147483648,!1);e.MIN_VALUE=R;var D=e.prototype;return D.toInt=function(){return this.unsigned?this.low>>>0:this.low},D.toNumber=function(){return this.unsigned?(this.high>>>0)*g+(this.low>>>0):this.high*g+(this.low>>>0)},D.toString=function(k){if(k=k||10,k<2||36<k)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(R)){var F=o(k),L=this.div(F),q=L.mul(F).sub(this);return L.toString(k)+q.toInt().toString(k)}else return"-"+this.neg().toString(k);for(var Y=o(l(k,6),this.unsigned),W=this,H="";;){var X=W.div(Y),ee=W.sub(X.mul(Y)).toInt()>>>0,ce=ee.toString(k);if(W=X,W.isZero())return ce+H;for(;ce.length<6;)ce="0"+ce;H=""+ce+H}},D.getHighBits=function(){return this.high},D.getHighBitsUnsigned=function(){return this.high>>>0},D.getLowBits=function(){return this.low},D.getLowBitsUnsigned=function(){return this.low>>>0},D.getNumBitsAbs=function(){if(this.isNegative())return this.eq(R)?64:this.neg().getNumBitsAbs();for(var k=this.high!=0?this.high:this.low,F=31;F>0&&(k&1<<F)==0;F--);return this.high!=0?F+33:F+1},D.isZero=function(){return this.high===0&&this.low===0},D.eqz=D.isZero,D.isNegative=function(){return!this.unsigned&&this.high<0},D.isPositive=function(){return this.unsigned||this.high>=0},D.isOdd=function(){return(this.low&1)===1},D.isEven=function(){return(this.low&1)===0},D.equals=function(k){return n(k)||(k=h(k)),this.unsigned!==k.unsigned&&this.high>>>31===1&&k.high>>>31===1?!1:this.high===k.high&&this.low===k.low},D.eq=D.equals,D.notEquals=function(k){return!this.eq(k)},D.neq=D.notEquals,D.ne=D.notEquals,D.lessThan=function(k){return this.comp(k)<0},D.lt=D.lessThan,D.lessThanOrEqual=function(k){return this.comp(k)<=0},D.lte=D.lessThanOrEqual,D.le=D.lessThanOrEqual,D.greaterThan=function(k){return this.comp(k)>0},D.gt=D.greaterThan,D.greaterThanOrEqual=function(k){return this.comp(k)>=0},D.gte=D.greaterThanOrEqual,D.ge=D.greaterThanOrEqual,D.compare=function(k){if(n(k)||(k=h(k)),this.eq(k))return 0;var F=this.isNegative(),L=k.isNegative();return F&&!L?-1:!F&&L?1:this.unsigned?k.high>>>0>this.high>>>0||k.high===this.high&&k.low>>>0>this.low>>>0?-1:1:this.sub(k).isNegative()?-1:1},D.comp=D.compare,D.negate=function(){return!this.unsigned&&this.eq(R)?R:this.not().add(E)},D.neg=D.negate,D.add=function(k){n(k)||(k=h(k));var F=this.high>>>16,L=this.high&65535,q=this.low>>>16,Y=this.low&65535,W=k.high>>>16,H=k.high&65535,X=k.low>>>16,ee=k.low&65535,ce=0,j=0,Q=0,ie=0;return ie+=Y+ee,Q+=ie>>>16,ie&=65535,Q+=q+X,j+=Q>>>16,Q&=65535,j+=L+H,ce+=j>>>16,j&=65535,ce+=F+W,ce&=65535,a(Q<<16|ie,ce<<16|j,this.unsigned)},D.subtract=function(k){return n(k)||(k=h(k)),this.add(k.neg())},D.sub=D.subtract,D.multiply=function(k){if(this.isZero())return w;if(n(k)||(k=h(k)),t){var F=t.mul(this.low,this.high,k.low,k.high);return a(F,t.get_high(),this.unsigned)}if(k.isZero())return w;if(this.eq(R))return k.isOdd()?R:w;if(k.eq(R))return this.isOdd()?R:w;if(this.isNegative())return k.isNegative()?this.neg().mul(k.neg()):this.neg().mul(k).neg();if(k.isNegative())return this.mul(k.neg()).neg();if(this.lt(x)&&k.lt(x))return o(this.toNumber()*k.toNumber(),this.unsigned);var L=this.high>>>16,q=this.high&65535,Y=this.low>>>16,W=this.low&65535,H=k.high>>>16,X=k.high&65535,ee=k.low>>>16,ce=k.low&65535,j=0,Q=0,ie=0,me=0;return me+=W*ce,ie+=me>>>16,me&=65535,ie+=Y*ce,Q+=ie>>>16,ie&=65535,ie+=W*ee,Q+=ie>>>16,ie&=65535,Q+=q*ce,j+=Q>>>16,Q&=65535,Q+=Y*ee,j+=Q>>>16,Q&=65535,Q+=W*X,j+=Q>>>16,Q&=65535,j+=L*ce+q*ee+Y*X+W*H,j&=65535,a(ie<<16|me,j<<16|Q,this.unsigned)},D.mul=D.multiply,D.divide=function(k){if(n(k)||(k=h(k)),k.isZero())throw Error("division by zero");if(t){if(!this.unsigned&&this.high===-2147483648&&k.low===-1&&k.high===-1)return this;var F=(this.unsigned?t.div_u:t.div_s)(this.low,this.high,k.low,k.high);return a(F,t.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?C:w;var L,q,Y;if(this.unsigned){if(k.unsigned||(k=k.toUnsigned()),k.gt(this))return C;if(k.gt(this.shru(1)))return _;Y=C}else{if(this.eq(R)){if(k.eq(E)||k.eq(A))return R;if(k.eq(R))return E;var W=this.shr(1);return L=W.div(k).shl(1),L.eq(w)?k.isNegative()?E:A:(q=this.sub(k.mul(L)),Y=L.add(q.div(k)),Y)}else if(k.eq(R))return this.unsigned?C:w;if(this.isNegative())return k.isNegative()?this.neg().div(k.neg()):this.neg().div(k).neg();if(k.isNegative())return this.div(k.neg()).neg();Y=w}for(q=this;q.gte(k);){L=Math.max(1,Math.floor(q.toNumber()/k.toNumber()));for(var H=Math.ceil(Math.log(L)/Math.LN2),X=H<=48?1:l(2,H-48),ee=o(L),ce=ee.mul(k);ce.isNegative()||ce.gt(q);)L-=X,ee=o(L,this.unsigned),ce=ee.mul(k);ee.isZero()&&(ee=E),Y=Y.add(ee),q=q.sub(ce)}return Y},D.div=D.divide,D.modulo=function(k){if(n(k)||(k=h(k)),t){var F=(this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,k.low,k.high);return a(F,t.get_high(),this.unsigned)}return this.sub(this.div(k).mul(k))},D.mod=D.modulo,D.rem=D.modulo,D.not=function(){return a(~this.low,~this.high,this.unsigned)},D.and=function(k){return n(k)||(k=h(k)),a(this.low&k.low,this.high&k.high,this.unsigned)},D.or=function(k){return n(k)||(k=h(k)),a(this.low|k.low,this.high|k.high,this.unsigned)},D.xor=function(k){return n(k)||(k=h(k)),a(this.low^k.low,this.high^k.high,this.unsigned)},D.shiftLeft=function(k){return n(k)&&(k=k.toInt()),(k&=63)===0?this:k<32?a(this.low<<k,this.high<<k|this.low>>>32-k,this.unsigned):a(0,this.low<<k-32,this.unsigned)},D.shl=D.shiftLeft,D.shiftRight=function(k){return n(k)&&(k=k.toInt()),(k&=63)===0?this:k<32?a(this.low>>>k|this.high<<32-k,this.high>>k,this.unsigned):a(this.high>>k-32,this.high>=0?0:-1,this.unsigned)},D.shr=D.shiftRight,D.shiftRightUnsigned=function(k){if(n(k)&&(k=k.toInt()),k&=63,k===0)return this;var F=this.high;if(k<32){var L=this.low;return a(L>>>k|F<<32-k,F>>>k,this.unsigned)}else return k===32?a(F,0,this.unsigned):a(F>>>k-32,0,this.unsigned)},D.shru=D.shiftRightUnsigned,D.shr_u=D.shiftRightUnsigned,D.toSigned=function(){return this.unsigned?a(this.low,this.high,!1):this},D.toUnsigned=function(){return this.unsigned?this:a(this.low,this.high,!0)},D.toBytes=function(k){return k?this.toBytesLE():this.toBytesBE()},D.toBytesLE=function(){var k=this.high,F=this.low;return[F&255,F>>>8&255,F>>>16&255,F>>>24,k&255,k>>>8&255,k>>>16&255,k>>>24]},D.toBytesBE=function(){var k=this.high,F=this.low;return[k>>>24,k>>>16&255,k>>>8&255,k&255,F>>>24,F>>>16&255,F>>>8&255,F&255]},e.fromBytes=function(k,F,L){return L?e.fromBytesLE(k,F):e.fromBytesBE(k,F)},e.fromBytesLE=function(k,F){return new e(k[0]|k[1]<<8|k[2]<<16|k[3]<<24,k[4]|k[5]<<8|k[6]<<16|k[7]<<24,F)},e.fromBytesBE=function(k,F){return new e(k[4]<<24|k[5]<<16|k[6]<<8|k[7],k[0]<<24|k[1]<<16|k[2]<<8|k[3],F)},dk}var FQ=C$e();const VQ=ll(FQ),E$e=r5({__proto__:null,default:VQ},[FQ]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lh=VQ||E$e;function NC(t){return Lh.fromString(t,!0,16)}const BQ=NC("c3a5c85c97cb3127"),Mh=NC("b492b66fbe98f273"),Si=NC("9ae16a3b2f90404f");function RN(t){return t.xor(t.shru(47))}function zQ(t,e,n){const r=t.slice(e,e+n);return Lh.fromBytes(Array.from(r),!0,!0)}function fn(t,e){return zQ(t,e,8)}function xW(t,e){return zQ(t,e,4)}function Sr(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function gc(t,e,n=NC("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let i=e.xor(r).mul(n);return i=i.xor(i.shru(47)),i=i.mul(n),i}function I$e(t,e,n,r,i,s){i=i.add(t),s=Sr(s.add(i).add(r),21);const o=i;return i=i.add(e),i=i.add(n),s=s.add(Sr(i,44)),[i.add(r),s.add(o)]}function Yx(t,e,n,r){return I$e(fn(t,e),fn(t,e+8),fn(t,e+16),fn(t,e+24),n,r)}function _$e(t,e=t.length){if(e>=8){const n=Si.add(e*2),r=fn(t,0).add(Si),i=fn(t,e-8),s=Sr(i,37).mul(n).add(r),o=Sr(r,25).add(i).mul(n);return gc(s,o,n)}if(e>=4){const n=Si.add(e*2),r=xW(t,0);return gc(r.shl(3).add(e),xW(t,e-4),n)}if(e>0){const n=t[0],r=t[e>>1],i=t[e-1],s=n+(r<<8),o=e+(i<<2);return RN(Si.mul(s).xor(BQ.mul(o))).mul(Si)}return Si}function A$e(t,e=t.length){const n=Si.add(e*2),r=fn(t,0).mul(Mh),i=fn(t,8),s=fn(t,e-8).mul(n),o=fn(t,e-16).mul(Si);return gc(Sr(r.add(i),43).add(Sr(s,30)).add(o),r.add(Sr(i.add(Si),18)).add(s),n)}function k$e(t,e=t.length){const n=Si.add(e*2),r=fn(t,0).mul(Si),i=fn(t,8),s=fn(t,e-8).mul(n),o=fn(t,e-16).mul(Si),a=Sr(r.add(i),43).add(Sr(s,30)).add(o),l=gc(a,r.add(Sr(i.add(Si),18)).add(s),n),u=fn(t,16).mul(n),h=fn(t,24),d=a.add(fn(t,e-32)).mul(n),p=l.add(fn(t,e-24)).mul(n);return gc(Sr(u.add(h),43).add(Sr(d,30)).add(p),u.add(Sr(h.add(r),18)).add(d),n)}function N$e(t,e=t.length){const n=Lh.fromNumber(81,!0);if(e<=32)return e<=16?_$e(t,e):A$e(t,e);if(e<=64)return k$e(t,e);let r=n,i=n.mul(Mh).add(113),s=RN(i.mul(Si).add(113)).mul(Si),o=[Lh.UZERO,Lh.UZERO],a=[Lh.UZERO,Lh.UZERO];r=r.mul(Si).add(fn(t,0));let l=0;const u=(e-1>>6)*64,h=u+(e-1&63)-63;do r=Sr(r.add(i).add(o[0]).add(fn(t,l+8)),37).mul(Mh),i=Sr(i.add(o[1]).add(fn(t,l+48)),42).mul(Mh),r=r.xor(a[1]),i=i.add(o[0]).add(fn(t,l+40)),s=Sr(s.add(a[0]),33).mul(Mh),o=Yx(t,l,o[1].mul(Mh),r.add(a[0])),a=Yx(t,l+32,s.add(a[1]),i.add(fn(t,l+16))),[s,r]=[r,s],l+=64;while(l!==u);const d=Mh.add(s.and(255).shl(1));return l=h,a[0]=a[0].add(e-1&63),o[0]=o[0].add(a[0]),a[0]=a[0].add(o[0]),r=Sr(r.add(i).add(o[0]).add(fn(t,l+8)),37).mul(d),i=Sr(i.add(o[1]).add(fn(t,l+48)),42).mul(d),r=r.xor(a[1].mul(9)),i=i.add(o[0].mul(9).add(fn(t,l+40))),s=Sr(s.add(a[0]),33).mul(d),o=Yx(t,l,o[1].mul(d),r.add(a[0])),a=Yx(t,l+32,s.add(a[1]),i.add(fn(t,l+16))),[s,r]=[r,s],gc(gc(o[0],a[0],d).add(RN(i).mul(BQ)).add(s),gc(o[1],a[1],d).add(r),d)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jc(t,e){return e==="string"?yc(t):Bf([t],e)}function R$e(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function Bf(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=yf(t)),ge().getBool("DEBUG")&&l$e(t,e),R$e(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function Di(){return ge().platform.now()}function yc(t,e="utf-8"){return e=e||"utf-8",ge().platform.encode(t,e)}function Dc(t,e="utf-8"){return e=e||"utf-8",ge().platform.decode(t,e)}function So(t){return ge().platform.isTypedArray!=null?ge().platform.isTypedArray(t):LQ(t)}function yf(t,e=[],n=!1){if(e==null&&(e=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||yO(t)||t==null||So(t)&&n)e.push(t);else if(Array.isArray(t)||So(t))for(let r=0;r<t.length;++r)yf(t[r],e,n);else{let r=-1;for(const i of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(i)&&(r=Math.max(r,Number(i)));for(let i=0;i<=r;i++)yf(t[i],e,n)}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class D$e{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new O$e)}profileKernel(e,n,r){let i;const s=()=>{i=r()};let o;const a=Di();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(s);else{s();for(const u of i)u.dataSync();o=Promise.resolve({kernelMs:Di()-a})}if(ge().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let u=0;u<i.length;u++){const h=i[u];h.data().then(d=>{$$e(d,h.dtype,e)})}return{kernelName:e,outputs:i,inputs:n,timeMs:o.then(u=>u.kernelMs),extraInfo:o.then(u=>u.getExtraProfileInfo!=null?u.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:r,timeMs:i,inputs:s,extraInfo:o}=e;r.forEach(a=>{Promise.all([a.data(),i,o]).then(l=>{this.logger.logKernelProfile(n,a,l[0],l[1],s,l[2])})})}}function $$e(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){const i=t[r];if(isNaN(i)||!isFinite(i))return console.warn(`Found ${i} in the result of '${n}'`),!0}return!1}class O$e{logKernelProfile(e,n,r,i,s,o){const a=typeof i=="number"?dp(`${i}ms`,9):i.error,l=dp(e,25),u=n.rank,h=n.size,d=dp(n.shape.toString(),14);let p="";for(const g in s){const y=s[g];if(y!=null){const b=y.shape||n.shape,x=b.length;p+=`${g}: ${x}D ${x>0?b:""} `}}console.log(`%c${l}	%c${a}	%c${u}D ${d}	%c${h}	%c${p}	%c${o}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P$e(t,e,n){const r={},i={};for(let l=0;l<e.length;l++)r[e[l].id]=!0;for(let l=0;l<t.length;l++){const u=t[l],h=u.inputs;for(const d in h){const p=h[d];let g=!1;for(let y=0;y<e.length;y++)if(r[p.id]){u.outputs.forEach(b=>r[b.id]=!0),g=!0,i[u.id]=!0;break}if(g)break}}const s={};s[n.id]=!0;const o={};for(let l=t.length-1;l>=0;l--){const u=t[l],h=u.inputs;for(let d=0;d<u.outputs.length;d++)if(s[u.outputs[d].id]){for(const p in h)s[h[p].id]=!0,o[u.id]=!0;break}}const a=[];for(let l=0;l<t.length;l++){const u=t[l];if(i[u.id]&&o[u.id]){const h={};for(const p in u.inputs){const g=u.inputs[p];r[g.id]&&(h[p]=g)}const d=Object.assign({},u);d.inputs=h,d.outputs=u.outputs,a.push(d)}}return a}function M$e(t,e,n,r){for(let i=e.length-1;i>=0;i--){const s=e[i],o=[];if(s.outputs.forEach(l=>{const u=t[l.id];u!=null?o.push(u):o.push(null)}),s.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${s.kernelName}.`);const a=s.gradient(o);for(const l in s.inputs){if(!(l in a))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(a)}.`);const u=n(()=>a[l]());if(u.dtype!=="float32")throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${u.dtype}'`);const h=s.inputs[l];if(!Wt(u.shape,h.shape))throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input '${l}' has shape '${u.shape}', which does not match the shape of the input '${h.shape}'`);if(t[h.id]==null)t[h.id]=u;else{const d=t[h.id];t[h.id]=r(d,u),d.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wW=20,Ug=3,pk=7;function L$e(t,e,n,r){const i=Xe(e),s=F$e(t,e,n,i),o=e.length,a=I1(t,e,n,i,s),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${o}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(a.map(u=>"    "+u).join(`
`)),l.join(`
`)}function F$e(t,e,n,r){const i=Se(e),s=r[r.length-1],o=new Array(s).fill(0),a=e.length,l=n==="complex64"?Jg(t):t;if(a>1)for(let u=0;u<i/s;u++){const h=u*s;for(let d=0;d<s;d++)o[d]=Math.max(o[d],Zg(l[h+d],0,n).length)}return o}function Zg(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(pk))} + ${parseFloat(t[1].toFixed(pk))}j`:$v(t)?r=`'${t}'`:n==="bool"?r=UQ(t):r=parseFloat(t.toFixed(pk)).toString(),dp(r,e)}function UQ(t){return t===0?"false":"true"}function I1(t,e,n,r,i,s=!0){const o=n==="complex64"?2:1,a=e[0],l=e.length;if(l===0){if(n==="complex64"){const b=Jg(t);return[Zg(b[0],0,n)]}return n==="bool"?[UQ(t[0])]:[t[0].toString()]}if(l===1){if(a>wW){const x=Ug*o;let w=Array.from(t.slice(0,x)),C=Array.from(t.slice((a-Ug)*o,a*o));return n==="complex64"&&(w=Jg(w),C=Jg(C)),["["+w.map((E,_)=>Zg(E,i[_],n)).join(", ")+", ..., "+C.map((E,_)=>Zg(E,i[a-Ug+_],n)).join(", ")+"]"]}return["["+(n==="complex64"?Jg(t):Array.from(t)).map((x,w)=>Zg(x,i[w],n)).join(", ")+"]"]}const u=e.slice(1),h=r.slice(1),d=r[0]*o,p=[];if(a>wW){for(let b=0;b<Ug;b++){const x=b*d,w=x+d;p.push(...I1(t.slice(x,w),u,n,h,i,!1))}p.push("...");for(let b=a-Ug;b<a;b++){const x=b*d,w=x+d;p.push(...I1(t.slice(x,w),u,n,h,i,b===a-1))}}else for(let b=0;b<a;b++){const x=b*d,w=x+d;p.push(...I1(t.slice(x,w),u,n,h,i,b===a-1))}const g=l===2?",":"";p[0]="["+(a>0?p[0]+g:"");for(let b=1;b<p.length-1;b++)p[b]=" "+p[b]+g;let y=`,
`;for(let b=2;b<l;b++)y+=`
`;return p[p.length-1]=" "+p[p.length-1]+"]"+(s?"":y),p}function Jg(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Fr{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=Se(e),r!=null){const i=r.length;U(i===this.size,()=>`Length of values '${i}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Ln(n,this.size),this.strides=Xe(e)}set(e,...n){n.length===0&&(n=[0]),U(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const i of e){if(i<0||i>=this.shape[n]){const s=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(s)}n++}let r=e[e.length-1];for(let i=0;i<e.length-1;++i)r+=this.strides[i]*e[i];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return jo().makeTensor(this.values,this.shape,this.dtype)}}let jo=null,Kd=null;function V$e(t){jo=t}function B$e(t){Kd=t}class ur{constructor(e,n,r,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=Se(e),this.strides=Xe(e),this.dataId=r,this.id=i,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return Kd.buffer(this.shape,this.dtype,e)}bufferSync(){return Kd.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return Qo(this.shape,e,this.dtype==="complex64")}arraySync(){return Qo(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=jo().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(r=>Dc(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),jo().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=jo().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>Dc(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await jo().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),jo().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return Kd.print(this,e)}clone(){return this.throwIfDisposed(),Kd.clone(this)}toString(e=!1){const n=this.dataSync();return L$e(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),Kd.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),jo().makeVariable(this,e,n,r)}}Object.defineProperty(ur,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function we(){return vO("Tensor",()=>ur)}we();class Zw extends ur{constructor(e,n,r,i){super(e.shape,e.dtype,e.dataId,i),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!Wt(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);jo().disposeTensor(this),this.dataId=e.dataId,jo().incRef(this,null)}dispose(){jo().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(Zw,Symbol.hasInstance,{value:t=>t instanceof ur&&t.assign!=null&&t.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var SW;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(SW||(SW={}));var DN;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(DN||(DN={}));var $N;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})($N||($N={}));var ON;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(ON||(ON={}));var PN;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(PN||(PN={}));const z$e={float32:ON,int32:DN,bool:$N,complex64:PN};function fs(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return z$e[t][e]}function oP(t){return fs(t,"int32")}function jQ(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function WQ(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vn(t,e){if(t.dtype===e.dtype)return[t,e];const n=fs(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function GQ(t){const e=[];return HQ(t,e,new Set),e}function HQ(t,e,n){if(t==null)return;if(t instanceof ur){e.push(t);return}if(!U$e(t))return;const r=t;for(const i in r){const s=r[i];n.has(s)||(n.add(s),HQ(s,e,n))}}function U$e(t){return Array.isArray(t)||typeof t=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mk(t){return t.kernelName!=null}class TW{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class Vp{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new TW}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,r=1){return e in this.registryFactory?(As(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(e);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new D$e(this.backendInstance),!0}setupRegisteredKernels(){vW(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){vW(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof fO)&&typeof r.then=="function"){const i=++this.pendingBackendInitId,s=r.then(o=>i<this.pendingBackendInitId?!1:(this.registry[e]=o,this.pendingBackendInit=null,!0)).catch(o=>(i<this.pendingBackendInitId||(this.pendingBackendInit=null,As(`Initialization of backend ${e} failed`),As(o.stack||o.message)),!1));return this.pendingBackendInit=s,{success:s,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return As(`Initialization of backend ${e} failed`),As(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n],{success:i,asyncInit:s}=this.initializeBackend(r);if(s||i)return{name:r,asyncInit:s}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const r=this.state.tensorInfo.get(n),i=r.backend,s=this.readSync(n),o=i.refCount(n);i.disposeData(n,!0),r.backend=e,e.move(n,s,r.shape,r.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let r=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let i;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(i),()=>(i=n(),i instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),i))}scopedRun(e,n,r){e();try{const i=r();return n(),i}catch(i){throw n(),i}}nextTensorId(){return Vp.nextTensorId++}nextVariableId(){return Vp.nextVariableId++}clone(e){const n=re.runKernel(e0,{x:e}),r={x:e},i=o=>({x:()=>{const a="float32",l={x:o},u={dtype:a};return re.runKernel(zv,l,u)}}),s=[];return this.addTapeNode(this.state.activeScope.name,r,[n],i,s,{}),n}runKernel(e,n,r){if(this.backendName==null&&this.backend,!(NN(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,r){const i=this.backend.numDataIds();let s=0;r.forEach(l=>{s+=l.dtype==="complex64"?3:1});const o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=i-n-s-o;if(a>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${a} data ids) after running '${e}'`)}runKernelFunc(e){let n,r=[];const i=this.isTapeOn(),s=this.state.numBytes,o=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let a;this.backendName==null&&this.backend;let l;const u=mk(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(mk(e)){const{kernelName:y,inputs:b,attrs:x}=e;this.backendName==null&&this.backend;const w=NN(y,this.backendName);U(w!=null,()=>`Cannot find registered kernel '${y}' for backend '${this.backendName}'`),a=()=>{const C=this.backend.numDataIds();l=w.kernelFunc({inputs:b,attrs:x,backend:this.backend});const E=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(y,C,E);const _=E.map(A=>A.rank!=null?A:this.makeTensorFromTensorInfo(A));if(i){const A=this.getTensorsForGradient(y,b,_);r=this.saveTensorsForBackwardMode(A)}return _}}else{const{forwardFunc:y}=e,b=x=>{i&&(r=x.map(w=>this.keep(this.clone(w))))};a=()=>{const x=this.backend.numDataIds();l=this.tidy(()=>y(this.backend,b));const w=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(u,x,w),w}}const{inputs:h,attrs:d}=e,p=mk(e)?null:e.backwardsFunc;let g;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=a():(g=this.profiler.profileKernel(u,h,()=>a()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(g),n=g.outputs)}),i&&this.addTapeNode(u,h,n,p,r,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:u,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-o,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(h).map(y=>h[y]!=null?h[y].shape:null),outputShapes:n.map(y=>y.shape),kernelTimeMs:g.timeMs,extraInfo:g.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,n,r){const i=yW(e);if(i!=null){const s=i.inputsToSave||[],o=i.outputsToSave||[];let a;i.saveAllInputs?(U(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),a=Object.keys(n).map(u=>n[u])):a=s.map(u=>n[u]);const l=r.filter((u,h)=>o[h]);return a.concat(l)}return[]}makeTensor(e,n,r,i){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",i=i||this.backend;let s=e;r==="string"&&$v(e[0])&&(s=e.map(l=>yc(l)));const o=i.write(s,n,r),a=new ur(n,r,o,this.nextTensorId());if(this.trackTensor(a,i),r==="string"){const l=this.state.tensorInfo.get(o),u=c$e(s);this.state.numBytes+=u-l.bytes,l.bytes=u}return a}makeTensorFromDataId(e,n,r,i){r=r||"float32";const s={dataId:e,shape:n,dtype:r};return this.makeTensorFromTensorInfo(s,i)}makeTensorFromTensorInfo(e,n){const{dataId:r,shape:i,dtype:s}=e,o=new ur(i,s,r,this.nextTensorId());return this.trackTensor(o,n),o}makeVariable(e,n=!0,r,i){r=r||this.nextVariableId().toString(),i!=null&&i!==e.dtype&&(e=e.cast(i));const s=new Zw(e,n,r,this.nextTensorId());if(this.state.registeredVariables[s.name]!=null)throw new Error(`Variable with name ${s.name} was already registered`);return this.state.registeredVariables[s.name]=s,this.incRef(s,this.backend),s}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*Kw(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof Zw||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*Kw(e.dtype);this.state.numBytes-=r}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(i=>i.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const i of this.state.activeProfile.kernels)i.kernelTimeMs=await i.kernelTimeMs,i.extraInfo=await i.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,r,i,s,o){const a={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:s},l=yW(e);l!=null&&(i=l.gradFunc),i!=null&&(a.gradient=u=>(u=u.map((h,d)=>{if(h==null){const p=r[d],g=ui(p.size,p.dtype);return this.makeTensor(g,p.shape,p.dtype)}return h}),i(u.length>1?u:u[0],s,o))),this.state.activeTape.push(a)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=GQ(e),r=new Set(n.map(s=>s.id));for(let s=0;s<this.state.activeScope.track.length;s++){const o=this.state.activeScope.track[s];!o.kept&&!r.has(o.id)&&o.dispose()}const i=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(s=>{!s.kept&&s.scopeId===i.id&&this.track(s)})}gradients(e,n,r,i=!1){if(U(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const s=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));U(s instanceof ur,()=>"The result y returned by f() must be a tensor.");const o=P$e(this.state.activeTape,n,s);if(!i&&o.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const a={};a[s.id]=r??j$e(s.shape),M$e(a,o,u=>this.tidy(u),W$e);const l=n.map(u=>a[u.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(u=>{for(const h of u.saved)h.dispose()}),this.state.activeTape=null),{value:s,grads:l}})}customGrad(e){return U(CN(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{U(n.every(a=>a instanceof ur),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const i={};n.forEach((a,l)=>{i[l]=a});const s=(a,l)=>(r=e(...n,l),U(r.value instanceof ur,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),U(CN(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),o=(a,l)=>{const u=r.gradFunc(a,l),h=Array.isArray(u)?u:[u];U(h.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),U(h.every(p=>p instanceof ur),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const d={};return h.forEach((p,g)=>{d[g]=()=>p}),d};return this.runKernelFunc({forwardFunc:s,backwardsFunc:o,inputs:i})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=Di(),r=await this.backend.time(e);return r.wallMs=Di()-n,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new TW;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}Vp.nextTensorId=0;Vp.nextVariableId=0;function j$e(t){const e=gO(Se(t),"float32");return re.makeTensor(e,t,"float32")}function qQ(){const t=dQ();if(t._tfengine==null){const e=new d$e(t);t._tfengine=new Vp(e)}return y$e(t._tfengine.ENV),V$e(()=>t._tfengine),t._tfengine}const re=qQ();function W$e(t,e){const n={a:t,b:e};return re.runKernel(vm,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G$e(){return typeof navigator<"u"&&navigator!=null}function KQ(t){if(t||G$e()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function XQ(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ji=ge();ji.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});ji.registerFlag("IS_BROWSER",()=>XQ());ji.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");ji.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));ji.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));ji.registerFlag("PROD",()=>!1);ji.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>ji.getBool("DEBUG"));ji.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);ji.registerFlag("IS_TEST",()=>!1);ji.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>ji.getBool("DEBUG"));ji.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);ji.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);ji.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k0(t,e){let n=t;if(So(t))return e==="string"?[]:[t.length];if(jQ(t)){const i=t.channels||"RGBA";return[t.height,t.width*i.length]}else if(WQ(t))return[t.buffer.size/(e==null?4:Kw(e))];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||So(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&ge().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&YQ(t,r,[]),r}function YQ(t,e,n){if(n=n||[],!Array.isArray(t)&&!So(t)){U(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}U(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),U(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let i=0;i<t.length;++i)YQ(t[i],r,n.concat(i))}function CW(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function K(t,e,n,r="numeric"){if(t instanceof we())return CW(r,t.dtype,e,n),t;let i=gm(t);if(i!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),CW(r,i,e,n),t==null||!So(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const l=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${l}'`)}const s=k0(t,i);!So(t)&&!Array.isArray(t)&&(t=[t]);const a=i!=="string"?Bf(t,i):yf(t,[],!0);return re.makeTensor(a,s,i)}function QQ(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((s,o)=>K(s,`${e}[${o}]`,n,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H$e="__op";function ae(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+H$e;const i=(...s)=>{re.startScope(n);try{const o=r(...s);return yO(o)&&console.error("Cannot return a Promise inside of tidy."),re.endScope(o),o}catch(o){throw re.endScope(null),o}};return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q$e(t,e){const n=K(t,"real","complex"),r=K(e,"imag","complex");pO(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const i={real:n,imag:r};return re.runKernel(IO,i)}const vf=ae({complex_:q$e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N0(t,e,n,r){if(r==null)r=gm(t);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(WQ(t)||jQ(t)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return re.backend.createTensorFromGPUData(t,e||n,r)}if(!So(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){fu(e);const i=Se(e),s=Se(n);U(i===s,()=>`Based on the provided shape, [${e}], the tensor should have ${i} values but has ${s}`);for(let o=0;o<n.length;++o){const a=n[o],l=o===n.length-1?a!==Se(e.slice(o)):!0;U(n[o]===e[o]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!So(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?Bf(t,r):yf(t,[],!0),re.makeTensor(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gy(t,e,n){const r=k0(t,n);return N0(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jw={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class Wc{static join(e){return new Wc(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(r=>So(r)?r.buffer:r),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let n=0;for(let r=0;r<e.length;r++){const i=e[r];r!==e.length-1&&i.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const s=n+i.byteLength;this.shards.push({buffer:i,start:n,end:s}),n=s}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,n=isNaN(Number(n))?0:n,e=Math.max(0,e),n=Math.min(this.byteLength,n),n<=e)return new ArrayBuffer(0);const r=this.findShardForByte(e);if(r===-1)throw new Error(`Could not find start shard for byte ${e}`);const i=n-e,s=new ArrayBuffer(i),o=new Uint8Array(s);let a=0;for(let l=r;l<this.shards.length;l++){const u=this.shards[l],d=e+a-u.start,p=a,y=Math.min(n,u.end)-u.start,b=new Uint8Array(u.buffer,d,y-d);if(o.set(b,p),a+=b.length,n<u.end)break}return s}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function n(i){return e<i.start?-1:e>=i.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=K$e(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}function K$e(t,e){let n=0,r=t.length;for(;n<=r;){const i=Math.floor((r-n)/2)+n,s=e(t[i]);if(s===0)return i;s<0?r=i:n=i+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ka(){return re}function EW(){return re.memory()}function fe(t,e){return re.tidy(t,e)}function vt(t){GQ(t).forEach(n=>n.dispose())}function qa(t){return re.keep(t)}function ZQ(t,e,n=1){return re.registerBackend(t,e,n)}function X$e(){return re.backend}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bp=4;async function IW(t,e){const n=[],r=[],i=Array.isArray(t)?t.map(o=>o.name):Object.keys(t);for(let o=0;o<i.length;++o){const a=i[o],l=Array.isArray(t)?t[o].tensor:t[a];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${a}': ${l.dtype}`);const u={name:a,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const h=new Promise(async d=>{const p=await l.bytes(),g=p.reduce((x,w)=>x+w.length,0)+Bp*p.length,y=new Uint8Array(g);let b=0;for(let x=0;x<p.length;x++){const w=p[x],C=new Uint8Array(new Uint32Array([w.length]).buffer);y.set(C,b),b+=Bp,y.set(w,b),b+=w.length}d(y)});r.push(h)}else r.push(l.data());e!=null&&(u.group=e),n.push(u)}const s=await Promise.all(r);return{data:J$e(s),specs:n}}function Y$e(t,e){const n=new Wc(t),r={};let i=0;for(const s of e){const o=Q$e(s,(a,l)=>n.slice(i+a,i+l));r[s.name]=Z$e(s,n.slice(i,i+o)),i+=o}return r}function Q$e(t,e){const n=Se(t.shape);let r;if("quantization"in t){const i=t.quantization;r=Jw[i.dtype]}else if(t.dtype==="string"){let i=0;for(let s=0;s<n;s++)i+=Bp+new Uint32Array(e(i,i+Bp))[0];return i}else r=Jw[t.dtype];return n*r}function Z$e(t,e){const n=t.name,r=t.dtype,i=t.shape,s=Se(i);let o,a=0;if("quantization"in t){const l=t.quantization;if(l.dtype==="uint8"||l.dtype==="uint16"){if(!("min"in l&&"scale"in l))throw new Error(`Weight ${t.name} with quantization ${l.dtype} doesn't have corresponding metadata min and scale.`)}else if(l.dtype==="float16"){if(r!=="float32")throw new Error(`Weight ${t.name} is quantized with ${l.dtype} which only supports weights of type float32 not ${r}.`)}else throw new Error(`Weight ${t.name} has unknown quantization dtype ${l.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const u=Jw[l.dtype],h=l.dtype==="uint8"?new Uint8Array(e):new Uint16Array(e);if(r==="float32")if(l.dtype==="uint8"||l.dtype==="uint16"){o=new Float32Array(h.length);for(let d=0;d<h.length;d++){const p=h[d];o[d]=p*l.scale+l.min}}else if(l.dtype==="float16")o=uOe()(h);else throw new Error(`Unsupported quantization type ${l.dtype} for weight type float32.`);else if(r==="int32"){if(l.dtype!=="uint8"&&l.dtype!=="uint16")throw new Error(`Unsupported quantization type ${l.dtype} for weight type int32.`);o=new Int32Array(h.length);for(let d=0;d<h.length;d++){const p=h[d];o[d]=Math.round(p*l.scale+l.min)}}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);a+=s*u}else if(r==="string"){const l=Se(t.shape);o=[];for(let u=0;u<l;u++){const h=new Uint32Array(e.slice(a,a+Bp))[0];a+=Bp;const d=new Uint8Array(e.slice(a,a+h));o.push(d),a+=h}}else{const l=Jw[r];if(r==="float32")o=new Float32Array(e);else if(r==="int32")o=new Int32Array(e);else if(r==="bool")o=new Uint8Array(e);else if(r==="complex64"){o=new Float32Array(e);const u=new Float32Array(o.length/2),h=new Float32Array(o.length/2);for(let y=0;y<u.length;y++)u[y]=o[y*2],h[y]=o[y*2+1];const d=gy(u,i,"float32"),p=gy(h,i,"float32"),g=vf(d,p);return d.dispose(),p.dispose(),g}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);a+=s*l}return gy(o,i,r)}function J$e(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(s=>{if(e+=s.byteLength,n.push(s.byteLength===s.buffer.byteLength?s:new s.constructor(s)),!(s instanceof Float32Array||s instanceof Int32Array||s instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${s.constructor.name}`)});const r=new Uint8Array(e);let i=0;return n.forEach(s=>{r.set(new Uint8Array(s.buffer),i),i+=s.byteLength}),r.buffer}const aP=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function _W(t){return aP?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function eOe(t){if(aP)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,i=e.length;r<i;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function tOe(t){if(aP){const r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function nOe(t){return Wc.join(t)}function rOe(t,e){const n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:e};return t.signature!=null&&(n.signature=t.signature),t.userDefinedMetadata!=null&&(n.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(n.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(n.initializerSignature=t.initializerSignature),t.trainingConfig!=null&&(n.trainingConfig=t.trainingConfig),n}function iOe(t,e,n){const r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(r.trainingConfig=t.trainingConfig),t.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=e,r.weightData=n}return t.signature!=null&&(r.signature=t.signature),t.userDefinedMetadata!=null&&(r.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(r.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(r.initializerSignature=t.initializerSignature),r}async function sOe(t,e){let n,r;return t.weightsManifest!=null&&([n,r]=await e(t.weightsManifest)),iOe(t,n,r)}function lP(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:_W(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:_W(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new Wc(t.weightData).byteLength}}function AW(t){const e=[];for(const n of t)e.push(...n.weights);return e}function oOe(){const t=n=>{let r=n<<13,i=0;for(;(r&8388608)===0;)i-=8388608,r<<=1;return r&=-8388609,i+=947912704,r|i},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let n=1024;n<2048;n++)e[n]=939524096+(n-1024<<13);return e}function aOe(){const t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}function lOe(){const t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}function uOe(){const t=oOe(),e=aOe(),n=lOe();return r=>{const i=new ArrayBuffer(4*r.length),s=new Uint32Array(i);for(let o=0;o<r.length;o++){const a=r[o],l=t[n[a>>10]+(a&1023)]+e[a>>10];s[o]=l}return new Float32Array(i)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xr{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return xr.instance==null&&(xr.instance=new xr),xr.instance}static registerSaveRouter(e){xr.getInstance().saveRouters.push(e)}static registerLoadRouter(e){xr.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return xr.getHandlers(e,"save")}static getLoadHandlers(e,n){return xr.getHandlers(e,"load",n)}static getHandlers(e,n,r){const i=[];return(n==="load"?xr.getInstance().loadRouters:xr.getInstance().saveRouters).forEach(o=>{const a=o(e,r);a!==null&&i.push(a)}),i}}const cOe=t=>xr.getSaveHandlers(t),hOe=(t,e)=>xr.getLoadHandlers(t,e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MN="tensorflowjs",LN=1,qh="models_store",oc="model_info_store";function JQ(){if(!ge().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function FN(t){const e=t.result;e.createObjectStore(qh,{keyPath:"modelPath"}),e.createObjectStore(oc,{keyPath:"modelPath"})}class bf{constructor(e){if(this.indexedDB=JQ(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((r,i)=>{const s=this.indexedDB.open(MN,LN);s.onupgradeneeded=()=>FN(s),s.onsuccess=()=>{const o=s.result;if(n==null){const a=o.transaction(qh,"readonly"),u=a.objectStore(qh).get(this.modelPath);u.onsuccess=()=>{if(u.result==null)return o.close(),i(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(u.result.modelArtifacts)},u.onerror=h=>(o.close(),i(u.error)),a.oncomplete=()=>o.close()}else{n.weightData=Wc.join(n.weightData);const a=lP(n),l=o.transaction(oc,"readwrite");let u=l.objectStore(oc),h;try{h=u.put({modelPath:this.modelPath,modelArtifactsInfo:a})}catch(p){return i(p)}let d;h.onsuccess=()=>{d=o.transaction(qh,"readwrite");const p=d.objectStore(qh);let g;try{g=p.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:a})}catch(y){return i(y)}g.onsuccess=()=>r({modelArtifactsInfo:a}),g.onerror=y=>{u=l.objectStore(oc);const b=u.delete(this.modelPath);b.onsuccess=()=>(o.close(),i(g.error)),b.onerror=x=>(o.close(),i(g.error))}},h.onerror=p=>(o.close(),i(h.error)),l.oncomplete=()=>{d==null?o.close():d.oncomplete=()=>o.close()}}},s.onerror=o=>i(s.error)})}}bf.URL_SCHEME="indexeddb://";const eZ=t=>ge().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(bf.URL_SCHEME)?fOe(t.slice(bf.URL_SCHEME.length)):null;xr.registerSaveRouter(eZ);xr.registerLoadRouter(eZ);function fOe(t){return new bf(t)}function dOe(t){return t.startsWith(bf.URL_SCHEME)?t.slice(bf.URL_SCHEME.length):t}class pOe{constructor(){this.indexedDB=JQ()}async listModels(){return new Promise((e,n)=>{const r=this.indexedDB.open(MN,LN);r.onupgradeneeded=()=>FN(r),r.onsuccess=()=>{const i=r.result,s=i.transaction(oc,"readonly"),a=s.objectStore(oc).getAll();a.onsuccess=()=>{const l={};for(const u of a.result)l[u.modelPath]=u.modelArtifactsInfo;e(l)},a.onerror=l=>(i.close(),n(a.error)),s.oncomplete=()=>i.close()},r.onerror=i=>n(r.error)})}async removeModel(e){return e=dOe(e),new Promise((n,r)=>{const i=this.indexedDB.open(MN,LN);i.onupgradeneeded=()=>FN(i),i.onsuccess=()=>{const s=i.result,o=s.transaction(oc,"readwrite"),a=o.objectStore(oc),l=a.get(e);let u;l.onsuccess=()=>{if(l.result==null)return s.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const h=a.delete(e),d=()=>{u=s.transaction(qh,"readwrite");const g=u.objectStore(qh).delete(e);g.onsuccess=()=>n(l.result.modelArtifactsInfo),g.onerror=y=>r(l.error)};h.onsuccess=d,h.onerror=p=>(d(),s.close(),r(l.error))}},l.onerror=h=>(s.close(),r(l.error)),o.oncomplete=()=>{u==null?s.close():u.oncomplete=()=>s.close()}},i.onerror=s=>r(i.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ol="/",Xd="tensorflowjs_models",tZ="info",mOe="model_topology",gOe="weight_specs",yOe="weight_data",vOe="model_metadata";function nZ(t){return{info:[Xd,t,tZ].join(Ol),topology:[Xd,t,mOe].join(Ol),weightSpecs:[Xd,t,gOe].join(Ol),weightData:[Xd,t,yOe].join(Ol),modelMetadata:[Xd,t,vOe].join(Ol)}}function rZ(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function bOe(t){const e=t.split(Ol);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(Ol)}function xOe(t){return t.startsWith(xf.URL_SCHEME)?t.slice(xf.URL_SCHEME.length):t}class xf{constructor(e){if(!ge().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=nZ(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),i=lP(e),s=Wc.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,eOe(s));const o={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),{modelArtifactsInfo:i}}catch{throw rZ(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${i.modelTopologyBytes}, weightSpecsBytes=${i.weightSpecsBytes}, weightDataBytes=${i.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const i=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(i==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=i;const s=this.LS.getItem(this.keys.modelMetadata);if(s!=null){const a=JSON.parse(s);n.format=a.format,n.generatedBy=a.generatedBy,n.convertedBy=a.convertedBy,a.signature!=null&&(n.signature=a.signature),a.userDefinedMetadata!=null&&(n.userDefinedMetadata=a.userDefinedMetadata),a.modelInitializer!=null&&(n.modelInitializer=a.modelInitializer),a.initializerSignature!=null&&(n.initializerSignature=a.initializerSignature),a.trainingConfig!=null&&(n.trainingConfig=a.trainingConfig)}const o=this.LS.getItem(this.keys.weightData);if(o==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=tOe(o),n}}xf.URL_SCHEME="localstorage://";const iZ=t=>ge().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(xf.URL_SCHEME)?wOe(t.slice(xf.URL_SCHEME.length)):null;xr.registerSaveRouter(iZ);xr.registerLoadRouter(iZ);function wOe(t){return new xf(t)}class SOe{constructor(){U(ge().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),U(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=Xd+Ol,r=Ol+tZ;for(let i=0;i<this.LS.length;++i){const s=this.LS.key(i);if(s.startsWith(n)&&s.endsWith(r)){const o=bOe(s);e[o]=JSON.parse(this.LS.getItem(s))}}return e}async removeModel(e){e=xOe(e);const n=nZ(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return rZ(n),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kW="://";class Ra{constructor(){this.managers={}}static getInstance(){return Ra.instance==null&&(Ra.instance=new Ra),Ra.instance}static registerManager(e,n){U(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(kW)&&(e=e.slice(0,e.indexOf(kW))),U(e.length>0,()=>"scheme must not be an empty string.");const r=Ra.getInstance();U(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){const n=Ra.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(Ra.getInstance().managers)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TOe{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(typeof window>"u"||!ge().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const i=this.functionRefs[r.data.index];i(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return LQ(e)}}if(ge().get("IS_BROWSER")){ge().setPlatform("browser",new TOe);try{Ra.registerManager(xf.URL_SCHEME,new SOe)}catch{}try{Ra.registerManager(bf.URL_SCHEME,new pOe)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const COe={importFetch:()=>require("node-fetch")};let gk;class EOe{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return ge().global.fetch!=null?ge().global.fetch(e,n):(gk==null&&(gk=COe.importFetch()),gk(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}ge().get("IS_NODE")&&!ge().get("IS_BROWSER")&&ge().setPlatform("node",new EOe);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xt(t,e="float32",n){return e=e||"float32",fu(t),new Fr(t,e,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IOe(t,e){const n=K(t,"x","cast");if(!u$e(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},i={dtype:e};return re.runKernel(zv,r,i)}const Be=ae({cast_:IOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Oe(t){const n={x:K(t,"x","clone","string_or_numeric")};return re.runKernel(e0,n)}const tf=ae({clone_:_Oe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AOe(t,e=!1){console.log(t.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */qQ();const kOe={buffer:xt,cast:Be,clone:tf,print:AOe};B$e(kOe);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NOe(t,e){let n=K(t,"a","add"),r=K(e,"b","add");[n,r]=Vn(n,r);const i={a:n,b:r};return re.runKernel(vm,i)}const $e=ae({add_:NOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ROe(t,e){let n=K(t,"a","floorDiv"),r=K(e,"b","floorDiv");[n,r]=Vn(n,r);const i={a:n,b:r};return re.runKernel(Zv,i)}const sZ=ae({floorDiv_:ROe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DOe(t,e){let n=K(t,"a","div"),r=K(e,"b","div");if([n,r]=Vn(n,r),n.dtype==="int32"&&r.dtype==="int32")return sZ(n,r);const i={a:n,b:r},s={};return re.runKernel(Hv,i,s)}const et=ae({div_:DOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Oe(t,e){let n=K(t,"a","mul"),r=K(e,"b","mul");[n,r]=Vn(n,r);const i={a:n,b:r};return re.runKernel(u0,i)}const ne=ae({mul_:$Oe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OOe(t){const e=K(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return re.runKernel(LT,n)}else{const n={x:e};return re.runKernel(NT,n)}}const bi=ae({abs_:OOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function POe(t){const n={x:K(t,"x","acos")};return re.runKernel(Ov,n)}const MOe=ae({acos_:POe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LOe(t){const n={x:K(t,"x","acosh")};return re.runKernel(Pv,n)}const FOe=ae({acosh_:LOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VOe(t,e=null,n=!1){const i={x:K(t,"x","all","bool")},s={axis:e,keepDims:n};return re.runKernel(xO,i,s)}const oZ=ae({all_:VOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BOe(t,e=null,n=!1){const i={x:K(t,"x","any","bool")},s={axis:e,keepDims:n};return re.runKernel(wO,i,s)}const VN=ae({any_:BOe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zOe(t,e=0){const r={x:K(t,"x","argMax")},i={axis:e};return re.runKernel(RT,r,i)}const Gy=ae({argMax_:zOe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UOe(t,e=0){const r={x:K(t,"x","argMin")},i={axis:e};return re.runKernel(DT,r,i)}const jOe=ae({argMin_:UOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WOe(t){const n={x:K(t,"x","asin")};return re.runKernel(Mv,n)}const GOe=ae({asin_:WOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HOe(t){const n={x:K(t,"x","asinh")};return re.runKernel(Lv,n)}const qOe=ae({asinh_:HOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KOe(t){const n={x:K(t,"x","atan")};return re.runKernel(Fv,n)}const XOe=ae({atan_:KOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YOe(t,e){let n=K(t,"a","atan2"),r=K(e,"b","atan2");[n,r]=Vn(n,r);const i={a:n,b:r};return re.runKernel(Bv,i)}const QOe=ae({atan2_:YOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZOe(t){const n={x:K(t,"x","atanh")};return re.runKernel(Vv,n)}const JOe=ae({atanh_:ZOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R0(t,e,n,r,i="NHWC",s){const o=t[3],a=[...e,o],l=pu(i);return Ur(t,a,n,s,r,null,null,l)}function Io(t,e,n,r,i,s,o="channelsLast"){const[a,l]=Hy(e);let u;if(o==="channelsLast")u=[a,l,t[3],t[3]];else if(o==="channelsFirst")u=[a,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return Ur(t,u,n,r,i,s,!1,o)}function du(t,e,n,r,i,s,o="NDHWC"){const[a,l,u]=BN(e);let h,d;if(o==="NDHWC")d="channelsLast",h=[a,l,u,t[4],t[4]];else if(o==="NCDHW")d="channelsFirst",h=[a,l,u,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return Gc(t,h,n,r,i,!1,d,s)}function Ur(t,e,n,r,i,s,o=!1,a="channelsLast"){let[l,u,h,d]=[-1,-1,-1,-1];if(a==="channelsLast")[l,u,h,d]=t;else if(a==="channelsFirst")[l,d,u,h]=t;else throw new Error(`Unknown dataFormat ${a}`);const[p,g,,y]=e,[b,x]=Hy(n),[w,C]=Hy(r),E=mp(p,w),_=mp(g,C),{padInfo:A,outHeight:P,outWidth:N}=nPe(i,u,h,b,x,E,_,s,a),R=o?y*d:y;let D;return a==="channelsFirst"?D=[l,R,P,N]:a==="channelsLast"&&(D=[l,P,N,R]),{batchSize:l,dataFormat:a,inHeight:u,inWidth:h,inChannels:d,outHeight:P,outWidth:N,outChannels:R,padInfo:A,strideHeight:b,strideWidth:x,filterHeight:p,filterWidth:g,effectiveFilterHeight:E,effectiveFilterWidth:_,dilationHeight:w,dilationWidth:C,inShape:t,outShape:D,filterShape:e}}function Gc(t,e,n,r,i,s=!1,o="channelsLast",a){let[l,u,h,d,p]=[-1,-1,-1,-1,-1];if(o==="channelsLast")[l,u,h,d,p]=t;else if(o==="channelsFirst")[l,p,u,h,d]=t;else throw new Error(`Unknown dataFormat ${o}`);const[g,y,b,,x]=e,[w,C,E]=BN(n),[_,A,P]=BN(r),N=mp(g,_),R=mp(y,A),D=mp(b,P),{padInfo:O,outDepth:k,outHeight:F,outWidth:L}=rPe(i,u,h,d,w,C,E,N,R,D,a),q=s?x*p:x;let Y;return o==="channelsFirst"?Y=[l,q,k,F,L]:o==="channelsLast"&&(Y=[l,k,F,L,q]),{batchSize:l,dataFormat:o,inDepth:u,inHeight:h,inWidth:d,inChannels:p,outDepth:k,outHeight:F,outWidth:L,outChannels:q,padInfo:O,strideDepth:w,strideHeight:C,strideWidth:E,filterDepth:g,filterHeight:y,filterWidth:b,effectiveFilterDepth:N,effectiveFilterHeight:R,effectiveFilterWidth:D,dilationDepth:_,dilationHeight:A,dilationWidth:P,inShape:t,outShape:Y,filterShape:e}}function ePe(t,e,n,r,i){r==null&&(r=uP(t,e,n));const s=t[0],o=t[1],a=qy((s-e+2*r)/n+1,i),l=qy((o-e+2*r)/n+1,i);return[a,l]}function tPe(t,e,n,r,i,s){i==null&&(i=uP(t,e[0],r[0]));const o=[0,0,0,n];for(let a=0;a<3;a++)t[a]+2*i>=e[a]&&(o[a]=qy((t[a]-e[a]+2*i)/r[a]+1,s));return o}function uP(t,e,n,r=1){const i=mp(e,r);return Math.floor((t[0]*(n-1)-n+i)/2)}function Hy(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function BN(t){return typeof t=="number"?[t,t,t]:t}function mp(t,e){return e<=1?t:t+(t-1)*(e-1)}function nPe(t,e,n,r,i,s,o,a,l){let u,h,d;if(typeof t=="number"){u={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const g=ePe([e,n],s,r,t,a);h=g[0],d=g[1]}else if(t==="same"){h=Math.ceil(e/r),d=Math.ceil(n/i);const p=Math.max(0,(h-1)*r+s-e),g=Math.max(0,(d-1)*i+o-n),y=Math.floor(p/2),b=p-y,x=Math.floor(g/2),w=g-x;u={top:y,bottom:b,left:x,right:w,type:"SAME"}}else if(t==="valid")u={top:0,bottom:0,left:0,right:0,type:"VALID"},h=Math.ceil((e-s+1)/r),d=Math.ceil((n-o+1)/i);else if(typeof t=="object"){const p=l==="channelsLast"?t[1][0]:t[2][0],g=l==="channelsLast"?t[1][1]:t[2][1],y=l==="channelsLast"?t[2][0]:t[3][0],b=l==="channelsLast"?t[2][1]:t[3][1];u={top:p,bottom:g,left:y,right:b,type:p===0&&g===0&&y===0&&b===0?"VALID":"EXPLICIT"},h=qy((e-s+p+g)/r+1,a),d=qy((n-o+y+b)/i+1,a)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:u,outHeight:h,outWidth:d}}function rPe(t,e,n,r,i,s,o,a,l,u,h){let d,p,g,y;if(t==="valid"&&(t=0),typeof t=="number"){d={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const x=tPe([e,n,r,1],[a,l,u],1,[i,s,o],t,h);p=x[0],g=x[1],y=x[2]}else if(t==="same"){p=Math.ceil(e/i),g=Math.ceil(n/s),y=Math.ceil(r/o);const b=(p-1)*i+a-e,x=(g-1)*s+l-n,w=(y-1)*o+u-r,C=Math.floor(b/2),E=b-C,_=Math.floor(x/2),A=x-_,P=Math.floor(w/2),N=w-P;d={top:_,bottom:A,left:P,right:N,front:C,back:E,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:d,outDepth:p,outHeight:g,outWidth:y}}function qy(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function wf(t){const[e,n,r]=Hy(t);return e===1&&n===1&&r===1}function hi(t,e){return wf(t)||wf(e)}function Sf(t){return Hy(t).every(e=>e>0)}function pu(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function Hi(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")U(Fp(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(i=>{U(Fp(i),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${i}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iPe(t,e){const r={x:K(t,"x","reshape","string_or_numeric")},i={shape:e};return re.runKernel(yC,r,i)}const oe=ae({reshape_:iPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sPe(t,e,n,r,i){const s=K(t,"x","avgPool","float32"),o=1;U(hi(n,o),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`);let a=s,l=!1;s.rank===3&&(l=!0,a=oe(s,[1,s.shape[0],s.shape[1],s.shape[2]])),U(a.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),Hi("avgPool",r,i);const u={x:a},h={filterSize:e,strides:n,pad:r,dimRoundingMode:i};let d=re.runKernel($T,u,h);return d=Be(d,s.dtype),l?oe(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const cP=ae({avgPool_:sPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oPe(t,e,n,r,i,s="NDHWC"){const o=K(t,"x","avgPool3d","float32");let a=o,l=!1;o.rank===4&&(l=!0,a=oe(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),U(a.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),U(s==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),U(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),Hi("avgPool3d",r,i);const u={x:a},h={filterSize:e,strides:n,pad:r,dimRoundingMode:i,dataFormat:s};let d=re.runKernel(OT,u,h);return d=Be(d,a.dtype),l?oe(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const aPe=ae({avgPool3d_:oPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lPe(t,e=0){U(t.length>=1,()=>"Pass at least one tensor to concat");const n=QQ(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(s=>{if(s.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${s.dtype}. `)}),n.length===1)return tf(n[0]);const r=n,i={axis:e};return re.runKernel(FT,r,i)}const Ui=ae({concat_:lPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uPe(t,e,n=!1,r=!1){let i=K(t,"a","matMul"),s=K(e,"b","matMul");[i,s]=Vn(i,s);const o={a:i,b:s},a={transposeA:n,transposeB:r};return re.runKernel(PT,o,a)}const zt=ae({matMul_:uPe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cPe(t){const n={x:K(t,"x","sigmoid","float32")};return re.runKernel(x0,n)}const bm=ae({sigmoid_:cPe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hPe(t,e,n){const r=K(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const i={x:r},s={begin:e,size:n};return re.runKernel(SC,i,s)}const dn=ae({slice_:hPe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fPe(t){const n={x:K(t,"x","tanh","float32")};return re.runKernel(I0,n)}const RC=ae({tanh_:fPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dPe(t,e,n){const r=K(t,"x","batchToSpaceND"),i=e.reduce((a,l)=>a*l);U(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),U(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),U(r.shape[0]%i===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${i}`);const s={x:r},o={blockShape:e,crops:n};return re.runKernel(MT,s,o)}const hP=ae({batchToSpaceND_:dPe});function pPe(t){let e;return t.rank===0||t.rank===1?e=oe(t,[1,1,1,t.size]):t.rank===2?e=oe(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=oe(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mPe(t,e,n,r,i,s){s==null&&(s=.001);const o=K(t,"x","batchNorm"),a=K(e,"mean","batchNorm"),l=K(n,"variance","batchNorm");let u;i!=null&&(u=K(i,"scale","batchNorm"));let h;r!=null&&(h=K(r,"offset","batchNorm")),U(a.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),U(h==null||a.rank===h.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),U(u==null||a.rank===u.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const p={x:pPe(o),scale:u,offset:h,mean:a,variance:l},g={varianceEpsilon:s},y=re.runKernel(qT,p,g);return oe(y,o.shape)}const DC=ae({batchNorm_:mPe});function gPe(t,e,n,r,i,s){const o=K(t,"x","batchNorm"),a=K(e,"mean","batchNorm"),l=K(n,"variance","batchNorm");let u;i!=null&&(u=K(i,"scale","batchNorm"));let h;return r!=null&&(h=K(r,"offset","batchNorm")),U(o.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${o.rank}.`),U(a.rank===2||a.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),U(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),u!=null&&U(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${u.rank}.`),h!=null&&U(h.rank===2||h.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${h.rank}.`),DC(o,a,l,h,u,s)}const yPe=ae({batchNorm2d_:gPe});function vPe(t,e,n,r,i,s){const o=K(t,"x","batchNorm"),a=K(e,"mean","batchNorm"),l=K(n,"variance","batchNorm");let u;i!=null&&(u=K(i,"scale","batchNorm"));let h;return r!=null&&(h=K(r,"offset","batchNorm")),U(o.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${o.rank}.`),U(a.rank===3||a.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),U(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),u!=null&&U(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${u.rank}.`),h!=null&&U(h.rank===3||h.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${h.rank}.`),DC(o,a,l,h,u,s)}const bPe=ae({batchNorm3d_:vPe});function xPe(t,e,n,r,i,s){const o=K(t,"x","batchNorm"),a=K(e,"mean","batchNorm"),l=K(n,"variance","batchNorm");let u;i!=null&&(u=K(i,"scale","batchNorm"));let h;return r!=null&&(h=K(r,"offset","batchNorm")),U(o.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${o.rank}.`),U(a.rank===4||a.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),U(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),u!=null&&U(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${u.rank}.`),h!=null&&U(h.rank===4||h.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${h.rank}.`),DC(o,a,l,h,u,s)}const wPe=ae({batchNorm4d_:xPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SPe(t,e,n){const r=K(t,"x","bincount"),i=K(e,"weights","bincount");U(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),U(n>=0,()=>`size must be non-negative, but got ${n}.`),U(i.size===r.size||i.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${i.shape}.`);const s={x:r,weights:i},o={size:n};return re.runKernel(CO,s,o)}const TPe=ae({bincount_:SPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CPe(t,e){let n=K(t,"broadcastTo","x");const r=n.shape;if(fu(e),e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const u=n.shape.slice();for(;u.length<e.length;)u.unshift(1);n=oe(n,u)}const i=n.shape,s=Array.from(e);for(let u=e.length-1;u>=0;u--)if(i[u]===e[u])s[u]=1;else if(n.shape[u]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(s.map((u,h)=>u>1?h:-1).filter(u=>u>=0).length===0)return tf(n);const a={x:n},l={reps:s};return re.runKernel(_0,a,l)}const yy=ae({broadcastTo_:CPe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EPe(t){const n={x:K(t,"x","ceil","float32")};return re.runKernel(Uv,n)}const IPe=ae({ceil_:EPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $C(t,e,n){fu(t),n=n||gm(e);const r={shape:t,value:e,dtype:n};return re.runKernel(VO,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Pe(t,e,n){const r=K(t,"x","clipByValue");if(U(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return $C(r.shape,e,r.dtype);const i={x:r},s={clipValueMin:e,clipValueMax:n};return re.runKernel(jv,i,s)}const Os=ae({clipByValue_:_Pe});function APe(t){return Ui(t,0)}const kPe=ae({concat1d_:APe});function NPe(t,e){return Ui(t,e)}const RPe=ae({concat2d_:NPe});function DPe(t,e){return Ui(t,e)}const $Pe=ae({concat3d_:DPe});function OPe(t,e){return Ui(t,e)}const PPe=ae({concat4d_:OPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MPe(t,e,n,r,i="NHWC",s=[1,1],o){const a=K(t,"x","conv2d","float32"),l=K(e,"filter","conv2d","float32");let u=a,h=!1;a.rank===3&&(h=!0,u=oe(a,[1,a.shape[0],a.shape[1],a.shape[2]])),U(u.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${u.rank}.`),U(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),Hi("conv2d",r,o);const d=i==="NHWC"?u.shape[3]:u.shape[1];U(d===l.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${l.shape[2]}.`),U(hi(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),U(Sf(s),()=>"Error in conv2D: Dilated rates should be larger than 0."),U(Sf(n),()=>"Error in conv2D: Strides should be larger than 0.");const p={x:u,filter:l},g={strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:o},y=re.runKernel(VT,p,g);return h?oe(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const Tf=ae({conv2d_:MPe});function LPe(t,e,n,r,i="NWC",s=1,o){const a=K(t,"x","conv1d"),l=K(e,"filter","conv1d");let u=a,h=!1;a.rank===2&&(h=!0,u=oe(a,[1,a.shape[0],a.shape[1]])),U(u.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${u.rank}.`),U(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),Hi("conv1d",r,o),U(u.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${u.shape[2]}) must match input depth for filter ${l.shape[1]}.`),U(hi(n,s),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${s}'`),U(Sf(s),()=>"Error in conv1D: Dilated rates should be larger than 0."),U(Sf(n),()=>"Error in conv1D: Stride should be larger than 0."),U(i==="NWC",()=>`Error in conv1d: got dataFormat of ${i} but only NWC is currently supported.`);const d=oe(l,[1,l.shape[0],l.shape[1],l.shape[2]]),p=oe(u,[u.shape[0],1,u.shape[1],u.shape[2]]),x=Tf(p,d,[1,n],r,"NHWC",[1,s],o);return h?oe(x,[x.shape[2],x.shape[3]]):oe(x,[x.shape[0],x.shape[2],x.shape[3]])}const aZ=ae({conv1d_:LPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FPe(t,e,n,r,i,s="NHWC",o){U(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let a=t,l=e,u=!1;e.rank===3&&(u=!0,l=oe(e,[1,e.shape[0],e.shape[1],e.shape[2]]),a=[1,t[0],t[1],t[2]]),U(a.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),U(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),U(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const h=s==="NHWC"?a[3]:a[1],d=s==="NHWC"?l.shape[3]:l.shape[1];U(h===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${h}) must match input depth for filter ${n.shape[2]}.`),U(d===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${n.shape[3]}.`),Hi("conv2dDerInput",i,o);const p={dy:l,filter:n},g={strides:r,pad:i,dataFormat:s,dimRoundingMode:o,inputShape:a},y=re.runKernel(BT,p,g);return u?oe(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const fP=ae({conv2DBackpropInput_:FPe});function VPe(t,e,n,r,i,s){const o=K(t,"x","conv2dTranspose"),a=K(e,"filter","conv2dTranspose");return fP(n,o,a,r,i,"NHWC",s)}const lZ=ae({conv2dTranspose_:VPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BPe(t,e,n,r,i="NDHWC",s=[1,1,1]){const o=K(t,"x","conv3d"),a=K(e,"filter","conv3d");let l=o,u=!1;o.rank===4&&(u=!0,l=oe(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),U(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),U(a.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),U(l.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${a.shape[3]}.`),U(hi(n,s),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),U(i==="NDHWC",()=>`Error in conv3d: got dataFormat of ${i} but only NDHWC is currently supported.`),U(Sf(s),()=>"Error in conv3D: Dilated rates should be larger than 0."),U(Sf(n),()=>"Error in conv3D: Strides should be larger than 0.");const h={x:l,filter:a},d={strides:n,pad:r,dataFormat:i,dilations:s},p=re.runKernel(zT,h,d);return u?oe(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}const zPe=ae({conv3d_:BPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UPe(t,e,n,r,i){U(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let s=t,o=e,a=!1;e.rank===4&&(a=!0,o=oe(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),s=[1,t[0],t[1],t[2],t[3]]);const l=s[4],u=o.shape[4];U(s.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${s.length}.`),U(o.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${o.rank}`),U(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),U(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),U(u===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${u}) must match output depth for filter ${n.shape[4]}.`);const h={dy:o,filter:n},d={pad:i,strides:r,inputShape:s},p=re.runKernel(kO,h,d);return a?oe(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}const uZ=ae({conv3DBackpropInput_:UPe});function jPe(t,e,n,r,i){const s=K(t,"x","conv3dTranspose"),o=K(e,"filter","conv3dTranspose");return uZ(n,s,o,r,i)}const WPe=ae({conv3dTranspose_:jPe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GPe(t){const n={x:K(t,"x","cos","float32")};return re.runKernel(Wv,n)}const dP=ae({cos_:GPe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HPe(t){const n={x:K(t,"x","cosh","float32")};return re.runKernel(Gv,n)}const cZ=ae({cosh_:HPe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qPe(t,e=0,n=!1,r=!1){const s={x:K(t,"x","cumprod")},o={axis:e,exclusive:n,reverse:r};return re.runKernel(NO,s,o)}const zN=ae({cumprod_:qPe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KPe(t,e=0,n=!1,r=!1){const s={x:K(t,"x","cumsum")},o={axis:e,exclusive:n,reverse:r};return re.runKernel(UT,s,o)}const hZ=ae({cumsum_:KPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XPe(t,e,n,r=!1){const i=K(t,"x","denseBincount"),s=K(e,"weights","denseBincount");U(i.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${i.dtype}`),U(i.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${i.rank}.`),U(n>=0,()=>`size must be non-negative, but got ${n}.`),U(s.size===i.size||s.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${i.shape}, weights shape: ${s.shape}.`);const o={x:i,weights:s},a={size:n,binaryOutput:r};return re.runKernel(DO,o,a)}const NW=ae({denseBincount_:XPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YPe(t,e,n="NHWC"){const r=K(t,"x","depthToSpace","float32"),i=n==="NHWC"?r.shape[1]:r.shape[2],s=n==="NHWC"?r.shape[2]:r.shape[3],o=n==="NHWC"?r.shape[3]:r.shape[1];U(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),U(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${e}  for depthToSpace with input shape
    ${r.shape}`),U(s*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${s} and ${e} for depthToSpace with input shape
        ${r.shape}`),U(o%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${o} for depthToSpace with input shape ${r.shape}`);const a={x:r},l={blockSize:e,dataFormat:n};return re.runKernel($O,a,l)}const QPe=ae({depthToSpace_:YPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZPe(t,e,n,r,i="NHWC",s=[1,1],o){const a=K(t,"x","depthwiseConv2d","float32"),l=K(e,"filter","depthwiseConv2d","float32");let u=a,h=!1;a.rank===3&&(h=!0,u=oe(a,[1,a.shape[0],a.shape[1],a.shape[2]])),U(u.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${u.rank}.`),U(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);const d=i==="NHWC"?u.shape[3]:u.shape[1];U(d===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${l.shape[2]}.`),Hi("depthwiseConv2d",r,o);const p={x:u,filter:l},g={strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:o},y=re.runKernel(jT,p,g);return h?oe(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const pP=ae({depthwiseConv2d_:ZPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JPe(t,e,n,r,i=[1,1],s="NHWC"){const o=K(t,"x","dilation2d"),a=K(e,"filter","dilation2d");U(o.rank===3||o.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${o.rank}.`),U(a.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),U(s==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${s}`);let l=o,u=!1;o.rank===3&&(l=oe(o,[1,o.shape[0],o.shape[1],o.shape[2]]),u=!0),U(l.shape[3]===a.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${a.shape[2]}`);const h={x:l,filter:a},d={strides:n,pad:r,dilations:i},p=re.runKernel(WT,h,d);return u?oe(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const eMe=ae({dilation2d_:JPe});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zp(t,e){const n=t.length,r=[];for(let i=0;i<n;i++){const s=n-1-i,o=t[s]||1;(e[e.length-1-i]||1)>1&&o===1&&r.unshift(s)}return r}function gr(t,e){const n=[];for(let r=0;r<e.length;r++){const i=t[t.length-r-1],s=e.length-r-1,o=e[s];(i==null||i===1&&o>1)&&n.unshift(s)}return n}function dt(t,e){const n=Math.max(t.length,e.length),r=new Array(n);for(let i=0;i<n;i++){let s=t[t.length-i-1];s==null&&(s=1);let o=e[e.length-i-1];if(o==null&&(o=1),s===1)r[n-i-1]=o;else if(o===1)r[n-i-1]=s;else if(s!==o){const a=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(a)}else r[n-i-1]=s}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tMe(t,e){let n=K(t,"a","equal","string_or_numeric"),r=K(e,"b","equal","string_or_numeric");[n,r]=Vn(n,r),dt(n.shape,r.shape);const i={a:n,b:r};return re.runKernel(GT,i)}const rl=ae({equal_:tMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nMe(t,e,n){const r=K(e,"a","where"),i=K(n,"b","where"),s=K(t,"condition","where","bool"),o=dt(dt(s.shape,r.shape),i.shape),a=yy(s,o),l=yy(r,o),u=yy(i,o),h={condition:a,t:l,e:u};return re.runKernel(wC,h)}const Ei=ae({where_:nMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rMe(t){const n={x:K(t,"x","zerosLike")};return re.runKernel(kC,n)}const Ot=ae({zerosLike_:rMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iMe(t,e){let n=K(t,"a","div"),r=K(e,"b","div");[n,r]=Vn(n,r);const i=et(n,r),s=Ot(i),o=rl(r,s);return Ei(o,s,i)}const sMe=ae({divNoNan_:iMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oMe(t,e){const n=K(t,"t1","dot"),r=K(e,"t2","dot");U((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const i=n.rank===1?n.size:n.shape[1],s=r.rank===1?r.size:r.shape[0];if(U(i===s,()=>`Error in dot: inner dimensions of inputs must match, but got ${i} and ${s}.`),n.rank===1&&r.rank===1){const o=oe(n,[1,-1]),a=oe(r,[-1,1]),l=zt(o,a);return oe(l,[])}else if(n.rank===1&&r.rank===2){const o=oe(n,[1,-1]),a=oe(r,[r.shape[0],r.shape[1]]),l=zt(o,a);return oe(l,[l.size])}else if(n.rank===2&&r.rank===1){const o=oe(r,[-1,1]),a=zt(n,o);return oe(a,[a.size])}else{const o=oe(r,[r.shape[0],r.shape[1]]);return zt(n,o)}}const aMe=ae({dot_:oMe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lMe(t,...e){const n=e.map((i,s)=>K(i,`tensors${s}`,"einsum")),r={equation:t};return re.runKernel(MO,n,r)}const jg=ae({einsum_:lMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uMe(t){const n={x:K(t,"x","elu","float32")};return re.runKernel(qv,n)}const OC=ae({elu_:uMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cMe(t){let e=K(t,"x","erf");U(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=Be(e,"float32"));const n={x:e};return re.runKernel(Kv,n)}const fZ=ae({erf_:cMe});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mP(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function dZ(t,e,n){const r=t.length+e.length,i=[];let s=0,o=0;for(let a=0;a<r;a++)n.indexOf(a)===-1?i.push(t[s++]):i.push(e[o++]);return i}function Rr(t,e){const n=[],r=t.length;for(let s=0;s<r;s++)e.indexOf(s)===-1&&n.push(t[s]);const i=e.map(s=>t[s]);return[n,i]}function Qn(t,e){const n=e.map(r=>1);return dZ(t,n,e)}function jr(t,e,n){U(mP(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function Rn(t,e){if(mP(t,e))return null;const n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function Hc(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function Bn(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hMe(t,e=null,n=!1){const i={x:K(t,"x","max")},s={reductionIndices:e,keepDims:n};return re.runKernel(rC,i,s)}const Zo=ae({max_:hMe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fMe(t,e=null,n=!1){const i={x:K(t,"x","min")},s={axis:e,keepDims:n};return re.runKernel(aC,i,s)}const eS=ae({min_:fMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dMe(t,e){let n=K(t,"base","pow"),r=K(e,"exp","pow");[n,r]=Vn(n,r);const i={a:n,b:r};return re.runKernel(c0,i)}const Cf=ae({pow_:dMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ut(t,e){if((So(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&So(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return N0(t,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pMe(t){const n={x:K(t,"x","sqrt","float32")};return re.runKernel(S0,n)}const ci=ae({sqrt_:pMe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mMe(t){const e=K(t,"x","square"),n={};return re.runKernel("Square",{x:e},n)}const yn=ae({square_:mMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gMe(t,e=null,n=!1){let r=K(t,"x","sum");r.dtype==="bool"&&(r=Be(r,"int32"));const i={x:r},s={axis:e,keepDims:n};return re.runKernel(TC,i,s)}const Qe=ae({sum_:gMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yMe(t,e="euclidean",n=null,r=!1){t=K(t,"x","norm");const i=pZ(t,e,n);let s=i.shape;if(r){const o=wt(n,t.shape);s=Qn(i.shape,o)}return oe(i,s)}function pZ(t,e,n=null){if(t.rank===0)return bi(t);if(t.rank!==1&&n===null)return pZ(oe(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return Qe(bi(t),n);if(e===1/0)return Zo(bi(t),n);if(e===-1/0)return eS(bi(t),n);if(e==="euclidean"||e===2)return ci(Qe(Cf(bi(t),Ut(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return Zo(Qe(bi(t),n[0]),n[1]-1);if(e===1/0)return Zo(Qe(bi(t),n[1]),n[0]);if(e===-1/0)return eS(Qe(bi(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return ci(Qe(yn(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const PC=ae({norm_:yMe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vMe(t,e=null,n=!1){return PC(t,"euclidean",e,n)}const bMe=ae({euclideanNorm_:vMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xMe(t){const n={x:K(t,"x","exp")};return re.runKernel(Xv,n)}const il=ae({exp_:xMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wMe(t,e=0){const n=K(t,"x","expandDims","string_or_numeric");U(e<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},i={dim:e};return re.runKernel(HT,r,i)}const Mi=ae({expandDims_:wMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SMe(t){const n={x:K(t,"x","expm1")};return re.runKernel(Yv,n)}const TMe=ae({expm1_:SMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CMe(t,e){const n=K(t,"x","tile","string_or_numeric");U(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const r={x:n},i={reps:e};return re.runKernel(_0,r,i)}const Yo=ae({tile_:CMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EMe(t,e,n,r="float32"){e==null&&(e=t);const i=xt([t,e],r),s=t<=e?t:e;for(let a=0;a<s;++a)i.set(1,a,a);const o=oe(i.toTensor(),[t,e]);if(n==null)return o;if(n.length===1)return Yo(Mi(o,0),[n[0],1,1]);if(n.length===2)return Yo(Mi(Mi(o,0),0),[n[0],n[1],1,1]);if(n.length===3)return Yo(Mi(Mi(Mi(o,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const mZ=ae({eye_:EMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IMe(t){const n={x:K(t,"x","floor","float32")};return re.runKernel(Qv,n)}const MC=ae({floor_:IMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Me(t,e,n=0,r=0){const i=K(t,"x","gather"),s=K(e,"indices","gather","int32"),o={x:i,indices:s},a={axis:n,batchDims:r};return re.runKernel(KT,o,a)}const gP=ae({gather_:_Me});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AMe(t,e){let n=K(t,"a","greater","string_or_numeric"),r=K(e,"b","greater","string_or_numeric");[n,r]=Vn(n,r),dt(n.shape,r.shape);const i={a:n,b:r};return re.runKernel(XT,i)}const Ls=ae({greater_:AMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kMe(t,e){let n=K(t,"a","greaterEqual","string_or_numeric"),r=K(e,"b","greaterEqual","string_or_numeric");[n,r]=Vn(n,r),dt(n.shape,r.shape);const i={a:n,b:r};return re.runKernel(Jv,i)}const zf=ae({greaterEqual_:kMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NMe(t){const n={input:K(t,"input","imag")};return re.runKernel(UO,n)}const yP=ae({imag_:NMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RMe(t){const n={x:K(t,"x","isFinite")};return re.runKernel(t0,n)}const DMe=ae({isFinite_:RMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Me(t){const n={x:K(t,"x","isInf")};return re.runKernel(n0,n)}const OMe=ae({isInf_:$Me});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PMe(t){const n={x:K(t,"x","isNaN")};return re.runKernel(r0,n)}const MMe=ae({isNaN_:PMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LMe(t,e=.2){const r={x:K(t,"x","leakyRelu")},i={alpha:e};return re.runKernel(YT,r,i)}const vP=ae({leakyRelu_:LMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FMe(t,e){let n=K(t,"a","less","string_or_numeric"),r=K(e,"b","less","string_or_numeric");[n,r]=Vn(n,r),dt(n.shape,r.shape);const i={a:n,b:r};return re.runKernel(QT,i)}const tS=ae({less_:FMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VMe(t,e){let n=K(t,"a","lessEqual","string_or_numeric"),r=K(e,"b","lessEqual","string_or_numeric");[n,r]=Vn(n,r),dt(n.shape,r.shape);const i={a:n,b:r};return re.runKernel(ZT,i)}const xm=ae({lessEqual_:VMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BMe(t,e=5,n=1,r=1,i=.5){const s=K(t,"x","localResponseNormalization");U(s.rank===4||s.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${s.rank}.`),U(Fp(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let o=s,a=!1;s.rank===3&&(a=!0,o=oe(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const l={x:o},u={depthRadius:e,bias:n,alpha:r,beta:i},h=re.runKernel(nC,l,u);return a?oe(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const zMe=ae({localResponseNormalization_:BMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UMe(t){const n={x:K(t,"x","log","float32")};return re.runKernel(i0,n)}const sl=ae({log_:UMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jMe(t){const n={x:K(t,"x","log1p")};return re.runKernel(s0,n)}const gZ=ae({log1p_:jMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WMe(t,e){U(CN(t),()=>"The f passed in variableGrads(f) must be a function"),U(e==null||Array.isArray(e)&&e.every(u=>u instanceof Zw),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const u in re.registeredVariables)e.push(re.registeredVariables[u])}const r=n?e.filter(u=>!u.trainable):null,i=e.length;e=e.filter(u=>u.trainable),U(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${i} variables is trainable.`);const s=!0,{value:o,grads:a}=re.gradients(t,e,null,s);U(a.some(u=>u!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),U(o.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${o.rank} tensor`);const l={};return e.forEach((u,h)=>{a[h]!=null&&(l[u.name]=a[h])}),r?.forEach(u=>l[u.name]=null),{value:o,grads:l}}function Up(t){return re.customGrad(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GMe(t){const n={x:K(t,"x","neg")};return re.runKernel(uC,n)}const Fn=ae({neg_:GMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HMe(t){const n={x:K(t,"x","softplus")};return re.runKernel(w0,n)}const D0=ae({softplus_:HMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qMe(t){const e=K(t,"x","logSigmoid");return Up(r=>({value:Fn(D0(Fn(r))),gradFunc:o=>ne(o,bm(Fn(r)))}))(e)}const KMe=ae({logSigmoid_:qMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XMe(t,e){let n=K(t,"a","sub"),r=K(e,"b","sub");[n,r]=Vn(n,r);const i={a:n,b:r};return re.runKernel(C0,i)}const it=ae({sub_:XMe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YMe(t,e=-1){const n=K(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return Up((i,s)=>{const a=Zo(i,e,!0),l=it(i,a),u=it(Be(l,"float32"),sl(Qe(il(l),e,!0)));return s([u]),{value:u,gradFunc:(d,p)=>{const[g]=p,y=!0,b=il(g);return it(d,ne(Qe(d,e,y),b))}}})(n)}const yZ=ae({logSoftmax_:YMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QMe(t,e=null,n=!1){const r=K(t,"x","logSumExp"),i=wt(e,r.shape),s=Zo(r,i,!0),o=it(r,s),a=il(o),l=Qe(a,i),u=sl(l),h=$e(oe(s,u.shape),u);if(n){const d=Qn(h.shape,i);return oe(h,d)}return h}const vZ=ae({logSumExp_:QMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZMe(t,e){const n=K(t,"a","logicalAnd","bool"),r=K(e,"b","logicalAnd","bool");dt(n.shape,r.shape);const i={a:n,b:r};return re.runKernel(JT,i)}const nu=ae({logicalAnd_:ZMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JMe(t){const n={x:K(t,"x","logicalNot","bool")};return re.runKernel(eC,n)}const bP=ae({logicalNot_:JMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eLe(t,e){const n=K(t,"a","logicalOr","bool"),r=K(e,"b","logicalOr","bool");dt(n.shape,r.shape);const i={a:n,b:r};return re.runKernel(tC,i)}const bZ=ae({logicalOr_:eLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tLe(t,e){const n=K(t,"a","logicalXor","bool"),r=K(e,"b","logicalXor","bool");return dt(n.shape,r.shape),nu(bZ(t,e),bP(nu(t,e)))}const nLe=ae({logicalXor_:tLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rLe(t,e,n,r,i){const s=K(t,"x","maxPool"),o=1;let a=s,l=!1;s.rank===3&&(l=!0,a=oe(s,[1,s.shape[0],s.shape[1],s.shape[2]])),U(a.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),U(hi(n,o),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),Hi("maxPool",r,i);const u={x:a},h={filterSize:e,strides:n,pad:r,dimRoundingMode:i},d=re.runKernel(iC,u,h);return l?oe(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const xP=ae({maxPool_:rLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iLe(t,e=[1,1,1],n,r,i,s="NDHWC"){const o=K(t,"x","maxPool3d");let a=o,l=!1;o.rank===4&&(l=!0,a=oe(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),U(a.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),U(s==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),Hi("maxPool3d",r,i);const u={x:a},h={filterSize:e,strides:n,pad:r,dimRoundingMode:i,dataFormat:s},d=re.runKernel(sC,u,h);return l?oe(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const sLe=ae({maxPool3d_:iLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oLe(t,e){let n=K(t,"a","maximum"),r=K(e,"b","maximum");[n,r]=Vn(n,r),n.dtype==="bool"&&(n=Be(n,"int32"),r=Be(r,"int32")),dt(n.shape,r.shape);const i={a:n,b:r};return re.runKernel(o0,i)}const qc=ae({maximum_:oLe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aLe(t,e=null,n=!1){const i={x:K(t,"x","mean")},s={axis:e,keepDims:n};return re.runKernel(oC,i,s)}const Yn=ae({mean_:aLe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cr(t,e="float32"){if(fu(t),e==="complex64"){const r=Cr(t,"float32"),i=Cr(t,"float32");return vf(r,i)}const n=ui(Se(t),e);return re.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kc(t,e="float32"){if(fu(t),e==="complex64"){const r=Kc(t,"float32"),i=Cr(t,"float32");return vf(r,i)}const n=gO(Se(t),e);return re.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lLe(t,e){let n=K(t,"a","minimum"),r=K(e,"b","minimum");[n,r]=Vn(n,r),n.dtype==="bool"&&(n=Be(n,"int32"),r=Be(r,"int32")),dt(n.shape,r.shape);const i={a:n,b:r};return re.runKernel(a0,i)}const Ky=ae({minimum_:lLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uLe(t,e,n){U(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=K(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");U(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const i=n==="reflect"?1:0;for(let a=0;a<r.rank;a++)U(e[a].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),U(e[a][0]>=0&&e[a][0]<=r.shape[a]-i&&e[a][1]>=0&&e[a][1]<=r.shape[a]-i,()=>`Padding in dimension ${a} cannot be greater than or equal to ${r.shape[a]-i} or less than 0 for input of shape ${r.shape}`);const s={paddings:e,mode:n},o={x:r};return re.runKernel(lC,o,s)}const cLe=ae({mirrorPad_:uLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hLe(t,e){let n=K(t,"a","mod"),r=K(e,"b","mod");[n,r]=Vn(n,r);const i={a:n,b:r};return re.runKernel(l0,i)}const fLe=ae({mod_:hLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dLe(t,e=null,n=!1){t=K(t,"x","moments");const r=wt(e,t.shape),i=Yn(t,r,n);let s=i.shape;n||(s=Qn(i.shape,r));const o=yn(it(Be(t,"float32"),oe(i,s))),a=Yn(o,r,n);return{mean:i,variance:a}}const wP=ae({moments_:dLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pLe(t,e){let n=K(t,"a","notEqual","string_or_numeric"),r=K(e,"b","notEqual","string_or_numeric");[n,r]=Vn(n,r),dt(n.shape,r.shape);const i={a:n,b:r};return re.runKernel(cC,i)}const nS=ae({notEqual_:pLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mLe(t,e,n=1,r=0,i="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const o={indices:K(t,"indices","oneHot","int32")},a={dtype:i,depth:e,onValue:n,offValue:r};return re.runKernel(fC,o,a)}const xZ=ae({oneHot_:mLe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gLe(t){const n={x:K(t,"x","onesLike")};return re.runKernel(hC,n)}const To=ae({onesLike_:gLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yLe(t,e,n=0){const r=K(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const i={paddings:e,constantValue:n},s={x:r};return re.runKernel(pC,s,i)}const SP=ae({pad_:yLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vLe(t,e,n){const r=K(t,"x","spaceToBatchND");U(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),U(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),U(r.shape.reduce((o,a,l)=>l>0&&l<=e.length?o&&(a+n[l-1][0]+n[l-1][1])%e[l-1]===0:o,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const i={x:r},s={blockShape:e,paddings:n};return re.runKernel(CC,i,s)}const TP=ae({spaceToBatchND_:vLe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bLe(t,e,n,r,i,s,o){i==null&&(i=[1,1]),s==null&&(s=1),r===0&&(r="valid");const a=K(t,"x","maxPool");let l=a,u=!1;a.rank===3&&(u=!0,l=oe(a,[1,a.shape[0],a.shape[1],a.shape[2]])),U(hi(s,i),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${s} and dilations '${i}'`);const h=Io(l.shape,e,s,i,r),d=[h.dilationHeight,h.dilationWidth];let p;r==="same"?p=wLe([h.filterHeight,h.filterWidth],d):p=[[0,0],[0,0]];const g=d[0]===1&&d[1]===1,[y,b]=xLe([h.inHeight,h.inWidth],d,p),x=g?r:"valid",w=g?l:TP(l,d,y),E=(n==="avg"?()=>cP(w,e,s,x,o):()=>xP(w,e,s,x,o))(),_=g?E:hP(E,d,b);return u?oe(_,[_.shape[1],_.shape[2],_.shape[3]]):_}function xLe(t,e,n){const r=n.map(h=>h[0]),i=n.map(h=>h[1]),s=t.concat(r,i),o=e.map((h,d)=>(h-s[d]%h)%h),a=i.map((h,d)=>h+o[d]),l=e.map((h,d)=>[r[d],a[d]]),u=e.map((h,d)=>[0,o[d]]);return[l,u]}function wLe(t,e){const r=t.map((o,a)=>o+(o-1)*(e[a]-1)).map(o=>o-1),i=r.map(o=>Math.floor(o/2)),s=r.map((o,a)=>o-i[a]);return r.map((o,a)=>[i[a],s[a]])}const SLe=ae({pool_:bLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TLe(t,e){const n=K(t,"x","prelu"),r=K(e,"alpha","prelu"),i={x:n,alpha:r};return re.runKernel(mC,i)}const CP=ae({prelu_:TLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CLe(t,e=null,n=!1){let r=K(t,"x","prod");r.dtype==="bool"&&(r=Be(r,"int32"));const i={x:r},s={axis:e,keepDims:n};return re.runKernel(gC,i,s)}const ELe=ae({prod_:CLe});var _1={exports:{}},ILe=_1.exports,RW;function _Le(){return RW||(RW=1,(function(t){(function(e,n,r){function i(l){var u=this,h=a();u.next=function(){var d=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=d-(u.c=d|0)},u.c=1,u.s0=h(" "),u.s1=h(" "),u.s2=h(" "),u.s0-=h(l),u.s0<0&&(u.s0+=1),u.s1-=h(l),u.s1<0&&(u.s1+=1),u.s2-=h(l),u.s2<0&&(u.s2+=1),h=null}function s(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function o(l,u){var h=new i(l),d=u&&u.state,p=h.next;return p.int32=function(){return h.next()*4294967296|0},p.double=function(){return p()+(p()*2097152|0)*11102230246251565e-32},p.quick=p,d&&(typeof d=="object"&&s(d,h),p.state=function(){return s(h,{})}),p}function a(){var l=4022871197,u=function(h){h=String(h);for(var d=0;d<h.length;d++){l+=h.charCodeAt(d);var p=.02519603282416938*l;l=p>>>0,p-=l,p*=l,l=p>>>0,p-=l,l+=p*4294967296}return(l>>>0)*23283064365386963e-26};return u}n&&n.exports?n.exports=o:this.alea=o})(ILe,t)})(_1)),_1.exports}var A1={exports:{}},ALe=A1.exports,DW;function kLe(){return DW||(DW=1,(function(t){(function(e,n,r){function i(a){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},a===(a|0)?l.x=a:u+=a;for(var h=0;h<u.length+64;h++)l.x^=u.charCodeAt(h)|0,l.next()}function s(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function o(a,l){var u=new i(a),h=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var p=u.next()>>>11,g=(u.next()>>>0)/4294967296,y=(p+g)/(1<<21);while(y===0);return y},d.int32=u.next,d.quick=d,h&&(typeof h=="object"&&s(h,u),d.state=function(){return s(u,{})}),d}n&&n.exports?n.exports=o:this.xor128=o})(ALe,t)})(A1)),A1.exports}var k1={exports:{}},NLe=k1.exports,$W;function RLe(){return $W||($W=1,(function(t){(function(e,n,r){function i(a){var l=this,u="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(d^d<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:u+=a;for(var h=0;h<u.length+64;h++)l.x^=u.charCodeAt(h)|0,h==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function s(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function o(a,l){var u=new i(a),h=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var p=u.next()>>>11,g=(u.next()>>>0)/4294967296,y=(p+g)/(1<<21);while(y===0);return y},d.int32=u.next,d.quick=d,h&&(typeof h=="object"&&s(h,u),d.state=function(){return s(u,{})}),d}n&&n.exports?n.exports=o:this.xorwow=o})(NLe,t)})(k1)),k1.exports}var N1={exports:{}},DLe=N1.exports,OW;function $Le(){return OW||(OW=1,(function(t){(function(e,n,r){function i(a){var l=this;l.next=function(){var h=l.x,d=l.i,p,g;return p=h[d],p^=p>>>7,g=p^p<<24,p=h[d+1&7],g^=p^p>>>10,p=h[d+3&7],g^=p^p>>>3,p=h[d+4&7],g^=p^p<<7,p=h[d+7&7],p=p^p<<13,g^=p^p<<9,h[d]=g,l.i=d+1&7,g};function u(h,d){var p,g=[];if(d===(d|0))g[0]=d;else for(d=""+d,p=0;p<d.length;++p)g[p&7]=g[p&7]<<15^d.charCodeAt(p)+g[p+1&7]<<13;for(;g.length<8;)g.push(0);for(p=0;p<8&&g[p]===0;++p);for(p==8?g[7]=-1:g[p],h.x=g,h.i=0,p=256;p>0;--p)h.next()}u(l,a)}function s(a,l){return l.x=a.x.slice(),l.i=a.i,l}function o(a,l){a==null&&(a=+new Date);var u=new i(a),h=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var p=u.next()>>>11,g=(u.next()>>>0)/4294967296,y=(p+g)/(1<<21);while(y===0);return y},d.int32=u.next,d.quick=d,h&&(h.x&&s(h,u),d.state=function(){return s(u,{})}),d}n&&n.exports?n.exports=o:this.xorshift7=o})(DLe,t)})(N1)),N1.exports}var R1={exports:{}},OLe=R1.exports,PW;function PLe(){return PW||(PW=1,(function(t){(function(e,n,r){function i(a){var l=this;l.next=function(){var h=l.w,d=l.X,p=l.i,g,y;return l.w=h=h+1640531527|0,y=d[p+34&127],g=d[p=p+1&127],y^=y<<13,g^=g<<17,y^=y>>>15,g^=g>>>12,y=d[p]=y^g,l.i=p,y+(h^h>>>16)|0};function u(h,d){var p,g,y,b,x,w=[],C=128;for(d===(d|0)?(g=d,d=null):(d=d+"\0",g=0,C=Math.max(C,d.length)),y=0,b=-32;b<C;++b)d&&(g^=d.charCodeAt((b+32)%d.length)),b===0&&(x=g),g^=g<<10,g^=g>>>15,g^=g<<4,g^=g>>>13,b>=0&&(x=x+1640531527|0,p=w[b&127]^=g+x,y=p==0?y+1:0);for(y>=128&&(w[(d&&d.length||0)&127]=-1),y=127,b=512;b>0;--b)g=w[y+34&127],p=w[y=y+1&127],g^=g<<13,p^=p<<17,g^=g>>>15,p^=p>>>12,w[y]=g^p;h.w=x,h.X=w,h.i=y}u(l,a)}function s(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function o(a,l){a==null&&(a=+new Date);var u=new i(a),h=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var p=u.next()>>>11,g=(u.next()>>>0)/4294967296,y=(p+g)/(1<<21);while(y===0);return y},d.int32=u.next,d.quick=d,h&&(h.X&&s(h,u),d.state=function(){return s(u,{})}),d}n&&n.exports?n.exports=o:this.xor4096=o})(OLe,t)})(R1)),R1.exports}var D1={exports:{}},MLe=D1.exports,MW;function LLe(){return MW||(MW=1,(function(t){(function(e,n,r){function i(a){var l=this,u="";l.next=function(){var d=l.b,p=l.c,g=l.d,y=l.a;return d=d<<25^d>>>7^p,p=p-g|0,g=g<<24^g>>>8^y,y=y-d|0,l.b=d=d<<20^d>>>12^p,l.c=p=p-g|0,l.d=g<<16^p>>>16^y,l.a=y-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):u+=a;for(var h=0;h<u.length+20;h++)l.b^=u.charCodeAt(h)|0,l.next()}function s(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function o(a,l){var u=new i(a),h=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var p=u.next()>>>11,g=(u.next()>>>0)/4294967296,y=(p+g)/(1<<21);while(y===0);return y},d.int32=u.next,d.quick=d,h&&(typeof h=="object"&&s(h,u),d.state=function(){return s(u,{})}),d}n&&n.exports?n.exports=o:this.tychei=o})(MLe,t)})(D1)),D1.exports}var $1={exports:{}};const FLe={},VLe=Object.freeze(Object.defineProperty({__proto__:null,default:FLe},Symbol.toStringTag,{value:"Module"})),BLe=wse(VLe);var zLe=$1.exports,LW;function ULe(){return LW||(LW=1,(function(t){(function(e,n,r){var i=256,s=6,o=52,a="random",l=r.pow(i,s),u=r.pow(2,o),h=u*2,d=i-1,p;function g(_,A,P){var N=[];A=A==!0?{entropy:!0}:A||{};var R=w(x(A.entropy?[_,E(n)]:_??C(),3),N),D=new y(N),O=function(){for(var k=D.g(s),F=l,L=0;k<u;)k=(k+L)*i,F*=i,L=D.g(1);for(;k>=h;)k/=2,F/=2,L>>>=1;return(k+L)/F};return O.int32=function(){return D.g(4)|0},O.quick=function(){return D.g(4)/4294967296},O.double=O,w(E(D.S),n),(A.pass||P||function(k,F,L,q){return q&&(q.S&&b(q,D),k.state=function(){return b(D,{})}),L?(r[a]=k,F):k})(O,R,"global"in A?A.global:this==r,A.state)}function y(_){var A,P=_.length,N=this,R=0,D=N.i=N.j=0,O=N.S=[];for(P||(_=[P++]);R<i;)O[R]=R++;for(R=0;R<i;R++)O[R]=O[D=d&D+_[R%P]+(A=O[R])],O[D]=A;(N.g=function(k){for(var F,L=0,q=N.i,Y=N.j,W=N.S;k--;)F=W[q=d&q+1],L=L*i+W[d&(W[q]=W[Y=d&Y+F])+(W[Y]=F)];return N.i=q,N.j=Y,L})(i)}function b(_,A){return A.i=_.i,A.j=_.j,A.S=_.S.slice(),A}function x(_,A){var P=[],N=typeof _,R;if(A&&N=="object")for(R in _)try{P.push(x(_[R],A-1))}catch{}return P.length?P:N=="string"?_:_+"\0"}function w(_,A){for(var P=_+"",N,R=0;R<P.length;)A[d&R]=d&(N^=A[d&R]*19)+P.charCodeAt(R++);return E(A)}function C(){try{var _;return p&&(_=p.randomBytes)?_=_(i):(_=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(_)),E(_)}catch{var A=e.navigator,P=A&&A.plugins;return[+new Date,e,P,e.screen,E(n)]}}function E(_){return String.fromCharCode.apply(0,_)}if(w(r.random(),n),t.exports){t.exports=g;try{p=BLe}catch{}}else r["seed"+a]=g})(typeof self<"u"?self:zLe,[],Math)})($1)),$1.exports}var yk,FW;function jLe(){if(FW)return yk;FW=1;var t=_Le(),e=kLe(),n=RLe(),r=$Le(),i=PLe(),s=LLe(),o=ULe();return o.alea=t,o.xor128=e,o.xorwow=n,o.xorshift7=r,o.xor4096=i,o.tychei=s,yk=o,yk}var EP=jLe();/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wZ{constructor(e,n,r,i,s){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=i,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const o=s||Math.random();this.random=EP.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const i=this.nextVal;return this.nextVal=NaN,i}let e,n,r=!1;for(;!r;){let i,s,o;do i=2*this.random()-1,s=2*this.random()-1,o=i*i+s*s;while(o>=1||o===0);const a=Math.sqrt(-2*Math.log(o)/o);e=this.mean+this.stdDev*i*a,n=this.mean+this.stdDev*s*a,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class WLe{constructor(e=0,n=1,r,i){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,i==null&&(i=Math.random()),typeof i=="number"&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=EP.alea(i)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GLe(t,e=0,n=1,r,i){if(fu(t),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const s=new wZ(e,n,r,!1,i),o=xt(t,r);for(let a=0;a<o.values.length;a++)o.values[a]=s.nextValue();return o.toTensor()}const HLe=ae({randomNormal_:GLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qLe(t,e=0,n=1,r="float32",i){fu(t);const s=xt(t,r),o=new WLe(e,n,null,i);for(let a=0;a<s.values.length;a++)s.values[a]=o.nextValue();return s.toTensor()}const $0=ae({randomUniform_:qLe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xy(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const i={start:t,stop:e,step:n,dtype:r};return re.runKernel(XO,{},i)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KLe(t){const n={input:K(t,"input","real")};return re.runKernel(YO,n)}const rS=ae({real_:KLe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XLe(t){const n={x:K(t,"x","reciprocal")};return re.runKernel(h0,n)}const YLe=ae({reciprocal_:XLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QLe(t){const n={x:K(t,"x","relu")};return re.runKernel(f0,n)}const Uf=ae({relu_:QLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZLe(t){const n={x:K(t,"x","relu6")};return re.runKernel(d0,n)}const SZ=ae({relu6_:ZLe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JLe(t,e){const r={x:K(t,"x","reverse")},i={dims:e};return re.runKernel(xC,r,i)}const Ef=ae({reverse_:JLe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eFe(t){const n={x:K(t,"x","round")};return re.runKernel(p0,n)}const TZ=ae({round_:eFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tFe(t){const n={x:K(t,"x","rsqrt","float32")};return re.runKernel(m0,n)}const CZ=ae({rsqrt_:tFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nFe(t){const n={x:K(t,"x","selu")};return re.runKernel(g0,n)}const EZ=ae({selu_:nFe});function rFe(t,e,n,r,i,s=[1,1],o="NHWC"){const a=K(t,"x","separableConv2d"),l=K(e,"depthwiseFilter","separableConv2d"),u=K(n,"pointwiseFilter","separableConv2d");let h=a,d=!1;if(a.rank===3&&(d=!0,h=oe(a,[1,a.shape[0],a.shape[1],a.shape[2]])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");U(h.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${h.rank}.`),U(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),U(u.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),U(u.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${u.shape[0]}.`),U(u.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${u.shape[1]}.`);const p=l.shape[2],g=l.shape[3];U(u.shape[2]===p*g,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${p*g}, but got ${u.shape[2]}.`);const y=pP(h,l,r,i,o,s),x=Tf(y,u,1,"valid",o);return d?oe(x,[x.shape[1],x.shape[2],x.shape[3]]):x}const IZ=ae({separableConv2d_:rFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iFe(t){const n={x:K(t,"x","sign")};return re.runKernel(b0,n)}const sFe=ae({sign_:iFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oFe(t){const n={x:K(t,"x","sin","float32")};return re.runKernel(y0,n)}const _Z=ae({sin_:oFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aFe(t){const n={x:K(t,"x","sinh")};return re.runKernel(v0,n)}const AZ=ae({sinh_:aFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lFe(t,e,n){const r=K(t,"x","slice1d");return U(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),dn(r,[e],[n])}const IP=ae({slice1d_:lFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uFe(t,e,n){const r=K(t,"x","slice2d");return U(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),dn(r,e,n)}const kZ=ae({slice2d_:uFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cFe(t,e,n){const r=K(t,"x","slice3d");return U(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),dn(r,e,n)}const _P=ae({slice3d_:cFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hFe(t,e,n){const r=K(t,"x","slice4d");return U(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),dn(r,e,n)}const iS=ae({slice4d_:hFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fFe(t,e=-1){const n=K(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const r={logits:n},i={dim:e};return re.runKernel(IC,r,i)}const AP=ae({softmax_:fFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dFe(t){U(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return re.runKernel(FO,e)}const NZ=ae({fft_:dFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pFe(t){U(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return re.runKernel(zO,e)}const UN=ae({ifft_:pFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mFe(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const i=oe(t,[n,e]);r=UN(i)}else{const i=[n,2*(e-1)],s=oe(rS(t),[n,e]),o=oe(yP(t),[n,e]),a=Ef(dn(s,[0,1],[n,e-2]),1),l=ne(Ef(dn(o,[0,1],[n,e-2]),1),Ut(-1)),u=Ui([s,a],1),h=Ui([o,l],1),d=oe(vf(u,h),[i[0],i[1]]);r=UN(d)}if(r=rS(r),t.rank===3&&t.shape[0]!==0){const i=r,s=t.shape[0];r=oe(r,[s,r.shape[0]/s,r.shape[1]]),i.dispose()}return r}const gFe=ae({irfft_:mFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yFe(t,e,n=0){const i={x:K(t,"x","split")},s={numOrSizeSplits:e,axis:n};return re.runKernel(EC,i,s)}const Ds=ae({split_:yFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vFe(t,e){U(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const r=t.size/n;let i;if(e!=null&&e<n){const y=t.shape.map(x=>0),b=t.shape.map(x=>x);b[t.shape.length-1]=e,i=dn(t,y,b),n=e}else if(e!=null&&e>n){const y=t.shape.map(b=>b);y[t.shape.length-1]=e-n,i=Ui([t,Cr(y)],t.shape.length-1),n=e}else i=t;const s=Ot(i),o=oe(vf(i,s),[r,n]),a=NZ(o),l=Math.floor(n/2)+1,u=rS(a),h=yP(a),d=Ds(u,[l,n-l],u.shape.length-1),p=Ds(h,[l,n-l],h.shape.length-1),g=i.shape.slice();return g[i.shape.length-1]=l,oe(vf(d[0],p[0]),g)}const bFe=ae({rfft_:vFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xFe(t,e){let n=K(t,"a","squaredDifference"),r=K(e,"b","squaredDifference");[n,r]=Vn(n,r),dt(n.shape,r.shape);const i={a:n,b:r},s={};return re.runKernel(T0,i,s)}const wFe=ae({squaredDifference_:xFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SFe(t,e){const n=K(t,"x","squeeze","string_or_numeric");return oe(n,Uc(n.shape,e).newShape)}const O0=ae({squeeze_:SFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TFe(t,e=0){const n=QQ(t,"tensors","stack","string_or_numeric");U(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&U(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,i={axis:e};return re.runKernel(dC,r,i)}const ru=ae({stack_:TFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CFe(t,e=0){const r={x:K(t,"x","step")},i={alpha:e};return re.runKernel(A0,r,i)}const P0=ae({step_:CFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EFe(t,e,n,r,i=0,s=0,o=0,a=0,l=0){const h={x:K(t,"x","stridedSlice","string_or_numeric")},d={begin:e,end:n,strides:r,beginMask:i,endMask:s,ellipsisMask:o,newAxisMask:a,shrinkAxisMask:l};return re.runKernel(tP,h,d)}const IFe=ae({stridedSlice_:EFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Fe(t){const n={x:K(t,"x","tan","float32")};return re.runKernel(E0,n)}const AFe=ae({tan_:_Fe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cs(t,e){mO(t);const n=k0(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return N0(t,null,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vk(t,e,n){if(mO(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=k0(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return N0(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kFe(t,e,n){if(mO(t),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const r=k0(t,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return N0(t,e,r,n)}function RZ(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,i=e.rank>1?e.rank-1:1,s=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${i}.`;if(n.rank<i)throw new Error(s+` update.rank < ${i}. `);if(t.length<r+(n.rank-i))throw new Error(s+` Output shape length < ${r+(n.rank-i)}`);if(n.rank!==i+t.length-r)throw new Error(s+` update.rank != ${i+t.length-r}`);for(let o=0;o<i;++o)if(n.shape[o]!==e.shape[o])throw new Error(s+` updates.shape[${o}] (${n.shape[o]}) != indices.shape[${o}] (${e.shape[o]}).`);for(let o=0;o<n.rank-i;++o)if(n.shape[o+i]!==t[o+r])throw new Error(s+` updates.shape[${o+i}] (${n.shape[o+i]}) != shape[${o+i}] (${t[o+i]})`)}function NFe(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}RZ(n,e,t)}function jf(t,e,n){const r=e.shape.length,i=r>1?e.shape[r-1]:1,s=n.length;let o=1;for(let d=i;d<s;++d)o*=n[d];const a=i<1?1:i,l=Se(e.shape)/a,u=[...Xe(n.slice(0,i)),1],h=Se(n);return{sliceRank:i,numUpdates:l,sliceSize:o,strides:u,outputSize:h}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RFe(t,e=1,n=!0){const r=K(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const i=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>i)throw new Error(`'k' passed to topk() must be <= the last dimension (${i}) but got ${e}`);const s={x:r},o={k:e,sorted:n},[a,l]=re.runKernel(nP,s,o);return{values:a,indices:l}}const DFe=ae({topk_:RFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Fe(t,e=0,n=1,r,i){if(fu(t),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const s=new wZ(e,n,r,!0,i),o=xt(t,r);for(let a=0;a<o.values.length;a++)o.values[a]=s.nextValue();return o.toTensor()}const DZ=ae({truncatedNormal_:$Fe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OFe(t,e=0){const n=K(t,"x","unique","string_or_numeric");U(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},i={axis:e},[s,o]=re.runKernel(iP,r,i);return{values:s,indices:o}}const PFe=ae({unique_:OFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MFe(t,e,n){const r=K(t,"x","unsortedSegmentSum"),i=K(e,"segmentIds","unsortedSegmentSum","int32");U(Fp(n),()=>"numSegments must be of dtype int");const s={x:r,segmentIds:i},o={numSegments:n};return re.runKernel(AC,s,o)}const $Z=ae({unsortedSegmentSum_:MFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LFe(t,e=0){const n=K(t,"x","unstack","string_or_numeric");U(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},i={axis:e};return re.runKernel(_C,r,i)}const If=ae({unstack_:LFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FFe(t,e=!0,n,r){return re.makeVariable(t,e,n,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OZ(t,e){const n=[];for(let s=0;s<e.length;s++)e[s]&&n.push(s);const r=xt(t,"int32"),i=xt([n.length,t.length],"int32");for(let s=0;s<n.length;s++){const o=r.indexToLoc(n[s]),a=s*t.length;i.values.set(o,a)}return i.toTensor()}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VFe(t,e,n){const r=K(t,"x","transpose");if(e==null&&(e=r.shape.map((o,a)=>a).reverse()),U(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(o=>{U(o>=0&&o<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const i={x:r},s={perm:e};return r.dtype==="complex64"?fe(()=>{let o=rS(r),a=yP(r);return o=re.runKernel(pp,{x:o},s),a=re.runKernel(pp,{x:a},s),n&&(a=Fn(a)),vf(o,a)}):re.runKernel(pp,i,s)}const $t=ae({transpose_:VFe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BFe(t,e){if(e==null)return t.shape.slice();if(Wt(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zFe(t,e,n,r){const i=K(t,"x","dropout");if(U(i.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${i.dtype} tensor instead.`),U(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof ur?i.clone():i;const s=BFe(i,n),o=1-e,a=et(MC($e($0(s,0,1,"float32",r),o)),o);return ne(i,a)}const UFe=ae({dropout_:zFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jFe(t,e,n,r,i,s="NHWC",o){let a=t;t.rank===3&&(a=oe(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=oe(e,[1,e.shape[0],e.shape[1],e.shape[2]])),U(a.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),U(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),U(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const u=s==="NHWC"?a.shape[3]:a.shape[1],h=s==="NHWC"?l.shape[3]:l.shape[1];U(u===n[2],()=>`Error in conv2dDerFilter: depth of input ${u}) must match input depth in filter (${n[2]}.`),U(h===n[3],()=>`Error in conv2dDerFilter: depth of dy (${h}) must match output depth for filter (${n[3]}).`),Hi("conv2dDerFilter",i,o);const d={x:a,dy:l},p={strides:r,pad:i,dataFormat:s,dimRoundingMode:o,filterShape:n};return re.runKernel(_O,d,p)}const kP=ae({conv2DBackpropFilter_:jFe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NP(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return ne(t,P0(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function RP(t,e){let n=e;const r=gr(t.shape,e.shape);return r.length>0&&(n=Qe(n,r)),oe(n,t.shape)}function DP(t,e,n,r){if(e==="linear")return t;if(e==="relu")return Uf(t);if(e==="elu")return OC(t);if(e==="relu6")return SZ(t);if(e==="prelu")return CP(t,n);if(e==="leakyrelu")return vP(t,r);if(e==="sigmoid")return bm(t);throw new Error(`Unknown fused activation ${e}.`)}const $P=(t,e)=>!(t>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WFe({x:t,filter:e,strides:n,pad:r,dataFormat:i="NHWC",dilations:s=[1,1],dimRoundingMode:o,bias:a,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:h}){if(l=l||"linear",$P(re.state.gradientDepth,l)===!1){U(i==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${i} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let P=Tf(t,e,n,r,i,s,o);return a!=null&&(P=$e(P,a)),DP(P,l,u,h)}const d=K(t,"x","conv2d","float32"),p=K(e,"filter","conv2d","float32");let g=d,y=!1;d.rank===3&&(y=!0,g=oe(d,[1,d.shape[0],d.shape[1],d.shape[2]])),U(g.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${g.rank}.`),U(p.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${p.rank}.`),Hi("fused conv2d",r,o);const b=i==="NHWC"?g.shape[3]:g.shape[1];U(p.shape[2]===b,()=>`Error in conv2d: depth of input (${b}) must match input depth for filter ${p.shape[2]}.`),U(hi(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`);const x=Ur(g.shape,p.shape,n,s,r,o);let w;a!=null&&(w=K(a,"bias","fused conv2d"),[w]=Vn(w,d),i==="NHWC"?dt(x.outShape,w.shape):(U(w.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${w.shape.length}.`),U(w.shape.length===0||w.shape[0]===x.outChannels||w.shape[0]===1,()=>`Error in fused conv2d: bias shape (${w.shape}) is not compatible with the number of output channels (${x.outChannels})`)));let C;if(u!=null){const P=u.shape;if(U(P.length<=1||P.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${P.length}.`),P.length===1)U(P[0]===1||P[0]===x.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${P}) is not compatible with the number of output channels (${x.outChannels}).`);else if(P.length===3)try{dt(P,x.outShape)}catch{const R=`Error in fused conv2d: PReLU activation weights (${P}) is not compatible with the output shape of the conv2d (${x.outShape}).`;throw Error(R)}C=K(u,"prelu weights","fused conv2d")}const E=(P,N)=>{U(i==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${i} but only NHWC is currently supported.`);const[R,D,O,k]=N,F=NP(P,O,l);U(wf(s),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`);const L=fP(D.shape,F,R,n,r),q=kP(D,F,R.shape,n,r),Y=[L,q];if(k!=null){const W=RP(k,F);Y.push(W)}return Y},_={x:g,filter:p,bias:w,preluActivationWeights:C},A={strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:o,activation:l,leakyreluAlpha:h};return a==null?Up((N,R,D)=>{let O=re.runKernel(Yw,_,A);return D([R,N,O]),y&&(O=oe(O,[O.shape[1],O.shape[2],O.shape[3]])),{value:O,gradFunc:E}})(g,p):Up((N,R,D,O)=>{let k=re.runKernel(Yw,_,A);return O([R,N,k,D]),y&&(k=oe(k,[k.shape[1],k.shape[2],k.shape[3]])),{value:k,gradFunc:E}})(g,p,w)}const GFe=ae({fusedConv2d_:WFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HFe(t,e,n,r,i,s=[1,1],o){let a=t;t.rank===3&&(a=oe(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=oe(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const u={x:a,dy:l},h={strides:r,pad:i,dimRoundingMode:o,dilations:s,filterShape:n};return re.runKernel(OO,u,h)}const qFe=ae({depthwiseConv2dNativeBackpropFilter_:HFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KFe(t,e,n,r,i,s=[1,1],o){let a=e,l=!1;e.rank===3&&(l=!0,a=oe(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const u={dy:a,filter:n},h={strides:r,pad:i,dimRoundingMode:o,dilations:s,inputShape:t},d=re.runKernel(PO,u,h);return l?oe(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const XFe=ae({depthwiseConv2dNativeBackpropInput_:KFe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YFe({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:i,activation:s="linear",preluActivationWeights:o,leakyreluAlpha:a=.2}){if($P(re.state.gradientDepth,s)===!1){let k=zt(t,e,n,r);return i!=null&&(k=$e(k,i)),DP(k,s,o,a)}let l=K(t,"a","fused matMul"),u=K(e,"b","fused matMul");[l,u]=Vn(l,u);const h=n?l.shape[l.rank-2]:l.shape[l.rank-1],d=r?u.shape[u.rank-1]:u.shape[u.rank-2],p=n?l.shape[l.rank-1]:l.shape[l.rank-2],g=r?u.shape[u.rank-2]:u.shape[u.rank-1],y=l.shape.slice(0,-2),b=u.shape.slice(0,-2),x=Se(y),w=Se(b);U(h===d,()=>`Error in fused matMul: inner shapes (${h}) and (${d}) of Tensors with shapes ${l.shape} and ${u.shape} and transposeA=${n} and transposeB=${r} must match.`);const E=dt(l.shape.slice(0,-2),u.shape.slice(0,-2)).concat([p,g]),_=n?oe(l,[x,h,p]):oe(l,[x,p,h]),A=r?oe(u,[w,g,d]):oe(u,[w,d,g]);let P;i!=null&&(P=K(i,"bias","fused matMul"),[P]=Vn(P,l),dt(E,P.shape));let N;o!=null&&(N=K(o,"prelu weights","fused matMul"));const R=(k,F)=>{const[L,q,Y,W]=F,H=NP(oe(k,Y.shape),Y,s);let X,ee;if(!n&&!r?(X=zt(H,q,!1,!0),ee=zt(L,H,!0,!1)):!n&&r?(X=zt(H,q,!1,!1),ee=zt(H,L,!0,!1)):n&&!r?(X=zt(q,H,!1,!0),ee=zt(L,H,!1,!1)):(X=zt(q,H,!0,!0),ee=zt(H,L,!0,!0)),i!=null){const ce=RP(W,H);return[X,ee,ce]}else return[X,ee]},D={a:_,b:A,bias:P,preluActivationWeights:N},O={transposeA:n,transposeB:r,activation:s,leakyreluAlpha:a};return i==null?Up((F,L,q)=>{const Y=re.runKernel(Xw,D,O);return q([F,L,Y]),{value:oe(Y,E),gradFunc:R}})(_,A):Up((F,L,q,Y)=>{const W=re.runKernel(Xw,D,O);return Y([F,L,W,q]),{value:oe(W,E),gradFunc:R}})(_,A,P)}const VW=ae({fusedMatMul_:YFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QFe(t,e,n,r,i="bilinear",s=0){const o=K(t,"image","cropAndResize"),a=K(e,"boxes","cropAndResize","float32"),l=K(n,"boxInd","cropAndResize","int32"),u=a.shape[0];U(o.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${o.rank}.`),U(a.rank===2&&a.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${u},4] but had shape ${a.shape}.`),U(l.rank===1&&l.shape[0]===u,()=>`Error in cropAndResize: boxInd must be have size [${u}] but had shape ${a.shape}.`),U(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),U(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),U(i==="bilinear"||i==="nearest",()=>`method must be bilinear or nearest, but was ${i}`);const h={image:o,boxes:a,boxInd:l},d={method:i,extrapolationValue:s,cropSize:r};return re.runKernel(RO,h,d)}const ZFe=ae({cropAndResize_:QFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JFe(t){const e=K(t,"image","flipLeftRight","float32");U(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return re.runKernel(BO,n,{})}const e3e=ae({flipLeftRight_:JFe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t3e(t){const e=K(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];U(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),U(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const i=new Array(e.rank);return i.fill(1,0,n),i[n]=3,Yo(e,i)}const n3e=ae({grayscaleToRGB_:t3e});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r3e(t){const e=K(t,"image","RGBToGrayscale"),n=e.rank-1,r=e.shape[n];U(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),U(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);const i=e.dtype,s=Be(e,"float32"),o=cs([.2989,.587,.114]);let a;switch(e.rank){case 2:a=jg("ij,j->i",s,o);break;case 3:a=jg("ijk,k->ij",s,o);break;case 4:a=jg("ijkl,l->ijk",s,o);break;case 5:a=jg("ijklm,m->ijkl",s,o);break;case 6:a=jg("ijklmn,n->ijklm",s,o);break;default:throw new Error("Not a valid tensor rank.")}return a=Mi(a,-1),Be(a,i)}const i3e=ae({rgbToGrayscale_:r3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s3e(t,e,n=0,r=.5){const i=K(t,"image","rotateWithOffset","float32");U(i.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${i.rank}.`);const s={image:i},o={radians:e,fillValue:n,center:r};return re.runKernel(sP,s,o)}const o3e=ae({rotateWithOffset_:s3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wm(t,e,n,r,i,s){r==null&&(r=.5),i==null&&(i=Number.NEGATIVE_INFINITY),s==null&&(s=0);const o=t.shape[0];return n=Math.min(n,o),U(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),U(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),U(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),U(e.rank===1,()=>"scores must be a 1D tensor"),U(e.shape[0]===o,()=>`scores has incompatible shape with boxes. Expected ${o}, but was ${e.shape[0]}`),U(0<=s&&s<=1,()=>`softNmsSigma must be in [0, 1], but was '${s}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a3e(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY){const s=K(t,"boxes","nonMaxSuppression","float32"),o=K(e,"scores","nonMaxSuppression","float32"),a=wm(s,o,n,r,i);n=a.maxOutputSize,r=a.iouThreshold,i=a.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:i};return re.runKernel(HO,{boxes:s,scores:o},l)}const l3e=ae({nonMaxSuppression_:a3e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u3e(t,e,n){const r=c3e(t,e,n),i=r<0?-(r+1):r;t.splice(i,0,e)}function c3e(t,e,n){return f3e(t,e,n||h3e)}function h3e(t,e){return t>e?1:t<e?-1:0}function f3e(t,e,n){let r=0,i=t.length,s=0,o=!1;for(;r<i;){s=r+(i-r>>>1);const a=n(e,t[s]);a>0?r=s+1:(i=s,o=!a)}return o?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OP(t,e,n,r,i){return LP(t,e,n,r,i,0)}function PP(t,e,n,r,i,s){return LP(t,e,n,r,i,0,!1,s,!0)}function MP(t,e,n,r,i,s){return LP(t,e,n,r,i,s,!0)}function LP(t,e,n,r,i,s,o=!1,a=!1,l=!1){const u=[];for(let x=0;x<e.length;x++)e[x]>i&&u.push({score:e[x],boxIndex:x,suppressBeginIndex:0});u.sort(BW);const h=s>0?-.5/s:0,d=[],p=[];for(;d.length<n&&u.length>0;){const x=u.pop(),{score:w,boxIndex:C,suppressBeginIndex:E}=x;if(w<i)break;let _=!1;for(let A=d.length-1;A>=E;--A){const P=d3e(t,C,d[A]);if(P>=r){_=!0;break}if(x.score=x.score*p3e(r,h,P),x.score<=i)break}x.suppressBeginIndex=d.length,_||(x.score===w?(d.push(C),p.push(x.score)):x.score>i&&u3e(u,x,BW))}const g=d.length,y=n-g;a&&y>0&&(d.push(...new Array(y).fill(0)),p.push(...new Array(y).fill(0)));const b={selectedIndices:d};return o&&(b.selectedScores=p),l&&(b.validOutputs=g),b}function d3e(t,e,n){const r=t.subarray(e*4,e*4+4),i=t.subarray(n*4,n*4+4),s=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),u=Math.min(i[0],i[2]),h=Math.min(i[1],i[3]),d=Math.max(i[0],i[2]),p=Math.max(i[1],i[3]),g=(a-s)*(l-o),y=(d-u)*(p-h);if(g<=0||y<=0)return 0;const b=Math.max(s,u),x=Math.max(o,h),w=Math.min(a,d),C=Math.min(l,p),E=Math.max(w-b,0)*Math.max(C-x,0);return E/(g+y-E)}function p3e(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function BW(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function m3e(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY){const s=K(t,"boxes","nonMaxSuppressionAsync"),o=K(e,"scores","nonMaxSuppressionAsync"),a=wm(s,o,n,r,i);n=a.maxOutputSize,r=a.iouThreshold,i=a.scoreThreshold;const l=await Promise.all([s.data(),o.data()]),u=l[0],h=l[1],{selectedIndices:d}=OP(u,h,n,r,i);return s!==t&&s.dispose(),o!==e&&o.dispose(),cs(d,"int32")}const g3e=m3e;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y3e(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,s=0){const o=K(t,"boxes","nonMaxSuppression"),a=K(e,"scores","nonMaxSuppression"),l=wm(o,a,n,r,i,s);n=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,s=l.softNmsSigma;const u={boxes:o,scores:a},h={maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:s},d=re.runKernel(KO,u,h);return{selectedIndices:d[0],selectedScores:d[1]}}const v3e=ae({nonMaxSuppressionWithScore_:y3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function b3e(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,s=0){const o=K(t,"boxes","nonMaxSuppressionAsync"),a=K(e,"scores","nonMaxSuppressionAsync"),l=wm(o,a,n,r,i,s);n=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,s=l.softNmsSigma;const u=await Promise.all([o.data(),a.data()]),h=u[0],d=u[1],{selectedIndices:p,selectedScores:g}=MP(h,d,n,r,i,s);return o!==t&&o.dispose(),a!==e&&a.dispose(),{selectedIndices:cs(p,"int32"),selectedScores:cs(g)}}const x3e=b3e;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w3e(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,s=!1){const o=K(t,"boxes","nonMaxSuppression"),a=K(e,"scores","nonMaxSuppression"),l=wm(o,a,n,r,i,null),u=l.maxOutputSize,h=l.iouThreshold,d=l.scoreThreshold,p={boxes:o,scores:a},g={maxOutputSize:u,iouThreshold:h,scoreThreshold:d,padToMaxOutputSize:s},y=re.runKernel(qO,p,g);return{selectedIndices:y[0],validOutputs:y[1]}}const S3e=ae({nonMaxSuppressionPadded_:w3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function T3e(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,s=!1){const o=K(t,"boxes","nonMaxSuppressionAsync"),a=K(e,"scores","nonMaxSuppressionAsync"),l=wm(o,a,n,r,i,null),u=l.maxOutputSize,h=l.iouThreshold,d=l.scoreThreshold,[p,g]=await Promise.all([o.data(),a.data()]),{selectedIndices:y,validOutputs:b}=PP(p,g,u,h,d,s);return o!==t&&o.dispose(),a!==e&&a.dispose(),{selectedIndices:cs(y,"int32"),validOutputs:Ut(b,"int32")}}const C3e=T3e;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E3e(t,e,n=!1,r=!1){const i=K(t,"images","resizeBilinear");U(i.rank===3||i.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${i.rank}.`),U(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),U(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let s=i,o=!1;i.rank===3&&(o=!0,s=oe(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const a={images:s},l={alignCorners:n,halfPixelCenters:r,size:e},u=re.runKernel(bC,a,l);return o?oe(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const PZ=ae({resizeBilinear_:E3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I3e(t,e,n=!1,r=!1){const i=K(t,"images","resizeNearestNeighbor");U(i.rank===3||i.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${i.rank}.`),U(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),U(i.dtype==="float32"||i.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),U(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let s=i,o=!1;i.rank===3&&(o=!0,s=oe(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const a={images:s},l={alignCorners:n,halfPixelCenters:r,size:e},u=re.runKernel(vC,a,l);return o?oe(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const MZ=ae({resizeNearestNeighbor_:I3e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _3e(t,e="binary",n=!1,r=.5){const i=K(t,"image","threshold"),s=.2989,o=.587,a=.114,l=i.shape[0]*i.shape[1];let u=ne(cs([r]),255),h,d,p,g;if(U(i.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${i.rank}.`),U(i.shape[2]===3||i.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${i.shape[2]}.`),U(i.dtype==="int32"||i.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${i.dtype}.`),U(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),i.shape[2]===3){[h,d,p]=Ds(i,[1,1,1],-1);const x=ne(h,s),w=ne(d,o),C=ne(p,a);g=$e($e(x,w),C)}else g=t;if(e==="otsu"){const x=TPe(Be(TZ(g),"int32"),gy([]),256);u=A3e(x,l)}const y=n?xm(g,u):Ls(g,u);return Be(ne(y,255),"int32")}function A3e(t,e){let n=cs([-1]),r=cs([0]),i=cs([0]),s,o,a,l,u,h;for(let d=0;d<t.size-1;d++){s=dn(t,0,d+1),o=dn(t,d+1),u=et(Qe(s),e),h=et(Qe(o),e);const p=Qe(ne(s,Xy(0,s.size)));a=et(p,Qe(s));const g=$C(o.shape,s.size),y=$e(Xy(0,o.size),g),b=ne(o,y);l=et(Qe(b),Qe(o));const x=it(a,l),w=it(a,l),C=ne(u,h);i=ne(ne(C,x),w);const E=Ls(i,r);r=Ei(E,i,r),n=Ei(E,cs([d]),n)}return n}const k3e=ae({threshold_:_3e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N3e(t,e,n="nearest",r="constant",i=0,s){const o=K(t,"image","transform","float32"),a=K(e,"transforms","transform","float32");U(o.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${o.rank}.`),U(a.rank===2&&(a.shape[0]===o.shape[0]||a.shape[0]===1)&&a.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),U(s==null||s.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${s}.`);const l={image:o,transforms:a},u={interpolation:n,fillMode:r,fillValue:i,outputShape:s};return re.runKernel(rP,l,u)}const R3e=ae({transform_:N3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D3e(t,e,n){const r=K(t,"a","bandPart");U(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const i=r.shape,[s,o]=r.shape.slice(-2);let a,l;typeof e=="number"?(U(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),U(e<=s,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${s}).`),a=K(e<0?s:e,"numLower","bandPart")):(U(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),a=Ei(tS(e,0),s,Ky(e,s))),typeof n=="number"?(U(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),U(n<=o,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${o}).`),l=K(n<0?o:n,"numUpper","bandPart")):(U(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=Ei(tS(n,0),o,Ky(n,o)));const u=oe(Xy(0,s,1,"int32"),[-1,1]),h=Xy(0,o,1,"int32"),d=it(u,h),p=nu(xm(d,a),zf(d,Fn(l))),g=Cr([s,o],r.dtype);return oe(ru(If(oe(r,[-1,s,o])).map(y=>Ei(p,y,g))),i)}const $3e=ae({bandPart_:D3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O3e(t){let e;if(Array.isArray(t)){e=!1,U(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const i=t[0].shape[0];for(let s=1;s<t.length;++s)U(t[s].shape[0]===i,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[s].shape[0]} vs. ${i})`)}else e=!0,t=Ds(t,t.shape[0],0).map(i=>O0(i,[0]));U(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let i=0;i<t.length;++i)n.push(re.tidy(()=>{let s=r[i];if(i>0)for(let o=0;o<i;++o){const a=ne(Qe(ne(n[o],s)),n[o]);s=it(s,a)}return et(s,PC(s,"euclidean"))}));return e?ru(n,0):n}const P3e=ae({gramSchmidt_:O3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M3e(t,e=!1){if(U(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return zW(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((l,u)=>l*u),r=If(oe(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),i=[],s=[];r.forEach(l=>{const[u,h]=zW(l,e);i.push(u),s.push(h)});const o=oe(ru(i,0),t.shape),a=oe(ru(s,0),t.shape);return[o,a]}}function zW(t,e=!1){return re.tidy(()=>{U(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let i=mZ(n),s=tf(t);const o=vk([[1]],[1,1]);let a=tf(o);const l=n>=r?r:n;for(let u=0;u<l;++u){const h=s,d=a,p=i;[a,s,i]=re.tidy(()=>{const g=dn(s,[u,u],[n-u,1]),y=PC(g),b=dn(s,[u,u],[1,1]),x=Ei(Ls(b,0),vk([[-1]]),vk([[1]])),w=it(b,ne(x,y)),C=et(g,w);C.shape[0]===1?a=tf(o):a=Ui([o,dn(C,[1,0],[C.shape[0]-1,C.shape[1]])],0);const E=Fn(et(zt(x,w),y)),_=dn(s,[u,0],[n-u,r]),A=ne(E,a),P=$t(a);if(u===0)s=it(_,zt(A,zt(P,_)));else{const D=it(_,zt(A,zt(P,_)));s=Ui([dn(s,[0,0],[u,r]),D],0)}const N=$t(A),R=dn(i,[0,u],[n,i.shape[1]-u]);if(u===0)i=it(R,zt(zt(R,a),N));else{const D=it(R,zt(zt(R,a),N));i=Ui([dn(i,[0,0],[n,u]),D],1)}return[a,s,i]}),vt([h,d,p])}return!e&&n>r&&(i=dn(i,[0,0],[n,r]),s=dn(s,[0,0],[r,r])),[i,s]})}const L3e=ae({qr_:M3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vl={flipLeftRight:e3e,grayscaleToRGB:n3e,resizeNearestNeighbor:MZ,resizeBilinear:PZ,rgbToGrayscale:i3e,rotateWithOffset:o3e,cropAndResize:ZFe,nonMaxSuppression:l3e,nonMaxSuppressionAsync:g3e,nonMaxSuppressionWithScore:v3e,nonMaxSuppressionWithScoreAsync:x3e,nonMaxSuppressionPadded:S3e,nonMaxSuppressionPaddedAsync:C3e,threshold:k3e,transform:R3e},F3e={bandPart:$3e,gramSchmidt:P3e,qr:L3e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V3e=new Map,B3e=new Map;class Sm{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class co{constructor(){this.classNameMap={}}static getMap(){return co.instance==null&&(co.instance=new co),co.instance}static register(e){co.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function Ne(t,e,n){U(t.className!=null,()=>"Class being registered does not have the static className property defined."),U(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),U(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof n>"u"&&(n=t.className);const r=n,i=e+">"+r;return co.register(t),V3e.set(i,t),B3e.set(t,i),t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Xc extends Sm{minimize(e,n=!1,r){const{value:i,grads:s}=this.computeGradients(e,r);if(r!=null){const o=r.map(a=>({name:a.name,tensor:s[a.name]}));this.applyGradients(o)}else this.applyGradients(s);return vt(s),n?i:(i.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return WMe(e,n)}dispose(){this.iterations_!=null&&vt(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:Ut(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(Xc,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LZ extends Xc{static get className(){return"Adadelta"}constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=re.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=re.registeredVariables[r],o=!1;this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${r}/accum_grad`,variable:fe(()=>Ot(s).variable(o))}),this.accumulatedUpdates[i]==null&&(this.accumulatedUpdates[i]={originalName:`${r}/accum_var`,variable:fe(()=>Ot(s).variable(o))});const a=Array.isArray(e)?e[i].tensor:e[r];if(a==null)return;const l=this.accumulatedGrads[i].variable,u=this.accumulatedUpdates[i].variable;fe(()=>{const h=$e(ne(l,this.rho),ne(yn(a),1-this.rho)),d=ne(et(ci($e(u,this.epsilon)),ci($e(l,this.epsilon))),a),p=$e(ne(u,this.rho),ne(yn(d),1-this.rho));l.assign(h),u.assign(p);const g=$e(ne(d,-this.learningRate),s);s.assign(g)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(vt(this.accumulatedGrads.map(e=>e.variable)),vt(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FZ extends Xc{static get className(){return"Adagrad"}constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=re.registeredVariables[r];this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${r}/accumulator`,variable:fe(()=>$C(s.shape,this.initialAccumulatorValue).variable(!1))});const o=Array.isArray(e)?e[i].tensor:e[r];if(o==null)return;const a=this.accumulatedGrads[i].variable;fe(()=>{const l=$e(a,yn(o));a.assign(l);const u=$e(ne(et(o,ci($e(l,re.backend.epsilon()))),-this.learningRate),s);s.assign(u)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&vt(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VZ extends Xc{static get className(){return"Adam"}constructor(e,n,r,i=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=i,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],fe(()=>{this.accBeta1=Ut(n).variable(),this.accBeta2=Ut(r).variable()}),i==null&&(this.epsilon=re.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);fe(()=>{const r=it(1,this.accBeta1),i=it(1,this.accBeta2);n.forEach((s,o)=>{const a=re.registeredVariables[s],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${s}/m`,variable:fe(()=>Ot(a).variable(l))}),this.accumulatedSecondMoment[o]==null&&(this.accumulatedSecondMoment[o]={originalName:`${s}/v`,variable:fe(()=>Ot(a).variable(l))});const u=Array.isArray(e)?e[o].tensor:e[s];if(u==null)return;const h=this.accumulatedFirstMoment[o].variable,d=this.accumulatedSecondMoment[o].variable,p=$e(ne(h,this.beta1),ne(u,1-this.beta1)),g=$e(ne(d,this.beta2),ne(yn(u),1-this.beta2)),y=et(p,r),b=et(g,i);h.assign(p),d.assign(g);const x=$e(ne(et(y,$e(ci(b),this.epsilon)),-this.learningRate),a);a.assign(x)}),this.accBeta1.assign(ne(this.accBeta1,this.beta1)),this.accBeta2.assign(ne(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&vt(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&vt(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),fe(()=>{this.accBeta1.assign(Cf(this.beta1,this.iterations_+1)),this.accBeta2.assign(Cf(this.beta2,this.iterations_+1))});const n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BZ extends Xc{static get className(){return"Adamax"}constructor(e,n,r,i=null,s=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=i,this.decay=s,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],fe(()=>{this.iteration=Ut(0).variable(),this.accBeta1=Ut(n).variable()}),i==null&&(this.epsilon=re.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);fe(()=>{const r=it(1,this.accBeta1),i=et(-this.learningRate,$e(ne(this.iteration,this.decay),1));n.forEach((s,o)=>{const a=re.registeredVariables[s],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${s}/m`,variable:Ot(a).variable(l)}),this.accumulatedWeightedInfNorm[o]==null&&(this.accumulatedWeightedInfNorm[o]={originalName:`${s}/v`,variable:Ot(a).variable(l)});const u=Array.isArray(e)?e[o].tensor:e[s];if(u==null)return;const h=this.accumulatedFirstMoment[o].variable,d=this.accumulatedWeightedInfNorm[o].variable,p=$e(ne(h,this.beta1),ne(u,1-this.beta1)),g=ne(d,this.beta2),y=bi(u),b=qc(g,y);h.assign(p),d.assign(b);const x=$e(ne(et(i,r),et(p,$e(b,this.epsilon))),a);a.assign(x)}),this.iteration.assign($e(this.iteration,1)),this.accBeta1.assign(ne(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&vt(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&vt(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FP extends Xc{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=Array.isArray(e)?e[i].tensor:e[r];if(s==null)return;const o=re.registeredVariables[r];fe(()=>{const a=$e(ne(this.c,s),o);o.assign(a)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=qa(Ut(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zZ extends FP{static get className(){return"Momentum"}constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=Ut(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=re.registeredVariables[r];this.accumulations[i]==null&&(this.accumulations[i]={originalName:`${r}/momentum`,variable:fe(()=>Ot(s).variable(!1))});const o=this.accumulations[i].variable,a=Array.isArray(e)?e[i].tensor:e[r];a!=null&&fe(()=>{let l;const u=$e(ne(this.m,o),a);this.useNesterov?l=$e(ne(this.c,$e(a,ne(u,this.m))),s):l=$e(ne(this.c,u),s),o.assign(u),s.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&vt(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UZ extends Xc{static get className(){return"RMSProp"}constructor(e,n=.9,r=0,i=null,s=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=i,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=s,i==null&&(this.epsilon=re.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=re.registeredVariables[r],o=!1;this.accumulatedMeanSquares[i]==null&&(this.accumulatedMeanSquares[i]={originalName:`${r}/rms`,variable:fe(()=>Ot(s).variable(o))}),this.accumulatedMoments[i]==null&&(this.accumulatedMoments[i]={originalName:`${r}/momentum`,variable:fe(()=>Ot(s).variable(o))}),this.accumulatedMeanGrads[i]==null&&this.centered&&(this.accumulatedMeanGrads[i]={originalName:`${r}/mg`,variable:fe(()=>Ot(s).variable(o))});const a=Array.isArray(e)?e[i].tensor:e[r];if(a==null)return;const l=this.accumulatedMeanSquares[i].variable,u=this.accumulatedMoments[i].variable;fe(()=>{const h=$e(ne(l,this.decay),ne(yn(a),1-this.decay));if(this.centered){const d=this.accumulatedMeanGrads[i].variable,p=$e(ne(d,this.decay),ne(a,1-this.decay)),g=et(ne(a,this.learningRate),ci(it(h,$e(yn(p),this.epsilon)))),y=$e(ne(u,this.momentum),g);l.assign(h),d.assign(p),u.assign(y);const b=it(s,y);s.assign(b)}else{const d=$e(ne(l,this.decay),ne(yn(a),1-this.decay)),p=$e(ne(u,this.momentum),et(ne(a,this.learningRate),ci($e(d,this.epsilon))));l.assign(d),u.assign(p);const g=it(s,p);s.assign(g)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&vt(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&vt(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&vt(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z3e=[LZ,FZ,VZ,BZ,zZ,UZ,FP];function U3e(){for(const t of z3e)Ne(t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UW(t,e,n,r){o(t),n=n??0,r=r??1,a(n,r);let i=0;const s=l=>(l.then(u=>{const h=n+ ++i/t.length*(r-n);return e(h),u}),l);function o(l){U(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function a(l,u){U(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),U(u>=0&&u<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${u}`),U(u>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${u}`)}return Promise.all(t.map(s))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function j3e(t,e){e==null&&(e={});const n=e.fetchFunc==null?ge().platform.fetch:e.fetchFunc,r=t.map(d=>n(d,e.requestInit,{isBinary:!0})),a=(e.onProgress==null?await Promise.all(r):await UW(r,e.onProgress,0,.5)).map(d=>d.arrayBuffer());return e.onProgress==null?await Promise.all(a):await UW(a,e.onProgress,.5,1)}function W3e(t,e){var n;const r=e.fetchFunc==null?ge().platform.fetch:e.fetchFunc;let i=0,s;return(n=e.onProgress)===null||n===void 0||n.call(e,0),new ReadableStream({pull:async o=>{for(var a;i<t.length;){s||(s=(await r(t[i],e.requestInit,{isBinary:!0})).body.getReader());const{done:l,value:u}=await s.read();if(l){i++,s=void 0,(a=e.onProgress)===null||a===void 0||a.call(e,i/t.length);continue}o.enqueue(u);return}o.close()}})}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G3e="application/octet-stream",H3e="application/json";class VP{constructor(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?(U(typeof n.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=n.fetchFunc):this.fetch=ge().platform.fetch,U(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&U(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{},this.loadOptions=n}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);n.body=new FormData;const r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],i=rOe(e,r);if(n.body.append("model.json",new Blob([JSON.stringify(i)],{type:H3e}),"model.json"),e.weightData!=null){const o=Wc.join(e.weightData);n.body.append("model.weights.bin",new Blob([o],{type:G3e}),"model.weights.bin")}const s=await this.fetch(this.path,n);if(s.ok)return{modelArtifactsInfo:lP(e),responses:[s]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${s.status}.`)}async loadModelJSON(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let n;try{n=await e.json()}catch{let o=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?o+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":o+=" Please make sure the server is serving valid JSON for this request.",new Error(o)}const r=n.modelTopology,i=n.weightsManifest;if(r==null&&i==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return n}async load(){if(this.loadOptions.streamWeights)return this.loadStream();const e=await this.loadModelJSON();return sOe(e,n=>this.loadWeights(n))}async loadStream(){const e=await this.loadModelJSON(),n=await this.getWeightUrls(e.weightsManifest),r=AW(e.weightsManifest),i=()=>W3e(n,this.loadOptions);return Object.assign(Object.assign({},e),{weightSpecs:r,getWeightStream:i})}async getWeightUrls(e){const n=Array.isArray(this.path)?this.path[1]:this.path,[r,i]=q3e(n),s=this.weightPathPrefix||r,o=[],a=[];for(const l of e)for(const u of l.paths)this.weightUrlConverter!=null?a.push(this.weightUrlConverter(u)):o.push(s+u+i);return this.weightUrlConverter&&o.push(...await Promise.all(a)),o}async loadWeights(e){const n=await this.getWeightUrls(e),r=AW(e),i=await j3e(n,this.loadOptions);return[r,i]}}VP.URL_SCHEME_REGEX=/^https?:\/\//;function q3e(t){const e=t.lastIndexOf("/"),n=t.lastIndexOf("?"),r=t.substring(0,e),i=n>e?t.substring(n):"";return[r+"/",i]}function jW(t){return t.match(VP.URL_SCHEME_REGEX)!=null}const jZ=(t,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let n=!0;if(Array.isArray(t)?n=t.every(r=>jW(r)):n=jW(t),n)return WZ(t,e)}return null};xr.registerSaveRouter(jZ);xr.registerLoadRouter(jZ);function WZ(t,e){return new VP(t,e)}function K3e(t,e){return WZ(t,e)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let Ah;function X3e(t,e=3){if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,i=!1,s=!1,o=!1,a=!1;if(t.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)i=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)s=!0;else if(t.getContext!=null)o=!0;else if(typeof ImageBitmap<"u"&&t instanceof ImageBitmap)a=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${t.constructor.name}`);if(NN(AN,re.backendName)!=null){const y={pixels:t},b={numChannels:e};return re.runKernel(AN,y,b)}const[u,h]=i?[t.videoWidth,t.videoHeight]:[t.width,t.height];let d;if(o)d=t.getContext("2d").getImageData(0,0,u,h).data;else if(r||n)d=t.data;else if(s||i||a){if(Ah==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")Ah=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else Ah=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});Ah.canvas.width=u,Ah.canvas.height=h,Ah.drawImage(t,0,0,u,h),d=Ah.getImageData(0,0,u,h).data}let p;if(e===4)p=new Int32Array(d);else{const y=u*h;p=new Int32Array(y*e);for(let b=0;b<y;b++)for(let x=0;x<e;++x)p[b*e+x]=d[b*4+x]}return kFe(p,[h,u,e],"int32")}const Y3e=ae({fromPixels_:X3e});function BP(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(Se(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const i=e.shape,s=i[i.length-1];let o=1;for(let d=0;d<i.length-1;++d)o*=i[d];const a=t.shape,l=i.slice();l.pop();let u=1;for(let d=s;d<n;++d)u*=a[d],l.push(a[d]);const h=[...Xe(t.shape).map(d=>d/u),1].slice(0,s);return[l,o,u,h]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jN=-2,Q3e=-1;function zP(t,e,n){const r=t.shape.length;U(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),U(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let i=0;i<r;++i)U(e[i]+n[i]<=t.shape[i],()=>`Error in slice${r}D: begin[${i}] + size[${i}] (${e[i]+n[i]}) would overflow input.shape[${i}] (${t.shape[i]})`)}function Z3e(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function UP(t,e,n){const r=[];for(let i=0;i<t.length;i++)r[i]=Math.ceil((e[i]-t[i])/n[i]);return r}function GZ(t,e,n,r){const i=[...t];for(let s=i.length;s<r.length;s++)i.push(1);for(let s=0;s<n;s++)s===0?i[e]=1:(i.splice(e,0,1),i.pop());return i}function HZ(t,e,n){return n<=t?n:n-(e-1)}function qZ(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function J3e(t,e,n,r,i,s,o,a,l){const u=t.length;let h=new Array(u),d=new Array(u),p=new Array(u);if(e.length&&n>0){const g=e[0],y=n+1;h=KZ(o,g,y,r,t),d=XZ(a,g,y,i,t),p=GZ(s,g,y,t)}else for(let g=0;g<u;g++)h[g]=QZ(o,r,s,t,g,l),d[g]=ZZ(a,i,s,t,g,l),p[g]=YZ(s,g,l);return{begin:h,end:d,strides:p}}function KZ(t,e,n,r,i){const s=[...i],o=qZ(n,e);for(let a=0;a<s.length;a++)if(o.indexOf(a)>-1)s[a]=0;else{const l=HZ(e,n,a);let u=r[l];t&1<<l&&(u=0),s[a]=u}return s}function XZ(t,e,n,r,i){const s=[...i],o=qZ(n,e);for(let a=0;a<s.length;a++)if(o.indexOf(a)>-1)s[a]=Number.MAX_SAFE_INTEGER;else{const l=HZ(e,n,a);let u=r[l];t&1<<l&&(u=Number.MAX_SAFE_INTEGER),s[a]=u}for(let a=0;a<s.length;a++){const l=i[a];s[a]<0&&(s[a]+=l),s[a]=gf(0,s[a],i[a])}return s}function YZ(t,e,n){let r=t[e];return(n&1<<e||r==null)&&(r=1),r}function QZ(t,e,n,r,i,s){let o=e[i];const a=n[i]||1;(t&1<<i||s&1<<i||o==null)&&(a>0?o=Number.MIN_SAFE_INTEGER:o=Number.MAX_SAFE_INTEGER);const l=r[i];return o<0&&(o+=l),o=gf(0,o,l-1),o}function ZZ(t,e,n,r,i,s){let o=e[i];const a=n[i]||1;(t&1<<i||s&1<<i||o==null)&&(a>0?o=Number.MAX_SAFE_INTEGER:o=Number.MIN_SAFE_INTEGER);const l=r[i];return o<0&&(o+=l),a>0?o=gf(0,o,l):o=gf(-1,o,l-1),o}function jP(t,e,n){let r=n.length;for(let i=0;i<n.length;i++)if(n[i]>1){r=i;break}for(let i=r+1;i<n.length;i++)if(e[i]>0||n[i]!==t[i])return!1;return!0}function WP(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function LC(t,e,n){let r;const i=t.shape.length;typeof e=="number"?r=[e,...new Array(i-1).fill(0)]:e.length<i?r=e.concat(new Array(i-e.length).fill(0)):r=e.slice(),r.forEach(o=>{U(o!==-1,()=>"slice() does not support negative begin indexing.")});let s;return n==null?s=new Array(i).fill(-1):typeof n=="number"?s=[n,...new Array(i-1).fill(-1)]:n.length<i?s=n.concat(new Array(i-n.length).fill(-1)):s=n,s=s.map((o,a)=>o>=0?o:(U(o===-1,()=>`Negative size values should be exactly -1 but got ${o} for the slice() size at index ${a}.`),t.shape[a]-r[a])),[r,s]}function GP(t,e,n,r,i,s,o,a,l){let u;if(r==null?(u=new Array(e.length),u.fill(1)):u=r,o!=null&&(o&o-1)!==0)throw new Error("Multiple ellipses in slice is not allowed.");let h=!1;const d={dims:u.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:u.slice(),beginMask:i,endMask:s,ellipsisMask:o,newAxisMask:a,shrinkAxisMask:l};for(let E=0;E<d.dims;E++)h&&(1<<E&a)!==0&&d.numAddAxisAfterEllipsis++,1<<E&o&&(h=!0);h||(d.ellipsisMask|=1<<d.dims,d.dims++);const p={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};eVe(d,p);let g=!0,y=!0,b=!0;const x=[],w=[];for(let E=0;E<t.length;++E){if(p.strides[E]===0)throw Error(`strides[${E}] must be non-zero`);const _=!!(p.shrinkAxisMask&1<<E),A=t[E];if(A===-1){x.push(_?1:-1);continue}const P=[p.beginMask&1<<E,p.endMask&1<<E],N=[p.strides[E]>0?0:-1,p.strides[E]>0?A:A-1];if(_&&p.strides[E]<=0)throw Error("only stride 1 allowed on non-range indexing.");b=b&&p.strides[E]===1;const R=!!(p.beginMask&1<<E&&p.endMask&1<<E);if(p.beginValid&&p.endValid){if(_){const F=p.begin[E]<0?A+p.begin[E]:p.begin[E];if(p.begin[E]=F,p.end[E]=p.begin[E]+1,F<0||F>=A)throw Error(`slice index ${p.begin[E]} of dimension ${E} out of bounds.`)}else p.begin[E]=WW(p.begin[E],0,p.strides[E],A,P,N),p.end[E]=WW(p.end[E],1,p.strides[E],A,P,N);const k=p.strides[E]===1&&p.begin[E]===0&&p.end[E]===A;g=g&&k,y=y&&(E===0&&p.strides[E]===1||k)}else g=g&&p.strides[E]===1&&R,y=y&&(E===0&&p.strides[E]===1||R);let D,O=!1;if(p.beginValid&&p.endValid?(D=p.end[E]-p.begin[E],O=!0):_?(D=1,O=!0):R&&A>=0&&(p.strides[E]<0?D=-A:D=A,O=!0),O){let k;D===0||D<0!=p.strides[E]<0?k=0:k=Math.trunc(D/p.strides[E])+(D%p.strides[E]!==0?1:0),x.push(k)}else x.push(-1)}for(let E=0;E<p.finalShapeGatherIndices.length;++E){const _=p.finalShapeGatherIndices[E];_>=0?w.push(x[_]):_===jN&&w.push(1)}return{finalShapeSparse:w.filter((E,_)=>p.finalShapeGatherIndices[_]!==jN),finalShape:w,isIdentity:g,sliceDim0:y,isSimpleSlice:b,begin:p.begin,end:p.end,strides:p.strides}}function eVe(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){const i=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<i;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(jN),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(Q3e),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function WW(t,e,n,r,i,s){if(i[e])return n>0?s[e]:s[e+1&1];{const o=t<0?r+t:t;return o<s[0]?s[0]:o>s[1]?s[1]:o}}const tVe=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:zP,computeFlatOffset:WP,computeOutShape:UP,getNormalizedAxes:J3e,isSliceContinous:jP,maskToAxes:Z3e,parseSliceParams:LC,sliceInfo:GP,startForAxis:QZ,startIndicesWithElidedDims:KZ,stopForAxis:ZZ,stopIndicesWithElidedDims:XZ,stridesForAxis:YZ,stridesWithElidedDims:GZ},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nVe{static sgd(e){return new FP(e)}static momentum(e,n,r=!1){return new zZ(e,n,r)}static rmsprop(e,n=.9,r=0,i=null,s=!1){return new UZ(e,n,r,i,s)}static adam(e=.001,n=.9,r=.999,i=null){return new VZ(e,n,r,i)}static adadelta(e=.001,n=.95,r=null){return new LZ(e,n,r)}static adamax(e=.002,n=.9,r=.999,i=null,s=0){return new BZ(e,n,r,i,s)}static adagrad(e,n=.1){return new FZ(e,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bd=nVe;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rVe=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function JZ(){return new Promise(t=>rVe(()=>t()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HP(t,e){const n=t[0].length;t.forEach((i,s)=>{U(i.length===n,()=>`Error in concat${n}D: rank of tensors[${s}] must be the same as the rank of the rest (${n})`)}),U(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((i,s)=>{for(let o=0;o<n;o++)U(o===e||i[o]===r[o],()=>`Error in concat${n}D: Shape of tensors[${s}] (${i}) does not match the shape of the rest (${r}) along the non-concatenated axis ${s}.`)})}function Ka(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Wo;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(Wo||(Wo={}));function eJ(t,e,n){let r=new Array;if(n==null&&e==null)return r;if(e==null)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(n==null)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let i=1;i<n.length;++i){const s=n[i],o=r[r.length-n.length+i],a=r[o];if(s>=0)if(a>=0){if(a!==s)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${i+t}] = ${s} but shape[${i+t}] = ${a}`)}else r[o]=s}return r}function tJ(t){const e={FIRST_DIM_SIZE:Wo.FIRST_DIM_SIZE,VALUE_ROWIDS:Wo.VALUE_ROWIDS,ROW_LENGTHS:Wo.ROW_LENGTHS,ROW_SPLITS:Wo.ROW_SPLITS,ROW_LIMITS:Wo.ROW_LIMITS,ROW_STARTS:Wo.ROW_STARTS},n=[];for(const r of t)if(r in e)n.push(e[r]);else break;return n}function nJ(t){return t.length===0?0:t[0]===Wo.FIRST_DIM_SIZE?t.length-1:t.length}function rJ(t,e){if(t==null||e==null)return;const n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let i=0;i<Math.min(n,r-1);++i){const s=t[i],o=e[i+1];if(s>=0&&o>=0&&s!==1&&s!==o)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${i-t.length}] = ${s} but ragged tensor input.flatValues.shape[${i-t.length}] = ${o}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qP=30;function FC(t){return t<=qP?t:EN(t,Math.floor(Math.sqrt(t)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KP(t,e,n){const r=n*(typeof t=="number"?t:t[0]),i=e*(typeof t=="number"?t:t[1]);return[r,i]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M0(t,e,n,r=!0){let i=[];if(r)i=i.concat(e.slice(0)),i.push(t[0]/n),i=i.concat(t.slice(1));else{i=i.concat(t[0]);const s=e.length;for(let o=0;o<s;++o)i=i.concat([t[o+1]/e[o],e[o]]);i=i.concat(t.slice(s+1))}return i}function L0(t,e,n=!0){const r=[];if(n){r.push(e);for(let i=e+1;i<t;++i)i<=2*e?(r.push(i),r.push(i-(e+1))):r.push(i)}else{const i=[],s=[];for(let o=1;o<t;++o)o>=e*2+1||o%2===1?s.push(o):i.push(o);r.push(...i),r.push(0),r.push(...s)}return r}function F0(t,e,n,r=!0){const i=[];r?i.push(t[0]/n):i.push(t[0]*n);for(let s=1;s<t.length;++s)s<=e.length?r?i.push(e[s-1]*t[s]):i.push(t[s]/e[s-1]):i.push(t[s]);return i}function XP(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function YP(t,e,n){const r=t.slice(0,1);for(let i=0;i<n;++i)r.push(t[i+1]-e[i][0]-e[i][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VC=1.7580993408473768,BC=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QP=.3275911,ZP=.254829592,JP=-.284496736,eM=1.421413741,tM=-1.453152027,nM=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iu(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function iJ(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function sJ(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let i=0;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],r[Math.floor(i/4)]=t[i+1];return{real:n,imag:r}}function oJ(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let i=2;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],r[Math.floor(i/4)]=t[i+1];return{real:n,imag:r}}function rM(t,e){const n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function aJ(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function lJ(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let i=0;i<Math.ceil(t/2);i++){const s=(e?2:-2)*Math.PI*(i/t);n[i]=Math.cos(s),r[i]=Math.sin(s)}return{real:n,imag:r}}function uJ(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),i=Math.cos(r),s=Math.sin(r);return{real:i,imag:s}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bk="->",iVe=/->/g,GW=",",HW="...";function iM(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(iVe,"").length)/bk.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${bk}").`);const[r,i]=t.split(bk);U(r.indexOf(HW)===-1,()=>`The ellipsis notation ("${HW}") is not supported yet.`);const s=r.split(GW),o=s.length;if(e!==o)throw new Error(`Expected ${o} input tensors, received ${e}`);if(o>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const a=[];for(let p=0;p<i.length;++p){const g=i[p];if(!s.some(y=>y.indexOf(g)!==-1))throw new Error(`Output subscripts contain the label ${g} not present in the input subscripts.`);a.indexOf(g)===-1&&a.push(g)}for(let p=0;p<r.length;++p){const g=r[p];a.indexOf(g)===-1&&g!==GW&&a.push(g)}const l=new Array(s.length);for(let p=0;p<o;++p){if(new Set(s[p].split("")).size!==s[p].length)throw new Error(`Found duplicate axes in input component ${s[p]}. Support for duplicate axes in input is not implemented yet.`);l[p]=[];for(let g=0;g<s[p].length;++g)l[p].push(a.indexOf(s[p][g]))}const u=a.length,h=i.length,d=[];for(let p=h;p<u;++p)d.push(p);return{allDims:a,summedDims:d,idDims:l}}function sM(t,e){let n=new Array(t);n.fill(-1);for(let i=0;i<e.length;++i)n[e[i]]=i;const r=[];for(let i=0;i<t;++i)n[i]===-1&&r.push(i);return n=n.filter(i=>i!==-1),{permutationIndices:n,expandDims:r}}function oM(t,e,n){const r=new Array(t);for(let i=0;i<n.length;++i){const s=n[i].shape;for(let o=0;o<e[i].length;++o)r[e[i][o]]===void 0?r[e[i][o]]=s[o]:U(r[e[i][o]]===s[o],()=>`Expected dimension ${r[e[i][o]]} at axis ${o} of input shaped ${JSON.stringify(s)}, but got dimension ${s[o]}`)}}function aM(t,e){const n=t,r=[];let i=0;t.length===0&&n.push(-1),i=t.length+1;for(let o=0;o<i;++o)r.push([]);const s=[];for(let o=0;o<n.length;++o){const a=n[o],l=sVe(e,a);for(const u of l)s.indexOf(u)===-1&&(r[o].push(u),s.push(u))}return{path:n,steps:r}}function lM(t){return t.every((e,n)=>e===n)}function sVe(t,e){const n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}function uM(t,e,n=0){let r=[];if(typeof e=="number")U(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{const i=e.reduce((o,a)=>(a===-1&&(o+=1),o),0);U(i<=1,()=>"There should be only one negative value in split array.");const s=e.indexOf(-1);if(s!==-1){const o=e.reduce((a,l)=>l>0?a+l:a);e[s]=t.shape[n]-o}U(t.shape[n]===e.reduce((o,a)=>o+a),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cJ(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function hJ(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function fJ(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dJ(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function pJ(t,e){return`size ${t} must be non-negative, not ${e}`}function mJ(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function gJ(t,e){const n=Se(t),r=Se(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function yJ(t,e){const n=Se(t),r=Se(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WN(){return"segment ids must be >= 0"}function vJ(){return"segment ids are not increasing"}function bJ(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function xJ(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wJ(t,e){let n=!1,r;for(t<=qP?(r=t,n=!0):r=EN(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=EN(t,r+1);return r}function SJ(t,e,n){const r=[],i=t.length;for(let s=0;s<i;s++)s!==e?r.push(t[s]):r.push(n);return r}function cM(t,e,n,r){const i=e.shape.length,s=t.shape.length;if(r!==0&&(r<-i||r>i))throw new Error(`Expect batchDims in the range of [-${i}, ${i}], but got ${r}`);if(r<0&&(r+=i),r>s)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${s}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let d=0;d<r;++d)if(t.shape[d]!==e.shape[d])throw new Error(`x.shape[${d}]: ${t.shape[d]} should be equal to indices.shape[${d}]: ${e.shape[d]}.`);const o=t.shape[n],a=[];let l=1,u=1,h=1;for(let d=0;d<r;++d)a.push(t.shape[d]),l*=t.shape[d];for(let d=r;d<n;d++)a.push(t.shape[d]),u*=t.shape[d];for(let d=r;d<i;d++)a.push(e.shape[d]);for(let d=n+1;d<s;d++)a.push(t.shape[d]),h*=t.shape[d];return{batchSize:l,sliceSize:h,outerSize:u,dimSize:o,outputShape:a}}const oVe=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:cM,computeOutShape:SJ,segOpComputeOptimalWindowSize:wJ},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function su(t){try{return t.map(e=>Dc(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function TJ(t){return t.map(e=>yc(e))}const aVe=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:ZP,ERF_A2:JP,ERF_A3:eM,ERF_A4:tM,ERF_A5:nM,ERF_P:QP,PARALLELIZE_THRESHOLD:qP,get RowPartitionType(){return Wo},SELU_SCALE:BC,SELU_SCALEALPHA:VC,applyActivation:DP,assertAndGetBroadcastShape:dt,assertAxesAreInnerMostDims:jr,assertParamsConsistent:HP,assignToTypedArray:aJ,axesAreInnerMostDims:mP,calculateShapes:jf,checkEinsumDimSizes:oM,checkPadOnDimRoundingMode:Hi,combineLocations:dZ,combineRaggedTensorToTensorShapes:eJ,complexWithEvenIndex:sJ,complexWithOddIndex:oJ,computeConv2DInfo:Ur,computeConv3DInfo:Gc,computeDefaultPad:uP,computeDilation2DInfo:R0,computeOptimalWindowSize:FC,computeOutAndReduceShapes:Rr,computeOutShape:Ka,computePool2DInfo:Io,computePool3DInfo:du,convertConv2DDataFormat:pu,decodeEinsumEquation:iM,eitherStridesOrDilationsAreOne:hi,expandShapeToKeepDim:Qn,exponent:uJ,exponents:lJ,fromStringArrayToUint8:TJ,fromUint8ToStringArray:su,getAxesPermutation:Rn,getBroadcastDims:zp,getComplexWithIndex:rM,getEinsumComputePath:aM,getEinsumPermutation:sM,getFusedBiasGradient:RP,getFusedDyActivation:NP,getImageCenter:KP,getInnerMostAxes:Bn,getPermuted:L0,getRaggedRank:nJ,getReductionAxes:gr,getReshaped:M0,getReshapedPermuted:F0,getRowPartitionTypesHelper:tJ,getSliceBeginCoords:XP,getSliceSize:YP,getSparseFillEmptyRowsIndicesDenseShapeMismatch:cJ,getSparseFillEmptyRowsNegativeIndexErrorMessage:hJ,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:fJ,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:mJ,getSparseReshapeInputOutputMismatchErrorMessage:yJ,getSparseReshapeInputOutputMultipleErrorMessage:gJ,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:dJ,getSparseReshapeNegativeOutputDimErrorMessage:pJ,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:xJ,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:WN,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:vJ,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:bJ,getUndoAxesPermutation:Hc,isIdentityPermutation:lM,log:S$e,mergeRealAndImagArrays:iu,prepareAndValidate:BP,prepareSplitSize:uM,segment_util:oVe,shouldFuse:$P,slice_util:tVe,splitRealAndImagArrays:iJ,stridesOrDilationsArePositive:Sf,tupleValuesAreOne:wf,upcastType:fs,validateDefaultValueShape:rJ,validateInput:NFe,validateUpdateShape:RZ,warn:As},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */U3e();/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CJ={kernelName:NT,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(t,P0(Be(n,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lVe={kernelName:Ov,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=yn(Be(n,"float32")),i=ci(it(Ut(1),r));return Fn(et(t,i))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uVe={kernelName:Pv,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=ci(it(yn(Be(n,"float32")),1));return et(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cVe={kernelName:vm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=dt(n.shape,r.shape);return{a:()=>{let a=t;const l=gr(n.shape,i);return l.length>0&&(a=Qe(a,l)),oe(a,n.shape)},b:()=>{let a=t;const l=gr(r.shape,i);return l.length>0&&(a=Qe(a,l)),oe(a,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hVe={kernelName:bO,saveAllInputs:!0,gradFunc:(t,e)=>{const n={};return e.forEach((r,i)=>{n[i]=()=>t.clone()}),n}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fVe={kernelName:RT,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ot(n)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dVe={kernelName:DT,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ot(n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pVe={kernelName:Mv,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>et(t,ci(it(Ut(1),yn(Be(n,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mVe={kernelName:Lv,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=ci($e(Ut(1),yn(Be(n,"float32"))));return et(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gVe={kernelName:Bv,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=dt(n.shape,r.shape);return{a:()=>{const a=$e(yn(n),yn(r));let l=ne(t,et(r,a));const u=gr(n.shape,i);return u.length>0&&(l=Qe(l,u)),oe(l,n.shape)},b:()=>{const a=$e(yn(n),yn(r));let l=Fn(ne(t,et(n,a)));const u=gr(r.shape,i);return u.length>0&&(l=Qe(l,u)),oe(l,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yVe={kernelName:Fv,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>et(t,$e(yn(Be(n,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vVe={kernelName:Vv,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>et(t,it(Ut(1),yn(Be(n,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bVe(t,e,n,r,i,s){const o=K(t,"dy","avgPool3dGrad"),a=K(e,"input","avgPool3dGrad");let l=o,u=a,h=!1;a.rank===4&&(h=!0,l=oe(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),u=oe(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),U(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),U(u.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${u.rank}.`),Hi("avgPool3dGrad",i,s);const d={dy:l,input:u},p={filterSize:n,strides:r,pad:i,dimRoundingMode:s},g=re.runKernel(TO,d,p);return h?oe(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}const xVe=ae({avgPool3dGrad_:bVe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wVe={kernelName:OT,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:i,strides:s,pad:o,dimRoundingMode:a}=n;return{x:()=>xVe(t,r,i,s,o,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SVe(t,e,n,r,i){const s=K(t,"dy","avgPoolGrad"),o=K(e,"input","avgPoolGrad");U(o.rank===s.rank,()=>`Rank of input (${o.rank}) does not match rank of dy (${s.rank})`);let a=o,l=s,u=!1;o.rank===3&&(u=!0,a=oe(o,[1,o.shape[0],o.shape[1],o.shape[2]]),l=oe(s,[1,s.shape[0],s.shape[1],s.shape[2]])),U(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),U(a.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${a.rank}.`);const h={dy:l,input:a},d={filterSize:n,strides:r,pad:i},p=re.runKernel(SO,h,d);return u?oe(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const TVe=ae({avgPoolGrad_:SVe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CVe={kernelName:$T,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:i,strides:s,pad:o}=n;return{x:()=>TVe(t,r,i,s,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EVe={kernelName:PT,inputsToSave:["a","b"],gradFunc:(t,e,n)=>{const[r,i]=e,{transposeA:s,transposeB:o}=n;return!s&&!o?{a:()=>zt(t,i,!1,!0),b:()=>zt(r,t,!0,!1)}:!s&&o?{a:()=>zt(t,i,!1,!1),b:()=>zt(t,r,!0,!1)}:s&&!o?{a:()=>zt(i,t,!1,!0),b:()=>zt(r,t,!1,!1)}:{a:()=>zt(i,t,!0,!0),b:()=>zt(t,r,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IVe={kernelName:MT,gradFunc:(t,e,n)=>{const{blockShape:r,crops:i}=n;return{x:()=>TP(t,r,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Ve={kernelName:b$e,gradFunc:(t,e,n)=>{const r=n,i=r.inputShape,s=r.shape,o=Array.from(s);for(let l=i.length-1;l>=0;l--)if(i[l]===s[l])o[l]=1;else if(i[l]!==1)throw new Error(`broadcastTo(): [${i}] cannot be broadcast to [${s}].`);const a=[];for(let l=0;l<o.length;l++)o[l]>1&&a.push(l);return{x:()=>Qe(t,a,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AVe={kernelName:zv,gradFunc:t=>({x:()=>t.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kVe={kernelName:Uv,gradFunc:t=>({x:()=>Ot(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NVe={kernelName:jv,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{clipValueMin:i,clipValueMax:s}=n;return{x:()=>Ei(nu(zf(r,i),xm(r,s)),t,Ot(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RVe={kernelName:LT,inputsToSave:["x"],gradFunc:CJ.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DVe={kernelName:FT,saveAllInputs:!0,gradFunc:(t,e,n)=>{const r=e.map(l=>l.shape),{axis:i}=n,s=wt(i,e[0].shape)[0],o=r.map(l=>l[s]);return Ds(t,o,s).map(l=>()=>l)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Ve={kernelName:VT,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,{dilations:s,strides:o,pad:a,dataFormat:l}=n;return U(wf(s),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`),{x:()=>fP(r.shape,t,i,o,a,l),filter:()=>kP(r,t,i.shape,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OVe={kernelName:BT,inputsToSave:["dy","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,{strides:s,pad:o,dataFormat:a,dimRoundingMode:l}=n;return{dy:()=>Tf(t,i,s,o,a,1,l),filter:()=>kP(t,r,i.shape,s,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PVe(t,e,n,r,i){let s=t;t.rank===4&&(s=oe(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let o=e;o.rank===4&&(o=oe(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),U(s.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${s.shape}.`),U(o.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${o.shape}.`),U(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),U(s.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${s.shape[4]}) must match input depth in filter (${n[3]}.`),U(o.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${o.shape[4]}) must match output depth for filter (${n[4]}).`);const a={x:s,dy:o},l={strides:r,pad:i,filterShape:n};return re.runKernel(AO,a,l)}const MVe=ae({conv3DBackpropFilter_:PVe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LVe={kernelName:zT,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:i,pad:s}=n;U(wf(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[o,a]=e;return{x:()=>uZ(o.shape,t,a,i,s),filter:()=>MVe(o,t,a.shape,i,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FVe={kernelName:Wv,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(Fn(_Z(Be(n,"float32"))),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VVe={kernelName:Gv,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(AZ(Be(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BVe={kernelName:UT,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:i,exclusive:s,reverse:o}=n;return{x:()=>{const a=Rn([i],r.rank);let l=hZ(t,i,s,!o);return a!=null&&(l=$t(l,a)),l}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zVe={kernelName:jT,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:i,pad:s,dimRoundingMode:o}=n,a=r??[1,1];U(wf(a),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);const[l,u]=e;return U(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),U(u.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${u.rank}.`),U(l.shape[3]===u.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${u.shape[2]}.`),U(hi(i,a),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${i} and dilations '${a}'.`),Hi("depthwiseConv2d",s,o),{x:()=>XFe(l.shape,t,u,i,s,a,o),filter:()=>qFe(l,t,u.shape,i,s,a,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UVe={kernelName:WT,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,s={x:r,filter:i,dy:t},o={x:r,filter:i,dy:t};return{x:()=>re.runKernel(IN,s,n),filter:()=>re.runKernel(_N,o,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jVe={kernelName:qv,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e,r={dy:t,y:n};return{x:()=>re.runKernel(LO,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WVe={kernelName:Kv,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=ne(il(Fn(yn(n))),2/Math.sqrt(Math.PI));return{x:()=>ne(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GVe={kernelName:Xv,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(t,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HVe={kernelName:HT,inputsToSave:["input"],gradFunc:(t,e)=>{const[n]=e;return{input:()=>oe(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qVe={kernelName:Yv,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(t,il(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KVe={kernelName:Qv,gradFunc:t=>({x:()=>Ot(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XVe={kernelName:Zv,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=dt(n.shape,r.shape);return{a:()=>{const a=et(t,Be(r,"float32")),l=gr(n.shape,i);return l.length>0?oe(Qe(a,l),n.shape):a},b:()=>{let a=ne(t,Be(n,"float32"));const l=gr(r.shape,i);l.length>0&&(a=oe(Qe(a,l),r.shape));const u=yn(r);return Fn(et(a,Be(u,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YVe={kernelName:qT,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,e,n)=>{const{varianceEpsilon:r}=n,[i,s,o,a]=e,l=a??Ut(1),u=gr(s.shape,i.shape),h=[];if(s.rank===1){for(let _=0;_<i.shape.length-1;++_)h.push(i.shape[_]);h.push(1)}const d=it(i,s),p=ne(t,l),g=CZ($e(o,Ut(r))),y=ne(ne(ne(g,g),g),Ut(-.5));return{x:()=>s.rank===1?oe(ne(ne(t,Yo(oe(g,[1,1,1,s.shape[0]]),h)),l),i.shape):oe(ne(ne(t,g),l),i.shape),mean:()=>{let _=ne(ne(g,Ut(-1)),p);return s.rank===1&&(_=Qe(_,u)),oe(_,s.shape)},variance:()=>{let _=ne(ne(y,d),p);return s.rank===1&&(_=Qe(_,u)),oe(_,s.shape)},scale:()=>{const _=ne(d,g);let A=ne(t,_);return s.rank===1&&(A=Qe(A,u)),oe(A,s.shape)},offset:()=>{let _=t;return s.rank===1&&(_=Qe(_,u)),oe(_,s.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QVe={kernelName:KT,inputsToSave:["x","indices"],gradFunc:(t,e,n)=>{const[r,i]=e,{axis:s,batchDims:o}=n,a=wt(s,r.shape)[0],l=(u,h,d)=>()=>{const p=u.shape,g=h.size,y=p.slice(0,a),b=y.length,x=p.slice(s,p.length).slice(1),w=x.length,C=qW(0,b),E=qW(b+1,b+1+w),_=KW([y,[g],x]),A=oe(d,_),P=oe(h,[g]),N=KW([[b],C,E]),R=$t(A,N);let D=$Z(R,P,u.shape[a]);const O=Hc(N);return D=$t(D,O),D};if(o===1){const u=r.shape[0],h=r.split(u,0);return{x:()=>ru(h.map((g,y)=>l(g,i.slice(y,1),t.slice(y,1))())).reshape(r.shape),indices:()=>i}}else return{x:l(r,i,t),indices:()=>i}}};function qW(t,e){const n=[];for(let r=t;r<e;++r)n.push(r);return n}function KW(t){const e=[];for(let n=0;n<t.length;++n)for(let r=0;r<t[n].length;++r)e.push(t[n][r]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZVe={kernelName:Jv,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>Ot(n),b:()=>Ot(r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JVe={kernelName:e0,gradFunc:t=>({x:()=>Be(t,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e4e={kernelName:t0,gradFunc:t=>({x:()=>Ot(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t4e={kernelName:n0,gradFunc:t=>({x:()=>Ot(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n4e={kernelName:r0,gradFunc:t=>({x:()=>Ot(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r4e={kernelName:YT,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{alpha:i}=n,s=Ls(r,0);return{x:()=>Ei(s,t,ne(t,i))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i4e={kernelName:s0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>et(t,$e(n,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s4e={kernelName:i0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>et(t,Be(n,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o4e={kernelName:w$e,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{axis:i}=n;return{logits:()=>{const o=il(r);return it(t,ne(Qe(t,i,!0),o))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a4e(t,e,n,r=5,i=1,s=1,o=.5){const a={x:t,y:e,dy:n},l={depthRadius:r,bias:i,alpha:s,beta:o};return re.runKernel(jO,a,l)}const l4e=ae({localResponseNormalizationBackprop_:a4e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u4e={kernelName:nC,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{depthRadius:s,bias:o,alpha:a,beta:l}=n;return{x:()=>l4e(r,i,t,s,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EJ(t,e,n,r){return e.rank<n.rank&&(e=oe(e,Qn(e.shape,r))),t.rank<n.rank&&(t=oe(t,Qn(t.shape,r))),{x:()=>ne(t,Be(rl(n,e),t.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XW={kernelName:rC,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{reductionIndices:i}=r,s=e[0],o=e[1],a=wt(i,s.shape),l=EJ(t,o,s,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c4e={kernelName:o0,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>ne(t,Be(zf(n,r),"float32")),b:()=>ne(t,Be(tS(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h4e(t,e,n,r,i,s,o){const a=K(t,"dy","maxPool3dGrad"),l=K(e,"input","maxPool3dGrad"),u=K(n,"output","maxPool3dGrad");let h=a,d=l,p=u,g=!1;l.rank===4&&(g=!0,h=oe(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),d=oe(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),p=oe(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]])),U(h.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${h.rank}.`),U(d.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${d.rank}.`),U(p.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${p.rank}.`),Hi("maxPool3dGrad",s,o);const y={dy:h,input:d,output:p},b={filterSize:r,strides:i,pad:s,dimRoundingMode:o},x=re.runKernel(GO,y,b);return g?oe(x,[x.shape[1],x.shape[2],x.shape[3],x.shape[4]]):x}const f4e=ae({maxPool3dGrad_:h4e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d4e={kernelName:sC,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{filterSize:s,strides:o,pad:a,dimRoundingMode:l}=n;return{x:()=>f4e(t,r,i,s,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p4e(t,e,n,r,i,s,o){const a=K(t,"dy","maxPoolGrad"),l=K(e,"input","maxPoolGrad"),u=K(n,"output","maxPoolGrad");U(l.rank===a.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${a.rank})`),U(a.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${a.rank}.`),U(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),Hi("maxPoolGrad",s,o);const h={dy:a,input:l,output:u},d={filterSize:r,strides:i,pad:s,dimRoundingMode:o};return re.runKernel(WO,h,d)}const m4e=ae({maxPoolGrad_:p4e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g4e={kernelName:iC,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{filterSize:s,strides:o,pad:a}=n;return{x:()=>m4e(t,r,i,s,o,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y4e={kernelName:oC,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:i}=n,s=wt(i,r.shape),a=Rr(r.shape,s)[1],l=Se(a);return{x:()=>{const h=r.shape.slice();s.forEach(g=>{h[g]=1});const d=oe(t,h);return et(ne(d,Kc(r.shape,"float32")),l)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v4e={kernelName:aC,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{axis:i}=r,[s,o]=e,a=wt(i,s.shape),l=EJ(t,o,s,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b4e={kernelName:a0,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>ne(t,Be(xm(n,r),"float32")),b:()=>ne(t,Be(Ls(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x4e={kernelName:lC,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:i}=n,s=i.map(o=>o[0]);return{x:()=>dn(t,s,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w4e={kernelName:l0,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=dt(n.shape,r.shape);return{a:()=>{const a=gr(n.shape,i);return a.length>0?oe(Qe(t,a),n.shape):t},b:()=>{const a=ne(t,Fn(MC(et(n,r)))),l=gr(r.shape,i);return l.length>0?oe(Qe(a,l),r.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S4e={kernelName:u0,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=dt(n.shape,r.shape);return{a:()=>{const a=ne(t,Be(r,"float32")),l=gr(n.shape,i);return l.length>0?oe(Qe(a,l),n.shape):a},b:()=>{const a=ne(t,Be(n,"float32")),l=gr(r.shape,i);return l.length>0?oe(Qe(a,l),r.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T4e={kernelName:uC,gradFunc:t=>({x:()=>Fn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C4e={kernelName:fC,inputsToSave:["indices"],gradFunc:(t,e)=>{const n=e[0];return{indices:()=>Cr(n.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E4e={kernelName:hC,gradFunc:t=>({x:()=>Ot(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I4e={kernelName:dC,saveAllInputs:!0,gradFunc:(t,e,n)=>{const{axis:r}=n;return If(t,r).map(s=>()=>s)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YW={kernelName:pC,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:i}=n,s=i.map(o=>o[0]);return{x:()=>dn(t,s,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _4e={kernelName:c0,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n,r,i]=e,s=n,o=r,a=dt(s.shape,o.shape);return{a:()=>{const h=Be(o,"float32");let d=ne(t,ne(h,Cf(s,it(h,Ut(1)))));const p=gr(s.shape,a);return p.length>0&&(d=Qe(d,p)),oe(d,s.shape)},b:()=>{const h=Ls(s,0),d=Ei(h,sl(s),Ot(s));let p=ne(t,ne(i,d));const g=gr(o.shape,a);return g.length>0&&(p=Qe(p,g)),oe(p,o.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A4e={kernelName:mC,inputsToSave:["x","alpha"],gradFunc:(t,e)=>{const[n,r]=e,i=Ls(n,0);return{x:()=>Ei(i,t,ne(t,r)),alpha:()=>{let s=Ei(i,Ot(t),ne(t,n));const o=gr(r.shape,t.shape);return o.length>0&&(s=Qe(s,o)),oe(s,r.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k4e(t,e,n){const r=t.shape.slice();r[n]=1;const i=oe(e,r),s=zN(t,n,!0,!1),o=zN(t,n,!0,!0),a=ne(s,o);return ne(i,a)}function N4e(t,e,n){const r=t.shape.length,i=r-n.length,s=Rn(n,r);let o=t;s!=null&&(o=$t(t,s));const a=o.shape.slice(),u=a.splice(r-n.length,n.length).reduce((p,g)=>p*g,1);a.push(u);const h=o.reshape(a);let d=k4e(h,e,i);if(d=d.reshape(o.shape),s!=null){const p=Hc(s);d=$t(d,p)}return d}const R4e={kernelName:gC,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:i}=n;let s=[];return i==null?s=r.shape.map((o,a)=>a):typeof i=="number"?s=[i]:s=i,{x:()=>N4e(r,t,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D4e={kernelName:Hv,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=dt(n.shape,r.shape);return{a:()=>{const a=et(t,Be(r,"float32")),l=gr(n.shape,i);return l.length>0?oe(Qe(a,l),n.shape):a},b:()=>{let a=ne(t,Be(n,"float32"));const l=gr(r.shape,i);l.length>0&&(a=oe(Qe(a,l),r.shape));const u=yn(r);return Fn(et(a,Be(u,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $4e={kernelName:h0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>et(t,Fn(yn(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O4e={kernelName:d0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=ne(xm(n,6),P0(n));return{x:()=>ne(t,Be(r,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P4e={kernelName:f0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(t,Be(P0(n),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M4e={kernelName:yC,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>oe(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L4e={kernelName:bC,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,i={dy:t,images:r};return{images:()=>re.runKernel(ZO,i,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F4e={kernelName:vC,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,i={dy:t,images:r};return{images:()=>re.runKernel(QO,i,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V4e={kernelName:xC,gradFunc:(t,e,n)=>{const{dims:r}=n,i=wt(r,t.shape);return{x:()=>Ef(t,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B4e={kernelName:p0,gradFunc:t=>({x:()=>Ot(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z4e={kernelName:m0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Fn(et(t,ne(Cf(n,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U4e={kernelName:wC,inputsToSave:["condition"],gradFunc:(t,e)=>{const[n]=e;return{condition:()=>Be(Ot(n),"float32"),t:()=>ne(t,Be(n,t.dtype)),e:()=>ne(t,Be(bP(n),t.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j4e={kernelName:g0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Ls(n,Ut(0)),i=Ut(VC),s=Ut(BC),o=ne(t,s),a=ne(ne(t,i),il(Be(n,"float32")));return Ei(r,o,a)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W4e={kernelName:x0,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(t,ne(n,it(Ut(1),n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G4e={kernelName:b0,gradFunc:t=>({x:()=>Ot(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H4e={kernelName:y0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(dP(Be(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q4e={kernelName:v0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(cZ(Be(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K4e={kernelName:SC,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{begin:i,size:s}=n,o=r.shape,[a,l]=LC(r,i,s),u=[];for(let h=0;h<t.rank;h++)u.push([a[h],o[h]-a[h]-l[h]]);return{x:()=>SP(t,u)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X4e={kernelName:IC,outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{dim:i}=n,s=!0,o=ne(t,r);return{logits:()=>it(o,ne(Qe(o,[i],s),r))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y4e={kernelName:w0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(t,bm(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QW={kernelName:CC,gradFunc:(t,e,n)=>{const{blockShape:r,paddings:i}=n;return{x:()=>hP(t,r,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZW={kernelName:EC,gradFunc:(t,e,n)=>{const{axis:r}=n;return{x:()=>Ui(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q4e={kernelName:S0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>et(t,ne(ci(Be(n,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z4e={kernelName:JO,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(t,ne(Be(n,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J4e={kernelName:T0,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Ut(2);return{a:()=>ne(t,ne(i,it(n,r))),b:()=>ne(t,ne(i,it(r,n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eBe={kernelName:A0,gradFunc:t=>({x:()=>Ot(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tBe={kernelName:C0,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=dt(n.shape,r.shape);return{a:()=>{let a=t;const l=gr(n.shape,i);return l.length>0&&(a=Qe(a,l)),oe(a,n.shape)},b:()=>{let a=t;const l=gr(r.shape,i);return l.length>0&&(a=Qe(a,l)),oe(Fn(a),r.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nBe={kernelName:TC,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,i=r.shape.slice(),{axis:s}=n;wt(s,r.shape).forEach(u=>{i[u]=1});const a=oe(t,i),l=ne(a,Kc(r.shape,"float32"));return{x:()=>l}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rBe={kernelName:E0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>et(t,yn(dP(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iBe={kernelName:I0,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ne(it(Ut(1),yn(n)),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sBe={kernelName:_0,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{reps:i}=n;return{x:()=>{let o=Ot(r);if(r.rank===1)for(let a=0;a<i[0];++a)o=$e(o,dn(t,[a*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let a=0;a<i[0];++a)for(let l=0;l<i[1];++l)o=$e(o,dn(t,[a*r.shape[0],l*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let a=0;a<i[0];++a)for(let l=0;l<i[1];++l)for(let u=0;u<i[2];++u)o=$e(o,dn(t,[a*r.shape[0],l*r.shape[1],u*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let a=0;a<i[0];++a)for(let l=0;l<i[1];++l)for(let u=0;u<i[2];++u)for(let h=0;h<i[3];++h)o=$e(o,dn(t,[a*r.shape[0],l*r.shape[1],u*r.shape[2],h*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oBe={kernelName:pp,gradFunc:(t,e,n)=>{const r=n,{perm:i}=r,s=Hc(i);return{x:()=>$t(t,s)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aBe={kernelName:_C,gradFunc:(t,e,n)=>{const r=n,{axis:i}=r;return{value:()=>ru(t,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lBe={kernelName:AC,inputsToSave:["segmentIds"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>uBe(t,n)}}};function uBe(t,e){const n=qc(e,Ot(e)),r=gP(t,n);let i=zf(e,Ut(0,"int32"));const s=r.rank-i.rank;for(let a=0;a<s;++a)i=Mi(i,a+1);i=nu(i,Kc(r.shape,"bool"));const o=Ot(r);return Ei(i,r,o)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cBe={kernelName:kC,gradFunc:t=>({x:()=>Ot(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hBe=[CJ,lVe,uVe,cVe,hVe,fVe,dVe,pVe,mVe,gVe,yVe,vVe,wVe,CVe,EVe,IVe,_Ve,AVe,kVe,NVe,RVe,DVe,OVe,$Ve,LVe,FVe,VVe,BVe,zVe,UVe,D4e,jVe,WVe,GVe,HVe,qVe,XVe,KVe,YVe,QVe,ZVe,JVe,e4e,t4e,n4e,r4e,i4e,s4e,o4e,u4e,XW,XW,c4e,d4e,g4e,y4e,v4e,b4e,x4e,w4e,S4e,T4e,C4e,E4e,I4e,YW,YW,_4e,A4e,R4e,$4e,O4e,P4e,M4e,L4e,F4e,V4e,B4e,z4e,U4e,j4e,W4e,G4e,H4e,q4e,K4e,X4e,Y4e,QW,QW,ZW,ZW,Q4e,J4e,Z4e,eBe,tBe,nBe,rBe,iBe,sBe,oBe,aBe,lBe,cBe];for(const t of hBe)T$e(t);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.abs=function(){return this.throwIfDisposed(),bi(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.acos=function(){return this.throwIfDisposed(),MOe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.acosh=function(){return this.throwIfDisposed(),FOe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.add=function(t){return this.throwIfDisposed(),$e(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.all=function(t,e){return this.throwIfDisposed(),oZ(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.any=function(t,e){return this.throwIfDisposed(),VN(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.argMax=function(t){return this.throwIfDisposed(),Gy(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.argMin=function(t){return this.throwIfDisposed(),jOe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.asScalar=function(){return this.throwIfDisposed(),U(this.size===1,()=>"The array must have only 1 element."),oe(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.asType=function(t){return this.throwIfDisposed(),Be(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.as1D=function(){return this.throwIfDisposed(),oe(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.as2D=function(t,e){return this.throwIfDisposed(),oe(this,[t,e])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.as3D=function(t,e,n){return this.throwIfDisposed(),oe(this,[t,e,n])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),oe(this,[t,e,n,r])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.as5D=function(t,e,n,r,i){return this.throwIfDisposed(),oe(this,[t,e,n,r,i])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.asin=function(){return this.throwIfDisposed(),GOe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.asinh=function(){return this.throwIfDisposed(),qOe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.atan=function(){return this.throwIfDisposed(),XOe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.atan2=function(t){return this.throwIfDisposed(),QOe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.atanh=function(){return this.throwIfDisposed(),JOe(this)};we().prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),cP(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),hP(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.batchNorm=function(t,e,n,r,i){return this.throwIfDisposed(),DC(this,t,e,n,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.broadcastTo=function(t){return this.throwIfDisposed(),yy(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.cast=function(t){return this.throwIfDisposed(),Be(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.ceil=function(){return this.throwIfDisposed(),IPe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.clipByValue=function(t,e){return this.throwIfDisposed(),Os(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.concat=function(t,e){return this.throwIfDisposed(),t instanceof ur&&(t=[t]),Ui([this,...t],e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.conv1d=function(t,e,n,r,i,s){return this.throwIfDisposed(),aZ(this,t,e,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.conv2dTranspose=function(t,e,n,r,i){return this.throwIfDisposed(),lZ(this,t,e,n,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.conv2d=function(t,e,n,r,i,s){return this.throwIfDisposed(),Tf(this,t,e,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.cos=function(){return this.throwIfDisposed(),dP(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.cosh=function(){return this.throwIfDisposed(),cZ(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.cumprod=function(t,e,n){return this.throwIfDisposed(),zN(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.cumsum=function(t,e,n){return this.throwIfDisposed(),hZ(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),QPe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.depthwiseConv2d=function(t,e,n,r,i,s){return this.throwIfDisposed(),pP(this,t,e,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.dilation2d=function(t,e,n,r,i){return this.throwIfDisposed(),eMe(this,t,e,n,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.divNoNan=function(t){return this.throwIfDisposed(),sMe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.div=function(t){return this.throwIfDisposed(),et(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.dot=function(t){return this.throwIfDisposed(),aMe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.elu=function(){return this.throwIfDisposed(),OC(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.equal=function(t){return this.throwIfDisposed(),rl(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.erf=function(){return this.throwIfDisposed(),fZ(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.euclideanNorm=function(t,e){return this.throwIfDisposed(),bMe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.exp=function(){return this.throwIfDisposed(),il(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.expandDims=function(t){return this.throwIfDisposed(),Mi(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.expm1=function(){return this.throwIfDisposed(),TMe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.fft=function(){return this.throwIfDisposed(),NZ(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.flatten=function(){return this.throwIfDisposed(),oe(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.floor=function(){return this.throwIfDisposed(),MC(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.floorDiv=function(t){return this.throwIfDisposed(),sZ(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.gather=function(t,e,n){return this.throwIfDisposed(),gP(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.greaterEqual=function(t){return this.throwIfDisposed(),zf(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.greater=function(t){return this.throwIfDisposed(),Ls(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.ifft=function(){return this.throwIfDisposed(),UN(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.irfft=function(){return this.throwIfDisposed(),gFe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.isFinite=function(){return this.throwIfDisposed(),DMe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.isInf=function(){return this.throwIfDisposed(),OMe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.isNaN=function(){return this.throwIfDisposed(),MMe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.leakyRelu=function(t){return this.throwIfDisposed(),vP(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.lessEqual=function(t){return this.throwIfDisposed(),xm(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.less=function(t){return this.throwIfDisposed(),tS(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.localResponseNormalization=function(t,e,n,r){return this.throwIfDisposed(),zMe(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.logSigmoid=function(){return this.throwIfDisposed(),KMe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.logSoftmax=function(t){return this.throwIfDisposed(),yZ(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.logSumExp=function(t,e){return this.throwIfDisposed(),vZ(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.log=function(){return this.throwIfDisposed(),sl(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.log1p=function(){return this.throwIfDisposed(),gZ(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.logicalAnd=function(t){return this.throwIfDisposed(),nu(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.logicalNot=function(){return this.throwIfDisposed(),bP(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.logicalOr=function(t){return this.throwIfDisposed(),bZ(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.logicalXor=function(t){return this.throwIfDisposed(),nLe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.matMul=function(t,e,n){return this.throwIfDisposed(),zt(this,t,e,n)};we().prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),xP(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.max=function(t,e){return this.throwIfDisposed(),Zo(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.maximum=function(t){return this.throwIfDisposed(),qc(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.mean=function(t,e){return this.throwIfDisposed(),Yn(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.min=function(t,e){return this.throwIfDisposed(),eS(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.minimum=function(t){return this.throwIfDisposed(),Ky(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.mirrorPad=function(t,e){return this.throwIfDisposed(),cLe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.mod=function(t){return this.throwIfDisposed(),fLe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.mul=function(t){return this.throwIfDisposed(),ne(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.neg=function(){return this.throwIfDisposed(),Fn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.norm=function(t,e,n){return this.throwIfDisposed(),PC(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.notEqual=function(t){return this.throwIfDisposed(),nS(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.oneHot=function(t,e=1,n=0){return this.throwIfDisposed(),xZ(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.onesLike=function(){return this.throwIfDisposed(),To(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.pad=function(t,e){return this.throwIfDisposed(),SP(this,t,e)};we().prototype.pool=function(t,e,n,r,i,s){return this.throwIfDisposed(),SLe(this,t,e,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.pow=function(t){return this.throwIfDisposed(),Cf(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.prelu=function(t){return this.throwIfDisposed(),CP(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.prod=function(t,e){return this.throwIfDisposed(),ELe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.reciprocal=function(){return this.throwIfDisposed(),YLe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.relu=function(){return this.throwIfDisposed(),Uf(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.relu6=function(){return this.throwIfDisposed(),SZ(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.reshapeAs=function(t){return this.throwIfDisposed(),oe(this,t.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.reshape=function(t){return this.throwIfDisposed(),oe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.resizeBilinear=function(t,e,n){return this.throwIfDisposed(),PZ(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.resizeNearestNeighbor=function(t,e,n){return this.throwIfDisposed(),MZ(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.reverse=function(t){return this.throwIfDisposed(),Ef(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.rfft=function(){return this.throwIfDisposed(),bFe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.round=function(){return this.throwIfDisposed(),TZ(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.rsqrt=function(){return this.throwIfDisposed(),CZ(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.selu=function(){return this.throwIfDisposed(),EZ(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.separableConv2d=function(t,e,n,r,i,s){return this.throwIfDisposed(),IZ(this,t,e,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.sigmoid=function(){return this.throwIfDisposed(),bm(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.sign=function(){return this.throwIfDisposed(),sFe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.sin=function(){return this.throwIfDisposed(),_Z(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.sinh=function(){return this.throwIfDisposed(),AZ(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.slice=function(t,e){return this.throwIfDisposed(),dn(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.softmax=function(t){return this.throwIfDisposed(),AP(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.softplus=function(){return this.throwIfDisposed(),D0(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),TP(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.split=function(t,e){return this.throwIfDisposed(),Ds(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.sqrt=function(){return this.throwIfDisposed(),ci(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.square=function(){return this.throwIfDisposed(),yn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.squaredDifference=function(t){return this.throwIfDisposed(),wFe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.squeeze=function(t){return this.throwIfDisposed(),O0(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.stack=function(t,e){this.throwIfDisposed();const n=t instanceof ur?[this,t]:[this,...t];return ru(n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.step=function(t){return this.throwIfDisposed(),P0(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.stridedSlice=function(t,e,n,r,i,s,o,a){return this.throwIfDisposed(),IFe(this,t,e,n,r,i,s,o,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.sub=function(t){return this.throwIfDisposed(),it(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.sum=function(t,e){return this.throwIfDisposed(),Qe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.tan=function(){return this.throwIfDisposed(),AFe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.tanh=function(){return this.throwIfDisposed(),RC(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.tile=function(t){return this.throwIfDisposed(),Yo(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.toBool=function(){return this.throwIfDisposed(),Be(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.toFloat=function(){return this.throwIfDisposed(),Be(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.toInt=function(){return this.throwIfDisposed(),Be(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.topk=function(t,e){return this.throwIfDisposed(),DFe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.transpose=function(t){return this.throwIfDisposed(),$t(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.unique=function(t){return this.throwIfDisposed(),PFe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),$Z(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.unstack=function(t){return this.throwIfDisposed(),If(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.where=function(t,e){return this.throwIfDisposed(),Ei(t,this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.zerosLike=function(){return this.throwIfDisposed(),Ot(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Da extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Da.prototype)}}class po extends Error{constructor(e){super(e),Object.setPrototypeOf(this,po.prototype)}}class J extends Error{constructor(e){super(e),Object.setPrototypeOf(this,J.prototype)}}class yt extends Error{constructor(e){super(e),Object.setPrototypeOf(this,yt.prototype)}}class hM extends Error{constructor(e){super(e),Object.setPrototypeOf(this,hM.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class IJ{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let n;return this.cache.has(e)&&(n=this.cache.get(e),this.cache.delete(e),this.cache.set(e,n)),n}put(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let n=0;n<this.maxEntries-e;n++){const r=this.cache.keys().next().value;this.cache.delete(r)}this.maxEntries=e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function _f(t,e){if(Array.isArray(t)){let n=[];for(let r=0;r<e;r++)n=n.concat(t);return n}else{const n=new Array(e);return n.fill(t),n}}function $a(t,e){if(!t)throw new hM(e)}function JW(t,e){let n=0;for(const r of t)r===e&&n++;return n}function Li(t){return t.length===1?t[0]:t}function Kt(t){return Array.isArray(t)?t:[t]}function Rl(t){const n=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function Fh(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(e,n)=>n.toUpperCase())}let no={};function fM(t){if(t==null)return null;const e={};return e.className=t.getClassName(),e.config=t.getConfig(),e}function GN(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(e=>GN(e));else{const e=Object.keys(t);for(const n of e){const r=t[n];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?t[n]=r.value:GN(r))}}}function V0(t,e={},n={},r="object",i=!1){if(typeof t=="string"){const s=t;let o;if(s in n)o=n[s];else if(s in no)o=no[s];else if(o=e[s],o==null)throw new J(`Unknown ${r}: ${t}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return o}else{const s=t;if(s.className==null||s.config==null)throw new J(`${r}: Improper config format: ${JSON.stringify(s)}.
'className' and 'config' must set.`);const o=s.className;let a,l;if(o in n?[a,l]=n[o]:o in no?[a,l]=no.className:o in e&&([a,l]=e[o]),a==null)throw new J(`Unknown ${r}: ${o}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){const u={};for(const g of Object.keys(no))u[g]=no[g];for(const g of Object.keys(n))u[g]=n[g];const h=s.config;h.customObjects=u;const d=Object.assign({},no);for(const g of Object.keys(n))no[g]=n[g];GN(s.config);const p=l(a,s.config,n,i);return no=Object.assign({},d),p}else{const u=Object.assign({},no);for(const d of Object.keys(n))no[d]=n[d];const h=new a(s.config);return no=Object.assign({},u),h}}}function fBe(t,e){return t<e?-1:t>e?1:0}function Qx(t,e){return-1*fBe(t,e)}function vc(t){if(t==null)return t;const e=[];for(const n of t)e.indexOf(n)===-1&&e.push(n);return e}function dBe(t){if(t==null)throw new J(`Invalid value in obj: ${JSON.stringify(t)}`);for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}function Wf(t,e,n){if(n!=null&&t.indexOf(n)<0)throw new J(`${n} is not a valid ${e}.  Valid values are ${t} or null/undefined.`)}function dM(t,e,n=0,r=1/0){return $a(n>=0),$a(r>=n),Array.isArray(t)&&t.length>=n&&t.length<=r&&t.every(i=>typeof i===e)}function Er(t,e){Array.isArray(t)?(U(t.length>0,()=>`${e} is unexpectedly an empty array.`),t.forEach((n,r)=>Er(n,`element ${r+1} of ${e}`))):U(Number.isInteger(t)&&t>0,()=>`Expected ${e} to be a positive integer, but got ${_J(t)}.`)}function _J(t){return t===null?"null":Array.isArray(t)?"["+t.map(e=>_J(e)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function pBe(t,e,n){let r=n!=null?n():Di(),i;return(...o)=>{const a=n!=null?n():Di();return a-r<e||(r=a,i=t(...o)),i}}function AJ(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let mBe=0;function kJ(){return mBe++}const Zx={};function zC(t=""){return t in Zx||(Zx[t]=0),Zx[t]+=1,t+Zx[t].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const gBe=["channelsFirst","channelsLast"],yBe=["nearest","bilinear"],vBe=["valid","same","causal"],bBe=["max","avg"],xBe=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const zd=new Map;function zn(t){Wf(gBe,"DataFormat",t)}function wBe(t){Wf(yBe,"InterpolationFormat",t)}function Fs(t){Wf(vBe,"PaddingMode",t)}function NJ(t){Wf(bBe,"PoolMode",t)}const vy=[],eG="/";function nf(t,e){vy.push(t);try{const n=e();return vy.pop(),n}catch(n){throw vy.pop(),n}}function SBe(){return vy.length===0?"":vy.join(eG)+eG}function RJ(t){if(!$J(t))throw new Error("Not a valid tensor name: '"+t+"'");return SBe()+t}function DJ(t){if(!$J(t))throw new Error("Not a valid tensor name: '"+t+"'");zd.has(t)||zd.set(t,0);const e=zd.get(t);if(zd.set(t,zd.get(t)+1),e>0){const n=`${t}_${e}`;return zd.set(n,1),n}else return t}const TBe=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function $J(t){return!!t.match(TBe)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function CBe(t){return t===parseInt(t.toString(),10)}function bc(t,e,n){e==null&&(e=0),n==null&&(n=t.length);let r=1;for(let i=e;i<n;++i)r*=t[i];return r}function jp(t){if(t.length===0)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r<e&&(e=r)}return e}function $c(t){if(t.length===0)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r>e&&(e=r)}return e}function na(t,e){if(e<t)throw new J(`end (${e}) < begin (${t}) is forbidden.`);const n=[];for(let r=t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let xk;function hr(){return xk==null&&(xk=X$e().epsilon()),xk}function ra(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Xa(t,e){return Be(t,e)}function B0(t,e=-1){const n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),oe(t,n)}function EBe(t,e){return fe(()=>{if(t.shape.length!==2)throw new J(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);const n=B0(t,1);return HN(n,[1,e,1])})}function IBe(t){const e=[bc(t.shape)];return oe(t,e)}function _Be(t){if(t.rank<=1)throw new J(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);const e=[t.shape[0],bc(t.shape,1)];return oe(t,e)}function rf(t,e,n){return fe(()=>{switch(t.rank){case 1:return IP(t,e,n);case 2:return kZ(t,[e,0],[n,t.shape[1]]);case 3:return _P(t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return iS(t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return dn(t,[e,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return dn(t,[e,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new J(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function wk(t,e,n){return fe(()=>{switch(t.rank){case 1:return IP(t,e,n);case 2:return kZ(t,[0,e],[t.shape[0],n]);case 3:return _P(t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return iS(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new J(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function Jx(t,e,n,r){return fe(()=>{switch(t.rank){case 1:return IP(t,e,n);case 2:switch(r){case 1:return rf(t,e,n);case 2:return wk(t,e,n);default:throw new J(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return rf(t,e,n);case 2:return _P(t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return wk(t,e,n);default:throw new J(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return rf(t,e,n);case 2:return iS(t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return iS(t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return wk(t,e,n);default:throw new J(`The axis is not within the rank of the tensor ${r}`)}default:throw new J(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function pM(t,e=-1){let n;return e<0&&(n=t[0].rank,n!==0?e=n:e=0),e===t[0].rank&&(e=-1),Ui(t,e)}function tG(t,e){switch(t.rank){case 1:return kPe([t,e]);case 2:return RPe([t,e],0);case 3:return $Pe([t,e],0);case 4:return PPe([t,e],0);default:throw new J(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function HN(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new J(`The length of input n (${e.length}) does not match the number of dimensions in input x (${t.rank})`);return Yo(t,e)}function UC(t,e=0,n=1,r,i){return HLe(t,e,n,r,i)}function Ya(t,e,n,r){if(t.rank<2||e.rank<2)throw new yt(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${e.shape}`);if(e.rank>=3){const i=t.shape.slice(-1)[0],s=e.shape.slice(-2)[0];if(i!==s)throw new yt(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${e.shape}`)}if(t.rank===2&&e.rank===2)return VW({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?qN(t.rank,r,ra()):null,activation:n});{const i=t.shape.slice(),s=i.pop();t=oe(t,[-1,s]);const o=e.shape.slice(),a=o.pop(),l=o.pop(),u=[...o,a],h=Array.from({length:e.rank},(y,b)=>b===0?e.rank-2:b<=e.rank-2?b-1:b);e=oe($t(e,h),[l,-1]);const d=[...i,...u];return oe(VW({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?qN(t.rank,r,ra()):null,activation:n}),d)}}function OJ(t,e,n){return fe(()=>(Array.isArray(e)?e=cs(e,"int32"):e=Be(e,"int32"),gP(t,e,n)))}function z0(t){return ne(t,t)}function qN(t,e,n){const r=e.shape;if(e.rank!==1&&e.rank!==t)throw new J(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${t}`);if(t===5){if(n==="channelsFirst")return r.length===1?oe(e,[1,r[0],1,1,1]):oe(e,[1,r[3],r[0],r[1],r[2]]);if(n==="channelsLast")return r.length===1?oe(e,[1,1,1,1,r[0]]):oe(e,[1].concat(r))}else if(t===4){if(n==="channelsFirst")return r.length===1?oe(e,[1,r[0],1,1]):oe(e,[1,r[2],r[0],r[1]]);if(n==="channelsLast")return r.length===1?oe(e,[1,1,1,r[0]]):oe(e,[1].concat(r))}else if(t===3){if(n==="channelsFirst")return r.length===1?oe(e,[1,r[0],1]):oe(e,[1,r[1],r[0]]);if(n==="channelsLast")return r.length===1?oe(e,[1,1,r[0]]):oe(e,[1].concat(r))}else if(t<3)return e;throw new J(`Unsupported input rank by biasAdd: ${e.rank}`)}function aa(t,e,n){return fe(()=>(n==null&&(n=ra()),zn(n),$e(t,qN(t.rank,e,n))))}function ABe(t,e=1){if(e!==1)throw new yt(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return OC(t)}function kBe(t){return fe(()=>et(t,$e(bi(t),1)))}function PJ(t,e,n,r){return fe(()=>UFe(t,e,n,r))}function NBe(t){return fe(()=>{const e=$e(.5,ne(.2,t));return Os(e,0,1)})}function U0(t,e,n=!1){return n?t():e()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const RBe=["fanIn","fanOut","fanAvg"],DBe=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function $Be(t){Wf(RBe,"FanMode",t)}function OBe(t){Wf(DBe,"Distribution",t)}class _o extends Sm{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class MJ extends _o{apply(e,n){return Cr(e,n)}}MJ.className="Zeros";Ne(MJ);class mM extends _o{apply(e,n){return Kc(e,n)}}mM.className="Ones";Ne(mM);class LJ extends _o{constructor(e){if(super(),typeof e!="object")throw new J(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new J(`config must have value set but got ${e}`);this.value=e.value}apply(e,n){return fe(()=>ne(Ut(this.value),Kc(e,n)))}getConfig(){return{value:this.value}}}LJ.className="Constant";Ne(LJ);class FJ extends _o{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,n){return $0(e,this.minval,this.maxval,n,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}FJ.className="RandomUniform";Ne(FJ);class VJ extends _o{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new yt(`randomNormal does not support dType ${n}.`);return UC(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}VJ.className="RandomNormal";Ne(VJ);class BJ extends _o{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new yt(`truncatedNormal does not support dType ${n}.`);return DZ(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}BJ.className="TruncatedNormal";Ne(BJ);class zJ extends _o{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,n){return fe(()=>{if(e.length!==2||e[0]!==e[1])throw new J("Identity matrix initializer can only be used for 2D square matrices.");return ne(this.gain,mZ(e[0]))})}getConfig(){return{gain:this.gain}}}zJ.className="Identity";Ne(zJ);function PBe(t,e="channelsLast"){let n,r;if(zn(e),t.length===2)n=t[0],r=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(e==="channelsFirst"){const i=bc(t,2);n=t[1]*i,r=t[0]*i}else if(e==="channelsLast"){const i=bc(t,0,t.length-2);n=t[t.length-2]*i,r=t[t.length-1]*i}}else{const i=bc(t);n=Math.sqrt(i),r=Math.sqrt(i)}return[n,r]}class ds extends _o{constructor(e){if(super(),e.scale<0)throw new J(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,$Be(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,OBe(this.distribution),this.seed=e.seed}apply(e,n){const r=PBe(e),i=r[0],s=r[1];let o=this.scale;if(this.mode==="fanIn"?o/=Math.max(1,i):this.mode==="fanOut"?o/=Math.max(1,s):o/=Math.max(1,(i+s)/2),this.distribution==="normal"){const a=Math.sqrt(o);if(n=n||"float32",n!=="float32"&&n!=="int32")throw new yt(`${this.getClassName()} does not support dType ${n}.`);return DZ(e,0,a,n,this.seed)}else{const a=Math.sqrt(3*o);return $0(e,-a,a,n,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}ds.className="VarianceScaling";Ne(ds);class gM extends ds{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return ds.className}}gM.className="GlorotUniform";Ne(gM);class yM extends ds{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return ds.className}}yM.className="GlorotNormal";Ne(yM);class vM extends ds{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return ds.className}}vM.className="HeNormal";Ne(vM);class bM extends ds{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return ds.className}}bM.className="HeUniform";Ne(bM);class xM extends ds{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return ds.className}}xM.className="LeCunNormal";Ne(xM);class wM extends ds{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return ds.className}}wM.className="LeCunUniform";Ne(wM);class UJ extends _o{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,n){return fe(()=>{if(e.length<2)throw new yt("Shape must be at least 2D.");if(n!=="int32"&&n!=="float32"&&n!==void 0)throw new TypeError(`Unsupported data type ${n}.`);n=n;const r=Se(e.slice(0,-1)),i=e[e.length-1],s=r*i;s>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${s}) elements: Slowness may result.`);const o=[Math.max(i,r),Math.min(i,r)],a=UC(o,0,1,n,this.seed),l=F3e.qr(a,!1);let u=l[0];const d=l[1].flatten().stridedSlice([0],[Math.min(i,r)*Math.min(i,r)],[Math.min(i,r)+1]);return u=ne(u,d.sign()),r<i&&(u=u.transpose()),ne(Ut(this.gain),u.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}UJ.className="Orthogonal";Ne(UJ);const nG={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function rG(t,e={}){return V0(t,co.getMap().classNameMap,e,"initializer")}function Nn(t){return fM(t)}function Cn(t){if(typeof t=="string"){const e=t in nG?nG[t]:t;if(e==="GlorotNormal")return new yM;if(e==="GlorotUniform")return new gM;if(e==="HeNormal")return new vM;if(e==="HeUniform")return new bM;if(e==="LeCunNormal")return new xM;if(e==="LeCunUniform")return new wM;{const n={};return n.className=e,n.config={},rG(n)}}else return t instanceof _o?t:rG(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function KN(t){return Array.isArray(t)&&Array.isArray(t[0])}function sS(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function st(t){let e;if(Array.isArray(t)){if(t.length!==1)throw new J(`Expected Tensor length to be 1; got ${t.length}`);e=t[0]}else e=t;return e}function Ft(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new J(`Expected exactly 1 Shape; got ${t.length}`)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function oS(t){let e=0;for(const n of t)n.shape.length===0?e+=1:e+=n.shape.reduce((r,i)=>r*i);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const iG="Variable";class MBe{constructor(e,n="float32",r=iG,i=!0,s=null){this.dtype=n??"float32",this.shape=e.shape,this.id=kJ(),r=r??iG,this.originalName=RJ(r),this.name=DJ(this.originalName),this.trainable_=i,this.constraint=s,this.val=FFe(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),LBe(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function LBe(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}function XN(t){return t.map(e=>e.read())}function SM(t){t.forEach(e=>{e[0].write(e[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class fr{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class ol{constructor(e,n,r,i,s,o,a){this.dtype=e,this.shape=n,this.sourceLayer=r,this.inputs=i,this.callArgs=s,this.outputTensorIndex=a,this.id=kJ(),o!=null&&(this.originalName=RJ(o),this.name=DJ(this.originalName)),this.rank=n.length}}let FBe=0;class jC{constructor(e,n){this.callArgs=n,this.id=FBe++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const r of e.inboundLayers)r?.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const n of this.inboundLayers)n!=null?e.push(n.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let VBe=0;class St extends Sm{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=VBe++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=e.name;if(!n){const r=this.getClassName();n=Rl(r)+"_"+zC(r)}if(this.name=n,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let r;if(e.batchInputShape!=null)r=e.batchInputShape;else if(e.inputShape!=null){let s=null;e.batchSize!=null&&(s=e.batchSize),r=[s].concat(e.inputShape)}this.batchInputShape=r;let i=e.dtype;i==null&&(i=e.inputDType),i==null&&(i="float32"),this.dtype=i}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,n){return e.name+"_ib-"+n.toString()}getNodeAtIndex(e,n){if(this.inboundNodes.length===0)throw new po(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=e)throw new J(`Asked to get ${n} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return Li(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return Li(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new Da(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new Da(`Layer ${this.name} is not connected, no input to return.`);return Li(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new Da(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new Da(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return Li(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(n=>n.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const n=Kt(e);if(this.inputSpec==null||this.inputSpec.length===0)return;const r=Kt(this.inputSpec);if(n.length!==r.length)throw new J(`Layer ${this.name} expects ${r.length} inputs, but it received ${n.length} input tensors. Input received: ${e}`);for(let i=0;i<n.length;i++){const s=n[i],o=r[i];if(o==null)continue;const a=s.rank;if(o.ndim!=null&&a!==o.ndim)throw new J(`Input ${i} is incompatible with layer ${this.name}: expected ndim=${o.ndim}, found ndim=${a}`);if(o.maxNDim!=null&&a>o.maxNDim)throw new J(`Input ${i} is incompatible with layer ${this.name}: expected max_ndim=${o.maxNDim}, found ndim=${a}`);if(o.minNDim!=null&&a<o.minNDim)throw new J(`Input ${i} is incompatible with layer ${this.name}: expected min_ndim=${o.minNDim}, found ndim=${a}.`);if(o.dtype!=null&&s.dtype!==o.dtype)throw new J(`Input ${i} is incompatible with layer ${this.name} : expected dtype=${o.dtype}, found dtype=${s.dtype}.`);if(o.axes){const l=s.shape;for(const u in o.axes){const h=Number(u),d=o.axes[u],p=h>=0?l[h]:l[l.length+h];if(d!=null&&[d,null].indexOf(p)===-1)throw new J(`Input ${i} is incompatible with layer ${this.name}: expected axis ${h} of input shape to have value ${d} but got shape ${l}.`)}}if(o.shape!=null)for(let l=0;l<o.shape.length;++l){const u=o.shape[l],h=s.shape[l];if(u!=null&&h!=null&&u!==h)throw new J(`Input ${i} is incompatible with layer ${this.name}: expected shape=${o.shape}, found shape=${s.shape}.`)}}}call(e,n){return e}invokeCallHook(e,n){this._callHook!=null&&this._callHook(e,n)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,n){n=n||{},this.assertNotDisposed();const r=Kt(e),i=UBe(e),s=jBe(e);if(i===s)throw new J("Arguments to apply() must be all SymbolicTensors or all Tensors");return nf(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const o=[];for(const a of Kt(e))o.push(a.shape);this.build(Li(o)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&s&&(this._refCount=1)}if(this.assertInputCompatibility(e),s){let o=this.call(e,n);this.supportsMasking&&this.setMaskMetadata(e,o);const a=Kt(o),l=[];for(let u of a)r.indexOf(u)!==-1&&(u=u.clone()),l.push(u);if(o=Li(l),this.activityRegularizer!=null)throw new yt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return o}else{const o=BBe(e),a=this.computeOutputShape(o);let l;const u=zBe(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?o[0]:o),a!=null&&a.length>0&&Array.isArray(a[0])?l=a.map((h,d)=>new ol(u,h,this,Kt(e),n,this.name,d)):l=new ol(u,a,this,Kt(e),n,this.name),this.addInboundNode(e,l,null,null,o,a,n),this._refCount++,this.activityRegularizer!=null)throw new yt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((r,i)=>{r!=null&&e[i]!=null&&e[i]!==r&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new Da(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const n of this.inboundNodes){const r=JSON.stringify(n.outputShapes);e.indexOf(r)===-1&&e.push(r)}if(e.length===1){const n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new Da(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new po(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return oS(this.weights)}build(e){this.built=!0}getWeights(e=!1){return XN(e?this.trainableWeights:this.weights)}setWeights(e){fe(()=>{const n=this.weights;if(n.length!==e.length)throw new J(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${n.length} weights. Provided weights: ${e}...`);if(n.length===0)return;const r=[],i=XN(n);for(let s=0;s<i.length;++s){const o=i[s],a=n[s],l=e[s];if(!Wt(o.shape,l.shape))throw new J(`Layer weight shape ${o.shape} not compatible with provided weight shape ${l.shape}`);r.push([a,l])}SM(r)})}addWeight(e,n,r,i,s,o,a,l){if(this._addedWeightNames.indexOf(e)!==-1)throw new J(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),r==null&&(r="float32"),this.fastWeightInitDuringBuild&&(i=l!=null?l():Cn("zeros"));const u=i.apply(n,r),h=new MBe(u,r,e,o,a);return u.dispose(),s!=null&&this.addLoss(()=>s.apply(h.read())),o==null&&(o=!0),o?this._trainableWeights.push(h):this._nonTrainableWeights.push(h),h}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=Kt(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(r=>{if(r!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}setMaskMetadata(e,n,r){if(!this.supportsMasking)return;const i=this.computeMask(e,r),s=Kt(n),o=Kt(i);if(s.length!==o.length)throw new Error(`${this.name} outputs ${s.length} tensors but ${s.length} masks for those tensors`);for(let a=0;a<s.length;a++)s[a].kerasMask=o[a]}addInboundNode(e,n,r,i,s,o,a=null){const l=Kt(e);n=Kt(n),r=Kt(r),i=Kt(i),s=sS(s),o=sS(o);const u=[],h=[],d=[];for(const p of l)u.push(p.sourceLayer),h.push(p.nodeIndex),d.push(p.tensorIndex);new jC({outboundLayer:this,inboundLayers:u,nodeIndices:h,tensorIndices:d,inputTensors:l,outputTensors:n,inputMasks:r,outputMasks:i,inputShapes:s,outputShapes:o},a);for(let p=0;p<n.length;p++)n[p].sourceLayer=this,n[p].nodeIndex=this.inboundNodes.length-1,n[p].tensorIndex=p}getConfig(){const e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function BBe(t){t=Kt(t);const e=[];for(const n of t)e.push(n.shape);return Li(e)}function zBe(t){return"float32"}function jJ(t,e,n){if((e==null||n!=null&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),e.inboundNodes.length===0)return[t];{const r=e.inboundNodes[n];if(r.inboundLayers.length===0)return r.inputTensors;{const i=[];for(let s=0;s<r.inboundLayers.length;s++){const o=r.inputTensors[s],a=r.inboundLayers[s],l=r.nodeIndices[s],u=jJ(o,a,l);for(const h of u)i.indexOf(h)===-1&&i.push(h)}return i}}}function UBe(t){let e=!0;for(const n of Kt(t))if(!(n instanceof ol)){e=!1;break}return e}function jBe(t){let e=!0;for(const n of Kt(t))if(n instanceof ol){e=!1;break}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class j0 extends St{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:zC("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new J("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=e.batchInputShape;if(n==null){if(e.inputShape==null)throw new J("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new J("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const r=e.dtype||"float32";this.batchInputShape=n,this.dtype=r,this.inputSpec=[{shape:n}];const i=new ol(this.dtype,this.batchInputShape,this,[],{},this.name);i.nodeIndex=0,i.tensorIndex=0,new jC({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[i],outputTensors:[i],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(e,n){throw new J(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}j0.className="InputLayer";Ne(j0);function WBe(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new J("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=t.batchShape;t.shape!=null&&e==null&&(e=[null].concat(t.shape));let n=t.dtype;return n==null&&(n="float32"),new j0({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function GBe(t,e){if(t.dtype==null||t.dtype===e.dtype)return e;try{return Be(e,t.dtype)}catch{throw new J(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}class ac{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof ac)for(const n in e.id2Value)this.id2Value[n]=e.id2Value[n],n in e.id2Mask&&(this.id2Mask[n]=e.id2Mask[n]);else{if(e==null)return;for(const n of e)this.add(n.key,n.value)}}add(e,n,r){if(this.id2Value[e.id]==null)this.id2Value[e.id]=GBe(e,n),this.name2Id[e.name]=e.id,r!=null&&(this.id2Mask[e.id]=r);else throw new J(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof ol){if(this.id2Value[e.id]==null)throw new J(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{const n=this.name2Id[e];if(n==null)throw new J(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[n]}}getMask(e){if(e instanceof ol){if(this.id2Value[e.id]==null)throw new J(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{const n=this.name2Id[e];if(n==null)throw new J(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&vt(this.id2Mask)}}const aS=new IJ,lS=new IJ;function HBe(t){aS?.setMaxEntries(t),lS?.setMaxEntries(t)}function ey(t,e,n,r){const i=n==null?!1:n.training,s=Array.isArray(t),o=s?t:[t],a=o.map(y=>y.name),l=[],u=e.names();for(const y of a)u.indexOf(y)!==-1?l.push(e.getValue(y)):l.push(null);const h=a.join(",")+"|"+e.names().sort().join(",");let d=aS.get(h),p;if(d==null){const y=qBe(o,e);d=y.sorted,p=y.recipientCounts,aS.put(h,d),lS.put(h,p)}p={},i||Object.assign(p,lS.get(h));const g=new ac(e);for(let y=0;y<d.length;++y){const b=d[y],x=b.sourceLayer;if(x instanceof j0)continue;const w=[],C=[],E=[];let _=!1;for(const D of b.inputs){const O=g.getValue(D),k=g.getMask(D);w.push(O),C.push(k),k!=null&&(_=!0),i||(p[D.name]--,p[D.name]===0&&!e.hasKey(D)&&a.indexOf(D.name)===-1&&!O.isDisposed&&D.sourceLayer.stateful!==!0&&E.push(O))}_&&(n=n||{},n.mask=C[0]);const A=Kt(x.apply(w,n));let P=null;x.supportsMasking&&(P=x.computeMask(w,C));const N=XBe(b),R=Array.isArray(N)?N:[N];for(let D=0;D<R.length;++D){g.hasKey(R[D])||g.add(R[D],A[D],Array.isArray(P)?P[0]:P);const O=a.indexOf(R[D].name);O!==-1&&(l[O]=A[D])}i||vt(E)}return g.disposeMasks(),s?l:l[0]}function qBe(t,e){U(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(t.length===1){const i=sG(t[0],e);n=i.sorted,r=i.recipientMap}else{const i=new Set;for(const s of t){const{sorted:o,recipientMap:a}=sG(s,e);for(const l of o)i.has(l.name)||(n.push(l),i.add(l.name));for(const l in a)r[l]==null&&(r[l]=new Set),a[l].forEach(u=>r[l].add(u))}}return{sorted:n,recipientCounts:KBe(r)}}function KBe(t){const e={};for(const n in t)e[n]=t[n].size;return e}function sG(t,e){const n=new Set,r=[],i={};for(const a of e.names())n.add(a);const s=[],o=[];for(s.push(t);s.length>0;){const a=s[s.length-1];if(n.has(a.name)){s.pop();continue}const l=o[o.length-1]===s.length-1;if(a.inputs.length===0||l)s.pop(),r.push(a),n.add(a.name),l&&o.pop();else{o.push(s.length-1);for(const u of a.inputs)i[u.name]==null&&(i[u.name]=new Set),i[u.name].add(a.name),!n.has(u.name)&&s.push(u)}}return{sorted:r,recipientMap:i}}function XBe(t){let e;if(t.sourceLayer.inboundNodes.length===1)e=t.sourceLayer.output;else{let n=null;for(let r=0;r<t.sourceLayer.inboundNodes.length;++r)for(const i of t.sourceLayer.inboundNodes[r].outputTensors)if(i.id===t.id){n=r;break}e=t.sourceLayer.getOutputAt(n)}return e}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YBe=ge();YBe.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,HBe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function TM(t,e){return fe(()=>ci(Qe(ne(t,t),e,!0)))}class W0 extends Sm{getConfig(){return{}}}class WJ extends W0{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return fe(()=>{const n=TM(e,this.axis),r=Os(n,0,this.maxValue);return ne(e,et(r,$e(hr(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}WJ.className="MaxNorm";Ne(WJ);class GJ extends W0{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return fe(()=>et(e,$e(hr(),TM(e,this.axis))))}getConfig(){return{axis:this.axis}}}GJ.className="UnitNorm";Ne(GJ);class HJ extends W0{apply(e){return Uf(e)}}HJ.className="NonNeg";Ne(HJ);class qJ extends W0{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return fe(()=>{const n=TM(e,this.axis),r=$e(ne(this.rate,Os(n,this.minValue,this.maxValue)),ne(1-this.rate,n));return ne(e,et(r,$e(hr(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}qJ.className="MinMaxNorm";Ne(qJ);const oG={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function pr(t){return fM(t)}function aG(t,e={}){return V0(t,co.getMap().classNameMap,e,"constraint")}function mr(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in oG?oG[t]:t,config:{}};return aG(n)}else return t instanceof W0?t:aG(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function kh(t){if(t==null)return;const e=[],n=[],r=[];for(const i in t){const s=t[i];if(typeof s!="number"){const o=s;e.push(o.data()),n.push(i),r.push(o)}}if(e.length>0){const i=await Promise.all(e);for(let s=0;s<i.length;++s)t[n[s]]=i[s][0];vt(r)}}function KJ(t){if(t!=null)for(const e in t){const n=t[e];typeof n!="number"&&n.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var lG;(function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"})(lG||(lG={}));const QBe=125;class Yy{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,n){}async onEpochEnd(e,n){}async onBatchBegin(e,n){}async onBatchEnd(e,n){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class ZBe{constructor(e,n=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=n}append(e){this.callbacks.push(e)}setParams(e){for(const n of this.callbacks)n.setParams(e)}setModel(e){for(const n of this.callbacks)n.setModel(e)}async onEpochBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochBegin(e,n)}async onEpochEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochEnd(e,n)}async onBatchBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchBegin(e,n)}async onBatchEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchEnd(e,n)}async onTrainBegin(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainEnd(e)}}class JBe extends Yy{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,n){n==null&&(n={});const r=n.size==null?0:n.size;this.seen+=r;for(const i in n){const s=n[i];if(typeof s=="number")this.totals.hasOwnProperty(i)||(this.totals[i]=0),this.totals[i]=this.totals[i]+s*r;else{let o;i in this.totals?o=this.totals[i]:this.totals[i]=0;const a=fe(()=>$e(this.totals[i],ne(s,r)));this.totals[i]=a,o?.dispose()}}}async onEpochEnd(e,n){if(n!=null)for(const r of this.params.metrics)this.totals[r]!=null&&(typeof this.totals[r]=="number"?n[r]=this.totals[r]/this.seen:fe(()=>{const i=ne(et(1,this.seen),this.totals[r]);n[r]=i,this.totals[r].dispose(),qa(n[r])}))}}class eze extends Yy{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,n){n==null&&(n={}),this.epoch.push(e);for(const r in n)this.history[r]==null&&(this.history[r]=[]),this.history[r].push(n[r])}async syncData(){const e=[],n=[],r=[];for(const s in this.history){const o=this.history[s];for(let a=0;a<o.length;++a)if(typeof o[a]!="number"){const l=o[a];e.push(l.data()),n.push(s),r.push(a)}}const i=await Promise.all(e);for(let s=0;s<i.length;++s)this.history[n[s]][r[s]].dispose(),this.history[n[s]][r[s]]=i[s][0]}}class tze extends Yy{constructor(e,n){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||JZ,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=QBe),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");TN(this.yieldEvery)&&(this.maybeWait=pBe(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,n,r){const i=[];this.yield!=null&&(await kh(r),i.push(this.yield(e,n,r))),i.push(this.nextFrameFunc()),await Promise.all(i)}async onEpochBegin(e,n){this.currentEpoch=e,this.epochBegin!=null&&(await kh(n),await this.epochBegin(e,n))}async onEpochEnd(e,n){const r=[];this.epochEnd!=null&&(await kh(n),r.push(this.epochEnd(e,n))),this.yieldEvery==="epoch"&&r.push(this.nextFrameFunc()),await Promise.all(r)}async onBatchBegin(e,n){this.batchBegin!=null&&(await kh(n),await this.batchBegin(e,n))}async onBatchEnd(e,n){const r=[];this.batchEnd!=null&&(await kh(n),r.push(this.batchEnd(e,n))),this.yieldEvery==="batch"?r.push(this.nextFrameFunc()):TN(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,e,n)),await Promise.all(r)}async onTrainBegin(e){this.trainBegin!=null&&(await kh(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await kh(e),await this.trainEnd(e))}}function XJ(t,e){return t==null&&(t={}),t instanceof Yy?[t]:Array.isArray(t)&&t[0]instanceof Yy?t:Kt(t).map(r=>new tze(r,e))}class oo{constructor(){}static registerCallbackConstructor(e,n){U(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),oo.checkForDuplicate(n),oo.constructors[e]==null&&(oo.constructors[e]=[]),oo.constructors[e].push(n)}static checkForDuplicate(e){for(const n in oo.constructors)oo.constructors[+n].forEach(i=>{if(i===e)throw new J("Duplicate callback constructor.")})}static clear(){oo.constructors={}}static createCallbacks(e){const n=[];for(const r in oo.constructors){const i=+r;e>=i&&n.push(...oo.constructors[i])}return n.map(r=>new r)}}oo.constructors={};function YJ(t,e,n,r,i,s,o,a,l){const u=new eze,h=[new JBe,...oo.createCallbacks(e)];t!=null&&h.push(...t),h.push(u);const d=new ZBe(h);return d.setParams({epochs:n,initialEpoch:r,samples:i,steps:s,batchSize:o,verbose:e,doValidation:a,metrics:l}),{callbackList:d,history:u}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Qa(t,e={},n=!1){return V0(t,co.getMap().classNameMap,e,"layer",n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function uS(t,e){return fe(()=>{t.dtype!=="float32"&&(t=Be(t,"float32"));const n=Qe(z0(t),e,!0),r=$C(n.shape,hr()),i=ci(qc(n,r));return et(t,i)})}function WC(t,e){return fe(()=>Yn(z0(it(e,t)),-1))}function CM(t,e){return fe(()=>Yn(bi(it(e,t)),-1))}function EM(t,e){return fe(()=>{const n=it(t,e),r=Os(bi(t),hr(),Number.MAX_VALUE),i=bi(et(n,r));return ne(100,Yn(i,-1))})}function nze(t,e){return fe(()=>{const n=Os(e,hr(),Number.MAX_VALUE),r=sl($e(1,n)),i=Os(t,hr(),Number.MAX_VALUE),s=sl($e(1,i));return Yn(z0(it(r,s)),-1)})}function rze(t,e){return fe(()=>{const n=qc(0,it(1,ne(t,e)));return Yn(z0(n),-1)})}function ize(t,e){return fe(()=>{const n=qc(0,it(1,ne(t,e)));return Yn(n,-1)})}function sze(t,e){return fe(()=>{const n=Qe(ne(t,e),-1),r=Zo(ne(it(1,t),e),-1);return qc(0,$e(1,it(r,n)))})}function oze(t,e){return fe(()=>{const n=Math.log(2),r=it(e,t),i=it($e(r,D0(ne(-2,r))),n);return Yn(i,-1)})}function Qy(t,e,n=!1){return fe(()=>{if(n)e=AP(e);else{const r=Qe(e,e.shape.length-1,!0);e=et(e,r)}return e=Os(e,hr(),1-hr()),Fn(Qe(ne(Be(t,"float32"),sl(e)),e.shape.length-1))})}function cS(t,e,n=!1){return fe(()=>{const r=Be(MC(IBe(t)),"int32");e=Os(e,hr(),1-hr());const i=e.shape,s=oe(xZ(r,i[i.length-1]),i);return Qy(s,e,n)})}function aze(t,e){if(!Wt(t.shape,e.shape))throw new J(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(e.shape)}`);return fe(()=>{const n=Uf(e),r=Fn(bi(e));return $e(it(n,ne(e,t)),gZ(il(r)))})}function GC(t,e){return fe(()=>{let n;return n=Os(e,hr(),1-hr()),n=sl(et(n,it(1,n))),Yn(aze(t,n),-1)})}function lze(t,e){return fe(()=>{const n=Os(t,hr(),1),r=Os(e,hr(),1);return Qe(ne(t,sl(et(n,r))),-1)})}function uze(t,e){return fe(()=>{const n=sl($e(hr(),e));return Yn(it(e,ne(t,n)),-1)})}function QJ(t,e){return fe(()=>{const n=uS(t,-1),r=uS(e,-1),i=ne(n,r);return Fn(Qe(i,-1))})}const hS={meanSquaredError:WC,meanAbsoluteError:CM,meanAbsolutePercentageError:EM,meanSquaredLogarithmicError:nze,squaredHinge:rze,hinge:ize,categoricalHinge:sze,logcosh:oze,categoricalCrossentropy:Qy,sparseCategoricalCrossentropy:cS,binaryCrossentropy:GC,kullbackLeiblerDivergence:lze,poisson:uze,cosineProximity:QJ};function Sk(t){if(typeof t=="string"){if(t in hS)return hS[t];let e=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new J(e)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ZJ(t,e){return fe(()=>{const n=ne(.5,To(e)),r=Xa(Ls(e,n),t.dtype);return Yn(rl(t,r),-1)})}function JJ(t,e){return fe(()=>Xa(rl(Gy(t,-1),Gy(e,-1)),"float32"))}function cze(t,e){return fe(()=>Be(Qe(nu(rl(t,1),rl(e,1))),"float32"))}function hze(t,e){return fe(()=>Be(Qe(nu(rl(t,0),rl(e,1))),"float32"))}function fze(t,e){return fe(()=>{const n=cze(t,e),r=hze(t,e),i=$e(n,r);return Be(Ei(Ls(i,0),et(n,i),0),"float32")})}function dze(t,e){return GC(t,e)}function pze(t,e){return t.rank===e.rank&&(t=O0(t,[t.rank-1])),e=Gy(e,-1),e.dtype!==t.dtype&&(e=Be(e,t.dtype)),Be(rl(t,e),"float32")}const mze=WC,gze=WC,yze=CM,vze=CM,bze=EM,xze=EM,eee=Qy,wze=QJ,tee=cS,fS={binaryAccuracy:ZJ,categoricalAccuracy:JJ,precision:fze,categoricalCrossentropy:eee,sparseCategoricalCrossentropy:tee,mse:mze,MSE:gze,mae:yze,MAE:vze,mape:bze,MAPE:xze,cosine:wze};function Sze(t){if(typeof t=="string"&&t in fS)return fS[t];if(typeof t!="string"&&t!=null)return t;throw new J(`Unknown metric ${t}`)}function e1(t){if($a(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let e;for(const n of Object.keys(hS))if(hS[n]===t){e=n;break}if(e!==void 0)return e;for(const n of Object.keys(fS))if(fS[n]===t){e=n;break}return e!==void 0?e:t.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Tze(t){const e={Adagrad:()=>Bd.adagrad(.01),Adadelta:()=>Bd.adadelta(1,.95,hr()),Adam:()=>Bd.adam(.001,.9,.999,hr()),Adamax:()=>Bd.adamax(.002,.9,.999,hr(),0),RMSProp:()=>Bd.rmsprop(.001,.9,0,hr()),SGD:()=>Bd.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new J(`Unknown Optimizer ${t}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const uG=1*1024*1024;function cG(t,e,n=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!YN(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const r=JSON.stringify(t);r.length>uG&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${uG}.`)}}function YN(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);for(const n of e)if(typeof n!="string"||!YN(t[n]))return!1;return!0}else if(Array.isArray(t)){for(const e of t)if(!YN(e))return!1;return!0}else return!1;else{const e=typeof t;return e==="string"||e==="number"||e==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Cze(t,e,n,r=console.log){const i=Ize(t),s=["Layer (type)","Input Shape","Output shape","Param #"];i?(e=e||90,n=n||[.32,.61,.89,1]):(e=e||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(h=>Math.floor(e*h)));let o;if(!i){s.push("Receives inputs"),o=[];for(const h in t.nodesByDepth)o.push(...t.nodesByDepth[h])}r("_".repeat(e)),dS(s,n,r),r("=".repeat(e));const a=t.layers;for(let h=0;h<a.length;++h)i?_ze(a[h],n,r):Aze(a[h],n,o,r),r((h===a.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();const l=Eze(t),u=oS(t.nonTrainableWeights);r(`Total params: ${l+u}`),r(`Trainable params: ${l}`),r(`Non-trainable params: ${u}`),r("_".repeat(e))}function Eze(t){let e;return t.collectedTrainableWeights!=null?e=oS(t.collectedTrainableWeights):e=oS(t.trainableWeights),e}function Ize(t){let e=!0;const n=[],r=[];for(const i in t.nodesByDepth)n.push(t.nodesByDepth[i]);for(const i of n){if(i.length>1||i.length===1&&i[0].inboundLayers.length>1){e=!1;break}r.push(...i)}if(e)for(const i of t.layers){let s=!1;for(const o of i.inboundNodes)if(r.indexOf(o)!==-1)if(s){e=!1;break}else s=!0;if(!e)break}return e}function dS(t,e,n=console.log){let r="";for(let i=0;i<t.length;++i)i>0&&(r=r.slice(0,r.length-1)+" "),r+=t[i],r=r.slice(0,e[i]),r+=" ".repeat(e[i]-r.length);n(r)}function _ze(t,e,n){let r,i;try{i=t.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{i="multiple"}try{r=JSON.stringify(t.outputShape)}catch{r="multiple"}const s=t.name,o=t.getClassName(),a=[`${s} (${o})`,i,r,t.countParams().toString()];dS(a,e,n)}function Aze(t,e,n,r){let i,s;try{s=t.inboundNodes.map(d=>JSON.stringify(d.inputShapes)).join(",")}catch{s="multiple"}try{i=JSON.stringify(t.outputShape)}catch{i="multiple"}const o=[];for(const d of t.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(d)===-1))for(let p=0;p<d.inboundLayers.length;++p){const g=d.inboundLayers[p].name,y=d.nodeIndices[p],b=d.tensorIndices[p];o.push(`${g}[${y}][${b}]`)}const a=t.name,l=t.getClassName(),u=o.length===0?"":o[0],h=[`${a} (${l})`,s,i,t.countParams().toString(),u];dS(h,e,r);for(let d=1;d<o.length;++d)dS(["","","","",o[d]],e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function nee(t,e,n){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&e===0&&typeof n=="string"}function pS(t,e){if(t===null)return null;if(typeof t=="string")return Fh(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let i=0;i<r;++i){const s=t[i];nee(e,i,s)?n.push(s):n.push(pS(s,e))}return n}else{const n={};for(const r of Object.keys(t)){const i=t[r];if(r==="name"&&typeof i=="string")n[r]=i;else{const s=Fh(r);n[s]=pS(i,s)}}return n}}function QN(t,e){if(t==null)return null;if(typeof t=="string")return Rl(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let i=0;i<r;++i){const s=t[i];nee(e,i,s)?n.push(s):n.push(QN(s,e))}return n}else{const n={};for(const r of Object.keys(t)){const i=t[r],s=Rl(r);(r==="name"||r==="className")&&typeof i=="string"?n[s]=i:n[s]=QN(i,r)}return n}}/** @license See the LICENSE file. */const ree="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const kze=t=>{const e=Object.keys(t);if(e.length===0)return!1;const n=e[0].split("/");return!isNaN(parseInt(n[n.length-1],10))};class Uo extends St{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){const C=this.getClassName().toLowerCase();this.name=zC(C)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],vc(this.inputs).length!==this.inputs.length)throw new J(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(C=>C.name)}`);vc(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(C=>C.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const C of this.outputs){const E=C.sourceLayer,_=C.nodeIndex,A=C.tensorIndex;this.outputLayers.push(E),this.outputLayersNodeIndices.push(_),this.outputLayersTensorIndices.push(A)}for(const C of this.inputs){const E=C.sourceLayer,_=C.nodeIndex,A=C.tensorIndex;$a(_===0,"input layer has >1 nodes"),$a(A===0,"input layer has >1 tensors"),this.inputLayers.push(E),this.inputLayersNodeIndices.push(_),this.inputLayersTensorIndices.push(A)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let C=0;C<this.inputLayers.length;C++){const E=this.inputLayers[C];if(!(E instanceof j0))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${C} (0-based) originates from layer type ${E.getClassName()}.`);this.inputNames.push(E.name),this.feedInputShapes.push(E.batchInputShape),this.feedInputNames.push(E.name)}for(const C of this.outputLayers)this.outputNames.push(C.name);this.internalInputShapes=this.inputs.map(C=>C.shape),this.internalOutputShapes=this.outputs.map(C=>C.shape);const n={},r={},i={},s={},o={},a=[],l=(C,E,_,A,P,N)=>{(A==null||P==null||N==null)&&(A=C.sourceLayer,P=C.nodeIndex,N=C.tensorIndex);const R=A.inboundNodes[P];if(_.indexOf(R)!==-1)throw new po(`The tensor ${C.name} at layer "${A.name}" is part of a cycle.`);if(E.indexOf(R)!==-1)return;this.containerNodes.add(Uo.nodeKey(A,P)),A.id in o||(o[A.id]=Object.keys(o).length),_.indexOf(R)===-1&&_.push(R);const D=R.inboundLayers.length;for(let O=0;O<D;O++){const k=R.inputTensors[O],F=R.inboundLayers[O],L=R.nodeIndices[O],q=R.tensorIndices[O];l(k,E,_,F,L,q)}for(E.push(R);_.indexOf(R)>=0;)_.splice(_.indexOf(R),1);a.push(R)},u=[],h=[];for(const C of this.outputs)l(C,u,h);const d=a.slice().reverse();for(const C of d){r[C.id]=C,C.id in n||(n[C.id]=0);let E=n[C.id];const _=i[C.outboundLayer.id]==null?0:i[C.outboundLayer.id];E=Math.max(E,_),i[C.outboundLayer.id]=E,s[C.outboundLayer.id]=C.outboundLayer,n[C.id]=E;for(let A=0;A<C.inboundLayers.length;A++){const P=C.inboundLayers[A],N=C.nodeIndices[A],R=P.inboundNodes[N],D=n[R.id]==null?0:n[R.id];n[R.id]=Math.max(E+1,D),r[R.id]=R}}const p={};for(const C in n){const E=n[C];E in p||(p[E]=[]),p[E].push(r[C])}const g={};for(const C in i){const E=i[C];E in g||(g[E]=[]),g[E].push(s[C])}let y=Object.keys(g).map(C=>parseInt(C,10)).sort(Qx);this.layers=[];for(const C of y){const E=g[C];E.sort((_,A)=>{const P=o[_.id],N=o[A.id];return P<N?-1:P>N?1:0});for(const _ of E)_ instanceof Uo&&this.internalContainerRefs.push(_),this.layers.push(_)}this.layersByDepth=g,y=Object.keys(p).map(C=>parseInt(C,10)).sort(Qx);const b=this.inputs.slice(),x=[];for(const C of y)for(const E of p[C]){const _=E.outboundLayer;if(_!=null){for(const A of E.inputTensors)if(b.indexOf(A)===-1)throw new po(`Graph disconnected: cannot obtain value for tensor ${A} at layer "${_.name}". The following previous layers were accessed without issue: ${x}`);for(const A of E.outputTensors)b.push(A);x.push(_.name)}}this.nodesByDepth=p;const w=this.layers.map(C=>C.name);for(const C of w){const E=w.filter(_=>_===C).length;if(E!==1)throw new po(`The name "${C}" is used ${E} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(w))}this.outboundNodes=[],this.inboundNodes=[],new jC({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(C=>null),outputMasks:this.outputs.map(C=>null),inputShapes:this.inputs.map(C=>C.shape),outputShapes:this.outputs.map(C=>C.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const n of this.layers)e.numDisposedVariables+=n.dispose().numDisposedVariables;for(const n of this.internalContainerRefs)e.numDisposedVariables+=n.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(n=>{n._trainableWeights.forEach(r=>r.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new J("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const n of this.layers)e=e.concat(n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.layers)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.layers)n.push(...r.trainableWeights);return n.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,n=!0){const r={};let i=0;const s=kze(e);s&&this.parseWeights(e);for(const a of this.layers)for(const[l,u]of a.weights.entries()){const h=s?`${u.name.split("/").slice(0,-1).join("/")+"/"}${l}`:u.originalName;if(r[h]!=null)throw new J(`Duplicate weight name: ${h}`);r[h]=u,i++}const o=[];for(const a in e){let l=a;if(r[a]==null){const u=a.split("/");l=u.slice(0,-2).concat([u[u.length-1]]).join("/")}if(r[l]!=null)o.push([r[l],e[a]]);else if(n)throw new J(`Provided weight data has no target variable: ${a}`);delete r[l]}if(n){const a=[];for(const l in r)a.push(l);if(a.length>0)throw new J(`${a.length} of ${i} weights are not set: ${a}`)}SM(o)}parseWeights(e){for(const n in Object.keys(e)){const r=n.split("/"),i=["vars","layer_checkpoint_dependencies"],s=r.map(o=>o.startsWith("_")?o.slice(1):o).filter(o=>!i.includes(o)).join("/");s!==n&&(e[s]=e[n],delete e[n])}}updatedConfig(){const e=this.getConfig(),n={};return n.className=this.getClassName(),n.config=e,n.kerasVersion=`tfjs-layers ${ree}`,n.backend="TensorFlow.js",n}toJSON(e,n=!0){const r=QN(this.updatedConfig());return n?JSON.stringify(r):r}call(e,n){return fe(()=>{e=Kt(e);const r=new ac;for(let i=0;i<this.inputs.length;++i)r.add(this.inputs[i],e[i]);return ey(this.outputs,r,n)})}computeMask(e,n){return fe(()=>{e=Kt(e);let r;return n==null?r=_f(null,e.length):r=Kt(n),this.runInternalGraph(e,r)[1]})}computeOutputShape(e){const n=sS(e);if(n.length!==this.inputLayers.length)throw new J(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const r={};for(let a=0;a<n.length;a++){const l=this.inputLayers[a],u=n[a],h=l.name+"_0_0";r[h]=u}const i=Object.keys(this.nodesByDepth).map(a=>parseInt(a,10)).sort(Qx);if(i.length>1)for(const a of i){const l=this.nodesByDepth[a];for(const u of l){const h=u.outboundLayer;if(this.inputLayers.map(b=>b.id).indexOf(h.id)!==-1)continue;const d=[];for(let b=0;b<u.inboundLayers.length;b++){const x=u.inboundLayers[b],w=u.nodeIndices[b],C=u.tensorIndices[b],E=`${x.name}_${w}_${C}`,_=r[E];d.push(_)}const p=h.computeOutputShape(Li(d)),g=sS(p),y=h.inboundNodes.indexOf(u);for(let b=0;b<g.length;b++){const x=`${h.name}_${y}_${b}`;r[x]=g[b]}}}const s=[],o=[];for(let a=0;a<this.outputLayers.length;a++){const l=this.outputLayers[a],u=this.outputLayersNodeIndices[a],h=this.outputLayersTensorIndices[a],d=`${l.name}_${u}_${h}`;o.push(d)}for(let a=0;a<o.length;a++){const l=o[a];$a(l in r),s.push(r[l])}return Li(s)}runInternalGraph(e,n){n==null&&(n=_f(null,e.length));const r={};for(let l=0;l<this.inputs.length;++l){const u=this.inputs[l],h=e[l],d=n[l];r[u.id]=[h,d]}const i=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(Qx);for(const l of i){const u=this.nodesByDepth[l];for(const h of u){const d=h.outboundLayer,p=h.inputTensors,g=h.outputTensors,y=new Array;for(const b of p)b.id in r&&y.push(r[b.id]);if(y.length===p.length){let b={},x,w,C,E;if(h.callArgs!=null&&(b=h.callArgs),y.length===1){const[_,A]=y[0];b.mask==null&&(b.mask=A),C=Kt(d.call(_,b)),E=Kt(d.computeMask(_,A)),x=[_],w=[A]}else x=y.map(_=>_[0]),w=y.map(_=>_[1]),b.mask==null&&(b.mask=w),C=Kt(d.call(x,b)),E=Kt(d.computeMask(x,w));if(d.activityRegularizer)throw new yt("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let _=0;_<g.length;++_){const A=g[_],P=C[_],N=E[_];r[A.id]=[P,N]}}}}const s=[],o=[],a=[];for(const l of this.outputs){$a(l.id in r,`Could not compute output ${l.name} : ${l.id}`);const[u,h]=r[l.id];a.push(u.shape),s.push(u),o.push(h)}return[s,o,a]}buildNodeConversionMap(e){const n={};let r;for(const i of this.layers){r=i instanceof Uo?1:0;for(let s=0;s<i.inboundNodes.length;s++){const o=Uo.nodeKey(i,s);this.containerNodes.has(o)&&(n[o]=r,r+=1)}}return n}getLayer(e,n){if(n!=null)return this.findLayer(n);if(e==null)throw new J("Provide either a layer name or layer index");if(typeof e=="number")return this.findLayer(e);for(const r of this.layers)if(r.name===e)return r;throw new J(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new J(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return fe(()=>{const e=[];for(const n of this.layers)for(let r=0;r<n.inboundNodes.length;++r){const i=Uo.nodeKey(n,r);this.containerNodes.has(i)&&e.push(...n.calculateLosses())}return e})}getConfig(){const e={name:this.name},n=this.buildNodeConversionMap(this.layers),r=[];for(const o of this.layers){const a=o.getClassName(),l=o.getConfig(),u=[];for(let d=0;d<o.inboundNodes.length;d++){const p=o.inboundNodes[d],g=Uo.nodeKey(o,d);let y={};if(this.containerNodes.has(g)){if(p.callArgs)try{JSON.stringify(p.callArgs),y=p.callArgs}catch{console.warn(`Layer ${o.name} was passed non-serializable keyword arguments: ${p.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),y={}}if(p.inboundLayers.length>0){const b=[];for(let x=0;x<p.inboundLayers.length;x++){const w=p.inboundLayers[x],C=p.nodeIndices[x],E=p.tensorIndices[x],_=Uo.nodeKey(w,C);let A=n[_];A==null&&(A=0),b.push([w.name,A,E,y])}u.push(b)}}}const h={};h.name=o.name,h.className=a,h.config=l,h.inboundNodes=u,r.push(h)}e.layers=r;const i=[];for(let o=0;o<this.inputLayers.length;o++){const a=this.inputLayers[o],l=this.inputLayersNodeIndices[o],u=Uo.nodeKey(a,l);if(!this.containerNodes.has(u))continue;let h=n[u];h==null&&(h=0);const d=this.inputLayersTensorIndices[o];i.push([a.name,h,d])}e.inputLayers=i;const s=[];for(let o=0;o<this.outputLayers.length;o++){const a=this.outputLayers[o],l=this.outputLayersNodeIndices[o],u=Uo.nodeKey(a,l);if(!this.containerNodes.has(u))continue;let h=n[u];h==null&&(h=0);const d=this.outputLayersTensorIndices[o];s.push([a.name,h,d])}return e.outputLayers=s,e}static fromConfig(e,n,r={},i=!1){const s={},o={};function a(x,w){x.name in o?o[x.name].push(w):o[x.name]=[w]}function l(x,w){const C=[];let E;for(const _ of w){const A=_[0],P=_[1],N=_[2];if(E=_[3]==null?{}:_[3],!(A in s)){a(x,w);return}const R=s[A];if(R.inboundNodes.length<=P){a(x,w);return}const D=R.inboundNodes[P];C.push(D.outputTensors[N])}C.length>0&&x.apply(Li(C),E)}function u(x){const w=x.name,C=Qa(x,n.customObjects!=null?n.customObjects:{});C.setFastWeightInitDuringBuild(i),s[w]=C,x.inboundNodes.forEach(_=>{if(!(_ instanceof Array))throw new J(`Corrupted configuration, expected array for nodeData: ${_}`);a(C,_)})}const h=n.name,d=n.layers;for(const x of d)u(x);for(;!dBe(o);)for(const x of d){const w=s[x.name];if(w.name in o){const C=o[w.name];delete o[w.name];for(const E of C)l(w,E)}}const p=[],g=[],y=n.inputLayers;for(const x of y){const w=x[0],C=x[1],E=x[2];$a(w in s);const A=s[w].inboundNodes[C].outputTensors;p.push(A[E])}const b=n.outputLayers;for(const x of b){const w=x[0],C=x[1],E=x[2];$a(w in s);const A=s[w].inboundNodes[C].outputTensors;g.push(A[E])}return new e({inputs:p,outputs:g,name:h})}get stateful(){if(this._stateful)throw new J("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){fe(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Nze(t,e,n){const r=e.length;if(t==null||Array.isArray(t)&&t.length===0)return e.map(i=>null);if(r===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==r)throw new Error(`Provided ${n} is an array of ${t.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){const i=[];return e.forEach(s=>{s in t?i.push(t[s]):i.push(null)}),i}else throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${e} keys. Provided ${n} not understood: ${JSON.stringify(t)}`)}function iee(t,e){return Nze(t,e,"classWeight")}async function see(t,e,n,r){if(n!=null){const i=fe(()=>{if(t.shape.length===1)return tf(t);if(t.shape.length===2){if(t.shape[1]>1)return Gy(t,1);if(t.shape[1]===1)return oe(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),s=Array.from(await i.data());vt(i);const o=[];return s.forEach(a=>{if(n[a]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${a} exists in the data but not in classWeight`);o.push(n[a])}),cs(o,"float32")}else return null}function Rze(t,e){return ne(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Dze=32;function oee(t,e){let n,r;const i=e;n=i.xs,r=i.ys,U(n!=null&&r!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);const s=hG("input",t.inputNames,n),o=hG("output",t.outputNames,r),a=s[0].shape[0];U(s.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${s.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),U(o.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${o.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let l=0;l<s.length;l++)U(s[l].shape[0]===a,()=>`Batch size mismatch: input ${t.inputNames[l]} has ${s[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);for(let l=0;l<o.length;l++)U(o[l].shape[0]===a,()=>`Batch size mismatch: output ${t.outputNames[l]} has ${o[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);return{xs:s,ys:o}}function hG(t,e,n){if(n instanceof ur)return[n];if(Array.isArray(n))return U(n.length===e.length,()=>`Received an array of ${n.length} Tensors, but expected ${e.length} to match the ${t} keys ${e}.`),n;{const r=[];for(const i of e){if(n[i]==null)throw new J(`The feature data generated by the dataset lacks the required ${t} key '${i}'.`);r.push(n[i])}return r}}function $ze(t){if(t.length===3)throw new yt("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}async function Oze(t,e,n){const r=n.batchesPerEpoch!=null;if(U(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),U(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),U(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),U(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),U(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{const i=n.validationData!=null;let s,o;if(i)if(fG(n.validationData))U(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{const x=$ze(n.validationData);s=x.xs,o=x.ys}const a=t.makeTrainFunction(),l=t.getDedupedMetricsNames();let u;i?u=l.slice().concat(l.map(x=>"val_"+x)):u=l.slice();const h=XJ(n.callbacks,n.yieldEvery),d=n.verbose==null?1:n.verbose,{callbackList:p,history:g}=YJ(h,d,n.epochs,null,null,Pze(e,n),null,i,u);p.setModel(t),t.history=g,await p.onTrainBegin(),t.stopTraining_=!1;let y=n.initialEpoch==null?0:n.initialEpoch,b=await e.iterator();for(;y<n.epochs;){const x={};await p.onEpochBegin(y);let w=0,C=0;for(r||(b=await e.iterator());!r||w<n.batchesPerEpoch;){const E=await b.next();if(r&&E.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${w} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(E.value!=null){const{xs:_,ys:A}=oee(t,E.value),P={};P.batch=C,P.size=_[0].shape[0],await p.onBatchBegin(C,P);const N=[];if(n.classWeight!=null){const O=iee(n.classWeight,t.outputNames);for(let k=0;k<O.length;++k)N.push(await see(A[k],null,O[k]))}const R=_.concat(A).concat(N),D=a(R);vt(R);for(let O=0;O<l.length;++O){const k=l[O],F=D[O];P[k]=F,qa(F)}await p.onBatchEnd(C,P),KJ(P),C++,w++}if(r?w>=n.batchesPerEpoch:E.done){if(i){let _;fG(n.validationData)?_=Kt(await t.evaluateDataset(n.validationData,{batches:n.validationBatches})):_=Kt(t.evaluate(s,o,{batchSize:n.validationBatchSize==null?Dze:n.validationBatchSize,verbose:0}));for(let A=0;A<t.metricsNames.length;++A)x[`val_${t.metricsNames[A]}`]=_[A]}break}if(t.stopTraining_)break}if(await p.onEpochEnd(y,x),y++,t.stopTraining_)break}return await p.onTrainEnd(),await t.history.syncData(),t.history}finally{t.isTraining=!1}}function Pze(t,e){let n=null;return e.batchesPerEpoch!=null?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function fG(t){return typeof t.iterator=="function"}function Mze(t){return typeof t.next=="function"}async function Lze(t,e,n){n=n||{};const r=n.batches!=null,i=t.testFunction;let s=[];if(n.verbose>0)throw new yt("Verbose mode is not implemented yet.");U(!r||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);const o=Mze(e)?e:await e.iterator();let a=0,l=0;for(;!r||l<n.batches;){const u=await o.next();if(s=fe(()=>{if(u.value){const{xs:h,ys:d}=oee(t,u.value),p=h.concat(d),g=fe(()=>i(p));if(vt(p),l===0)for(let b=0;b<g.length;++b)s.push(Ut(0));const y=p[0].shape[0];for(let b=0;b<g.length;++b){const x=g[b],w=s[b];s[b]=fe(()=>$e(s[b],ne(y,x))),l>0&&vt(w)}vt(g),a+=y,++l}return s}),u.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let u=0;u<s.length;++u){const h=s[u];s[u]=et(s[u],a),vt(h)}return Li(s)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Tk(t){U(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function Wg(t,e,n){return t==null?[null]:Array.isArray(t)?t.map(r=>rf(r,e,n-e)):rf(t,e,n-e)}function ZN(t,e){return fe(()=>t==null?null:Array.isArray(t)?t.map(n=>ZN(n,e)):OJ(t,e.dtype==="int32"?e:Be(e,"int32")))}function Ck(t,e){const n=[];let r=0,i=null;for(;r<t;)i=r+e,i>=t&&(i=t),n.push([r,i]),r=i;return n}function aee(t){const e=[];t instanceof ur&&(t=[t]);for(let n=0;n<t.length;++n){const r=t[n];if(r.rank===1)e.push(B0(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(r)}}return e}function Bo(t,e){if(t==null)return;const n=[];if(e instanceof ur)n.push(e.id);else if(Array.isArray(e))e.forEach(i=>n.push(i.id));else if(e!=null)for(const i in e){const s=e[i];n.push(s.id)}const r=[];if(t instanceof ur)n.indexOf(t.id)===-1&&r.push(t);else if(Array.isArray(t))t.forEach(i=>{n.indexOf(i.id)===-1&&r.push(i)});else if(t!=null)for(const i in t){const s=t[i];n.indexOf(s.id)===-1&&r.push(s)}r.forEach(i=>{i.isDisposed||i.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Fze(t){return t instanceof ur}function JN(t){return Array.isArray(t)}function dG(t){return!Fze(t)&&!JN(t)}function pG(t,e,n,r=!0,i=""){if(e==null||e.length===0){if(t!=null){let o=!1;if(JN(t)&&t.length>0)o=!0;else if(dG(t)){for(const a in t)if(t.hasOwnProperty(a)){o=!0;break}}else o=!0;if(o)throw new J(`Error when checking model ${i} expected no data, but got ${t}`)}return[]}if(t==null)return e.map(o=>null);let s;if(dG(t)){t=t,s=[];for(const o of e){if(t[o]==null)throw new J(`No data provided for "${o}". Need data for each key in: ${e}`);s.push(t[o])}}else if(JN(t)){if(t=t,t.length!==e.length)throw new J(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);s=t}else{if(t=t,e.length>1)throw new J(`The model ${i} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);s=[t]}if(s=aee(s),n!=null)for(let o=0;o<e.length;++o){if(n[o]==null)continue;const a=s[o];if(a.shape.length!==n[o].length)throw new J(`Error when checking ${i}: expected ${e[o]} to have ${n[o].length} dimension(s). but got array with shape ${a.shape}`);for(let l=0;l<n[o].length;++l){if(l===0&&!r)continue;const u=a.shape[l],h=n[o][l];if(h!=null&&h>=0&&u!==h)throw new J(`${i} expected a batch of elements where each example has shape [${n[o].slice(1,n[o].length)}] (i.e.,tensor shape [*,${n[o].slice(1,n[o].length)}]) but the ${i} received an input with ${a.shape[0]} examples, each with shape [${a.shape.slice(1,a.shape.length)}] (tensor shape [${a.shape}])`)}}return s}function Vze(t,e,n){const r=vc(t.map(s=>s.shape[0]));r.sort();const i=vc(e.map(s=>s.shape[0]));if(i.sort(),r.length>1)throw new J(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(s=>s.shape))}`);if(i.length>1)throw new J(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(s=>s.shape))}`);if(r.length>0&&i.length>0&&!Wt(r,i))throw new J(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${i[0]} target sample(s).`)}function Bze(t,e,n){const r=[WC,GC,Qy];for(let i=0;i<t.length;++i){const s=t[i],o=e[i],a=n[i];if(o!=null){if(o===Qy&&s.shape[s.shape.length-1]===1)throw new J(`You are passing a target array of shape ${s.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(r.indexOf(o)!==-1){const l=s.shape.slice(1),u=a.slice(1);for(let h=0;h<l.length;++h){const d=l[h],p=u[h];if(p!=null&&d!==p)throw new J(`A target Tensor with shape ${s.shape} was passed for an output of shape ${a}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function mG(t,e,n,r=!0,i=""){let s;if(Array.isArray(t)){if(t.length!==e.length)throw new J(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${t.length} Tensors(s).`);s=t}else{if(e.length>1)throw new J(`The model expects ${e.length} ${i} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);s=[t]}if(n!=null)for(let o=0;o<e.length;++o){if(n[o]==null)continue;const a=s[o];if(a.shape.length!==n[o].length)throw new J(`Error when checking ${i}: expected ${e[o]} to have ${n[o].length} dimension(s), but got array with shape ${JSON.stringify(a.shape)}`);for(let l=0;l<n[o].length;++l){if(l===0&&!r)continue;const u=a.shape[l],h=n[o][l];if(h!=null&&h!==u)throw new J(`Error when checking ${i}: expected ${e[o]} to have shape ${JSON.stringify(n[o])} but got array with shape ${JSON.stringify(a.shape)}.`)}}}function zze(t,e){if(t==null||Array.isArray(t)&&t.length===0)return e.map(r=>[]);let n;if(typeof t=="string"||typeof t=="function")n=[t];else if(Array.isArray(t)||typeof t=="object")n=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(n))return e.map(r=>n);{const r=[];for(const i of e){let s=n.hasOwnProperty(i)?n[i]:[];Array.isArray(s)||(s=[s]),r.push(s)}return r}}const Uze="layers-model";class gp extends Uo{constructor(e){super(e),this.isTraining=!1}summary(e,n,r=console.log){if(!this.built)throw new J("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");Cze(this,e,n,r)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=Tze(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof Xc))throw new J("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let n=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(const o in e.loss)if(this.outputNames.indexOf(o)===-1)throw new J(`Unknown entry in loss dictionary: "${o}". Only expected the following keys: ${this.outputNames}`);for(const o of this.outputNames)e.loss[o]==null&&console.warn(`Output "${o}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${o} during training`),n.push(Sk(e.loss[o]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new J(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);n=e.loss.map(a=>Sk(a))}else{const o=Sk(e.loss);this.outputs.forEach(a=>{n.push(o)})}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let o=0;o<this.outputs.length;++o){const a=this.internalOutputShapes[o],l=this.outputNames[o];this.feedOutputNames.push(l),this.feedOutputShapes.push(a),this.feedLossFns.push(this.lossFunctions[o])}const r=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],nf("loss",()=>{for(let o=0;o<this.outputs.length;++o){if(r.indexOf(o)!==-1)continue;const a=this.lossFunctions[o];this.outputs.length>1&&(this.metricsTensors.push([a,o]),this.metricsNames.push(this.outputNames[o]+"_loss"))}});const i=zze(e.metrics,this.outputNames),s=(o,a,l)=>{this.outputNames.length>1&&(a=this.outputNames[o]+"_"+a),this.metricsNames.push(a),this.metricsTensors.push([l,o])};nf("metric",()=>{for(let o=0;o<this.outputs.length;++o){if(r.indexOf(o)!==-1)continue;const a=i[o];(u=>{let d,p,g;for(const y of u){if(typeof y=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(y)!==-1){const x=this.internalOutputShapes[o];x[x.length-1]===1||this.lossFunctions[o]===GC?["accuracy","acc"].indexOf(y)!==-1?p=ZJ:["crossentropy","ce"].indexOf(y)!==-1&&(p=dze):this.lossFunctions[o]===cS?["accuracy","acc"].indexOf(y)!==-1?p=pze:["crossentropy","ce"].indexOf(y)!==-1&&(p=tee):["accuracy","acc"].indexOf(y)!==-1?p=JJ:["crossentropy","ce"].indexOf(y)!==-1&&(p=eee);let w;["accuracy","acc"].indexOf(y)!==-1?w="acc":["crossentropy","ce"].indexOf(y)!==-1&&(w="ce"),g=p,d=""+w}else g=Sze(y),d=""+e1(y);let b;nf(d,()=>{b=g}),s(o,d,b)}})(a)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,n,r={}){const i=r.batchSize==null?32:r.batchSize;Tk(i);const o=this.standardizeUserDataXY(e,n,!0,i);try{const a=o[0].concat(o[1]);this.makeTestFunction();const l=this.testFunction,u=this.testLoop(l,a,i,r.verbose,r.steps);return Li(u)}finally{Bo(o[0],e),Bo(o[1],n)}}async evaluateDataset(e,n){return this.makeTestFunction(),Lze(this,e,n)}checkNumSamples(e,n,r,i="steps"){let s;if(r!=null){if(s=null,n!=null)throw new J(`If ${i} is set, batchSize must be null or undefined.Got batchSize = ${n}`)}else if(e!=null)Array.isArray(e)?s=e[0].shape[0]:s=e.shape[0];else throw new J(`Either the input data should have a defined shape, or ${i} shoud be specified.`);return s}execute(e,n){if(Array.isArray(n)&&n.length===0)throw new J("`outputs` is an empty Array, which is not allowed.");const r=Array.isArray(n),i=r?n:[n],s=this.retrieveSymbolicTensors(i),o=new ac;if(e instanceof ur&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new J(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let l=0;l<this.inputs.length;++l)o.add(this.inputs[l],e[l])}else for(const l of this.inputs){const u=e[l.name];if(u==null)throw new J(`No value is provided for the model's input ${l.name}`);o.add(l,u)}const a=ey(s,o);return r?a:a[0]}retrieveSymbolicTensors(e){const n=_f(null,e.length);let r=e.length;for(const i of this.layers){const s=Array.isArray(i.output)?i.output:[i.output],o=s.map(a=>a.name);for(let a=0;a<e.length;++a){const l=o.indexOf(e[a]);if(l!==-1&&(n[a]=s[l],r--),r===0)break}if(r===0)break}if(r>0){const i=[];throw n.forEach((s,o)=>{s==null&&i.push(e[o])}),new J(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(i)}`)}return n}predictLoop(e,n=32,r=!1){return fe(()=>{const i=this.checkNumSamples(e);if(r)throw new yt("Verbose predictLoop() is not implemented yet.");const s=Ck(i,n),o=this.outputs.map(a=>[]);for(let a=0;a<s.length;++a)fe(()=>{const u=s[a][0],h=s[a][1],d=Wg(e,u,h),p=[];if(Array.isArray(d))for(let y=0;y<d.length;++y)p.push({key:this.inputs[y],value:d[y]});else p.push({key:this.inputs[0],value:d});const g=new ac(p);return ey(this.outputs,g)}).forEach((u,h)=>o[h].push(u));return Li(o.map(a=>Ui(a,0)))})}predict(e,n={}){const r=aee(e);mG(r,this.inputNames,this.feedInputShapes,!1);try{const i=n.batchSize==null?32:n.batchSize;return Tk(i),this.predictLoop(r,i)}finally{Bo(r,e)}}predictOnBatch(e){mG(e,this.inputNames,this.feedInputShapes,!0);const n=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,n)}standardizeUserDataXY(e,n,r=!0,i){if(this.optimizer_==null)throw new po("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const s=[];for(let o=0;o<this.feedOutputShapes.length;++o){const a=this.feedOutputShapes[o];this.feedLossFns[o]===cS?s.push(a.slice(0,a.length-1).concat([1])):s.push(a)}if(e=pG(e,this.feedInputNames,this.feedInputShapes,!1,"input"),n=pG(n,this.feedOutputNames,s,!1,"target"),Vze(e,n),Bze(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&i!=null&&i>0&&e[0].shape[0]%i!==0)throw new J(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${i}. Found: ${e[0].shape[0]} sample(s).`);return[e,n]}async standardizeUserData(e,n,r,i,s=!0,o){const[a,l]=this.standardizeUserDataXY(e,n,s,o);if(r!=null)throw new Error("sample weight is not supported yet.");let u=null;if(i!=null){const h=iee(i,this.outputNames);u=[];for(let d=0;d<h.length;++d)u.push(await see(l[d],null,h[d]))}return[a,l,u]}testLoop(e,n,r,i=0,s){return fe(()=>{const o=this.checkNumSamples(n,r,s,"steps"),a=[];if(i>0)throw new yt("Verbose mode is not implemented yet.");if(s!=null)throw new yt("steps mode in testLoop() is not implemented yet");{const l=Ck(o,r),u=cs(na(0,o));for(let h=0;h<l.length;++h){const d=l[h][0],p=l[h][1],g=rf(u,d,p-d),y=ZN(n,g),b=e(y);if(h===0)for(let x=0;x<b.length;++x)a.push(Ut(0));for(let x=0;x<b.length;++x){const w=b[x];a[x]=$e(a[x],ne(p-d,w))}}for(let h=0;h<a.length;++h)a[h]=et(a[h],o)}return a})}getDedupedMetricsNames(){const e=this.metricsNames,n=[];for(let r=0;r<e.length;++r){const i=e[r];let s=i;if(JW(e,i)>1){const o=JW(e.slice(0,r),i);s+=`_${o}`}n.push(s)}return n}makeTrainFunction(){return e=>{const n=[],r=e.slice(0,this.inputs.length),i=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),s=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),o=[],a=()=>{const d=[];for(let b=0;b<this.inputs.length;++b)d.push({key:this.inputs[b],value:r[b]});const p=new ac(d),g=ey(this.outputs,p,{training:!0});let y;for(let b=0;b<this.lossFunctions.length;++b){const x=this.lossFunctions[b];let w=x(i[b],g[b]);s[b]!=null&&(w=Rze(w,s[b]));const C=Yn(w);n.push(C),b===0?y=w:y=$e(y,w)}for(let b=0;b<this.metricsTensors.length;++b){let x;if(this.outputs.length>1&&b<this.outputs.length)x=n[b];else{const w=this.metricsTensors[b][0],C=this.metricsTensors[b][1];x=Yn(w(i[C],g[C]))}qa(x),o.push(x)}return y=Yn(y),this.calculateLosses().forEach(b=>{y=$e(y,b)}),y},l=this.collectedTrainableWeights.map(d=>d.read());return[this.optimizer_.minimize(a,!0,l)].concat(o)}}makeTestFunction(){this.testFunction=e=>fe(()=>{const n=[];let r;const i=e.slice(0,this.inputs.length),s=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),o=[];for(let u=0;u<this.inputs.length;++u)o.push({key:this.inputs[u],value:i[u]});const a=new ac(o),l=ey(this.outputs,a);for(let u=0;u<this.lossFunctions.length;++u){const h=this.lossFunctions[u],d=Yn(h(s[u],l[u]));u===0?r=d:r=$e(r,d),n.push(r)}for(let u=0;u<this.metricsTensors.length;++u){const h=this.metricsTensors[u][0],d=this.metricsTensors[u][1],p=Yn(h(s[d],l[d]));n.push(p)}return n})}async fit(e,n,r={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let i,s,o,a,l,u,h,d,p;try{const g=r.batchSize==null?32:r.batchSize;Tk(g);const b=await this.standardizeUserData(e,n,r.sampleWeight,r.classWeight,!1,g);i=b[0],s=b[1],p=b[2];let x=!1,w;if(r.validationData!=null&&r.validationData.length>0){if(x=!0,r.validationData.length===2)l=r.validationData[0],u=r.validationData[1];else throw r.validationData.length===3?new yt("validationData including sample weights is not supported yet."):new J(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);const O=await this.standardizeUserData(l,u,null,null,!0,g);h=O[0],d=O[1],w=h.concat(d)}else if(r.validationSplit!=null&&r.validationSplit>0&&r.validationSplit<1){x=!0;const D=Math.floor(i[0].shape[0]*(1-r.validationSplit)),O=i[0].shape[0];h=Wg(i,D,O),o=i,i=Wg(i,0,D),d=Wg(s,D,O),a=s,s=Wg(s,0,D),w=h.concat(d)}else r.validationSteps!=null&&(x=!0);const C=i.concat(s).concat(p);this.checkTrainableWeightsConsistency();const E=this.makeTrainFunction(),_=this.getDedupedMetricsNames();let A,P;x?(this.makeTestFunction(),A=this.testFunction,P=_.slice().concat(_.map(D=>"val_"+D))):(A=null,w=[],P=_.slice());const N=XJ(r.callbacks,r.yieldEvery);return await this.fitLoop(E,C,_,g,r.epochs,r.verbose,N,A,w,r.shuffle,P,r.initialEpoch,null,null)}finally{this.isTraining=!1,Bo(i,e),Bo(s,n),Bo(o,e),Bo(a,n),Bo(h,l),Bo(d,u),p!=null&&vt(p)}}async fitLoop(e,n,r,i,s,o,a,l,u,h,d,p,g,y){i==null&&(i=32),s==null&&(s=1),h==null&&(h=!0),p==null&&(p=0);let b=!1;if(l!=null&&u!=null&&(b=!0),y!=null&&(b=!0,g==null))throw new J("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const x=this.checkNumSamples(n,i,g,"steps_per_epoch");let w;x!=null&&(w=na(0,x)),o==null&&(o=1);const{callbackList:C,history:E}=YJ(a,o,s,p,x,g,i,b,d);C.setModel(this),this.history=E,await C.onTrainBegin(),this.stopTraining_=!1;for(let _=p;_<s;++_){await C.onEpochBegin(_);const A={};if(g!=null)throw new yt("stepsPerEpoch mode is not implemented yet.");{if(h==="batch")throw new yt("batch shuffling is not implemneted yet");h&&o$e(w);const P=cs(w),N=Ck(x,i);for(let R=0;R<N.length;++R){const D={};if(await C.onBatchBegin(R,D),fe(()=>{const O=N[R][0],k=N[R][1],F=rf(P,O,k-O);D.batch=R,D.size=k-O;const L=ZN(n,F),q=e(L);for(let Y=0;Y<r.length;++Y){const W=r[Y],H=q[Y];D[W]=H,qa(H)}if(R===N.length-1&&b){const Y=this.testLoop(l,u,i);for(let W=0;W<r.length;++W){const H=r[W],X=Y[W];qa(X),A["val_"+H]=X}}}),await C.onBatchEnd(R,D),KJ(D),this.stopTraining_)break}P.dispose()}if(await C.onEpochEnd(_,A),this.stopTraining_)break}return await C.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,n){return Oze(this,e,n)}async trainOnBatch(e,n){const r=await this.standardizeUserData(e,n),i=r[0],s=r[1],a=this.makeTrainFunction()(i.concat(s)),l=[];for(const u of a){const h=await u.data();l.push(h[0])}return vt(a),Bo(r[0],e),Bo(r[1],n),Li(l)}getNamedWeights(e){const n=[],r=e!=null&&e.trainableOnly,i=r?this.trainableWeights:this.weights,s=this.getWeights(r);for(let o=0;o<i.length;++o)r&&!i[o].trainable||n.push({name:i[o].originalName,tensor:s[o]});return n}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const n=EW().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=n-EW().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=Rl(this.loss);else if(Array.isArray(this.loss)){for(const n of this.loss)if(typeof n!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(n=>Rl(n))}else{const n=Object.keys(this.loss);e={};const r=this.loss;for(const i of n)if(typeof r[i]=="string")e[i]=Rl(r[i]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[Rl(e1(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>Rl(e1(e)));{const e={};for(const n in this.metrics)e[n]=Rl(e1(this.metrics[n]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const n=pS(e.optimizer_config),r=Qa(n);let i;if(typeof e.loss=="string")i=Fh(e.loss);else if(Array.isArray(e.loss))i=e.loss.map(o=>Fh(o));else if(e.loss!=null){i={};for(const o in e.loss)i[o]=Fh(e.loss[o])}let s;if(Array.isArray(e.metrics))s=e.metrics.map(o=>Fh(o));else if(e.metrics!=null){s={};for(const o in e.metrics)s[o]=Fh(e.metrics[o])}this.compile({loss:i,metrics:s,optimizer:r})}async save(e,n){if(typeof e=="string"){const u=cOe(e);if(u.length===0)throw new J(`Cannot find any save handlers for URL '${e}'`);if(u.length>1)throw new J(`Found more than one (${u.length}) save handlers for URL '${e}'`);e=u[0]}if(e.save==null)throw new J("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await IW(this.getNamedWeights(n)),a={modelTopology:this.toJSON(null,!1),format:Uze,generatedBy:`TensorFlow.js tfjs-layers v${ree}`,convertedBy:null};if((n==null?!1:n.includeOptimizer)&&this.optimizer!=null){a.trainingConfig=this.getTrainingConfig();const u="optimizer",{data:h,specs:d}=await IW(await this.optimizer.getWeights(),u);r.specs.push(...d),r.data=nOe([r.data,h])}return this.userDefinedMetadata!=null&&(cG(this.userDefinedMetadata,this.name,!0),a.userDefinedMetadata=this.userDefinedMetadata),a.weightData=r.data,a.weightSpecs=r.specs,e.save(a)}setUserDefinedMetadata(e){cG(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}gp.className="Model";Ne(gp);class lee extends gp{}lee.className="Functional";Ne(lee);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function jze(t,e){if(e==null&&(e={}),typeof t=="string"){const n=hOe(t,e);if(n.length===0)n.push(K3e(t,e));else if(n.length>1)throw new J(`Found more than one (${n.length}) load handlers for URL '${t}'`);t=n[0]}return Wze(t,void 0,e)}async function Wze(t,e,n){if(n==null&&(n={}),t.load==null)throw new J("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const r=await t.load();let i=r.modelTopology;i.model_config!=null&&(i=i.model_config);const s=n.strict==null?!0:n.strict,o=r.weightData!=null&&r.weightSpecs!=null&&s,a=Qa(pS(i),e,o),l=r.trainingConfig;if(l!=null&&a.loadTrainingConfig(l),r.userDefinedMetadata!=null&&a.setUserDefinedMetadata(r.userDefinedMetadata),r.weightData!=null){if(r.weightSpecs==null)throw new J("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");const{modelWeights:u,optimizerWeights:h}=Gze(r.weightData,r.weightSpecs);a.loadWeights(u,s),a.optimizer!=null&&h.length>0&&await a.optimizer.setWeights(h),vt(u),vt(h.map(d=>d.tensor))}return a}function Gze(t,e){const n=Y$e(t,e),r={},i=[];return e.forEach(s=>{s.group==="optimizer"?i.push({name:s.name,tensor:n[s.name]}):r[s.name]=n[s.name]}),{modelWeights:r,optimizerWeights:i}}class Zy extends gp{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:zC("sequential_"),e.layers!=null)for(const n of e.layers)this.add(n)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(r=>r<0))throw new J(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const n=e instanceof Zy||e instanceof gp;let r;if(n){if(r=e,r.outputs.length!==1)throw new J("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new J("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new J("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const i=WBe({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(i)}if(n)this.outputs=r.outputs,this.inputs=r.inputs;else{if(e.inboundNodes.length!==1)throw new J(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new J("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=jJ(this.outputs[0])}this.inboundNodes=[],new jC({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:_f(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(i=>i.shape),outputShapes:this.outputs[0].shape})}else{const i=e.apply(this.outputs[0]);if(Array.isArray(i))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[i],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,n){return this.model==null&&this.build(),this.model.call(e,n)}build(e){if(Ft(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new gp({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,n,r=console.log){this.built||this.build(),super.summary(e,n,r)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,n,r={}){if(!this.built)throw new po("The model needs to be compiled before being used.");return this.model.evaluate(e,n,r)}async evaluateDataset(e,n){if(!this.built)throw new po("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,n)}predict(e,n={}){return this.model==null&&this.build(),this.model.predict(e,n)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,n,r={}){if(!this.built)throw new po("The model needs to be compiled before being used.");return this.model.fit(e,n,r)}async fitDataset(e,n){if(!this.built)throw new po("The model needs to be compiled before being used.");return this.model.fitDataset(e,n)}async trainOnBatch(e,n){return this.model.trainOnBatch(e,n)}static fromConfig(e,n,r={},i=!1){let s,o={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new J("Legacy serialization format not supported yet.");s=n}else U(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),s=n.layers,delete n.layers,o=n;const a=new e(o);if(!(a instanceof Zy))throw new yt(`Sequential.fromConfig called on non-Sequential input: ${a}`);for(const l of s){const h=Qa(l,void 0,i);i&&h.setFastWeightInitDuringBuild(!0),a.add(h)}return a}set stopTraining(e){if(this.model==null)throw new J("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new J("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const n of this.layers){const r={};r.className=n.getClassName(),r.config=n.getConfig(),e.push(r)}return{name:this.name,layers:e}}}Zy.className="Sequential";Ne(Zy);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let fi=class extends Sm{getConfig(){return{}}};class uee extends fi{apply(e,n=1){return ABe(e,n)}}uee.className="elu";Ne(uee);class cee extends fi{apply(e){return EZ(e)}}cee.className="selu";Ne(cee);class hee extends fi{apply(e){return Uf(e)}}hee.className="relu";Ne(hee);class fee extends fi{apply(e){return fe(()=>Ky(6,Uf(e)))}}fee.className="relu6";Ne(fee);class dee extends fi{apply(e){return e}}dee.className="linear";Ne(dee);class pee extends fi{apply(e){return bm(e)}}pee.className="sigmoid";Ne(pee);class mee extends fi{apply(e){return NBe(e)}}mee.className="hardSigmoid";Ne(mee);class gee extends fi{apply(e){return D0(e)}}gee.className="softplus";Ne(gee);class yee extends fi{apply(e){return kBe(e)}}yee.className="softsign";Ne(yee);class vee extends fi{apply(e){return RC(e)}}vee.className="tanh";Ne(vee);let IM=class extends fi{apply(e,n=-1){return AP(e,n)}};IM.className="softmax";Ne(IM);class bee extends fi{apply(e,n=-1){return yZ(e,n)}}bee.className="logSoftmax";Ne(bee);class xee extends fi{apply(e){return fe(()=>fe(()=>{const n=Math.sqrt(2),r=ne(.5,$e(1,fZ(et(e,n))));return ne(e,r)}))}}xee.className="gelu";Ne(xee);class wee extends fi{apply(e){return fe(()=>ne(.5,ne(e,$e(1,RC(ne(ci(et(2,Math.PI)),$e(e,ne(.044715,Cf(e,3)))))))))}}wee.className="gelu_new";Ne(wee);class See extends fi{apply(e){return fe(()=>ne(e,RC(D0(e))))}}See.className="mish";Ne(See);class Tee extends fi{apply(e,n=1){return fe(()=>ne(bm(ne(e,n)),e))}}Tee.className="swish";Ne(Tee);function Oc(t){return t.getClassName()}function Ek(t,e={}){return V0(t,co.getMap().classNameMap,e,"activation")}function Pc(t){if(t==null){const e={};return e.className="linear",e.config={},Ek(e)}if(typeof t=="string"){const e={};return e.className=t,e.config={},Ek(e)}else return t instanceof fi?t:Ek(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Hze(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}class Cee extends Sm{}class Eee extends Cee{constructor(e){super(),Hze(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return fe(()=>{let n=Cr([1]);return this.hasL1&&(n=$e(n,Qe(ne(this.l1,bi(e))))),this.hasL2&&(n=$e(n,Qe(ne(this.l2,z0(e))))),oe(n,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,n){return new e({l1:n.l1,l2:n.l2})}}Eee.className="L1L2";Ne(Eee);const gG={l1l2:"L1L2"};function un(t){return fM(t)}function yG(t,e={}){return V0(t,co.getMap().classNameMap,e,"regularizer")}function En(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in gG?gG[t]:t,config:{}};return yG(n)}else return t instanceof Cee?t:yG(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Iee extends St{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,n){e=st(e);let r=Uf(e);return this.maxValue!=null&&(r=Os(r,0,this.maxValue)),r}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},n=super.getConfig();return Object.assign(e,n),e}}Iee.className="ReLU";Ne(Iee);class _ee extends St{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=st(e);return vP(r,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}}_ee.className="LeakyReLU";Ne(_ee);class Aee extends St{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=Cn(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=En(e.alphaRegularizer),this.alphaConstraint=mr(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new J(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=Ft(e);const n=e.slice(1);if(this.sharedAxes!=null)for(const i of this.sharedAxes)n[i-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const r={};if(this.sharedAxes!=null)for(let i=1;i<e.length;++i)r[i]=e[i];this.inputSpec=[new fr({ndim:e.length,axes:r})],this.built=!0}call(e,n){return e=st(e),CP(e,this.alpha.read())}getConfig(){const e={alphaInitializer:Nn(this.alphaInitializer),alphaRegularizer:un(this.alphaRegularizer),alphaConstraint:pr(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(e,n),e}}Aee.className="PReLU";Ne(Aee);let kee=class extends St{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new yt(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=st(e);return OC(r)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}};kee.className="ELU";Ne(kee);class Nee extends St{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,n){const r=st(e);return ne(r,Be(Ls(r,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},n=super.getConfig();return Object.assign(e,n),e}}Nee.className="ThresholdedReLU";Ne(Nee);class Ree extends St{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new IM().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,n){return fe(()=>{let r=st(e);const i=n.mask;if(i!=null){const s=ne(it(Kc(r.shape),Be(i,r.dtype)),Ut(-1e9));r=$e(r,s)}return this.axis instanceof Array?this.axis.length>1?il(it(r,vZ(r,this.axis,!0))):this.softmax(r,this.axis[0]):this.softmax(r,this.axis)})}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}Ree.className="Softmax";Ne(Ree);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function yp(t,e,n){if(typeof t=="number")return _f(t,e);if(t.length!==e)throw new J(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${t.length} elements.`);for(let r=0;r<e;++r){const i=t[r];if(!CBe(i))throw new J(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(t)} including a non-integer number ${i}`)}return t}function Jo(t,e,n,r,i=1){if(t==null)return t;const s=e+(e-1)*(i-1);let o;return n==="same"?o=t:o=t-s+1,Math.floor((o+r-1)/r)}function Oa(t,e,n,r){if(t==null)return null;if(r==="valid")t=t*e+$c([n-e,0]);else if(r==="same")t=t*e;else throw new J(`Unsupport padding mode: ${r}.`);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function _M(t,e){return fe(()=>(zn(e),e==="channelsFirst"?$t(t,[0,2,3,1]):t))}function Dee(t,e){return fe(()=>(zn(e),e==="channelsFirst"?$t(t,[0,2,3,4,1]):t))}function qze(t,e,n,r=1,i="valid",s,o=1){return fe(()=>{if(s==null&&(s=ra()),zn(s),t.shape.length!==3)throw new J(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(e.shape.length!==3)throw new J(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new J(`The bias for a conv1dWithBias operation should be 1, but is ${n.shape.length} instead`);if(s==="channelsFirst"&&(t=$t(t,[0,2,1])),i==="causal")throw new yt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let a=aZ(t,e,r,i==="same"?"same":"valid","NWC",o);return n!=null&&(a=aa(a,n)),a})}function vG(t,e,n,r=[1,1],i="valid",s,o,a=null){return fe(()=>{if(s==null&&(s=ra()),zn(s),t.rank!==3&&t.rank!==4)throw new J(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(e.rank!==3&&e.rank!==4)throw new J(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let l=_M(t,s);if(i==="causal")throw new yt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=GFe({x:l,filter:e,strides:r,pad:i==="same"?"same":"valid",dilations:o,dataFormat:"NHWC",bias:n,activation:a}),s==="channelsFirst"&&(l=$t(l,[0,3,1,2])),l})}function Kze(t,e,n,r=[1,1,1],i="valid",s,o){return fe(()=>{if(s==null&&(s=ra()),zn(s),t.rank!==4&&t.rank!==5)throw new J(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(e.rank!==4&&e.rank!==5)throw new J(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let a=Dee(t,s);if(i==="causal")throw new yt("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return a=zPe(a,e,r,i==="same"?"same":"valid","NDHWC",o),n!=null&&(a=aa(a,n)),s==="channelsFirst"&&(a=$t(a,[0,4,1,2,3])),a})}class HC extends St{constructor(e,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",HC.verifyArgs(n),this.rank=e,Er(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new yt(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=yp(n.kernelSize,e,"kernelSize"),this.strides=yp(n.strides==null?1:n.strides,e,"strides"),this.padding=n.padding==null?"valid":n.padding,Fs(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,zn(this.dataFormat),this.activation=Pc(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=Cn(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=mr(n.biasConstraint),this.biasRegularizer=En(n.biasRegularizer),this.activityRegularizer=En(n.activityRegularizer),this.dilationRate=yp(n.dilationRate==null?1:n.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new J(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new J(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new J(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if($a("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!dM(e.kernelSize,"number",1,3))throw new J(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Oc(this.activation),useBias:this.useBias,biasInitializer:Nn(this.biasInitializer),biasRegularizer:un(this.biasRegularizer),activityRegularizer:un(this.activityRegularizer),biasConstraint:pr(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}class Tm extends HC{constructor(e,n){super(e,n),this.kernel=null,Tm.verifyArgs(n),this.filters=n.filters,Er(this.filters,"filters"),this.kernelInitializer=Cn(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=mr(n.kernelConstraint),this.kernelRegularizer=En(n.kernelRegularizer)}build(e){e=Ft(e);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new J(`The channel dimension of the input should be defined. Found ${e[n]}`);const r=e[n],i=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:r}}],this.built=!0}call(e,n){return fe(()=>{e=st(e);let r;const i=this.bias==null?null:this.bias.read(),s=AJ(this.activation.getClassName());if(s!=null&&this.rank===2)r=vG(e,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate,s);else{if(this.rank===1)r=qze(e,this.kernel.read(),i,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=vG(e,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=Kze(e,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new yt("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(e){e=Ft(e);const n=[],r=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let s=0;s<r.length;++s){const o=Jo(r[s],this.kernelSize[s],this.padding,this.strides[s],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[s]);n.push(o)}let i=[e[0]];return this.dataFormat==="channelsLast"?(i=i.concat(n),i.push(this.filters)):(i.push(this.filters),i=i.concat(n)),i}getConfig(){const e={filters:this.filters,kernelInitializer:Nn(this.kernelInitializer),kernelRegularizer:un(this.kernelRegularizer),kernelConstraint:pr(this.kernelConstraint)},n=super.getConfig();return Object.assign(e,n),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new J(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class G0 extends Tm{constructor(e){super(2,e),G0.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!dM(e.kernelSize,"number",1,2))throw new J(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}G0.className="Conv2D";Ne(G0);class H0 extends Tm{constructor(e){super(3,e),H0.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new J(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}H0.className="Conv3D";Ne(H0);class $ee extends G0{constructor(e){if(super(e),this.inputSpec=[new fr({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new J(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=Ft(e),e.length!==4)throw new J("Input should have rank 4; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new J("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],i=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",i,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new fr({ndim:4,axes:{[n]:r}})],this.built=!0}call(e,n){return fe(()=>{let r=st(e);if(r.shape.length!==4)throw new J(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const i=r.shape,s=i[0];let o,a;this.dataFormat==="channelsFirst"?(o=2,a=3):(o=1,a=2);const l=i[o],u=i[a],h=this.kernelSize[0],d=this.kernelSize[1],p=this.strides[0],g=this.strides[1],y=Oa(l,p,h,this.padding),b=Oa(u,g,d,this.padding),x=[s,y,b,this.filters];this.dataFormat!=="channelsLast"&&(r=$t(r,[0,2,3,1]));let w=lZ(r,this.kernel.read(),x,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(w=$t(w,[0,3,1,2])),this.bias!=null&&(w=aa(w,this.bias.read(),this.dataFormat)),this.activation!=null&&(w=this.activation.apply(w)),w})}computeOutputShape(e){e=Ft(e);const n=e.slice();let r,i,s;this.dataFormat==="channelsFirst"?(r=1,i=2,s=3):(r=3,i=1,s=2);const o=this.kernelSize[0],a=this.kernelSize[1],l=this.strides[0],u=this.strides[1];return n[r]=this.filters,n[i]=Oa(n[i],l,o,this.padding),n[s]=Oa(n[s],u,a,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}$ee.className="Conv2DTranspose";Ne($ee);class Oee extends H0{constructor(e){if(super(e),this.inputSpec=[new fr({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new J(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=Ft(e),e.length!==5)throw new J("Input should have rank 5; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new J("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],i=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",i,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new fr({ndim:5,axes:{[n]:r}})],this.built=!0}call(e,n){return fe(()=>{let r=st(e);if(r.shape.length!==5)throw new J(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const i=r.shape,s=i[0];let o,a,l;this.dataFormat==="channelsFirst"?(l=2,o=3,a=4):(l=1,o=2,a=3);const u=i[l],h=i[o],d=i[a],p=this.kernelSize[0],g=this.kernelSize[1],y=this.kernelSize[2],b=this.strides[0],x=this.strides[1],w=this.strides[2],C=Oa(u,b,p,this.padding),E=Oa(h,x,g,this.padding),_=Oa(d,w,y,this.padding),A=[s,C,E,_,this.filters];this.dataFormat!=="channelsLast"&&(r=$t(r,[0,2,3,4,1]));let P=WPe(r,this.kernel.read(),A,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(P=$t(P,[0,4,1,2,3])),this.bias!==null&&(P=aa(P,this.bias.read(),this.dataFormat)),this.activation!==null&&(P=this.activation.apply(P)),P})}computeOutputShape(e){e=Ft(e);const n=e.slice();let r,i,s,o;this.dataFormat==="channelsFirst"?(r=1,i=2,s=3,o=4):(r=4,i=1,s=2,o=3);const a=this.kernelSize[0],l=this.kernelSize[1],u=this.kernelSize[2],h=this.strides[0],d=this.strides[1],p=this.strides[2];return n[r]=this.filters,n[i]=Oa(n[i],h,a,this.padding),n[s]=Oa(n[s],d,l,this.padding),n[o]=Oa(n[o],p,u,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}Oee.className="Conv3DTranspose";Ne(Oee);class Pee extends Tm{constructor(e,n){if(super(e,n),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,n.filters==null)throw new J("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(n.kernelInitializer!=null||n.kernelRegularizer!=null||n.kernelConstraint!=null)throw new J("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(n.padding!=null&&n.padding!=="same"&&n.padding!=="valid")throw new J(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(n.padding)}`);this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=Cn(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=En(n.depthwiseRegularizer),this.depthwiseConstraint=mr(n.depthwiseConstraint),this.pointwiseInitializer=Cn(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=En(n.pointwiseRegularizer),this.pointwiseConstraint=mr(n.pointwiseConstraint)}build(e){if(e=Ft(e),e.length<this.rank+2)throw new J(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null||e[n]<0)throw new J(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[n])}`);const r=e[n],i=this.kernelSize.concat([r,this.depthMultiplier]),s=[];for(let a=0;a<this.rank;++a)s.push(1);s.push(r*this.depthMultiplier,this.filters);const o=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",i,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,o,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",s,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,o,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,o,this.biasConstraint):this.bias=null,this.inputSpec=[new fr({ndim:this.rank+2,axes:{[n]:r}})],this.built=!0}call(e,n){return fe(()=>{e=st(e);let r;if(this.rank===1)throw new yt("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=$t(e,[0,2,3,1])),r=IZ(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(r=aa(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),this.dataFormat==="channelsFirst"&&(r=$t(r,[0,3,1,2])),r})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=Nn(this.depthwiseInitializer),e.pointwiseInitializer=Nn(this.pointwiseInitializer),e.depthwiseRegularizer=un(this.depthwiseRegularizer),e.pointwiseRegularizer=un(this.pointwiseRegularizer),e.depthwiseConstraint=pr(this.depthwiseConstraint),e.pointwiseConstraint=pr(this.pointwiseConstraint),e}}Pee.className="SeparableConv";class Mee extends Pee{constructor(e){super(2,e)}}Mee.className="SeparableConv2D";Ne(Mee);class qC extends Tm{constructor(e){super(1,e),qC.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!dM(e.kernelSize,"number",1,1))throw new J(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}qC.className="Conv1D";Ne(qC);class Lee extends St{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,n){return fe(()=>{if(e=st(e),this.dataFormat==="channelsLast"){const r=Jx(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return Jx(r,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const r=Jx(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return Jx(r,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}Lee.className="Cropping2D";Ne(Lee);class Fee extends St{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,zn(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,wBe(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){const n=e[2]==null?null:this.size[0]*e[2],r=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],n,r]}else{const n=e[1]==null?null:this.size[0]*e[1],r=e[2]==null?null:this.size[1]*e[2];return[e[0],n,r,e[3]]}}call(e,n){return fe(()=>{let r=st(e);const i=r.shape;if(this.dataFormat==="channelsFirst"){r=$t(r,[0,2,3,1]);const s=this.size[0]*i[2],o=this.size[1]*i[3],a=this.interpolation==="nearest"?Vl.resizeNearestNeighbor(r,[s,o]):Vl.resizeBilinear(r,[s,o]);return $t(a,[0,3,1,2])}else{const s=this.size[0]*i[1],o=this.size[1]*i[2];return this.interpolation==="nearest"?Vl.resizeNearestNeighbor(r,[s,o]):Vl.resizeBilinear(r,[s,o])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}}Fee.className="UpSampling2D";Ne(Fee);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Xze(t,e,n=[1,1],r="valid",i,s){return fe(()=>{i==null&&(i=ra()),zn(i);let o=_M(t,i);if(t.rank!==4)throw new J(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(e.rank!==4)throw new J(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return o=pP(o,e,n,r==="same"?"same":"valid","NHWC",s),i==="channelsFirst"&&(o=$t(o,[0,3,1,2])),o})}class Vee extends HC{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=Cn(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=mr(e.depthwiseConstraint),this.depthwiseRegularizer=En(e.depthwiseRegularizer)}build(e){if(e=Ft(e),e.length<4)throw new J(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const n=this.dataFormat==="channelsFirst"?1:3;if(e[n]==null||e[n]<0)throw new J(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[n]}).`);const r=e[n],i=[this.kernelSize[0],this.kernelSize[1],r,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",i,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[r*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return fe(()=>{e=st(e);let r=Xze(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(r=aa(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),r})}computeOutputShape(e){e=Ft(e);const n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],i=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,s=Jo(n,this.kernelSize[0],this.padding,this.strides[0]),o=Jo(r,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],i,s,o]:[e[0],s,o,i]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=Nn(this.depthwiseInitializer),e.depthwiseRegularizer=un(this.depthwiseRegularizer),e.depthwiseConstraint=pr(this.depthwiseRegularizer),e}}Vee.className="DepthwiseConv2D";Ne(Vee);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Bee(t,e,n,r){if(Array.isArray(t)){if(e!=null||n!=null)throw new J("When inputs is an array, neither initialState or constants should be provided");r!=null&&(n=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function i(s){return s==null||Array.isArray(s)?s:[s]}return e=i(e),n=i(n),{inputs:t,initialState:e,constants:n}}function zee(t,e,n,r=!1,i,s,o=!1,a=!1){return fe(()=>{const l=e.shape.length;if(l<3)throw new J(`Input should be at least 3D, but is ${l}D.`);const u=[1,0].concat(na(2,l));e=$t(e,u),o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),i!=null&&(i=Be(Be(i,"bool"),"float32"),i.rank===l-1&&(i=Mi(i,-1)),i=$t(i,u)),r&&(e=Ef(e,0),i!=null&&(i=Ef(i,0)));const h=[];let d,p=n;const g=e.shape[0],y=If(e);let b;i!=null&&(b=If(i));for(let w=0;w<g;++w){const C=y[w],E=fe(()=>t(C,p));if(i==null)d=E[0],p=E[1];else{const _=fe(()=>{const A=b[w],P=it(To(A),A),N=$e(ne(E[0],A),ne(p[0],P)),R=p.map((D,O)=>$e(ne(E[1][O],A),ne(D,P)));return{output:N,newStates:R}});d=_.output,p=_.newStates}a&&h.push(d)}let x;return a&&(x=ru(h,1)),[d,x,p]})}class Yc extends St{constructor(e){super(e);let n;if(e.cell==null)throw new J("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?n=new NM({cells:e.cell}):n=e.cell,n.stateSize==null)throw new J("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new fr({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return na(0,e).map(n=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){KN(e)&&(e=e[0]),e=e;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);const r=n[0];let i;if(this.returnSequences?i=[e[0],e[1],r]:i=[e[0],r],this.returnState){const s=[];for(const o of n)s.push([e[0],o]);return[i].concat(s)}else return i}computeMask(e,n){return fe(()=>{Array.isArray(n)&&(n=n[0]);const r=this.returnSequences?n:null;if(this.returnState){const i=this.states.map(s=>null);return[r].concat(i)}else return r})}get states(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let r=0;r<e;++r)n.push(null);return n}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new yt("Constants support is not implemented in RNN yet.");KN(e)&&(e=e[0]),e=e;const n=this.stateful?e[0]:null,r=e.slice(2);this.inputSpec[0]=new fr({shape:[n,null,...r]});const i=[e[0]].concat(e.slice(2));this.cell.build(i);let s;if(Array.isArray(this.cell.stateSize)?s=this.cell.stateSize:s=[this.cell.stateSize],this.stateSpec!=null){if(!Wt(this.stateSpec.map(o=>o.shape[o.shape.length-1]),s))throw new J(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=s.map(o=>new fr({shape:[null,o]}));this.stateful&&this.resetStates()}resetStates(e,n=!1){fe(()=>{if(!this.stateful)throw new Da("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape[0];if(r==null)throw new J("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(i=>Cr([r,i])):this.states_=[Cr([r,this.cell.stateSize])];else if(e==null)vt(this.states_),this.keptStates!=null&&(vt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(i=>Cr([r,i])):this.states_[0]=Cr([r,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new J(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n===!0?this.keptStates.push(this.states_.slice()):vt(this.states_);for(let i=0;i<this.states_.length;++i){const s=e[i],o=Array.isArray(this.cell.stateSize)?this.cell.stateSize[i]:this.cell.stateSize,a=[r,o];if(!Wt(s.shape,a))throw new J(`State ${i} is incompatible with layer ${this.name}: expected shape=${a}, received shape=${s.shape}`);this.states_[i]=s}}this.states_=this.states_.map(i=>qa(i.clone()))})}apply(e,n){let r=n==null?null:n.initialState,i=n==null?null:n.constants;n==null&&(n={});const s=Bee(e,r,i,this.numConstants);e=s.inputs,r=s.initialState,i=s.constants;let o=[],a=[];if(r!=null){n.initialState=r,o=o.concat(r),this.stateSpec=[];for(const u of r)this.stateSpec.push(new fr({shape:u.shape}));a=a.concat(this.stateSpec)}if(i!=null&&(n.constants=i,o=o.concat(i),this.numConstants=i.length),o[0]instanceof ol){const u=[e].concat(o),h=this.inputSpec.concat(a),d=this.inputSpec;this.inputSpec=h;const p=super.apply(u,n);return this.inputSpec=d,p}else return super.apply(e,n)}call(e,n){return fe(()=>{const r=n==null?null:n.mask,i=n==null?null:n.training;let s=n==null?null:n.initialState;e=st(e),s==null&&(this.stateful?s=this.states_:s=this.getInitialState(e));const o=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(s.length!==o)throw new J(`RNN Layer has ${o} state(s) but was passed ${s.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const a={training:i},u=zee((y,b)=>{const x=this.cell.call([y].concat(b),a);return[x[0],x.slice(1)]},e,s,this.goBackwards,r,null,this.unroll,this.returnSequences),h=u[0],d=u[1],p=u[2];this.stateful&&this.resetStates(p,i);const g=this.returnSequences?d:h;return this.returnState?[g].concat(p):g})}getInitialState(e){return fe(()=>{let n=Cr(e.shape);return n=Qe(n,[1,2]),n=B0(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>r>1?HN(n,[1,r]):n):this.cell.stateSize>1?[HN(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);const r=this.cell.getConfig();return this.getClassName()===Yc.className&&(n.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),e),n)}static fromConfig(e,n,r={}){const i=n.cell,s=Qa(i,r);return new e(Object.assign(n,{cell:s}))}}Yc.className="RNN";Ne(Yc);class KC extends St{}class AM extends KC{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Er(this.units,"units"),this.activation=Pc(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Cn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Cn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Cn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=En(e.kernelRegularizer),this.recurrentRegularizer=En(e.recurrentRegularizer),this.biasRegularizer=En(e.biasRegularizer),this.kernelConstraint=mr(e.kernelConstraint),this.recurrentConstraint=mr(e.recurrentConstraint),this.biasConstraint=mr(e.biasConstraint),this.dropout=jp([1,$c([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=jp([1,$c([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Ft(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return fe(()=>{if(e=e,e.length!==2)throw new J(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let r=e[1];e=e[0];const i=n.training==null?!1:n.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Mc({ones:()=>To(e),rate:this.dropout,training:i,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Mc({ones:()=>To(r),rate:this.recurrentDropout,training:i,dropoutFunc:this.dropoutFunc}));let s;const o=this.dropoutMask,a=this.recurrentDropoutMask;o!=null?s=Ya(ne(e,o),this.kernel.read()):s=Ya(e,this.kernel.read()),this.bias!=null&&(s=aa(s,this.bias.read())),a!=null&&(r=ne(r,a));let l=$e(s,Ya(r,this.recurrentKernel.read()));return this.activation!=null&&(l=this.activation.apply(l)),[l,l]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Oc(this.activation),useBias:this.useBias,kernelInitializer:Nn(this.kernelInitializer),recurrentInitializer:Nn(this.recurrentInitializer),biasInitializer:Nn(this.biasInitializer),kernelRegularizer:un(this.kernelRegularizer),recurrentRegularizer:un(this.recurrentRegularizer),biasRegularizer:un(this.biasRegularizer),activityRegularizer:un(this.activityRegularizer),kernelConstraint:pr(this.kernelConstraint),recurrentConstraint:pr(this.recurrentConstraint),biasConstraint:pr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),n)}}AM.className="SimpleRNNCell";Ne(AM);class Uee extends Yc{constructor(e){e.cell=new AM(e),super(e)}call(e,n){return fe(()=>{this.cell.dropoutMask!=null&&(vt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(vt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,i=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:s})})}static fromConfig(e,n){return new e(n)}}Uee.className="SimpleRNN";Ne(Uee);class kM extends KC{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new J("GRUCell does not support reset_after parameter set to true.");this.units=e.units,Er(this.units,"units"),this.activation=Pc(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Pc(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Cn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Cn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Cn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=En(e.kernelRegularizer),this.recurrentRegularizer=En(e.recurrentRegularizer),this.biasRegularizer=En(e.biasRegularizer),this.kernelConstraint=mr(e.kernelConstraint),this.recurrentConstraint=mr(e.recurrentConstraint),this.biasConstraint=mr(e.biasConstraint),this.dropout=jp([1,$c([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=jp([1,$c([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Ft(e);const n=e[e.length-1];this.kernel=this.addWeight("kernel",[n,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return fe(()=>{if(e=e,e.length!==2)throw new J(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training==null?!1:n.training;let i=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Mc({ones:()=>To(e),rate:this.dropout,training:r,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Mc({ones:()=>To(i),rate:this.recurrentDropout,training:r,count:3,dropoutFunc:this.dropoutFunc}));const s=this.dropoutMask,o=this.recurrentDropoutMask;let a,l,u;0<this.dropout&&this.dropout<1&&(e=ne(e,s[0]));let h=Ya(e,this.kernel.read());this.useBias&&(h=aa(h,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(i=ne(i,o[0]));const d=this.recurrentKernel.read(),[p,g]=Ds(d,[2*this.units,this.units],d.rank-1),y=Ya(i,p),[b,x,w]=Ds(h,3,h.rank-1),[C,E]=Ds(y,2,y.rank-1);a=this.recurrentActivation.apply($e(b,C)),l=this.recurrentActivation.apply($e(x,E));const _=Ya(ne(l,i),g);u=this.activation.apply($e(w,_));const A=$e(ne(a,i),ne($e(1,Fn(a)),u));return[A,A]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Oc(this.activation),recurrentActivation:Oc(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Nn(this.kernelInitializer),recurrentInitializer:Nn(this.recurrentInitializer),biasInitializer:Nn(this.biasInitializer),kernelRegularizer:un(this.kernelRegularizer),recurrentRegularizer:un(this.recurrentRegularizer),biasRegularizer:un(this.biasRegularizer),activityRegularizer:un(this.activityRegularizer),kernelConstraint:pr(this.kernelConstraint),recurrentConstraint:pr(this.recurrentConstraint),biasConstraint:pr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),n)}}kM.className="GRUCell";Ne(kM);class jee extends Yc{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new kM(e),super(e)}call(e,n){return fe(()=>{this.cell.dropoutMask!=null&&(vt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(vt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,i=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:s})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}jee.className="GRU";Ne(jee);class XC extends KC{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Er(this.units,"units"),this.activation=Pc(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Pc(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Cn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Cn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Cn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=En(e.kernelRegularizer),this.recurrentRegularizer=En(e.recurrentRegularizer),this.biasRegularizer=En(e.biasRegularizer),this.kernelConstraint=mr(e.kernelConstraint),this.recurrentConstraint=mr(e.recurrentConstraint),this.biasConstraint=mr(e.biasConstraint),this.dropout=jp([1,$c([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=jp([1,$c([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var n;e=Ft(e);const r=e[e.length-1];this.kernel=this.addWeight("kernel",[r,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let i;if(this.useBias){if(this.unitForgetBias){const s=this.biasInitializer,o=this.units;i=new(n=class extends _o{apply(l,u){const h=s.apply([o]),d=new mM().apply([o]),p=s.apply([o*2]);return tG(tG(h,d),p)}},n.className="CustomInit",n)}else i=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,i,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,n){return fe(()=>{const r=n.training==null?!1:n.training;if(e=e,e.length!==3)throw new J(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let i=e[1];const s=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Mc({ones:()=>To(e),rate:this.dropout,training:r,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Mc({ones:()=>To(i),rate:this.recurrentDropout,training:r,count:4,dropoutFunc:this.dropoutFunc}));const o=this.dropoutMask,a=this.recurrentDropoutMask;let l,u,h,d;0<this.dropout&&this.dropout<1&&(e=ne(e,o[0]));let p=Ya(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(i=ne(i,a[0])),p=$e(p,Ya(i,this.recurrentKernel.read())),this.useBias&&(p=aa(p,this.bias.read()));const[g,y,b,x]=Ds(p,4,p.rank-1);l=this.recurrentActivation.apply(g),u=this.recurrentActivation.apply(y),h=$e(ne(u,s),ne(l,this.activation.apply(b))),d=this.recurrentActivation.apply(x);const w=ne(d,this.activation.apply(h));return[w,w,h]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Oc(this.activation),recurrentActivation:Oc(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Nn(this.kernelInitializer),recurrentInitializer:Nn(this.recurrentInitializer),biasInitializer:Nn(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:un(this.kernelRegularizer),recurrentRegularizer:un(this.recurrentRegularizer),biasRegularizer:un(this.biasRegularizer),activityRegularizer:un(this.activityRegularizer),kernelConstraint:pr(this.kernelConstraint),recurrentConstraint:pr(this.recurrentConstraint),biasConstraint:pr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),n)}}XC.className="LSTMCell";Ne(XC);class Wee extends Yc{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new XC(e),super(e)}call(e,n){return fe(()=>{this.cell.dropoutMask!=null&&(vt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(vt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,i=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:s})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}Wee.className="LSTM";Ne(Wee);class NM extends KC{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const n of this.cells.slice().reverse())Array.isArray(n.stateSize)?e.push(...n.stateSize):e.push(n.stateSize);return e}call(e,n){return fe(()=>{e=e;let r=e.slice(1);const i=[];for(const a of this.cells.slice().reverse())Array.isArray(a.stateSize)?i.push(r.splice(0,a.stateSize.length)):i.push(r.splice(0,1));i.reverse();const s=[];let o;for(let a=0;a<this.cells.length;++a){const l=this.cells[a];r=i[a],a===0?o=[e[0]].concat(r):o=[o[0]].concat(r),o=l.call(o,n),s.push(o.slice(1))}r=[];for(const a of s.slice().reverse())r.push(...a);return[o[0]].concat(r)})}build(e){KN(e)&&(e=e[0]),e=e;let n;this.cells.forEach((r,i)=>{nf(`RNNCell_${i}`,()=>{r.build(e),Array.isArray(r.stateSize)?n=r.stateSize[0]:n=r.stateSize,e=[e[0],n]})}),this.built=!0}getConfig(){const e=super.getConfig(),n=s=>({className:s.getClassName(),config:s.getConfig()}),i={cells:this.cells.map(n)};return Object.assign(Object.assign({},e),i)}static fromConfig(e,n,r={}){const i=[];for(const s of n.cells)i.push(Qa(s,r));return new e({cells:i})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const n of this.cells)e.push(...n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.cells)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.cells)n.push(...r.trainableWeights);return n.concat(e)}return e}getWeights(){const e=[];for(const n of this.cells)e.push(...n.weights);return XN(e)}setWeights(e){const n=[];for(const r of this.cells){const i=r.weights.length,s=e.splice(i);for(let o=0;o<r.weights.length;++o)n.push([r.weights[o],s[o]])}SM(n)}}NM.className="StackedRNNCells";Ne(NM);function Mc(t){const{ones:e,rate:n,training:r=!1,count:i=1,dropoutFunc:s}=t,o=()=>s!=null?s(e(),n):PJ(e(),n),a=()=>U0(o,e,r);return!i||i<=1?qa(a().clone()):Array(i).fill(void 0).map(a).map(u=>qa(u.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var Yze=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class Gee extends Yc{constructor(e){if(e.unroll)throw new yt("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new yt("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new fr({ndim:5})]}call(e,n){return fe(()=>{if(this.cell.dropoutMask!=null&&(vt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(vt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new J("ConvRNN2D cell does not support constants");const r=n==null?null:n.mask,i=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:s})})}computeOutputShape(e){let n=this.computeSingleOutputShape(e);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([e[0],...n.slice(-3)])]),n}getInitialState(e){return fe(()=>{const{stateSize:n}=this.cell,r=e.shape,i=this.computeSingleOutputShape(r),s=[i[0],...i.slice(2)],o=Cr(s);return Array.isArray(n)?Array(n.length).fill(o):[o]})}resetStates(e,n=!1){fe(()=>{if(!this.stateful)throw new Da("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape,i=this.computeSingleOutputShape(r),s=[i[0],...i.slice(2)];if(r[0]==null)throw new J("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Cr(s)):this.states_=[Cr(s)];else if(e==null)vt(this.states_),this.keptStates!=null&&(vt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Cr(s)):this.states_[0]=Cr(s);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new J(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n?this.keptStates.push(this.states_.slice()):vt(this.states_);for(let a=0;a<this.states_.length;++a){const l=e[a],u=s;if(!Wt(l.shape,u))throw new J(`State ${a} is incompatible with layer ${this.name}: expected shape=${u}, received shape=${l.shape}`);this.states_[a]=l}}this.states_=this.states_.map(a=>qa(a.clone()))})}computeSingleOutputShape(e){const{dataFormat:n,filters:r,kernelSize:i,padding:s,strides:o,dilationRate:a}=this.cell,l=n==="channelsFirst",u=e[l?3:2],h=e[l?4:3],d=Jo(u,i[0],s,o[0],a[0]),p=Jo(h,i[1],s,o[1],a[1]);return[...e.slice(0,2),...l?[r,d,p]:[d,p,r]]}}Gee.className="ConvRNN2D";class RM extends XC{constructor(e){const{filters:n,kernelSize:r,strides:i,padding:s,dataFormat:o,dilationRate:a}=e;super(Object.assign(Object.assign({},e),{units:n})),this.filters=n,Er(this.filters,"filters"),this.kernelSize=yp(r,2,"kernelSize"),this.kernelSize.forEach(l=>Er(l,"kernelSize")),this.strides=yp(i||1,2,"strides"),this.strides.forEach(l=>Er(l,"strides")),this.padding=s||"valid",Fs(this.padding),this.dataFormat=o||"channelsLast",zn(this.dataFormat),this.dilationRate=yp(a||1,2,"dilationRate"),this.dilationRate.forEach(l=>Er(l,"dilationRate"))}build(e){var n;e=Ft(e);const r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new J(`The channel dimension of the input should be defined. Found ${e[r]}`);const i=e[r],s=4,o=this.kernelSize.concat([i,this.filters*s]);this.kernel=this.addWeight("kernel",o,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const a=this.kernelSize.concat([this.filters,this.filters*s]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",a,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let l;if(this.unitForgetBias){const u=this.biasInitializer,h=this.filters;l=new(n=class extends _o{apply(p,g){const y=u.apply([h]),b=Kc([h]),x=u.apply([h*2]);return pM([y,b,x])}},n.className="CustomInit",n)}else l=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*s],null,l,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,n){return fe(()=>{if(e.length!==3)throw new J(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training||!1,i=e[0],s=e[1],o=e[2],a=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Mc({ones:()=>To(i),rate:this.dropout,training:r,count:a,dropoutFunc:this.dropoutFunc}));const l=this.dropoutMask,u=(ce,j,Q)=>!j||!j[Q]?ce:ne(j[Q],ce);let h=u(i,l,0),d=u(i,l,1),p=u(i,l,2),g=u(i,l,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Mc({ones:()=>To(s),rate:this.recurrentDropout,training:r,count:a,dropoutFunc:this.dropoutFunc}));const y=this.recurrentDropoutMask;let b=u(s,y,0),x=u(s,y,1),w=u(s,y,2),C=u(s,y,3);const E=3,[_,A,P,N]=Ds(this.kernel.read(),a,E),[R,D,O,k]=this.useBias?Ds(this.bias.read(),a):[null,null,null,null];h=this.inputConv(h,_,R,this.padding),d=this.inputConv(d,A,D,this.padding),p=this.inputConv(p,P,O,this.padding),g=this.inputConv(g,N,k,this.padding);const[F,L,q,Y]=Ds(this.recurrentKernel.read(),a,E);b=this.recurrentConv(b,F),x=this.recurrentConv(x,L),w=this.recurrentConv(w,q),C=this.recurrentConv(C,Y);const W=this.recurrentActivation.apply($e(h,b)),H=this.recurrentActivation.apply($e(d,x)),X=$e(ne(H,o),ne(W,this.activation.apply($e(p,w)))),ee=ne(this.recurrentActivation.apply($e(g,C)),this.activation.apply(X));return[ee,ee,X]})}getConfig(){const e=super.getConfig(),{units:n}=e,r=Yze(e,["units"]),i={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},r),i)}inputConv(e,n,r,i){const s=Tf(e,n,this.strides,i||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return r?aa(s,r,this.dataFormat):s}recurrentConv(e,n){return Tf(e,n,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}RM.className="ConvLSTM2DCell";Ne(RM);class Hee extends Gee{constructor(e){const n=new RM(e);super(Object.assign(Object.assign({},e),{cell:n}))}static fromConfig(e,n){return new e(n)}}Hee.className="ConvLSTM2D";Ne(Hee);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class DM extends St{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;const n=e.shape,r=[];for(let i=0;i<this.noiseShape.length;++i)r.push(this.noiseShape[i]==null?n[i]:this.noiseShape[i]);return r}call(e,n){return fe(()=>{this.invokeCallHook(e,n);const r=st(e);if(0<this.rate&&this.rate<1){const i=n.training==null?!1:n.training,s=this.getNoiseShape(r);return U0(()=>PJ(r,this.rate,s,this.seed),()=>r,i)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(e,n),e}dispose(){return super.dispose()}}DM.className="Dropout";Ne(DM);class qee extends DM{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const n=e.shape;return[n[0],1,n[2]]}}qee.className="SpatialDropout1D";Ne(qee);class Kee extends St{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let n=null;e.batchSize!=null&&(n=e.batchSize),this.batchInputShape=[n,e.inputDim]}this.units=e.units,Er(this.units,"units"),this.activation=Pc(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=Cn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=Cn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=mr(e.kernelConstraint),this.biasConstraint=mr(e.biasConstraint),this.kernelRegularizer=En(e.kernelRegularizer),this.biasRegularizer=En(e.biasRegularizer),this.activityRegularizer=En(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=Ft(e);const n=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(e){e=Ft(e);const n=e.slice();return n[n.length-1]=this.units,n}call(e,n){return fe(()=>{this.invokeCallHook(e,n);const r=st(e),i=AJ(this.activation.getClassName());let s;return i!=null?s=Ya(r,this.kernel.read(),i,this.bias?this.bias.read():null):(s=Ya(r,this.kernel.read()),this.bias!=null&&(s=aa(s,this.bias.read())),this.activation!=null&&(s=this.activation.apply(s))),s})}getConfig(){const e={units:this.units,activation:Oc(this.activation),useBias:this.useBias,kernelInitializer:Nn(this.kernelInitializer),biasInitializer:Nn(this.biasInitializer),kernelRegularizer:un(this.kernelRegularizer),biasRegularizer:un(this.biasRegularizer),activityRegularizer:un(this.activityRegularizer),kernelConstraint:pr(this.kernelConstraint),biasConstraint:pr(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}Kee.className="Dense";Ne(Kee);class Xee extends St{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=Ft(e);for(const n of e.slice(1))if(n==null)throw new J(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],bc(e,1)]}call(e,n){return fe(()=>{this.invokeCallHook(e,n);let r=st(e);if(this.dataFormat==="channelsFirst"&&r.rank>1){const i=[0];for(let s=2;s<r.rank;++s)i.push(s);i.push(1),r=$t(r,i)}return _Be(r)})}getConfig(){const e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);const n=super.getConfig();return Object.assign(e,n),e}}Xee.className="Flatten";Ne(Xee);class Yee extends St{constructor(e){super(e),this.supportsMasking=!0,this.activation=Pc(e.activation)}call(e,n){return fe(()=>{this.invokeCallHook(e,n);const r=st(e);return this.activation.apply(r)})}getConfig(){const e={activation:Oc(this.activation)},n=super.getConfig();return Object.assign(e,n),e}}Yee.className="Activation";Ne(Yee);class Qee extends St{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,n){return fe(()=>(e=st(e),EBe(e,this.n)))}getConfig(){const e={n:this.n},n=super.getConfig();return Object.assign(e,n),e}}Qee.className="RepeatVector";Ne(Qee);class Zee extends St{constructor(e){super(e),this.targetShape=e.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,n){const r="Total size of new array must be unchanged.",i=n.slice();let s=1,o=null;for(let l=0;l<i.length;++l){const u=i[l];if(this.isUnknown(u))if(o===null)o=l;else throw new J("Can only specifiy one unknown dimension.");else s*=u}const a=bc(e);if(o!==null){if(s===0||a%s!==0)throw new J(r);i[o]=a/s}else if(a!==s)throw new J(r);return i}computeOutputShape(e){let n=!1;for(let r=0;r<e.length;++r)if(this.isUnknown(e[r])){n=!0;break}return n?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,n){return fe(()=>{this.invokeCallHook(e,n);const r=st(e),i=r.shape,s=i.slice(0,1).concat(this.fixUnknownDimension(i.slice(1),this.targetShape));return oe(r,s)})}getConfig(){const e={targetShape:this.targetShape},n=super.getConfig();return Object.assign(e,n),e}}Zee.className="Reshape";Ne(Zee);class Jee extends St{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const n=na(1,e.dims.length+1);if(!Wt(e.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new fr({ndim:this.dims.length+1})]}computeOutputShape(e){e=Ft(e);const n=e.slice();return this.dims.forEach((r,i)=>{n[i+1]=e[r]}),n}call(e,n){return $t(st(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},n=super.getConfig();return Object.assign(e,n),e}}Jee.className="Permute";Ne(Jee);class ete extends St{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,e),n}computeMask(e,n){const r=st(e);return VN(nS(r,this.maskValue),-1)}call(e,n){return fe(()=>{this.invokeCallHook(e,n);const r=st(e),o=VN(nS(r,this.maskValue),-1,!0);return ne(r,Be(o,r.dtype))})}}ete.className="Masking";Ne(ete);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class tte extends St{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let n=null;e.batchSize!=null&&(n=e.batchSize),e.inputLength==null?this.batchInputShape=[n,null]:this.batchInputShape=[n].concat(Kt(e.inputLength))}this.inputDim=e.inputDim,Er(this.inputDim,"inputDim"),this.outputDim=e.outputDim,Er(this.outputDim,"outputDim"),this.embeddingsInitializer=Cn(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=En(e.embeddingsRegularizer),this.activityRegularizer=En(e.activityRegularizer),this.embeddingsConstraint=mr(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,n){return fe(()=>this.maskZero?(e=st(e),nS(e,Ot(e))):null)}computeOutputShape(e){if(e=Ft(e),this.inputLength==null)return[...e,this.outputDim];const n=Kt(this.inputLength);if(n.length!==e.length-1)throw new J(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let r=0;for(let i=0;i<n.length;++i){const s=n[i],o=e[i+1];if(s!=null&&o!=null&&s!==o)throw new J(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);s==null&&(n[r]=o),r++}}return[e[0],...n,this.outputDim]}call(e,n){return fe(()=>{this.invokeCallHook(e,n);let r=st(e);r.dtype!=="int32"&&(r=Xa(r,"int32"));const i=OJ(this.embeddings.read(),oe(r,[r.size]));return oe(i,Ft(this.computeOutputShape(r.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:Nn(this.embeddingsInitializer),embeddingsRegularizer:un(this.embeddingsRegularizer),activityRegularizer:un(this.activityRegularizer),embeddingsConstraint:pr(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(e,n),e}}tte.className="Embedding";Ne(tte);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Gf extends St{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new yt}computeElementwiseOpOutputShape(e,n){if(e==null||n==null)return null;if(e.length<n.length)return this.computeElementwiseOpOutputShape(n,e);if(n.length===0)return e;const r=e.slice(0,e.length-n.length);for(let i=0;i<n.length;++i){const s=e[e.length-n.length+i],o=n[i];if(s==null||o==null||s<0||o<0)r.push(null);else if(s===1)r.push(o);else if(o===1)r.push(s);else{if(s!==o)throw new J("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(n));r.push(s)}}return r}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[Ft(e)]),e=e,e.length<2)throw new J(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let n=[];for(const s of e)s!=null&&s[0]!==null&&n.push(s[0]);if(n=vc(n),n.length>1)throw new J(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let r=e[0]==null?null:e[0].slice(1);for(let s=1;s<e.length;++s){const o=e[s]==null?null:e[s].slice(1);r=this.computeElementwiseOpOutputShape(r,o)}const i=e.map(s=>s.length);e.indexOf(null)===-1&&vc(i).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,n){return fe(()=>{if(e=e,this.reshapeRequired){const r=[],i=e.map(s=>s.rank);if(i.indexOf(null)===-1){const s=$c(i);for(let o of e){const a=o.rank;for(let l=0;l<s-a;++l)o=B0(o,1);r.push(o)}return this.mergeFunction(r)}else{let s=!1;for(const l of e){const u=l.rank;if(u==null){const h=l.shape,d=h[0],p=h.slice(1).concat([d]);let g=oe(l,[d].concat(bc(h.slice(1))));g=$t(g,[1,0]),g=oe(g,p),r.push(g),s=!0}else if(u>1){const h=na(1,u).concat([0]);r.push($t(l,h)),s=!0}else r.push(l)}let o=this.mergeFunction(r);const a=o.rank;if(s){if(a==null){const l=o.shape,u=l.length,h=l[u-1],d=[h].concat(l.slice(0,l.length-1));o=oe($t(oe(o,[-1,h]),[1,0]),d)}else if(a>1){const l=[a-1].concat(na(0,a-1));o=$t(o,l)}}return o}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let n;e[0]==null?n=null:n=e[0].slice(1);for(let i=1;i<e.length;++i){const s=e[i]==null?null:e[i].slice(1);n=this.computeElementwiseOpOutputShape(n,s)}let r=[];for(const i of e)i!=null&&i[0]!==null&&r.push(i[0]);return r=vc(r),r.length===1?n=r.concat(n):n=[null].concat(n),n}computeMask(e,n){return fe(()=>{if(n==null)return null;if(!Array.isArray(n))throw new J("`mask` should be an Array");if(!Array.isArray(e))throw new J("`inputs` should be an Array");if(n.length!==e.length)throw new J(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${n.length})`);if(n.every(i=>i==null))return null;n=n.map(i=>i==null?i:Mi(i,0));let r=n[0];for(let i=1;i<n.length-1;++i)r=nu(r,n[i]);return r})}}class nte extends Gf{constructor(e){super(e)}mergeFunction(e){return fe(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=$e(n,e[r]);return n})}}nte.className="Add";Ne(nte);class rte extends Gf{constructor(e){super(e)}mergeFunction(e){return fe(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=ne(n,e[r]);return n})}}rte.className="Multiply";Ne(rte);class ite extends Gf{constructor(e){super(e)}mergeFunction(e){return fe(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=$e(n,e[r]);return ne(1/e.length,n)})}}ite.className="Average";Ne(ite);class ste extends Gf{constructor(e){super(e)}mergeFunction(e){return fe(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=qc(n,e[r]);return n})}}ste.className="Maximum";Ne(ste);class ote extends Gf{constructor(e){super(e)}mergeFunction(e){return fe(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=Ky(n,e[r]);return n})}}ote.className="Minimum";Ne(ote);class ate extends Gf{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new J("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let n=!0;for(const i of e)if(i!=null){n=!1;break}if(n)return;const r=[];for(let i=0;i<e.length;++i){const s=e[i].slice();s.splice(this.axis,1);let o=!1;for(const a of r)if(Wt(a,s)){o=!0;break}o||r.push(s)}if(r.length>1)throw new J("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return fe(()=>pM(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new J("A `Concatenate` layer should be called on a list of inputs.");const n=e,r=n[0].slice(),i=this.axis<0?r.length+this.axis:this.axis;for(const s of n.slice(1)){if(r[i]==null||s[i]==null){r[i]=null;break}r[i]+=s[i]}return r}computeMask(e,n){if(n==null)return null;if(!Array.isArray(n))throw new J("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new J("`inputs` should be an array for Concatenate");if(n.length!==e.length)throw new J(`Mismatch in the length of mask (${n.length}) and the legnth of inputs (${e.length})`);return fe(()=>{let r=!0;if(n.forEach(o=>{if(o!=null){r=!1;return}}),r)return null;const i=[];for(let o=0;o<e.length;++o)n[o]==null?i.push(Be(To(e[o]),"bool")):n[o].rank<e[o].rank?i.push(Mi(n[o],-1)):i.push(n[o]);const s=Ui(i,this.axis);return oZ(s,-1,!1)})}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}ate.className="Concatenate";Ne(ate);function Gg(t,e){for(;t<0;)t+=e;return t}function Qze(t,e,n){if(t.shape.length>3||e.shape.length>3)throw new yt("batchDot is not implemented for tensors of 4D or higher rank yet");if(U(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),U(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),typeof n=="number"&&(n=[n,n]),t.dtype==="complex64"||e.dtype==="complex64")throw new yt("batchDot is not implemented for complex64-type Tensors yet.");const r=t.shape.length,i=e.shape.length;n==null&&(n=[r-1,i-2]);const s=n;return fe(()=>{let o;if(r>i){o=r-i;const l=[];for(let u=0;u<o;++u)l.push(1);e=oe(e,e.shape.concat(l))}else if(i>r){o=i-r;const l=[];for(let u=0;u<o;++u)l.push(1);t=oe(t,t.shape.concat(l))}else o=0;let a;if(t.shape.length===2&&e.shape.length===2)s[0]===s[1]?a=Qe(ne(t,e),s[0]):a=Qe(ne($t(t,[1,0]),e),s[1]);else{const l=s[0]!==t.shape.length-1,u=s[1]===e.shape.length-1;a=zt(t,e,l,u)}if(o>0){let l;r>i?l=r+i-3:l=r-1;const u=[];for(let h=l;h<l+o;++h)u.push(h);a=O0(a,u)}return a.shape.length===1&&(a=Mi(a,1)),a})}class lte extends Gf{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){U(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0],r=e[1];if(n.length>3||r.length>3)throw new yt("Dot layer does not support tensors of 4D or higher rank yet.");const i=this.interpretAxes(n,r);if(n[i[0]]!==r[i[1]])throw new J(`Dimension incompatibility: ${n[i[0]]} !== ${r[i[1]]}`)}mergeFunction(e){if(e.length!==2)throw new J(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let n=e[0],r=e[1],i;return Array.isArray(this.axes)?i=this.axes.map((s,o)=>Gg(s,e[o].shape.length)):i=[Gg(this.axes,n.shape.length),Gg(this.axes,r.shape.length)],this.normalize&&(n=uS(n,i[0]),r=uS(r,i[1])),Qze(n,r,i)}interpretAxes(e,n){let r;return Array.isArray(this.axes)?r=this.axes:r=[Gg(this.axes,e.length),Gg(this.axes,n.length)],r}computeOutputShape(e){U(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0].slice(),r=e[1].slice();if(n.length>3||r.length>3)throw new yt("Dot layer does not support tensors of 4D or higher rank yet.");const i=this.interpretAxes(n,r);n.splice(i[0],1),r.splice(i[1],1),r.splice(0,1);const s=n.concat(r);return s.length===1&&s.push(1),s}computeMask(e,n){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(e,n),e}}lte.className="Dot";Ne(lte);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class ute extends St{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,e),n}call(e,n){return fe(()=>{this.invokeCallHook(e,n);const r=st(e);return U0(()=>$e(UC(r.shape,0,this.stddev),r),()=>r,n.training||!1)})}}ute.className="GaussianNoise";Ne(ute);class cte extends St{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return fe(()=>{this.invokeCallHook(e,n);const r=st(e);return this.rate>0&&this.rate<1?U0(()=>{const s=Math.sqrt(this.rate/(1-this.rate));return ne(r,UC(r.shape,1,s))},()=>r,n.training||!1):r})}}cte.className="GaussianDropout";Ne(cte);class hte extends St{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||st(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return fe(()=>{if(this.rate<1&&this.rate>0){const r=this._getNoiseShape(e);return U0(()=>{const s=st(e),a=-1.6732632423543772*1.0507009873554805;let l=zf($0(r),this.rate);l=Xa(l,"float32");const u=((1-this.rate)*(1+this.rate*a**2))**-.5,h=-u*a*this.rate,d=$e(ne(s,l),ne($e(l,-1),a));return $e(ne(d,u),h)},()=>st(e),n.training||!1)}return e})}}hte.className="AlphaDropout";Ne(hte);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Jy(t,e,n,r,i,s=.001){let o;if(t.rank===2)o=yPe(t,e,n,r,i,s);else if(t.rank===3)o=bPe(t,e,n,r,i,s);else if(t.rank===4)o=wPe(t,e,n,r,i,s);else throw new yt(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return o}function Zze(t,e,n,r,i=.001){return fe(()=>{const s=wP(t,r),o=s.mean,a=s.variance;return[Jy(t,o,a,n,e,i),o,a]})}function Jze(t,e,n,r,i=.001){return fe(()=>{const s=wP(t,r),o=s.mean,a=s.variance,l=[];for(const y of na(0,t.rank))r.indexOf(y)!==-1?l.push(1):l.push(t.shape[y]);const u=oe(o,l),h=oe(a,l),d=e==null?null:oe(e,l),p=n==null?null:oe(n,l);return[Jy(t,u,h,p,d,i),o,a]})}function eUe(t,e,n,r,i=.001){return Wt(r.slice().sort(),na(0,t.rank-1))?Zze(t,e,n,r,i):Jze(t,e,n,r,i)}class fte extends St{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=Cn(e.betaInitializer||"zeros"),this.gammaInitializer=Cn(e.gammaInitializer||"ones"),this.movingMeanInitializer=Cn(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=Cn(e.movingVarianceInitializer||"ones"),this.betaConstraint=mr(e.betaConstraint),this.gammaConstraint=mr(e.gammaConstraint),this.betaRegularizer=En(e.betaRegularizer),this.gammaRegularizer=En(e.gammaRegularizer)}build(e){e=Ft(e);const n=this.axis>=0?this.axis:this.axis+e.length,r=e[n];if(r==null)throw new J(`Axis ${n} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new fr({ndim:e.length,axes:{[n]:r}})];const i=[r];this.scale&&(this.gamma=this.addWeight("gamma",i,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",i,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",i,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",i,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,n){return fe(()=>{const r=n.training==null?!1:n.training,i=st(e),s=i.shape,o=s.length,a=na(0,o),l=this.axis>=0?this.axis:this.axis+o;a.splice(l,1);const u=_f(1,o);u[l]=s[l];const h=a.slice();h.sort();const d=!Wt(h,na(0,o).slice(0,o-1)),p=()=>{if(d){const C=oe(this.movingMean.read(),u),E=oe(this.movingVariance.read(),u),_=this.center?oe(this.beta.read(),u):null,A=this.scale?oe(this.gamma.read(),u):null;return Jy(i,C,E,_,A,this.epsilon)}else return Jy(i,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!r)return p();const[g,y,b]=eUe(i,this.gamma.read(),this.beta.read(),a,this.epsilon),x=(C,E,_)=>{fe(()=>{const A=1-_,P=C.read(),N=ne(it(P,E),A);C.write(it(P,N))})};return(()=>{x(this.movingMean,y,this.momentum),x(this.movingVariance,b,this.momentum)})(),g})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Nn(this.betaInitializer),gammaInitializer:Nn(this.gammaInitializer),movingMeanInitializer:Nn(this.movingMeanInitializer),movingVarianceInitializer:Nn(this.movingVarianceInitializer),betaRegularizer:un(this.betaRegularizer),gammaRegularizer:un(this.gammaRegularizer),betaConstraint:pr(this.betaConstraint),gammaConstraint:pr(this.gammaConstraint)},n=super.getConfig();return Object.assign(e,n),e}}fte.className="BatchNormalization";Ne(fte);class dte extends St{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const n of this.axis)if(!Number.isInteger(n))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=Cn(e.betaInitializer||"zeros"),this.gammaInitializer=Cn(e.gammaInitializer||"ones"),this.betaRegularizer=En(e.betaRegularizer),this.gammaRegularizer=En(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=Ft(e);const n=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let s=0;s<this.axis.length;++s)this.axis[s]<0&&(this.axis[s]+=n);for(const s of this.axis)if(s<0||s>=n)throw new Error(`Invalid axis: ${s}`);if(this.axis.length!==vc(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const r=this.axis.map(s=>e[s]),i=!0;this.scale?this.gamma=this.addWeight("gamma",r,"float32",this.gammaInitializer,this.gammaRegularizer,i):this.gamma=null,this.center?this.beta=this.addWeight("beta",r,"float32",this.betaInitializer,this.betaRegularizer,i):this.beta=null,this.built=!0}call(e,n){const r=st(e),i=r.shape,s=i.length;return fe(()=>{let{mean:a,variance:l}=wP(r,this.axis,!0);const u=_f(1,s);for(const b of this.axis)u[b]=i[b];const h=b=>b!=null&&b.shape.length!==s?oe(b,u):b;let d=this.scale?h(this.gamma.read()):null,p=this.center?h(this.beta.read()):null;const g=[],y=[];for(let b=0;b<s;++b)this.axis.indexOf(b)!==-1?(g.push(i[b]),y.push(1)):(g.push(1),y.push(i[b]));return a=Yo(a,g),l=Yo(l,g),d!=null&&(d=Yo(d,y)),p!=null&&(p=Yo(p,y)),Jy(r,a,l,p,d,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Nn(this.betaInitializer),gammaInitializer:Nn(this.gammaInitializer),betaRegularizer:un(this.betaRegularizer),gammaRegularizer:un(this.gammaRegularizer)},n=super.getConfig();return Object.assign(e,n),e}}dte.className="LayerNormalization";Ne(dte);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function tUe(t,e,n){return fe(()=>{if(t.rank!==4)throw new J(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new J("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=ra()),n!=="channelsLast"&&n!=="channelsFirst")throw new J(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return n==="channelsFirst"?r=[[0,0],[0,0],e[0],e[1]]:r=[[0,0],e[0],e[1],[0,0]],SP(t,r)})}class pte extends St{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?ra():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new J(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let n,r;if(typeof e.padding[0]=="number")n=[e.padding[0],e.padding[0]],r=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new J(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(n=e.padding[0],e.padding[1].length!==2)throw new J(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);r=e.padding[1]}this.padding=[n,r]}this.inputSpec=[new fr({ndim:4})]}computeOutputShape(e){e=Ft(e);let n,r;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?n=e[2]+this.padding[0][0]+this.padding[0][1]:n=null,e[3]!=null&&e[3]>=0?r=e[3]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],e[1],n,r]):(e[1]!=null&&e[1]>=0?n=e[1]+this.padding[0][0]+this.padding[0][1]:n=null,e[2]!=null&&e[2]>=0?r=e[2]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],n,r,e[3]])}call(e,n){return fe(()=>tUe(st(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}pte.className="ZeroPadding2D";Ne(pte);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function YC(t,e,n,r,i,s){return fe(()=>{zn(i),NJ(s),Fs(r),n==null&&(n=[1,1]),r==null&&(r="valid"),i==null&&(i=ra()),s==null&&(s="max"),t=_M(t,i);let o;const a=r==="same"?"same":"valid";return s==="max"?o=xP(t,e,n,a):o=cP(t,e,n,a),i==="channelsFirst"&&(o=$t(o,[0,3,1,2])),o})}function mte(t,e,n,r,i,s){return fe(()=>{zn(i),NJ(s),Fs(r),n==null&&(n=[1,1,1]),r==null&&(r="valid"),i==null&&(i=ra()),s==null&&(s="max"),t=Dee(t,i);let o;const a=r==="same"?"same":"valid";return s==="max"?o=sLe(t,e,n,a):o=aPe(t,e,n,a),i==="channelsFirst"&&(o=$t(o,[0,4,1,2,3])),o})}class gte extends St{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new J(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(Er(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new J(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);Er(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,Fs(this.padding),this.inputSpec=[new fr({ndim:3})]}computeOutputShape(e){e=Ft(e);const n=Jo(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],n,e[2]]}call(e,n){return fe(()=>{this.invokeCallHook(e,n),e=B0(st(e),2);const r=this.poolingFunction(st(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return O0(r,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(e,n),e}}class yte extends gte{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return zn(s),Fs(i),YC(e,n,r,i,s,"max")}}yte.className="MaxPooling1D";Ne(yte);class vte extends gte{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return zn(s),Fs(i),YC(e,n,r,i,s,"avg")}}vte.className="AveragePooling1D";Ne(vte);class bte extends St{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new J(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];Er(this.poolSize,"poolSize"),Er(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,zn(this.dataFormat),Fs(this.padding),this.inputSpec=[new fr({ndim:4})]}computeOutputShape(e){e=Ft(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2];return n=Jo(n,this.poolSize[0],this.padding,this.strides[0]),r=Jo(r,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r]:[e[0],n,r,e[3]]}call(e,n){return fe(()=>(this.invokeCallHook(e,n),this.poolingFunction(st(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class xte extends bte{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return zn(s),Fs(i),YC(e,n,r,i,s,"max")}}xte.className="MaxPooling2D";Ne(xte);class wte extends bte{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return zn(s),Fs(i),YC(e,n,r,i,s,"avg")}}wte.className="AveragePooling2D";Ne(wte);class Ste extends St{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new J(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];Er(this.poolSize,"poolSize"),Er(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,zn(this.dataFormat),Fs(this.padding),this.inputSpec=[new fr({ndim:5})]}computeOutputShape(e){e=Ft(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],i=this.dataFormat==="channelsFirst"?e[4]:e[3];return n=Jo(n,this.poolSize[0],this.padding,this.strides[0]),r=Jo(r,this.poolSize[1],this.padding,this.strides[1]),i=Jo(i,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r,i]:[e[0],n,r,i,e[4]]}call(e,n){return fe(()=>(this.invokeCallHook(e,n),this.poolingFunction(st(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class Tte extends Ste{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return zn(s),Fs(i),mte(e,n,r,i,s,"max")}}Tte.className="MaxPooling3D";Ne(Tte);class Cte extends Ste{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return zn(s),Fs(i),mte(e,n,r,i,s,"avg")}}Cte.className="AveragePooling3D";Ne(Cte);class Ete extends St{constructor(e){super(e),this.inputSpec=[new fr({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,n){throw new yt}}class Ite extends Ete{constructor(e){super(e||{})}call(e,n){return fe(()=>{const r=st(e);return Yn(r,1)})}}Ite.className="GlobalAveragePooling1D";Ne(Ite);class _te extends Ete{constructor(e){super(e||{})}call(e,n){return fe(()=>{const r=st(e);return Zo(r,1)})}}_te.className="GlobalMaxPooling1D";Ne(_te);class Ate extends St{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,zn(this.dataFormat),this.inputSpec=[new fr({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,n){throw new yt}getConfig(){const e={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class kte extends Ate{call(e,n){return fe(()=>{const r=st(e);return this.dataFormat==="channelsLast"?Yn(r,[1,2]):Yn(r,[2,3])})}}kte.className="GlobalAveragePooling2D";Ne(kte);class Nte extends Ate{call(e,n){return fe(()=>{const r=st(e);return this.dataFormat==="channelsLast"?Zo(r,[1,2]):Zo(r,[2,3])})}}Nte.className="GlobalMaxPooling2D";Ne(Nte);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Rte extends St{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(e,n),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,n,r={}){const i=n.layer,s=Qa(i,r);delete n.layer;const o={layer:s};return Object.assign(o,n),new e(o)}}class Dte extends Rte{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=Ft(e),e.length<3)throw new J(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const n=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=Ft(e);const n=[e[0]].concat(e.slice(2)),r=this.layer.computeOutputShape(n),i=e[1];return[r[0],i].concat(r.slice(1))}call(e,n){return fe(()=>(e=st(e),zee((o,a)=>[st(this.layer.call(o,n)),[]],e,[],!1,null,null,!1,!0)[1]))}}Dte.className="TimeDistributed";Ne(Dte);function nUe(t){Wf(xBe,"BidirectionalMergeMode",t)}const rUe="concat";class $te extends Rte{constructor(e){super(e);const n=e.layer.getConfig(),r={};r.className=e.layer.getClassName(),r.config=n,this.forwardLayer=Qa(r),n.goBackwards=n.goBackwards!==!0;const i={};if(i.className=e.layer.getClassName(),i.config=n,this.backwardLayer=Qa(i),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?rUe:e.mergeMode,nUe(this.mergeMode),e.weights)throw new yt("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const n=e.length,r=Math.floor(n/2);this.forwardLayer.setWeights(e.slice(0,r)),this.backwardLayer.setWeights(e.slice(r))}computeOutputShape(e){let n=this.forwardLayer.computeOutputShape(e);Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),n=n;let r,i,s;return this.returnState&&(s=n.slice(1)),r=n[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,i=[r]):this.mergeMode==null?i=[r,r.slice()]:i=[r],this.returnState?this.mergeMode==null?i.concat(s).concat(s.slice()):[r].concat(s).concat(s.slice()):Li(i)}apply(e,n){let r=n==null?null:n.initialState,i=n==null?null:n.constants;n==null&&(n={});const s=Bee(e,r,i,this.numConstants);if(e=s.inputs,r=s.initialState,i=s.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(r==null||r.length===0)&&i==null)return super.apply(e,n);const o=[],a=[];if(r!=null){const u=r.length;if(u%2>0)throw new J("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=r,o.push(...r);const h=r.map(d=>new fr({shape:d.shape}));this.forwardLayer.stateSpec=h.slice(0,u/2),this.backwardLayer.stateSpec=h.slice(u/2),a.push(...h)}if(i!=null)throw new yt("Support for constants in Bidirectional layers is not implemented yet.");const l=o[0]instanceof ol;for(const u of o)if(u instanceof ol!==l)throw new J("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(l){const u=[e].concat(o),h=this.inputSpec.concat(a),d=this.inputSpec;this.inputSpec=h;const p=super.apply(u,n);return this.inputSpec=d,p}else return super.apply(e,n)}call(e,n){return fe(()=>{const r=n.initialState;let i,s;if(r==null)i=this.forwardLayer.call(e,n),s=this.backwardLayer.call(e,n);else{const l=r.slice(0,r.length/2),u=r.slice(r.length/2);i=this.forwardLayer.call(e,Object.assign(n,{initialState:l})),s=this.backwardLayer.call(e,Object.assign(n,{initialState:u}))}let o;this.returnState&&(Array.isArray(i)&&(o=i.slice(1).concat(s.slice(1))),i=i[0],s=s[0]),this.returnSequences&&(s=Ef(s,1));let a;return this.mergeMode==="concat"?a=pM([i,s]):this.mergeMode==="sum"?a=$e(i,s):this.mergeMode==="ave"?a=ne(.5,$e(i,s)):this.mergeMode==="mul"?a=ne(i,s):this.mergeMode==null&&(a=[i,s]),this.returnState?this.mergeMode==null?a.concat(o):[a].concat(o):a})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){nf(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),nf(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,n){Array.isArray(n)&&(n=n[0]);let r;if(this.returnSequences?this.mergeMode==null?r=[n,n]:r=n:this.mergeMode==null?r=[null,null]:r=null,this.returnState){const s=this.forwardLayer.states.map(o=>null);return Array.isArray(r)?r.concat(s).concat(s):[r].concat(s).concat(s)}else return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(e,n),e}static fromConfig(e,n){const r=Qa(n.layer);if(delete n.layer,n.numConstants!=null)throw new yt("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const i=n;return i.layer=r,new e(i)}}$te.className="Bidirectional";Ne($te);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Ote extends St{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return fe(()=>(e=st(e),e.dtype!=="float32"&&(e=Xa(e,"float32")),$e(ne(e,this.scale),this.offset)))}}Ote.className="Rescaling";Ne(Ote);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:iUe,cropAndResize:sUe}=Vl;class Pte extends St{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,n,r,i,s,o,a,l){return fe(()=>{let u,h=!1;const d=n/o,p=r/a,g=(i+n)/o,y=(s+r)/a,b=[d,p,g,y],x=[];e.rank===3?(h=!0,u=ru([e])):u=e;for(let A=0;A<u.shape[0];A++)x.push(b);const w=gy(x,[x.length,4]),C=Xy(0,x.length,1,"int32"),_=sUe(u,w,C,[i,s],"nearest");return Xa(h?st(If(_)):_,l)})}upsize(e,n,r,i){return fe(()=>{const s=iUe(e,[n,r]);return Xa(s,i)})}call(e,n){return fe(()=>{const r=st(e),i=r.dtype,s=r.shape,o=s[s.length-3],a=s[s.length-2];let l=0;o!==this.height&&(l=Math.floor((o-this.height)/2));let u=0;return a!==this.width&&(u=Math.floor((a-this.width)/2),u===0&&(u=1)),l>=0&&u>=0?this.centerCrop(r,l,u,this.height,this.width,o,a,i):this.upsize(e,this.height,this.width,i)})}getConfig(){const e={height:this.height,width:this.width},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=Ft(e);const n=e.length-3,r=e.length-2;return e[n]=this.height,e[r]=this.width,e}}Pte.className="CenterCrop";Ne(Pte);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function oUe(t,e,n,r){let i=st(t);if(i.dtype!=="int32"&&(i=Xa(i,"int32")),e==="int")return i;const s=i.shape;if(i.rank===0&&(i=Mi(i,-1)),e==="oneHot"&&i.shape[i.shape.length-1]!==1&&(i=Mi(i,-1)),i.rank>2)throw new J(`When outputMode is not int, maximum output rank is 2 Received outputMode ${e} and input shape ${s} which would result in output rank ${i.rank}.`);const o=["multiHot","oneHot"].includes(e),a=i;let l;if(typeof r<"u"&&e==="count"?l=NW(a,r,n,o):l=NW(a,[],n,o),e!=="tfIdf")return l;if(r)return ne(l,r);throw new J("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Mte extends St{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){return e=Ft(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,n){return fe(()=>{e=st(e),e.dtype!=="int32"&&(e=Xa(e,"int32"));let r;if(typeof n.countWeights<"u"){if(this.outputMode!=="count")throw new J(`countWeights is not used when outputMode !== count.
              Received countWeights=${n.countWeights}`);r=st(n.countWeights)}const i=Zo(e),s=eS(e),o=Ls(this.numTokens,i).bufferSync().get(0),a=zf(s,0).bufferSync().get(0);if(!(o&&a))throw new J(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return oUe(e,this.outputMode,this.numTokens,r)})}}Mte.className="CategoryEncoding";Ne(Mte);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const aUe=["bilinear","nearest"],bG=new Set(aUe);class Lte extends St{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(bG.has(e.interpolation))this.interpolation=e.interpolation;else throw new J(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=Ft(e);const n=e[2];return[this.height,this.width,n]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return fe(()=>{const r=[this.height,this.width];if(this.interpolation==="bilinear")return Vl.resizeBilinear(e,r,!this.cropToAspectRatio);if(this.interpolation==="nearest")return Vl.resizeNearestNeighbor(e,r,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...bG]} are supported`)})}}Lte.className="Resizing";Ne(Lte);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Fte{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}Fte.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Vte extends St{constructor(e){super(e),this.randomGenerator=new Fte(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},n=super.getConfig();return Object.assign(e,n),e}}Vte.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const lUe=["bilinear","nearest"],xG=new Set(lUe);class Bte extends Vte{constructor(e){super(e);const{factor:n,interpolation:r="bilinear"}=e;if(this.factor=n,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new J(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new J(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new J(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(r)if(xG.has(r))this.interpolation=r;else throw new J(`Invalid interpolation parameter: ${r} is not implemented`)}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=Ft(e);const n=e[2];return[this.imgHeight,-1,n]}call(e,n){return fe(()=>{const r=st(e);this.imgHeight=r.shape[r.shape.length-3];const i=r.shape[r.shape.length-2];this.widthFactor=$0([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let s=this.widthFactor.dataSync()[0]*i;s=Math.round(s);const o=[this.imgHeight,s];switch(this.interpolation){case"bilinear":return Vl.resizeBilinear(e,o);case"nearest":return Vl.resizeNearestNeighbor(e,o);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...xG]} are supported`)}})}}Bte.className="RandomWidth";Ne(Bte);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uUe=ge();uUe.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var wG;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(wG||(wG={}));var SG;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(SG||(SG={}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var TG;(function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"})(TG||(TG={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function We(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&U(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cUe=OZ;class QC extends fO{nextDataId(){return QC.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new aQ(this,ka())}write(e,n,r){this.firstUse&&(this.firstUse=!1,ge().get("IS_NODE")&&As(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const i={id:this.nextDataId()};return this.data.set(i,{values:e,dtype:r,refCount:1}),i}makeTensorInfo(e,n,r){let i;if(n==="string"&&r!=null&&r.length>0&&$v(r[0])){const s=r.map(o=>yc(o));i=this.write(s,e,n)}else i=this.write(r,e,n);return{dataId:i,shape:e,dtype:n}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const n=this.data.get(e);n.refCount++}decRef(e){if(this.data.has(e)){const n=this.data.get(e);n.refCount--}}move(e,n,r,i,s){this.data.set(e,{values:n,dtype:i,refCount:s})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:n,complexTensorInfos:r}=this.data.get(e);if(n==="complex64"){const i=this.readSync(r.real.dataId),s=this.readSync(r.imag.dataId);return iu(i,s)}return f$e(this.data.get(e).values,n)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(i=>Dc(i));return xt(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return xt(e.shape,e.dtype,n)}makeOutput(e,n,r){return ka().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,e),this)}disposeData(e,n=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!n&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const n=Di();return e(),{kernelMs:Di()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){We([e],"where");const n=this.readSync(e.dataId);return cUe(e.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}QC.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zte(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const hUe=t=>{const{x:e}=t.inputs,n=t.backend;We(e,"abs");let r=new Float32Array(Se(e.shape));const i=n.data.get(e.dataId).values;return r=zte(i),n.makeOutput(r,e.shape,e.dtype)},fUe={kernelName:NT,backendName:"cpu",kernelFunc:hUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Un(t){return(e,n,r,i,s)=>{const o=dt(e,n),a=o.length,l=Xe(o),u=Se(o),h=li(s,u),d=e.length,p=n.length,g=Xe(e),y=Xe(n),b=zp(e,o),x=zp(n,o);if(b.length+x.length===0)for(let w=0;w<h.length;++w)h[w]=t(r[w%r.length],i[w%i.length]);else for(let w=0;w<h.length;++w){const C=ym(w,a,l),E=C.slice(-d);b.forEach(N=>E[N]=0);const _=Ha(E,d,g),A=C.slice(-p);x.forEach(N=>A[N]=0);const P=Ha(A,p,y);h[w]=t(r[_],i[P])}return[h,o]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function os(t){const{inputs:e,backend:n}=t,{real:r,imag:i}=e,s=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,a=n.makeTensorInfo(r.shape,"complex64"),l=n.data.get(a.dataId);return l.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",s),imag:n.makeTensorInfo(i.shape,"float32",o)},a}const dUe={kernelName:IO,backendName:"cpu",kernelFunc:os};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mS(t,e,n="float32"){if(n==="complex64"){const i=mS(t,e,"float32"),s=mS(t,e,"float32");return os({inputs:{real:i,imag:s},backend:t})}const r=ui(Se(e),n);return t.makeTensorInfo(e,n,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function al(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const pUe={kernelName:e0,backendName:"cpu",kernelFunc:al};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Af(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.data.get(r.dataId).complexTensorInfos.real,s=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,s)}const mUe={kernelName:YO,backendName:"cpu",kernelFunc:Af};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ute(t,e,n,r){if(r==="int32"){const i=Int32Array.from(t);return[e,"int32",i]}if(r==="bool"){const i=Bf([0],n),[s,o]=Un((a,l)=>a!==l?1:0)(e,[],t,i,"bool");return[o,"bool",s]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function Lc(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dtype:s}=r;if(s==="complex64"){if(i.dtype==="complex64")return al({inputs:{x:i},backend:n});const h=mS(n,i.shape,i.dtype),d=Lc({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),p=os({inputs:{real:d,imag:h},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),p}if(i.dtype==="complex64"){const h=Af({inputs:{input:i},backend:n}),d=Lc({inputs:{x:h},backend:n,attrs:{dtype:s}});return n.disposeIntermediateTensorInfo(h),d}if(!uQ(i.dtype,s)){const h=al({inputs:{x:i},backend:n});return{dataId:h.dataId,shape:h.shape,dtype:s}}const o=n.data.get(i.dataId).values,[a,l,u]=Ute(o,i.shape,i.dtype,s);return n.makeTensorInfo(a,l,u)}const gUe={kernelName:zv,backendName:"cpu",kernelFunc:Lc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yr(t,e,n,r){return n==null?({inputs:i,backend:s})=>{const{a:o,b:a}=i,l=s;We([o,a],t);const u=l.data.get(o.dataId).values,h=l.data.get(a.dataId).values,d=o.dtype==="string"?su(u):u,p=o.dtype==="string"?su(h):h,g=r||o.dtype,[y,b]=e(o.shape,a.shape,d,p,g);return l.makeTensorInfo(b,g,y)}:({inputs:i,backend:s})=>{const{a:o,b:a}=i,l=s;if(o.dtype==="complex64"||a.dtype==="complex64"){const u=Lc({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),h=l.data.get(u.dataId),d=h.complexTensorInfos.real,p=h.complexTensorInfos.imag,g=l.data.get(d.dataId).values,y=l.data.get(p.dataId).values,b=Lc({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),x=l.data.get(b.dataId),w=x.complexTensorInfos.real,C=x.complexTensorInfos.imag,E=l.data.get(w.dataId).values,_=l.data.get(C.dataId).values,[A,P,N]=n(o.shape,a.shape,g,y,E,_),R=l.makeTensorInfo(N,"float32",A),D=l.makeTensorInfo(N,"float32",P),O=os({inputs:{real:R,imag:D},backend:l});return l.disposeIntermediateTensorInfo(u),l.disposeIntermediateTensorInfo(b),l.disposeIntermediateTensorInfo(R),l.disposeIntermediateTensorInfo(D),O}else{const u=l.data.get(o.dataId).values,h=l.data.get(a.dataId).values,d=r||o.dtype,[p,g]=e(o.shape,a.shape,u,h,d);return l.makeTensorInfo(g,d,p)}}}function $M(t){return(e,n,r,i,s,o)=>{const a=dt(e,n),l=Se(a),u=a.length,h=Xe(a),d=li("float32",l),p=li("float32",l),g=zp(e,a),y=zp(n,a),b=iu(r,i),x=iu(s,o),w=e.length,C=Xe(e),E=n.length,_=Xe(n);if(g.length+y.length===0)for(let A=0;A<d.length;A++){const P=A%b.length,N=A%x.length,R=t(b[P*2],b[P*2+1],x[N*2],x[N*2+1]);d[A]=R.real,p[A]=R.imag}else for(let A=0;A<d.length;A++){const P=ym(A,u,h),N=P.slice(-w);g.forEach(F=>N[F]=0);const R=Ha(N,w,C),D=P.slice(-E);y.forEach(F=>D[F]=0);const O=Ha(D,E,_),k=t(b[R*2],b[R*2+1],x[O*2],x[O*2+1]);d[A]=k.real,p[A]=k.imag}return[d,p,a]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jte=Un(((t,e)=>t+e)),yUe=$M(((t,e,n,r)=>({real:t+n,imag:e+r}))),Wp=yr(vm,jte,yUe),vUe={kernelName:vm,backendName:"cpu",kernelFunc:Wp};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OM(t,e,n,r,i){const s=Se(r),o=ui(i,n);for(let a=0;a<t.length;a++){const l=t[a];if(l<0)throw new Error("Input x must be non-negative!");l>=i||(s>0?o[l]+=e[a]:o[l]+=1)}return o}function Wte(t,e,n,r=!1){const i=t.shape[0],s=t.shape[1],o=xt([i,n],e.dtype);for(let a=0;a<i;a++)for(let l=0;l<s;l++){const u=t.get(a,l);if(u<0)throw new Error("Input x must be non-negative!");u>=n||(r?o.set(1,a,u):e.size>0?o.set(o.get(a,u)+e.get(a,l),a,u):o.set(o.get(a,u)+1,a,u))}return o}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gte=Un(((t,e)=>t&e)),bUe=yr(EO,Gte),xUe={kernelName:EO,backendName:"cpu",kernelFunc:bUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cl(t){return(e,n,r)=>{const i=Ln(n,e.length);for(let s=0;s<e.length;++s)i[s]=t(e[s],r);return i}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yt(t,e,n){const r=cl(e);return Qc(t,r,n)}function Qc(t,e,n){return({inputs:r,attrs:i,backend:s})=>{const{x:o}=r;We(o,t);const a=s,l=a.data.get(o.dataId).values;let u;if(o.dtype==="string"){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");u=su(l)}else u=l;const h=n||o.dtype,d=e(u,h,i);return a.makeTensorInfo(o.shape,h,d)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hte=cl(t=>Math.ceil(t)),wUe=Qc(Uv,Hte),SUe={kernelName:Uv,backendName:"cpu",kernelFunc:wUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qte(t,e,n,r){const i=Ln(n,Se(e));if(r&&n!=="string"){let s=0;t.forEach(o=>{const a=Se(o.shape);i.set(o.vals,s),s+=a})}else{let s=0;t.forEach(o=>{const a=n==="string"?su(o.vals):o.vals;let l=0;for(let u=0;u<o.shape[0];++u){const h=u*e[1]+s;for(let d=0;d<o.shape[1];++d)i[h+d]=a[l++]}s+=o.shape[1]})}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kte=Un((t,e)=>t===e?1:0),Xte=yr(GT,Kte,null,"bool"),TUe={kernelName:GT,backendName:"cpu",kernelFunc:Xte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yte=cl(t=>Math.exp(t)),Qte=Qc(Xv,Yte,"float32"),CUe={kernelName:Xv,backendName:"cpu",kernelFunc:Qte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zte=cl(t=>Math.expm1(t)),EUe=Qc(Yv,Zte),IUe={kernelName:Yv,backendName:"cpu",kernelFunc:EUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jte=cl(t=>Math.floor(t)),_Ue=Qc(Qv,Jte),AUe={kernelName:Qv,backendName:"cpu",kernelFunc:_Ue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ene=Un((t,e)=>Math.floor(t/e)),kUe=yr(Zv,ene,null,"int32"),NUe={kernelName:Zv,backendName:"cpu",kernelFunc:kUe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tne(t,e,n,r,i,s,o,a,l){const u=xt([r,s],n);for(let h=0;h<r;h++){const d=[];let p=0;for(let g=0;g<i;g++){const y=t[h*i+g];p+=y*o[g],d.push(y)}if(p<0||p>=l/s)throw new Error(`Invalid indices: ${d} does not index into ${a}`);for(let g=0;g<s;g++)u.values[h*s+g]=e.get(...e.indexToLoc(p*s+g))}return u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nne(t,e,n){const r=xt(n,t.dtype);for(let i=0;i<r.size;++i){const o=r.indexToLoc(i).slice(),a=o[0],l=o[2],u=e.locToIndex([a,l]);o[2]=e.values[u];const h=t.locToIndex(o);0<=h&&h<t.values.length&&(r.values[i]=t.values[h])}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rne=Un((t,e)=>t>e?1:0),RUe=yr(XT,rne,null,"bool"),DUe={kernelName:XT,backendName:"cpu",kernelFunc:RUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ine=Un((t,e)=>t>=e?1:0),$Ue=yr(Jv,ine,null,"bool"),OUe={kernelName:Jv,backendName:"cpu",kernelFunc:$Ue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sne=Un((t,e)=>t<e?1:0),PUe=yr(QT,sne,null,"bool"),MUe={kernelName:QT,backendName:"cpu",kernelFunc:PUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const one=Un((t,e)=>t<=e?1:0),LUe=yr(ZT,one,null,"bool"),FUe={kernelName:ZT,backendName:"cpu",kernelFunc:LUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ane(t,e,n){const r=(e-t)/(n-1),i=ui(n,"float32");i[0]=t;for(let s=1;s<i.length;s++)i[s]=i[s-1]+r;return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lne=cl(t=>Math.log(t)),VUe=Qc(i0,lne),BUe={kernelName:i0,backendName:"cpu",kernelFunc:VUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function une(t,e,n,r){const i=li(r,Se(n));for(let s=0;s<i.length;++s){const o=s*e;let a=t[o];for(let l=0;l<e;++l){const u=t[o+l];(Number.isNaN(u)||u>a)&&(a=u)}i[s]=a}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cne=Un(((t,e)=>Math.max(t,e))),zUe=yr(o0,cne),UUe={kernelName:o0,backendName:"cpu",kernelFunc:zUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hne=Un(((t,e)=>Math.min(t,e))),jUe=yr(a0,hne),WUe={kernelName:a0,backendName:"cpu",kernelFunc:jUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PM=Un(((t,e)=>t*e)),GUe=$M(((t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n}))),ZC=yr(u0,PM,GUe),HUe={kernelName:u0,backendName:"cpu",kernelFunc:ZC};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fne(t,e,n){const r=jc(-1,n);return PM([],e,r,t,n)}function qUe(t){const{inputs:e,backend:n}=t,{x:r}=e;We(r,"neg");const i=n.data.get(r.dataId).values,[s,o]=fne(i,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,s)}const KUe={kernelName:uC,backendName:"cpu",kernelFunc:qUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dne=Un(((t,e)=>t!==e?1:0)),XUe=yr(cC,dne,null,"bool"),YUe={kernelName:cC,backendName:"cpu",kernelFunc:XUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MM(t,e,n,r,i){const s=e.length,o=Se(e),a=Xe(e),l=Xe(i),u=li(n,Se(i));for(let h=0;h<o;++h){const d=ym(h,s,a),p=new Array(d.length);for(let y=0;y<p.length;y++)p[y]=d[r[y]];const g=Ha(p,s,l);u[g]=t[h]}return u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wi(t){const{inputs:e,attrs:n,backend:r}=t,{x:i}=e,{perm:s}=n;We(i,"transpose");const o=i.shape.length,a=new Array(o);for(let d=0;d<a.length;d++)a[d]=i.shape[s[d]];const l=r.data.get(i.dataId).values,u=MM(l,i.shape,i.dtype,s,a);return{dataId:r.write(u,a,i.dtype),shape:a,dtype:i.dtype}}const QUe={kernelName:pp,backendName:"cpu",kernelFunc:Wi};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pne(t,e,n,r){const[i,s]=Rr(t,r),o=fs(e,"int32"),a=ui(Se(i),o),l=Se(s);for(let u=0;u<a.length;++u){const h=u*l;let d=1;for(let p=0;p<l;++p)d*=n[h+p];a[u]=d}return{outVals:a,outShape:i,outDtype:o}}function ZUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r;We(i,"prod");const a=i.shape.length,l=wt(s,i.shape),u=Rn(l,a);let h=l,d=i;const p=[];u!=null&&(d=Wi({inputs:{x:i},backend:n,attrs:{perm:u}}),p.push(d),h=Bn(h.length,a));const g=n.data.get(d.dataId).values,{outVals:y,outShape:b,outDtype:x}=pne(d.shape,d.dtype,g,h);let w=b;return o&&(w=Qn(b,l)),p.forEach(C=>n.disposeIntermediateTensorInfo(C)),n.makeTensorInfo(w,x,y)}const JUe={kernelName:gC,backendName:"cpu",kernelFunc:ZUe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eje(t,e,n){t.forEach((r,i)=>{if(r<0||r>=n){const s=ym(i,e.length,Xe(e)).join(",");throw new Error(`indices[${s}] = ${r} is not in [0, ${n})`)}})}function tje(t,e){for(let n=0;n<t.length;++n){const r=t[n],i=n===t.length-1?e:t[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>i)throw new Error("Ragged splits must not point past values");for(let s=1;s<r.length;++s)if(r[s-1]>r[s])throw new Error("Ragged splits must be sorted in ascending order")}}function nje(t,e,n,r){const i=[];let s=0;const o=e.length-1+n.length,a=new Array(o).fill(null).map(()=>[0]);tje(n,r);let l=1;for(let u=0;u<e.length-1;++u){l*=e[u];const h=e[u+1];for(let d=1;d<l+1;++d)a[u].push(d*h)}for(let u=0;u<t.length;++u){let h=t[u],d=t[u]+1;for(let p=0;p<n.length;++p){const g=n[p],y=p+e.length-1;if(y>=0){const b=a[y],x=b[b.length-1]-g[h];for(let w=h;w<d;++w)a[y].push(g[w+1]+x)}h=g[h],d=g[d]}d!==h&&(i.push([h,d]),s+=d-h)}return{outSplits:a,valueSlices:i,numValues:s}}function rje(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n].length,i=Ln("int32",r);e.push(i),t[n].forEach((s,o)=>i[o]=s)}return e}function CG(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let r=e;r<t.length;r++)n[e-1]*=t[r];return n}function ije(t,e,n,r,i,s){const o=CG(e,2)[1],a=CG(s,2)[1];let l=0;for(const u of n)for(let h=u[0];h<u[1];++h){for(let d=0;d<r;++d)i[l*a+d]=t[h*o+d];++l}}function sje(t,e,n,r,i){const s=e.slice();s[0]=i;const o=Ln(n,Se(s)),a=t.length,l=a===0?0:a/e[0];return ije(t,e,r,l,o,s),[o,s]}function mne(t,e,n,r,i,s,o,a){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const l=e[0][0]-1;if(eje(s,o,l),r.length===0)throw new Error("params.rank must be nonzero");const u=r[0],{outSplits:h,valueSlices:d,numValues:p}=nje(s,o,t,u),g=rje(h),y=sje(n,r,i,d,p);return[g,y[0],y[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EG=2147483647;function gne(t,e,n,r,i,s,o){if(e.length>1)throw new Error("starts must be a scalar or vector");if(i.length>1)throw new Error("limits must be a scalar or vector");if(o.length>1)throw new Error("deltas must be a scalar or vector");const a=e.length===0,l=i.length===0,u=o.length===0,h=[];a||h.push(e[0]),l||h.push(i[0]),u||h.push(o[0]);for(let x=1;x<h.length;++x)if(h[x]!==h[x-1])throw new Error("starts, limits, and deltas must have the same shape");const d=h.length===0?1:h[0],p=Ln("int32",d+1);p[0]=0;for(let x=0;x<d;++x){const w=a?t[0]:t[x],C=l?r[0]:r[x],E=u?s[0]:s[x];if(E===0)throw new Error("Requires delta != 0");let _;if(E>0&&C<w||E<0&&C>w)_=0;else if(_=Math.ceil(Math.abs((C-w)/E)),_>EG)throw new Error(`Requires ((limit - start) / delta) <= ${EG}`);p[x+1]=p[x]+_}const g=p[d],y=Ln(n,g);let b=0;for(let x=0;x<d;++x){const w=p[x+1]-p[x];let C=a?t[0]:t[x];const E=u?s[0]:s[x];for(let _=0;_<w;++_)y[b++]=C,C+=E}return[p,y]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var ro=Wo;class gS{constructor(e,n,r,i,s,o,a,l,u,h){this.shape=e,this.shapeShape=n,this.values=r,this.valuesShape=i,this.valuesDType=s,this.defaultValue=o,this.defaultValueShape=a,this.rowPartitionValues=l,this.rowPartitionValuesShapes=u,this.rowPartitionTypes=tJ(h),this.raggedRank=nJ(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===ro.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===ro.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case ro.VALUE_ROWIDS:return gS.getMaxWidthValueRowID(n);case ro.ROW_SPLITS:return gS.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${ro[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let r=0;for(let i=0;i<n-1;++i){const s=e[i+1]-e[i];s>r&&(r=s)}return r}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let r=0,i=e[0],s=0;for(let o=1;o<n;++o){const a=e[o];a!==i&&(i=a,s=Math.max(o-r,s),r=o)}return Math.max(n-r,s)}tensorShapeFromTensor(e,n,r=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return _G(e,r)}calculateOutputSize(e){const n=this.valuesShape,r=this.defaultValueShape;rJ(r,n);const i=this.tensorShapeFromTensor(this.shape,this.shapeShape),o=eJ(this.raggedRank,i,n);o[0]<0&&(o[0]=e);for(let a=1;a<=this.raggedRank;++a)o[a]<0&&(o[a]=this.getMaxWidth(a));return o}calculateFirstParentOutputIndex(e,n,r){const i=Math.min(e,r),s=[];let o=0;for(let a=0;a<i;++a,o+=n)s.push(o);for(let a=i;a<e;++a)s.push(-1);return U(s.length===e,()=>"Final length of result must be equal to firstDimension."),s}calculateOutputIndexRowSplit(e,n,r,i){const s=e.length,o=[];for(let a=0;a<s-1;++a){const l=e[a+1]-e[a];let u=Math.min(i,l),h=n[a];h===-1&&(u=0);for(let d=0;d<u;++d)o.push(h),h+=r;for(let d=0;d<l-u;++d)o.push(-1)}if(s>0&&o.length!==e[s-1])throw new Error("Invalid row split size.");return o}calculateOutputIndexValueRowID(e,n,r,i){const s=e.length,o=[];if(s===0)return[];let a=0,l=e[0];if(l>=n.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${n.length}`);let u=n[l];o.push(u);for(let h=1;h<s;++h){const d=e[h];if(d===l)u>=0&&(++a,a<i?u+=r:u=-1);else{if(a=0,l=d,d>=n.length)throw new Error(`Got nextValueRowId=${d} which is not less than ${n.length}`);u=n[d]}o.push(u)}if(o.length!==e.length)throw new Error("Invalid row ids.");return o}calculateOutputIndex(e,n,r,i){const s=this.getRowPartitionTensor(e),o=this.getRowPartitionTypeByDimension(e);switch(o){case ro.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(s,n,r,i);case ro.ROW_SPLITS:if(s.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${s.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(s,n,r,i);default:throw new Error(`Unsupported partition type: ${ro[o]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case ro.FIRST_DIM_SIZE:return e[0];case ro.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case ro.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${ro[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),r=this.calculateOutputSize(n),i=new Array(this.raggedRank+1);i[i.length-1]=1;for(let l=i.length-2;l>=0;--l)i[l]=i[l+1]*r[l+1];const s=_G(r,!1),o=Ln(this.valuesDType,Se(s));if(i[0]*r[0]>0){let l=this.calculateFirstParentOutputIndex(n,i[0],r[0]);for(let u=1;u<=this.raggedRank;++u)l=this.calculateOutputIndex(u-1,l,i[u],r[u]);this.setOutput(this.raggedRank,l,o,s)}return[s,o]}setOutput(e,n,r,i){if(r.length===0)return;const s=this.values,o=r;let a=i.slice();a=a.slice(e+1);const l=Se(a),u=n.length;let h=this.defaultValue;if(h.length!==l&&h.length!==1){const y=this.defaultValueShape;fe(()=>{const b=oe(h,y);h=yy(b,a).dataSync()})}let d=0,p=0,g=0;for(let y=0;y<=u;++y){let b=y<u?n[y]:-1;if(b===g){++g;continue}if(p<g){const x=s.subarray(d*l),w=o.subarray(p*l),C=(g-p)*l;IG(w,x,C)}if(y>=u){const x=r.length;b=Math.floor(x/l)}if(b>g)if(this.defaultValue.length===1)o.subarray(g*l,b*l).fill(this.defaultValue[0]),g=b;else for(;b>g;){const x=o.slice(g*l);IG(x,h,l),++g}b<0?(d=y+1,p=g):(d=y,p=g,g=p+1)}}}function IG(t,e,n){for(let r=0;r<n;r++)t[r]=e[r]}function _G(t,e){const n=[];for(let r of t){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function yne(t,e,n,r,i,s,o,a,l,u){return new gS(t,e,n,r,i,s,o,a,l,u).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vne(t,e,n,r){const i=t===e,s=t<e&&n<0,o=e<t&&n>1;if(i||s||o)return ui(0,r);const a=Math.abs(Math.ceil((e-t)/n)),l=ui(a,r);e<t&&n===1&&(n=-1),l[0]=t;for(let u=1;u<l.length;u++)l[u]=l[u-1]+n;return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bne=cl(t=>1/Math.sqrt(t)),oje=Qc(m0,bne),aje={kernelName:m0,backendName:"cpu",kernelFunc:oje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kh(t,e,n,r,i,s,o,a,l,u){const h=[r/i,i],d=t.values,p=e.values;if(r===0)return xt(n,e.dtype);const g=l instanceof Fr?l:xt(h,e.dtype);typeof l=="string"||typeof l=="number"?g.values.fill(l):typeof l=="boolean"&&g.values.fill(+l);for(let y=0;y<s;y++){const b=[];let x=0;for(let w=0;w<o;w++){const C=d[y*o+w];b.push(C),x+=C*a[w]}if(x<0||x>=r/i)throw new Error(`Invalid indices: ${b} does not index into ${n}`);for(let w=0;w<i;w++)u?g.values[x*i+w]+=p[y*i+w]:g.values[x*i+w]=e.rank===0?p[0]:p[y*i+w]}return g}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lje=cl(t=>1/(1+Math.exp(-t))),xne=Yt(x0,t=>1/(1+Math.exp(-t))),uje={kernelName:x0,backendName:"cpu",kernelFunc:xne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wne(t,e,n,r,i){const s=jP(r,e,n),o=Se(n),a=Xe(r);if(s){const d=WP(e,a);return i==="string"?t.slice(d,d+o):t.subarray(d,d+o)}const l=i==="string"?su(t):t,u=xt(r,i,l),h=xt(n,i);for(let d=0;d<h.size;++d){const p=h.indexToLoc(d),g=p.map((y,b)=>y+e[b]);h.set(u.get(...g),...p)}return i==="string"?TJ(h.values):h.values}function kf(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:s,size:o}=r;We(i,"slice");const[a,l]=LC(i,s,o);zP(i,a,l);const u=n.data.get(i.dataId).values,h=wne(u,a,l,i.shape,i.dtype);return n.makeTensorInfo(l,i.dtype,h)}const cje={kernelName:SC,backendName:"cpu",kernelFunc:kf};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sne(t,e,n,r,i,s,o){const a=e[0],l=s[0],u=new Array(l),h=new Array(a),d=e[1];if(l===0){if(a!==0)throw new Error(cJ(a));const x=Ln(n,0),w=Ln(i,0);return[x,[0,d],w,u,h]}let p=!0,g=0;const y=new Array(l).fill(0);for(let x=0;x<a;++x){const w=t[x*d];if(w<0)throw new Error(hJ(x,w));if(w>=l)throw new Error(fJ(x,w,l));++y[w],p=p&&w>=g,g=w}let b=!0;for(let x=0;x<l;++x){const w=y[x]===0;u[x]=w,b=b&&!w,y[x]=Math.max(y[x],1),x>0&&(y[x]+=y[x-1])}if(b&&p){const x=t,w=r;for(let C=0;C<a;++C)h[C]=C;return[x,[a,d],w,u,h]}else{const x=y[l-1],w=Ln(n,x*d),C=Ln(i,x),E=new Array(l).fill(0);for(let _=0;_<a;++_){const A=t[_*d],P=E[A],N=(A===0?0:y[A-1])+P;E[A]++;for(let R=0;R<d;++R)w[N*d+R]=t[_*d+R];C[N]=r[_],h[_]=N}for(let _=0;_<l;++_)if(E[_]===0){const P=_===0?0:y[_-1];w[P*d+0]=_;for(let N=1;N<d;++N)w[P*d+N]=0;C[P]=o}return[w,[x,d],C,u,h]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tne(t,e,n,r,i){const s=Se(r),o=e[0],a=i.length,l=[];let u=1,h=-1;for(let x=0;x<a;++x){const w=i[x];if(w===-1){if(h!==-1)throw new Error(dJ(h,x));h=x,l.push(1)}else{if(w<0)throw new Error(pJ(x,w));u*=w,l.push(w)}}if(h!==-1){if(u<=0)throw new Error(mJ());const x=Math.trunc(s/u);if(u*x!==s)throw new Error(gJ(r,l));l[h]=x}if(Se(l)!==s)throw new Error(yJ(r,l));const p=r.length,g=[];if(p>0){g[p-1]=1;for(let x=p-2;x>=0;--x)g[x]=g[x+1]*r[x+1]}const y=[];if(a>0){y[a-1]=1;for(let x=a-2;x>=0;--x)y[x]=y[x+1]*l[x+1]}const b=Ln(n,o*a);for(let x=0;x<o;++x){let w=0;for(let C=0;C<p;++C)w+=t[x*p+C]*g[C];for(let C=0;C<a;++C)b[x*a+C]=Math.trunc(w/y[C]),w%=y[C]}return[b,[o,a],l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LM(t,e,n,r,i,s=!1,o=0){const a=r.length,l=[e[0],t.length/e[0]],u=l[1],d=a>0?i[a-1]+1:0;if(d<0)throw new Error(WN());const p=e.slice();p[0]=d;const g=p.reduce((E,_)=>E*_,1),y=Ln(n,g);if(a===0)return d>0&&y.fill(o),[y,p];if(d<=0)throw new Error(WN());let b=0,x=1,w=0,C=i[b];for(;;){let E=0;if(x<a){if(E=i[x],C===E){++x;continue}if(C>=E)throw new Error(vJ())}if(C<0||C>=d)throw new Error(bJ(C,d));C>w&&y.fill(o,w*u,C*u);for(let _=b;_<x;++_){const A=r[_];if(A<0||A>=l[0])throw new Error(xJ(_,r[_],l[0]));for(let P=0;P<u;P++)y[C*u+P]+=t[A*u+P]}if(s)for(let _=0;_<u;_++)y[C*u+_]/=x-b;if(b=x,++x,w=C+1,C=E,x>a)break}return w<d&&y.fill(o,w*u,d*u),[y,p]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hje=cl(t=>Math.sqrt(t)),fje=Yt(S0,t=>Math.sqrt(t)),dje={kernelName:S0,backendName:"cpu",kernelFunc:fje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cne=Un(((t,e)=>{const n=t-e;return n*n})),pje=yr(T0,Cne),mje={kernelName:T0,backendName:"cpu",kernelFunc:pje};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ene=cl((t,e)=>{const{pattern:n,replaceGlobal:r,rewrite:i}=e;return t.replace(new RegExp(n,r?"g":""),i)}),gje=Qc(eP,Ene),yje={kernelName:eP,backendName:"cpu",kernelFunc:gje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ine(t,e,n,r){const i=xt(t,e.dtype);for(let s=0;s<i.size;s++){const o=i.indexToLoc(s),a=new Array(o.length);for(let l=0;l<a.length;l++)a[l]=o[l]*n[l]+r[l];i.set(e.get(...a),...o)}return i}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vje{constructor(e,n,r,i,s,o){this.separator=yc(e),this.nGramWidths=n,this.leftPad=yc(r),this.rightPad=yc(i),this.padWidth=s,this.preserveShort=o}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const r=this.getPadWidth(n);return Math.max(0,e+2*r-n+1)}createNGrams(e,n,r,i,s,o){for(let a=0;a<s;++a){const l=this.getPadWidth(o),u=Math.max(0,l-a),h=Math.max(0,l-(s-(a+1))),d=o-(u+h),p=n+(u>0?0:a-l);let g=0;g+=u*this.leftPad.length;for(let C=0;C<d;++C)g+=e[p+C].length;g+=h*this.rightPad.length;const y=u+h+d-1;g+=y*this.separator.length,r[i+a]=new Uint8Array(g);const b=r[i+a];let x=0;const w=C=>C.forEach(E=>b[x++]=E);for(let C=0;C<u;++C)w(this.leftPad),w(this.separator);for(let C=0;C<d-1;++C)w(e[p+C]),w(this.separator);if(d>0){w(e[p+d-1]);for(let C=0;C<h;++C)w(this.separator),w(this.rightPad)}else{for(let C=0;C<h-1;++C)w(this.rightPad),w(this.separator);w(this.rightPad)}}}compute(e,n){const r=e.length,i=n.length;if(i>0){let l=n[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let u=1;u<i;++u){let h=n[u]>=l;if(h=h&&n[u]<=r,!h)throw new Error(`Invalid split value ${n[u]}, must be in [${l}, ${r}]`);l=n[u]}if(l!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${l}`)}const s=i-1,o=Ln("int32",i);if(r===0||i===0){const l=new Array(r);for(let u=0;u<=s;++u)o[u]=0;return[l,o]}o[0]=0;for(let l=1;l<=s;++l){const u=n[l]-n[l-1];let h=0;this.nGramWidths.forEach(d=>{h+=this.getNumNGrams(u,d)}),this.preserveShort&&u>0&&h===0&&(h=1),o[l]=o[l-1]+h}const a=new Array(o[s]);for(let l=0;l<s;++l){const u=n[l];let h=o[l];if(this.nGramWidths.forEach(d=>{const p=n[l+1]-n[l],g=this.getNumNGrams(p,d);this.createNGrams(e,u,a,h,g,d),h+=g}),this.preserveShort&&h===o[l]){const d=n[l+1]-n[l];if(d===0)continue;const p=d+2*this.padWidth;this.createNGrams(e,u,a,h,1,p)}}return[a,o]}}function _ne(t,e,n,r,i,s,o,a){return new vje(n,r,i,s,o,a).compute(t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bje(t,e,n,r){if(!t.length)return;if(e.length===0){for(let s=0;s<t.length;++s)r.push(t.subarray(s,s+1));return}if(e.length===1){const s=e[0];let o=t.indexOf(s);for(;o!==-1;){const a=t.subarray(0,o);(!n||a.length!==0)&&r.push(a),t=t.subarray(o+1),o=t.indexOf(s)}(!n||t.length!==0)&&r.push(t);return}let i=0;for(let s=0;s<t.length+1;s++)if(s===t.length||e.indexOf(t[s])!==-1){const o=t.subarray(i,s);(!n||o.length!==0)&&r.push(o),i=s+1}}function Ane(t,e,n){const r=t.length,i=[];let s=0,o=0;const a=new Array(r);for(let p=0;p<r;++p){const g=i.length;bje(t[p],e,n,i);const y=i.length-g;a[p]=y,s+=y,o=Math.max(o,y)}const l=Ln("int32",s*2),u=new Array(s),h=[r,o];let d=0;for(let p=0;p<r;++p)for(let g=0;g<a[p];++g)l[d*2]=p,l[d*2+1]=g,u[d]=i[d],++d;return[l,u,h]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kne(t,e){const n=Ln("int32",t.length);for(let r=0;r<t.length;++r)n[r]=N$e(t[r]).modulo(e).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nne=Un(((t,e)=>t-e)),xje=$M(((t,e,n,r)=>({real:t-n,imag:e-r}))),FM=yr(C0,Nne,xje),wje={kernelName:C0,backendName:"cpu",kernelFunc:FM};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rne(t,e){const n=new Array(t.rank);for(let i=0;i<n.length;i++)n[i]=t.shape[i]*e[i];const r=xt(n,t.dtype);for(let i=0;i<r.values.length;++i){const s=r.indexToLoc(i),o=new Array(t.rank);for(let l=0;l<o.length;l++)o[l]=s[l]%t.shape[l];const a=t.locToIndex(o);r.values[i]=t.values[a]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ty=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function Dne(t,e,n=0,r=t.length-1){for(;r>n;){if(r-n>600){const a=r-n+1,l=e-n+1,u=Math.log(a),h=.5*Math.exp(2*u/3),d=.5*Math.sqrt(u*h*(a-h)/a)*Math.sign(l-a/2),p=Math.max(n,Math.floor(e-l*h/a+d)),g=Math.min(r,Math.floor(e+(a-l)*h/a+d));Dne(t,e,p,g)}const i=t[e];let s=n,o=r;for(qd(t,n,e),ty(t[r],i)>0&&qd(t,n,r);s<o;){for(qd(t,s,o),s++,o--;ty(t[s],i)<0;)s=s+1;for(;ty(t[o],i)>0;)o=o-1}ty(t[n],i)===0?qd(t,n,o):(o=o+1,qd(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}}function $ne(t,e,n,r,i){const s=e[e.length-1],[o,a]=[t.length/s,s],l=li(n,o*r),u=li("int32",o*r);for(let d=0;d<o;d++){const p=d*a,g=t.subarray(p,p+a);let y=new Array(g.length);g.forEach((C,E)=>y[E]={value:C,index:E}),r<y.length&&(Dne(y,r),y=y.slice(0,r)),i&&y.sort(ty);const b=d*r,x=l.subarray(b,b+r),w=u.subarray(b,b+r);for(let C=0;C<r;C++)x[C]=y[C].value,w[C]=y[C].index}const h=e.slice();return h[h.length-1]=r,[xt(h,n,l),xt(h,"int32",u)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function One(t,e,n,r){const i=wt(e,n)[0],s=[1,n[0],1];for(let y=0;y<i;y++)s[0]*=n[y];s[1]=n[i];for(let y=i+1;y<n.length;y++)s[2]*=n[y];const o=new Map,a=new Int32Array(n[i]),l=new Fr(s,r,t),u=[],h=s[0]===1&&s[2]===1;for(let y=0;y<n[i];y++){let b;if(h)b=t[y].toString();else{const w=[];for(let C=0;C<s[0];C++)for(let E=0;E<s[2];E++)w.push(l.get(C,y,E));b=w.join(",")}const x=o.get(b);if(x!=null)a[y]=x;else{const w=o.size;o.set(b,w),a[y]=w,u.push(y)}}const d=s.slice();d[1]=o.size;const p=new Fr(d,r);u.forEach((y,b)=>{for(let x=0;x<s[0];x++)for(let w=0;w<s[2];w++)p.set(l.get(x,y,w),x,b,w)});const g=n.slice();return g[i]=d[1],{outputValues:p.values,outputShape:g,indices:a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sje=Object.freeze(Object.defineProperty({__proto__:null,addImpl:jte,bincountImpl:OM,bincountReduceImpl:Wte,bitwiseAndImpl:Gte,castImpl:Ute,ceilImpl:Hte,concatImpl:qte,equalImpl:Kte,expImpl:Yte,expm1Impl:Zte,floorDivImpl:ene,floorImpl:Jte,gatherNdImpl:tne,gatherV2Impl:nne,greaterEqualImpl:ine,greaterImpl:rne,lessEqualImpl:one,lessImpl:sne,linSpaceImpl:ane,logImpl:lne,maxImpl:une,maximumImpl:cne,minimumImpl:hne,multiplyImpl:PM,negImpl:fne,notEqualImpl:dne,prodImpl:pne,raggedGatherImpl:mne,raggedRangeImpl:gne,raggedTensorToTensorImpl:yne,rangeImpl:vne,rsqrtImpl:bne,scatterImpl:Kh,sigmoidImpl:lje,simpleAbsImpl:zte,sliceImpl:wne,sparseFillEmptyRowsImpl:Sne,sparseReshapeImpl:Tne,sparseSegmentReductionImpl:LM,sqrtImpl:hje,squaredDifferenceImpl:Cne,staticRegexReplaceImpl:Ene,stridedSliceImpl:Ine,stringNGramsImpl:_ne,stringSplitImpl:Ane,stringToHashBucketFastImpl:kne,subImpl:Nne,tileImpl:Rne,topKImpl:$ne,transposeImpl:MM,uniqueImpl:One},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ZQ("cpu",()=>new QC,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pne=Yt(qv,t=>t>=0?t:Math.exp(t)-1),Tje={kernelName:qv,backendName:"cpu",kernelFunc:Pne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mne(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{alpha:s}=r;We([i],"leakyRelu");const o=Se(i.shape),a=n.data.get(i.dataId).values,l=li("float32",o);for(let u=0;u<a.length;u++)l[u]=a[u]<0?s*a[u]:a[u];return n.makeTensorInfo(i.shape,"float32",l)}const Cje={kernelName:YT,backendName:"cpu",kernelFunc:Mne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Eje=Un((t,e)=>t<0?e*t:t);function Lne(t){const{inputs:e,backend:n}=t,{x:r,alpha:i}=e;We([r,i],"prelu");const s=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,[a,l]=Eje(r.shape,i.shape,s,o,"float32");return n.makeTensorInfo(l,"float32",a)}const Ije={kernelName:mC,backendName:"cpu",kernelFunc:Lne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fne=Yt(f0,t=>Math.max(0,t)),_je={kernelName:f0,backendName:"cpu",kernelFunc:Fne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vne=Yt(d0,t=>Math.min(Math.max(0,t),6)),Aje={kernelName:d0,backendName:"cpu",kernelFunc:Vne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yS(t,e,n,r,i){if(n==="linear")return al({inputs:{x:e},backend:t});if(n==="relu")return Fne({inputs:{x:e},backend:t});if(n==="elu")return Pne({inputs:{x:e},backend:t});if(n==="relu6")return Vne({inputs:{x:e},backend:t});if(n==="prelu")return Lne({inputs:{x:e,alpha:r},backend:t});if(n==="leakyrelu")return Mne({inputs:{x:e},backend:t,attrs:{alpha:i}});if(n==="sigmoid")return xne({inputs:{x:e},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mn(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{shape:s}=r,o=Se(i.shape),a=lQ(s,o),l=Se(a);U(o===l,()=>`The new shape (${a}) has ${l} elements and the old shape (${i.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`),n.incRef(i.dataId);const u=n.data.get(i.dataId);if(u.complexTensorInfos!=null){const h=u.complexTensorInfos.real,d=u.complexTensorInfos.imag;h.shape=a,d.shape=a}return{dataId:i.dataId,shape:a,dtype:i.dtype}}const kje={kernelName:yC,backendName:"cpu",kernelFunc:mn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bne(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:s}=e,{transposeA:o,transposeB:a}=r;We([i,s],"matMul");const l=i.shape.length,u=s.shape.length,h=o?i.shape[l-2]:i.shape[l-1],d=a?s.shape[u-1]:s.shape[u-2],p=o?i.shape[l-1]:i.shape[l-2],g=a?s.shape[u-2]:s.shape[u-1],y=i.shape.slice(0,-2),b=s.shape.slice(0,-2),x=Se(y),w=Se(b),E=dt(i.shape.slice(0,-2),s.shape.slice(0,-2)).concat([p,g]);U(h===d,()=>`Error in matMul: inner shapes (${h}) and (${d}) of Tensors with shapes ${i.shape} and ${s.shape} and transposeA=${o} and transposeB=${a} must match.`);const _=o?[x,h,p]:[x,p,h],A=a?[w,g,d]:[w,d,g],P=mn({inputs:{x:i},backend:n,attrs:{shape:_}}),N=mn({inputs:{x:s},backend:n,attrs:{shape:A}}),R=o?P.shape[1]:P.shape[2],D=o?P.shape[2]:P.shape[1],O=a?N.shape[1]:N.shape[2],k=Math.max(x,w),F=n.data.get(P.dataId).values,L=n.data.get(N.dataId).values,q=Xe(P.shape),Y=Xe(N.shape),[W,H,X]=o?[q[0],1,q[1]]:[q[0],q[1],1],[ee,ce,j]=a?[1,Y[1],Y[0]]:[Y[1],1,Y[0]],Q=D*O,ie=xt([k,D,O],P.dtype),me=ie.values,ve=n.blockSize;for(let _e=0;_e<k;_e++){const De=_e%x,Fe=_e%w;for(let ue=0;ue<D;ue+=ve){const Oe=Math.min(ue+ve,D);for(let Me=0;Me<O;Me+=ve){const Ce=Math.min(Me+ve,O);for(let ot=0;ot<R;ot+=ve){const He=Math.min(ot+ve,R);for(let ut=ue;ut<Oe;ut++)for(let nt=Me;nt<Ce;nt++){let Tt=0;for(let Mt=ot;Mt<He;Mt++){const qt=F[De*W+ut*H+Mt*X],Ct=L[Mt*ee+nt*ce+Fe*j];Tt+=qt*Ct}me[_e*Q+(ut*O+nt)]+=Tt}}}}}return n.disposeIntermediateTensorInfo(P),n.disposeIntermediateTensorInfo(N),n.makeTensorInfo(E,ie.dtype,ie.values)}const Nje={kernelName:PT,backendName:"cpu",kernelFunc:Bne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rje(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:s,bias:o,preluActivationWeights:a}=e,{transposeA:l,transposeB:u,activation:h,leakyreluAlpha:d}=r;let p,g,y;const b=[];p=Bne({inputs:{a:i,b:s},attrs:{transposeA:l,transposeB:u},backend:n}),o&&(g=Wp({inputs:{a:p,b:o},backend:n}),b.push(p),p=g),h&&(y=yS(n,p,h,a,d),b.push(p),p=y);for(const w of b)n.disposeIntermediateTensorInfo(w);return p}const Dje={kernelName:Xw,backendName:"cpu",kernelFunc:Rje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $je=Yt(Ov,t=>Math.acos(t)),Oje={kernelName:Ov,backendName:"cpu",kernelFunc:$je};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pje=Yt(Pv,t=>Math.acosh(t)),Mje={kernelName:Pv,backendName:"cpu",kernelFunc:Pje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lje(t){const{inputs:e,backend:n}=t,r=e;We(e,"addN");const i=r.map(a=>n.data.get(a.dataId).values),s=xt(r[0].shape,r[0].dtype),o=s.values;for(let a=0;a<r.length;a++){const l=i[a];for(let u=0;u<o.length;u++)o[u]+=l[u]}return n.makeTensorInfo(s.shape,s.dtype,s.values)}const Fje={kernelName:bO,backendName:"cpu",kernelFunc:Lje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vje(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r;We(i,"all");const a=wt(s,i.shape);let l=a;const u=Rn(l,i.shape.length);let h=i;u!=null&&(h=Wi({inputs:{x:i},backend:n,attrs:{perm:u}}),l=Bn(l.length,i.shape.length)),jr("all",l,h.shape.length);const[d,p]=Rr(h.shape,l),g=Se(p),y=ui(Se(d),h.dtype),b=n.data.get(h.dataId).values;for(let w=0;w<y.length;++w){const C=w*g;let E=b[C];for(let _=0;_<g;++_){const A=b[C+_];E=E&&A}y[w]=E}u!=null&&n.disposeIntermediateTensorInfo(h);const x=n.makeTensorInfo(d,h.dtype,y);if(o){const w=Qn(d,a),C=mn({inputs:{x},backend:n,attrs:{shape:w}});return n.disposeIntermediateTensorInfo(x),C}return x}const Bje={kernelName:xO,backendName:"cpu",kernelFunc:Vje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zje(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r;We(i,"any");const a=wt(s,i.shape);let l=a;const u=Rn(l,i.shape.length);let h=i;u!=null&&(h=Wi({inputs:{x:i},backend:n,attrs:{perm:u}}),l=Bn(l.length,i.shape.length)),jr("any",l,h.shape.length);const[d,p]=Rr(h.shape,l),g=Se(p),y=ui(Se(d),h.dtype),b=n.data.get(h.dataId).values;for(let w=0;w<y.length;++w){const C=w*g;let E=b[C];for(let _=0;_<g;++_){const A=b[C+_];E=E||A}y[w]=E}u!=null&&n.disposeIntermediateTensorInfo(h);const x=n.makeTensorInfo(d,h.dtype,y);if(o){const w=Qn(d,a),C=mn({inputs:{x},backend:n,attrs:{shape:w}});return n.disposeIntermediateTensorInfo(x),C}return x}const Uje={kernelName:wO,backendName:"cpu",kernelFunc:zje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jje(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s}=r;We(i,"argMax");let o=wt(s,i.shape);const a=Rn(o,i.shape.length);let l=i;const u=[];a!=null&&(l=Wi({inputs:{x:i},backend:n,attrs:{perm:a}}),u.push(l),o=Bn(o.length,l.shape.length)),o=[o[0]],jr("argMax",o,l.shape.length);const[h,d]=Rr(l.shape,o),p=Se(h),g=ui(p,"int32"),y=Se(d),b=n.data.get(l.dataId).values;for(let x=0;x<g.length;++x){const w=x*y;let C=b[w],E=0;for(let _=0;_<y;++_){const A=b[w+_];A>C&&(C=A,E=_)}g[x]=E}return u.forEach(x=>n.disposeIntermediateTensorInfo(x)),n.makeTensorInfo(h,"int32",g)}const Wje={kernelName:RT,backendName:"cpu",kernelFunc:jje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gje(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s}=r;We(i,"argMin");let o=wt(s,i.shape);const a=Rn(o,i.shape.length);let l=i;const u=[];a!=null&&(l=Wi({inputs:{x:i},backend:n,attrs:{perm:a}}),u.push(l),o=Bn(o.length,l.shape.length)),o=[o[0]],jr("argMin",o,l.shape.length);const[h,d]=Rr(l.shape,o),p=Se(h),g=ui(p,"int32"),y=Se(d),b=n.data.get(l.dataId).values;for(let x=0;x<g.length;++x){const w=x*y;let C=b[w],E=0;for(let _=0;_<y;++_){const A=b[w+_];A<C&&(C=A,E=_)}g[x]=E}return u.forEach(x=>n.disposeIntermediateTensorInfo(x)),n.makeTensorInfo(h,"int32",g)}const Hje={kernelName:DT,backendName:"cpu",kernelFunc:Gje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qje=Yt(Mv,t=>Math.asin(t)),Kje={kernelName:Mv,backendName:"cpu",kernelFunc:qje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xje=Yt(Lv,t=>Math.asinh(t)),Yje={kernelName:Lv,backendName:"cpu",kernelFunc:Xje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qje=Yt(Fv,t=>Math.atan(t)),Zje={kernelName:Fv,backendName:"cpu",kernelFunc:Qje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jje=Un((t,e)=>Math.atan2(t,e)),e6e=yr(Bv,Jje),t6e={kernelName:Bv,backendName:"cpu",kernelFunc:e6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n6e=Yt(Vv,t=>Math.atanh(t)),r6e={kernelName:Vv,backendName:"cpu",kernelFunc:n6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VM(t,e,n,r,i,s){const o=i.strideHeight,a=i.strideWidth,l=i.dilationHeight,u=i.dilationWidth,h=i.effectiveFilterHeight,d=i.effectiveFilterWidth,p=i.padInfo.top,g=i.padInfo.left,y=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,b=xt(i.outShape,n),x=b.values,w=i.outShape[1]*i.outShape[2]*i.outShape[3],C=i.outShape[2]*i.outShape[3],E=i.outShape[3];for(let _=0;_<i.batchSize;++_){const A=_*w,P=_*r[0];for(let N=0;N<i.inChannels;++N)for(let R=0;R<i.outHeight;++R){const D=R*o-p,O=Math.max(0,D),k=Math.min(i.inHeight,h+D),F=A+R*C;for(let L=0;L<i.outWidth;++L){const q=L*a-g,Y=Math.max(0,q),W=Math.min(i.inWidth,d+q);let H=y,X=0,ee=0;for(let j=O;j<k;j+=l){const Q=P+j*r[1];for(let ie=Y;ie<W;ie+=u){const me=Q+ie*r[2],ve=t[me+N];s==="max"&&ve>H?H=ve:s==="avg"&&(X+=ve,ee++)}if(isNaN(H))break}const ce=F+L*E+N;x[ce]=s==="avg"?X/ee:H}}}return b}function zne(t,e,n,r,i=!1,s=!1){const o=xt(r.outShape,"int32"),a=r.strideHeight,l=r.strideWidth,u=r.dilationHeight,h=r.dilationWidth,d=r.effectiveFilterHeight,p=r.effectiveFilterWidth,g=r.padInfo.top,y=r.padInfo.left,b=xt(e,n,t);for(let x=0;x<r.batchSize;++x)for(let w=0;w<r.inChannels;++w)for(let C=0;C<r.outHeight;++C){const E=C*a-g;let _=E;for(;_<0;)_+=u;const A=Math.min(r.inHeight,d+E);for(let P=0;P<r.outWidth;++P){const N=P*l-y;let R=N;for(;R<0;)R+=h;const D=Math.min(r.inWidth,p+N);let O=Number.NEGATIVE_INFINITY,k=-1;for(let F=_;F<A;F+=u){const L=F-E;for(let q=R;q<D;q+=h){const Y=q-N,W=b.get(x,F,q,w);W>O&&(O=W,i?k=s?((x*r.inHeight+F)*r.inWidth+q)*r.inChannels+w:(F*r.inWidth+q)*r.inChannels+w:k=L*p+Y)}}o.set(k,x,C,P,w)}}return o}function Une(t,e,n,r,i,s){const o=i.strideDepth,a=i.strideHeight,l=i.strideWidth,u=i.dilationDepth,h=i.dilationHeight,d=i.dilationWidth,p=i.effectiveFilterDepth,g=i.effectiveFilterHeight,y=i.effectiveFilterWidth,b=i.padInfo.front,x=i.padInfo.top,w=i.padInfo.left,C=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,E=xt(i.outShape,n),_=E.values,A=i.outShape[1]*i.outShape[2]*i.outShape[3]*i.outShape[4],P=i.outShape[2]*i.outShape[3]*i.outShape[4],N=i.outShape[3]*i.outShape[4],R=i.outShape[4];for(let D=0;D<i.batchSize;++D){const O=D*A,k=D*r[0];for(let F=0;F<i.inChannels;++F)for(let L=0;L<i.outDepth;++L){const q=L*o-b;let Y=q;for(;Y<0;)Y+=u;const W=Math.min(i.inDepth,p+q),H=O+L*P;for(let X=0;X<i.outHeight;++X){const ee=X*a-x;let ce=ee;for(;ce<0;)ce+=h;const j=Math.min(i.inHeight,g+ee),Q=H+X*N;for(let ie=0;ie<i.outWidth;++ie){const me=ie*l-w;let ve=me;for(;ve<0;)ve+=d;const _e=Math.min(i.inWidth,y+me),De=Q+ie*R;let Fe=C,ue=0,Oe=0;for(let Ce=Y;Ce<W;Ce+=u){const ot=k+Ce*r[1];for(let He=ce;He<j;He+=h){const ut=ot+He*r[2];for(let nt=ve;nt<_e;nt+=d){const Tt=ut+nt*r[3],Mt=t[Tt+F];if(s==="max"&&Mt>Fe?Fe=Mt:s==="avg"&&(ue+=Mt,Oe++),isNaN(Fe))break}if(isNaN(Fe))break}if(isNaN(Fe))break}const Me=De+F;_[Me]=s==="avg"?ue/Math.max(Oe,1):Fe}}}}return E}function i6e(t,e){const n=xt(e.outShape,"int32"),r=e.strideDepth,i=e.strideHeight,s=e.strideWidth,o=e.dilationDepth,a=e.dilationHeight,l=e.dilationWidth,u=e.effectiveFilterDepth,h=e.effectiveFilterHeight,d=e.effectiveFilterWidth,p=e.padInfo.front,g=e.padInfo.top,y=e.padInfo.left;for(let b=0;b<e.batchSize;++b)for(let x=0;x<e.inChannels;++x)for(let w=0;w<e.outDepth;++w){const C=w*r-p;let E=C;for(;E<0;)E+=o;const _=Math.min(e.inDepth,u+C);for(let A=0;A<e.outHeight;++A){const P=A*i-g;let N=P;for(;N<0;)N+=a;const R=Math.min(e.inHeight,h+P);for(let D=0;D<e.outWidth;++D){const O=D*s-y;let k=O;for(;k<0;)k+=l;const F=Math.min(e.inWidth,d+O);let L=Number.NEGATIVE_INFINITY,q=-1;for(let Y=E;Y<_;Y+=o){const W=Y-C;for(let H=N;H<R;H+=a){const X=H-P;for(let ee=k;ee<F;ee+=l){const ce=ee-O,j=t.get(b,Y,H,ee,x);j>=L&&(L=j,q=W*h*d+X*h+ce)}}}n.set(q,b,w,A,D,x)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;We(i,"avgPool");const{filterSize:s,strides:o,pad:a,dimRoundingMode:l}=r,u=1;U(hi(o,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const h=Io(i.shape,s,o,u,a,l);let d;if(h.filterWidth===1&&h.filterHeight===1&&Wt(h.inShape,h.outShape))d=al({inputs:{x:i},backend:n});else{const p=n.data.get(i.dataId).values,g=Xe(i.shape),y=VM(p,i.shape,i.dtype,g,h,"avg");d=n.makeTensorInfo(h.outShape,i.dtype,y.values)}return d}const o6e={kernelName:$T,backendName:"cpu",kernelFunc:s6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:s,strides:o,pad:a,dimRoundingMode:l,dataFormat:u}=r;We(i,"avgPool3d");const h=du(i.shape,s,o,1,a,l,u),d=n.data.get(i.dataId).values,p=Une(d,i.shape,i.dtype,Xe(i.shape),h,"avg");return n.makeTensorInfo(p.shape,"float32",p.values)}const l6e={kernelName:OT,backendName:"cpu",kernelFunc:a6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u6e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,{filterSize:o,strides:a,pad:l,dimRoundingMode:u}=r;We([i,s],"avgPool3DGrad");const h=du(s.shape,o,a,1,l,u),d=h.strideDepth,p=h.strideHeight,g=h.strideWidth,y=h.filterDepth,b=h.filterHeight,x=h.filterWidth,w=h.dilationDepth,C=h.dilationHeight,E=h.dilationWidth,_=h.effectiveFilterDepth,A=h.effectiveFilterHeight,P=h.effectiveFilterWidth,N=_-1-h.padInfo.front,R=P-1-h.padInfo.left,D=A-1-h.padInfo.top,O=xt(s.shape,"float32"),k=1/(y*b*x),F=n.bufferSync(i);for(let L=0;L<h.batchSize;++L)for(let q=0;q<h.inChannels;++q)for(let Y=0;Y<h.inDepth;++Y)for(let W=0;W<h.inHeight;++W)for(let H=0;H<h.inWidth;++H){const X=Y-N,ee=W-D,ce=H-R;let j=0;for(let Q=0;Q<_;Q+=w){const ie=(X+Q)/d;if(!(ie<0||ie>=h.outDepth||Math.floor(ie)!==ie))for(let me=0;me<A;me+=C){const ve=(ee+me)/p;if(!(ve<0||ve>=h.outHeight||Math.floor(ve)!==ve))for(let _e=0;_e<P;_e+=E){const De=(ce+_e)/g;if(De<0||De>=h.outWidth||Math.floor(De)!==De)continue;const Fe=F.get(L,ie,ve,De,q);j+=Fe}}}O.set(j*k,L,Y,W,H,q)}return n.makeTensorInfo(O.shape,O.dtype,O.values)}const c6e={kernelName:TO,backendName:"cpu",kernelFunc:u6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h6e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,o=s;We([i,s],"avgPoolGrad");const{filterSize:a,strides:l,pad:u}=r,h=Io(o.shape,a,l,1,u),d=h.strideHeight,p=h.strideWidth,g=h.filterHeight,y=h.filterWidth,b=h.dilationHeight,x=h.dilationWidth,w=h.effectiveFilterHeight,C=h.effectiveFilterWidth,E=C-1-h.padInfo.left,_=w-1-h.padInfo.top,A=xt(o.shape,"float32"),P=1/(g*y),N=n.data.get(i.dataId).values,R=xt(i.shape,"float32",N);for(let D=0;D<h.batchSize;++D)for(let O=0;O<h.inChannels;++O)for(let k=0;k<h.inHeight;++k)for(let F=0;F<h.inWidth;++F){const L=k-_,q=F-E;let Y=0;for(let W=0;W<w;W+=b){const H=(L+W)/d;if(!(H<0||H>=h.outHeight||Math.floor(H)!==H))for(let X=0;X<C;X+=x){const ee=(q+X)/p;if(ee<0||ee>=h.outWidth||Math.floor(ee)!==ee)continue;const ce=R.get(D,H,ee,O);Y+=ce}}A.set(Y*P,D,k,F,O)}return n.makeTensorInfo(A.shape,A.dtype,A.values)}const f6e={kernelName:SO,backendName:"cpu",kernelFunc:h6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,scale:s,offset:o,mean:a,variance:l}=e;U(a.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),U(o==null||a.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),U(s==null||a.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),We([i,a,l,s,o],"batchNorm");let{varianceEpsilon:u}=r;u==null&&(u=.001);const h=n.data.get(i.dataId).values,d=n.data.get(a.dataId).values,p=n.data.get(l.dataId).values,g=s?n.data.get(s.dataId).values:new Float32Array([1]),y=o?n.data.get(o.dataId).values:new Float32Array([0]),b=new Float32Array(h.length),x=y.length,w=g.length,C=p.length,E=d.length;let _=0,A=0,P=0,N=0;for(let R=0;R<h.length;++R)b[R]=y[_++]+(h[R]-d[A++])*g[P++]/Math.sqrt(p[N++]+u),_>=x&&(_=0),A>=E&&(A=0),P>=w&&(P=0),N>=C&&(N=0);return n.makeTensorInfo(i.shape,i.dtype,b)}const p6e={kernelName:qT,backendName:"cpu",kernelFunc:d6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:s,crops:o}=r;We([i],"batchToSpaceND");const a=s.reduce((w,C)=>w*C),l=M0(i.shape,s,a),u=L0(l.length,s.length),h=F0(i.shape,s,a),d=XP(o,s.length),p=YP(h,o,s.length),g=mn({inputs:{x:i},backend:n,attrs:{shape:l}}),y=Wi({inputs:{x:g},backend:n,attrs:{perm:u}}),b=mn({inputs:{x:y},backend:n,attrs:{shape:h}}),x=kf({inputs:{x:b},backend:n,attrs:{begin:d,size:p}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),x}const g6e={kernelName:MT,backendName:"cpu",kernelFunc:m6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:s}=e,{size:o}=r,a=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,u=OM(a,l,s.dtype,s.shape,o);return n.makeTensorInfo([o],s.dtype,u)}const v6e={kernelName:CO,backendName:"cpu",kernelFunc:y6e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b6e(t){const{inputs:e,backend:n}=t,{s0:r,s1:i}=e,s=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,a=dt(Array.from(s),Array.from(o));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const x6e={kernelName:pQ,backendName:"cpu",kernelFunc:b6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w6e=Yt(jv,(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),S6e={kernelName:jv,backendName:"cpu",kernelFunc:w6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T6e=t=>{const{x:e}=t.inputs,n=t.backend,r=new Float32Array(Se(e.shape)),i=n.data.get(e.dataId),s=i.complexTensorInfos.real,o=i.complexTensorInfos.imag,a=n.data.get(s.dataId).values,l=n.data.get(o.dataId).values;for(let u=0;u<a.length;u++){const h=a[u],d=l[u];r[u]=Math.hypot(h,d)}return n.makeOutput(r,e.shape,"float32")},C6e={kernelName:LT,backendName:"cpu",kernelFunc:T6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gp(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.data.get(r.dataId).complexTensorInfos.imag,s=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,s)}const E6e={kernelName:UO,backendName:"cpu",kernelFunc:Gp};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hp(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r,s=wt(i,e[0].shape)[0],o=e.map(b=>b.shape);HP(o,s);let a=Ka(e.map(b=>b.shape),s);if(Se(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const l=e.filter(b=>Se(b.shape)>0);if(l.length===1)return al({inputs:{x:l[0]},backend:n});if(l[0].dtype==="complex64"){const b=l.map(_=>Af({inputs:{input:_},backend:n})),x=l.map(_=>Gp({inputs:{input:_},backend:n})),w=Hp({inputs:b,backend:n,attrs:{axis:s}}),C=Hp({inputs:x,backend:n,attrs:{axis:s}}),E=os({inputs:{real:w,imag:C},backend:n});return b.forEach(_=>n.disposeIntermediateTensorInfo(_)),x.forEach(_=>n.disposeIntermediateTensorInfo(_)),n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(C),E}const u=l.map(b=>{const w=[-1,Se(b.shape.slice(s))];return mn({inputs:{x:b},backend:n,attrs:{shape:w}})}),h=u.map(b=>({vals:n.data.get(b.dataId).values,shape:b.shape}));a=Ka(u.map(b=>b.shape),1);const d=u[0].shape[0]===1,p=qte(h,a,e[0].dtype,d),g=Ka(l.map(b=>b.shape),s),y=n.makeTensorInfo(g,e[0].dtype,p);return u.forEach(b=>n.disposeIntermediateTensorInfo(b)),y}const I6e={kernelName:FT,backendName:"cpu",kernelFunc:Hp};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jne(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:o,pad:a,dataFormat:l,dilations:u,dimRoundingMode:h}=r;We([i,s],"conv2d");const d=pu(l),p=Ur(i.shape,s.shape,o,u,a,h,!1,d),g=p.filterHeight,y=p.filterWidth,b=p.dilationHeight,x=p.dilationWidth,w=p.padInfo.left,C=p.padInfo.top,E=p.dataFormat==="channelsLast",_=new Fr(p.outShape,i.dtype),A=Xe(i.shape),P=Xe(s.shape),N=A[0],R=E?A[1]:A[2],D=E?A[2]:1,O=E?1:A[1],k=_.strides[0],F=E?_.strides[1]:_.strides[2],L=E?_.strides[2]:1,q=E?1:_.strides[1],Y=n.data.get(i.dataId).values,W=n.data.get(s.dataId).values,H=_.values;for(let X=0;X<p.batchSize;++X){const ee=X*N,ce=X*k;for(let j=0;j<p.outHeight;++j){const Q=ce+j*F,ie=j*p.strideHeight-C;for(let me=0;me<g;++me){const ve=ie+me*b;if(ve<0||ve>=p.inHeight)continue;const _e=me*P[0],De=ee+ve*R;for(let Fe=0;Fe<p.outWidth;++Fe){const ue=Q+Fe*L,Oe=Fe*p.strideWidth-w;for(let Me=0;Me<y;++Me){const Ce=Oe+Me*x;if(Ce<0||Ce>=p.inWidth)continue;const ot=_e+Me*P[1],He=De+Ce*D;let ut=ot;for(let nt=0;nt<p.inChannels;++nt){const Tt=Y[He+nt*O];for(let Mt=0;Mt<p.outChannels;++Mt)H[ue+Mt*q]+=Tt*W[ut+Mt];ut+=p.outChannels}}}}}}return n.makeTensorInfo(_.shape,_.dtype,H)}const _6e={kernelName:VT,backendName:"cpu",kernelFunc:jne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:o,pad:a,dataFormat:l,dimRoundingMode:u,filterShape:h}=r;We([i,s],"conv2dBackpropFilter");const d=pu(l),p=Ur(i.shape,h,o,1,a,u,!1,d),{strideHeight:g,strideWidth:y,filterHeight:b,filterWidth:x}=p,w=p.dataFormat==="channelsLast",C=new Fr(p.filterShape,"float32"),E=p.padInfo.left,_=p.padInfo.top,A=n.data.get(i.dataId).values,P=n.data.get(s.dataId).values,N=new Fr(i.shape,i.dtype,A),R=new Fr(s.shape,s.dtype,P);for(let D=0;D<b;++D){const O=Math.max(0,Math.ceil((_-D)/g)),k=Math.min(p.outHeight,(p.inHeight+_-D)/g);for(let F=0;F<x;++F){const L=Math.max(0,Math.ceil((E-F)/y)),q=Math.min(p.outWidth,(p.inWidth+E-F)/y);for(let Y=0;Y<p.inChannels;++Y)for(let W=0;W<p.outChannels;++W){let H=0;for(let X=0;X<p.batchSize;++X)for(let ee=O;ee<k;++ee){const ce=D+ee*g-_;for(let j=L;j<q;++j){const Q=F+j*y-E;w?H+=N.get(X,ce,Q,Y)*R.get(X,ee,j,W):H+=N.get(X,Y,ce,Q)*R.get(X,W,ee,j)}}C.set(H,D,F,Y,W)}}}return n.makeTensorInfo(C.shape,C.dtype,C.values)}const k6e={kernelName:_O,backendName:"cpu",kernelFunc:A6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N6e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{inputShape:o,strides:a,pad:l,dataFormat:u,dimRoundingMode:h}=r;We([i,s],"conv2dBackpropInput");const d=Xe(s.shape),p=Xe(i.shape);let g=pu(u);const y=Ur(o,s.shape,a,1,l,h,!1,g),b=new Fr(y.inShape,"float32"),x=b.values,w=n.data.get(i.dataId).values,C=n.data.get(s.dataId).values,[E,_,A]=d,{batchSize:P,filterHeight:N,filterWidth:R,inChannels:D,inHeight:O,inWidth:k,outChannels:F,outHeight:L,outWidth:q,strideHeight:Y,strideWidth:W}=y;g=y.dataFormat;const H=N-1-y.padInfo.top,X=R-1-y.padInfo.left,ee=g==="channelsLast",ce=b.strides[0],j=ee?b.strides[1]:b.strides[2],Q=ee?b.strides[2]:1,ie=ee?1:b.strides[1],me=p[0],ve=ee?p[1]:p[2],_e=ee?p[2]:1,De=ee?1:p[1];for(let Fe=0;Fe<P;++Fe)for(let ue=0;ue<D;++ue)for(let Oe=0;Oe<O;++Oe){const Me=Oe-H,Ce=Math.max(0,Math.ceil(Me/Y)),ot=Math.min(L,(N+Me)/Y);for(let He=0;He<k;++He){const ut=He-X,nt=Math.max(0,Math.ceil(ut/W)),Tt=Math.min(q,(R+ut)/W);let Mt=0;for(let Ct=Ce;Ct<ot;++Ct){const Gr=Ct*Y-Me;for(let Hr=nt;Hr<Tt;++Hr){const Vs=Hr*W-ut,cn=me*Fe+ve*Ct+_e*Hr,qr=E*(N-1-Gr)+_*(R-1-Vs)+A*ue;for(let qi=0;qi<F;++qi){const Ki=w[cn+De*qi],Kr=C[qr+qi];Mt+=Ki*Kr}}}const qt=ce*Fe+j*Oe+Q*He+ie*ue;x[qt]=Mt}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const R6e={kernelName:BT,backendName:"cpu",kernelFunc:N6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:o,pad:a,dilations:l}=r;We([i,s],"conv3d");const u=Gc(i.shape,s.shape,o,l,a),{filterDepth:h,filterHeight:d,filterWidth:p,dilationDepth:g,dilationHeight:y,dilationWidth:b,padInfo:x}=u,w=x.front,C=x.left,E=x.top,_=new Fr(u.outShape,i.dtype),A=n.data.get(i.dataId).values,P=n.data.get(s.dataId).values,N=_.values,R=Xe(i.shape),D=Xe(s.shape);for(let O=0;O<u.batchSize;++O){const k=O*R[0],F=O*_.strides[0];for(let L=0;L<u.outDepth;++L){const q=F+L*_.strides[1],Y=L*u.strideDepth-w;for(let W=0;W<h;++W){const H=Y+W*g;if(H<0||H>=u.inDepth)continue;const X=W*D[0],ee=k+H*R[1];for(let ce=0;ce<u.outHeight;++ce){const j=q+ce*_.strides[2],Q=ce*u.strideHeight-E;for(let ie=0;ie<d;++ie){const me=Q+ie*y;if(me<0||me>=u.inHeight)continue;const ve=X+ie*D[1],_e=ee+me*R[2];for(let De=0;De<u.outWidth;++De){const Fe=j+De*u.outChannels,ue=De*u.strideWidth-C;for(let Oe=0;Oe<p;++Oe){const Me=ue+Oe*b;if(Me<0||Me>=u.inWidth)continue;const Ce=ve+Oe*D[2],ot=_e+Me*u.inChannels;let He=Ce;for(let ut=0;ut<u.inChannels;++ut){const nt=A[ot+ut];for(let Tt=0;Tt<u.outChannels;++Tt)N[Fe+Tt]+=nt*P[He+Tt];He+=u.outChannels}}}}}}}}return n.makeTensorInfo(_.shape,_.dtype,_.values)}const $6e={kernelName:zT,backendName:"cpu",kernelFunc:D6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:o,pad:a,filterShape:l}=r;We([i,s],"conv3dBackpropFilterV2");const u=Xe(i.shape),h=Xe(s.shape),d=Gc(i.shape,l,o,1,a),p=d.strideDepth,g=d.strideHeight,y=d.strideWidth,b=d.filterDepth,x=d.filterHeight,w=d.filterWidth,C=new Fr(d.filterShape,"float32"),E=C.values,[_,A,P,N]=C.strides,R=n.data.get(s.dataId).values,[D,O,k,F]=h,L=n.data.get(i.dataId).values,[q,Y,W,H]=u,X=d.padInfo.front,ee=d.padInfo.left,ce=d.padInfo.top;for(let j=0;j<b;++j){const Q=Math.max(0,Math.ceil((X-j)/p)),ie=Math.min(d.outDepth,(d.inDepth+X-j)/p),me=j*_;for(let ve=0;ve<x;++ve){const _e=Math.max(0,Math.ceil((ce-ve)/g)),De=Math.min(d.outHeight,(d.inHeight+ce-ve)/g),Fe=ve*A+me;for(let ue=0;ue<w;++ue){const Oe=Math.max(0,Math.ceil((ee-ue)/y)),Me=Math.min(d.outWidth,(d.inWidth+ee-ue)/y),Ce=ue*P+Fe;for(let ot=0;ot<d.inChannels;++ot){const He=ot*N+Ce;for(let ut=0;ut<d.outChannels;++ut){let nt=0;for(let Tt=0;Tt<d.batchSize;++Tt){const Mt=Tt*q,qt=Tt*D;for(let Ct=Q;Ct<ie;++Ct){const Hr=(j+Ct*p-X)*Y+Mt,Vs=Ct*O+qt;for(let cn=_e;cn<De;++cn){const qi=(ve+cn*g-ce)*W+Hr,Ki=cn*k+Vs;for(let Kr=Oe;Kr<Me;++Kr){const gu=(ue+Kr*y-ee)*H+qi,yu=Kr*F+Ki;nt+=L[gu+ot]*R[yu+ut]}}}}E[He+ut]=nt}}}}}return n.makeTensorInfo(C.shape,C.dtype,C.values)}const P6e={kernelName:AO,backendName:"cpu",kernelFunc:O6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M6e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{pad:o,strides:a,inputShape:l}=r;We([i],"conv3dBackpropInputV2");const u=Xe(i.shape),h=Xe(s.shape),d=Gc(l,s.shape,a,1,o),p=new Fr(d.inShape,"float32"),g=p.values,[y,b,x,w]=p.strides,C=n.data.get(i.dataId).values,[E,_,A,P]=u,N=n.data.get(s.dataId).values,[R,D,O,k]=h,{batchSize:F,filterDepth:L,filterHeight:q,filterWidth:Y,inChannels:W,inDepth:H,inHeight:X,inWidth:ee,outChannels:ce,outDepth:j,outHeight:Q,outWidth:ie,strideDepth:me,strideHeight:ve,strideWidth:_e}=d,De=L-1-d.padInfo.front,Fe=q-1-d.padInfo.top,ue=Y-1-d.padInfo.left;for(let Oe=0;Oe<F;++Oe)for(let Me=0;Me<W;++Me)for(let Ce=0;Ce<H;++Ce){const ot=Ce-De,He=Math.max(0,Math.ceil(ot/me)),ut=Math.min(j,(L+ot)/me);for(let nt=0;nt<X;++nt){const Tt=nt-Fe,Mt=Math.max(0,Math.ceil(Tt/ve)),qt=Math.min(Q,(q+Tt)/ve);for(let Ct=0;Ct<ee;++Ct){const Gr=Ct-ue,Hr=Math.max(0,Math.ceil(Gr/_e)),Vs=Math.min(ie,(Y+Gr)/_e);let cn=0;for(let qr=He;qr<ut;++qr){const qi=qr*me-ot;for(let Ki=Mt;Ki<qt;++Ki){const Kr=Ki*ve-Tt;for(let hl=Hr;hl<Vs;++hl){const gu=hl*_e-Gr,yu=E*Oe+_*qr+A*Ki+P*hl,Yf=R*(L-1-qi)+D*(q-1-Kr)+O*(Y-1-gu)+k*Me;for(let pi=0;pi<ce;++pi){const vr=C[yu+pi],Xi=N[Yf+pi];cn+=vr*Xi}}}}g[y*Oe+b*Ce+x*nt+w*Ct+Me]=cn}}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}const L6e={kernelName:kO,backendName:"cpu",kernelFunc:M6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F6e=Yt(Wv,t=>Math.cos(t)),V6e={kernelName:Wv,backendName:"cpu",kernelFunc:F6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B6e=Yt(Gv,t=>Math.cosh(t)),z6e={kernelName:Gv,backendName:"cpu",kernelFunc:B6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U6e(t){const{inputs:e,backend:n,attrs:r}=t,{image:i,boxes:s,boxInd:o}=e,{cropSize:a,method:l,extrapolationValue:u}=r,[h,d,p,g]=i.shape,y=s.shape[0],[b,x]=a,w=xt([y,b,x,g],"float32"),C=n.data.get(s.dataId).values,E=n.data.get(o.dataId).values,_=n.data.get(i.dataId).values,A=Xe(i.shape),P=Xe(w.shape);for(let N=0;N<y;N++){const R=N*4,D=C[R],O=C[R+1],k=C[R+2],F=C[R+3],L=E[N];if(L>=h)continue;const q=b>1?(k-D)*(d-1)/(b-1):0,Y=x>1?(F-O)*(p-1)/(x-1):0;for(let W=0;W<b;W++){const H=b>1?D*(d-1)+W*q:.5*(D+k)*(d-1);if(H<0||H>d-1){for(let X=0;X<x;X++)for(let ee=0;ee<g;ee++){const ce=ee+X*P[2]+W*P[1]+N*P[0];w.values[ce]=u}continue}if(l==="bilinear"){const X=Math.floor(H),ee=Math.ceil(H),ce=H-X;for(let j=0;j<x;j++){const Q=x>1?O*(p-1)+j*Y:.5*(O+F)*(p-1);if(Q<0||Q>p-1){for(let _e=0;_e<g;_e++){const De=_e+j*P[2]+W*P[1]+N*P[0];w.values[De]=u}continue}const ie=Math.floor(Q),me=Math.ceil(Q),ve=Q-ie;for(let _e=0;_e<g;_e++){let De=_e+ie*A[2]+X*A[1]+L*A[0];const Fe=_[De];De=_e+me*A[2]+X*A[1]+L*A[0];const ue=_[De];De=_e+ie*A[2]+ee*A[1]+L*A[0];const Oe=_[De];De=_e+me*A[2]+ee*A[1]+L*A[0];const Me=_[De],Ce=Fe+(ue-Fe)*ve,ot=Oe+(Me-Oe)*ve;De=_e+j*P[2]+W*P[1]+N*P[0],w.values[De]=Ce+(ot-Ce)*ce}}}else for(let X=0;X<x;++X){const ee=x>1?O*(p-1)+X*Y:.5*(O+F)*(p-1);if(ee<0||ee>p-1){for(let Q=0;Q<g;Q++){const ie=Q+X*P[2]+W*P[1]+N*P[0];w.values[ie]=u}continue}const ce=Math.round(ee),j=Math.round(H);for(let Q=0;Q<g;Q++){const ie=Q+ce*A[2]+j*A[1]+L*A[0],me=Q+X*P[2]+W*P[1]+N*P[0];w.values[me]=_[ie]}}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}const j6e={kernelName:RO,backendName:"cpu",kernelFunc:U6e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,exclusive:o,reverse:a}=r;We(i,"cumprod");const l=Rn([s],i.shape.length);let u=i;l!=null&&(u=Wi({inputs:{x:i},backend:n,attrs:{perm:l}}));const h=Bn(1,i.shape.length)[0];if(h!==u.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${h}`);const d=fs(u.dtype,"int32"),p=gO(Se(u.shape),d),g=n.data.get(u.dataId).values,y=u.shape[u.shape.length-1],b=a?(w,C)=>w+y-C-1:(w,C)=>w+C;for(let w=0;w<g.length;w+=y)for(let C=0;C<y;C++){const E=b(w,C);if(C===0)p[E]=o?1:g[E];else{const _=b(w,C-1);p[E]=o?g[_]*p[_]:g[E]*p[_]}}const x=n.makeTensorInfo(u.shape,d,p);if(l!=null){const w=Hc(l),C=Wi({inputs:{x},backend:n,attrs:{perm:w}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(u),C}return x}const G6e={kernelName:NO,backendName:"cpu",kernelFunc:W6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,exclusive:o,reverse:a}=r;We(i,"cumsum");const l=Rn([s],i.shape.length);let u=i;l!=null&&(u=Wi({inputs:{x:i},backend:n,attrs:{perm:l}}));const h=Bn(1,i.shape.length)[0];if(h!==u.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${h}`);const d=fs(u.dtype,"int32"),p=ui(Se(u.shape),d),g=n.data.get(u.dataId).values,y=u.shape[u.shape.length-1],b=a?(w,C)=>w+y-C-1:(w,C)=>w+C;for(let w=0;w<g.length;w+=y)for(let C=0;C<y;C++){const E=b(w,C);if(C===0)p[E]=o?0:g[E];else{const _=b(w,C-1);p[E]=o?g[_]+p[_]:g[E]+p[_]}}const x=n.makeTensorInfo(u.shape,d,p);if(l!=null){const w=Hc(l),C=Wi({inputs:{x},backend:n,attrs:{perm:w}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(u),C}return x}const q6e={kernelName:UT,backendName:"cpu",kernelFunc:H6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:s}=e,{size:o,binaryOutput:a}=r;if(i.shape.length===1){const l=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values,h=OM(l,u,s.dtype,s.shape,o);return n.makeTensorInfo([o],s.dtype,h)}else if(i.shape.length===2){const l=n.bufferSync(i),u=n.bufferSync(s),h=Wte(l,u,o,a);return n.makeTensorInfo(h.shape,s.dtype,h.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}const X6e={kernelName:DO,backendName:"cpu",kernelFunc:K6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockSize:s,dataFormat:o}=r;U(o==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${o}`);const a=i.shape[0],l=i.shape[1],u=i.shape[2],h=i.shape[3],d=l*s,p=u*s,g=h/(s*s),y=n.data.get(i.dataId).values,b=new Float32Array(a*d*p*g);let x=0;for(let w=0;w<a;++w)for(let C=0;C<d;++C){const E=Math.floor(C/s),_=C%s;for(let A=0;A<p;++A){const P=Math.floor(A/s),N=A%s,R=(_*s+N)*g;for(let D=0;D<g;++D){const k=D+R+h*(P+u*(E+l*w));b[x++]=y[k]}}}return n.makeTensorInfo([a,d,p,g],i.dtype,b)}const Q6e={kernelName:$O,backendName:"cpu",kernelFunc:Y6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wne(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:o,pad:a,dilations:l,dimRoundingMode:u}=r;We([i,s],"depthwiseConv2DNative");const h=Xe(i.shape),d=Xe(s.shape);let p=l;p==null&&(p=[1,1]),U(hi(o,p),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${p}'`);const g=Ur(i.shape,s.shape,o,p,a,u,!0),{filterHeight:y,filterWidth:b,dilationHeight:x,dilationWidth:w,padInfo:C}=g,E=C.left,_=C.top,A=g.outChannels/g.inChannels,P=new Fr(g.outShape,i.dtype),N=n.data.get(i.dataId).values,R=n.data.get(s.dataId).values,D=P.values;for(let O=0;O<g.batchSize;++O){const k=O*h[0],F=O*P.strides[0];for(let L=0;L<g.outHeight;++L){const q=F+L*P.strides[1],Y=L*g.strideHeight-_;for(let W=0;W<y;++W){const H=Y+W*x;if(H<0||H>=g.inHeight)continue;const X=W*d[0],ee=k+H*h[1];for(let ce=0;ce<g.outWidth;++ce){const j=q+ce*P.strides[2],Q=ce*g.strideWidth-E;for(let ie=0;ie<b;++ie){const me=Q+ie*w;if(me<0||me>=g.inWidth)continue;const ve=X+ie*d[1],_e=ee+me*g.inChannels;let De=j,Fe=ve;for(let ue=0;ue<g.inChannels;++ue){const Oe=N[_e+ue];for(let Me=0;Me<A;++Me)D[De+Me]+=Oe*R[Fe+Me];De+=A,Fe+=A}}}}}}return n.makeTensorInfo(P.shape,P.dtype,P.values)}const Z6e={kernelName:jT,backendName:"cpu",kernelFunc:Wne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:u,filterShape:h}=r;We([i,s],"depthwiseConv2dNativeBackpropFilter");const d=Ur(i.shape,h,o,a,l,u,!0),{strideHeight:p,strideWidth:g,filterHeight:y,filterWidth:b}=d,x=new Fr(d.filterShape,"float32"),w=d.padInfo.left,C=d.padInfo.top,E=d.outChannels/d.inChannels,_=n.data.get(i.dataId).values,A=new Fr(i.shape,i.dtype,_),P=n.data.get(s.dataId).values,N=new Fr(s.shape,s.dtype,P);for(let R=0;R<y;++R){const D=Math.max(0,Math.ceil((C-R)/p)),O=Math.min(d.outHeight,(d.inHeight+C-R)/p);for(let k=0;k<b;++k){const F=Math.max(0,Math.ceil((w-k)/g)),L=Math.min(d.outWidth,(d.inWidth+w-k)/g);for(let q=0;q<d.outChannels;++q){const Y=Math.trunc(q/E),W=q%E;let H=0;for(let X=0;X<d.batchSize;++X)for(let ee=D;ee<O;++ee){const ce=R+ee*p-C;for(let j=F;j<L;++j){const Q=k+j*g-w;H+=A.get(X,ce,Q,Y)*N.get(X,ee,j,q)}}x.set(H,R,k,Y,W)}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const eWe={kernelName:OO,backendName:"cpu",kernelFunc:J6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tWe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:u,inputShape:h}=r;We([i,s],"depthwiseConv2DNativeBackpropInput");const d=Xe(i.shape),p=Xe(s.shape),g=Ur(h,s.shape,o,a,l,u,!0),y=new Fr(g.inShape,"float32"),b=y.values,[x,w,C]=y.strides,E=n.data.get(i.dataId).values,[_,A,P]=d,N=n.data.get(s.dataId).values,[R,D,O]=p,{batchSize:k,filterHeight:F,filterWidth:L,inChannels:q,inHeight:Y,inWidth:W,outChannels:H,outHeight:X,outWidth:ee,strideHeight:ce,strideWidth:j}=g,Q=F-1-g.padInfo.top,ie=L-1-g.padInfo.left,me=H/q;for(let ve=0;ve<k;++ve)for(let _e=0;_e<q;++_e)for(let De=0;De<Y;++De){const Fe=De-Q,ue=Math.max(0,Math.ceil(Fe/ce)),Oe=Math.min(X,(F+Fe)/ce);for(let Me=0;Me<W;++Me){const Ce=Me-ie,ot=Math.max(0,Math.ceil(Ce/j)),He=Math.min(ee,(L+Ce)/j);let ut=0;for(let nt=ue;nt<Oe;++nt){const Tt=nt*ce-Fe;for(let Mt=ot;Mt<He;++Mt){const qt=Mt*j-Ce,Ct=_*ve+A*nt+P*Mt,Gr=R*(F-1-Tt)+D*(L-1-qt)+O*_e;for(let Hr=0;Hr<me;++Hr){const Vs=_e*me+Hr,cn=E[Ct+Vs],qr=N[Gr+Hr];ut+=cn*qr}}}b[x*ve+w*De+C*Me+_e]=ut}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const nWe={kernelName:PO,backendName:"cpu",kernelFunc:tWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rWe(t){const{inputs:e,backend:n}=t,{x:r}=e,i=Se(r.shape),s=n.data.get(r.dataId).values,o=xt([i,i],r.dtype),a=o.values;for(let u=0;u<s.length;u++)a[u*i+u]=s[u];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,o.dtype,o.values)}const iWe={kernelName:mQ,backendName:"cpu",kernelFunc:rWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sWe={kernelName:WT,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i}=t,{strides:s,pad:o,dilations:a}=n,l=e,u=l.data.get(r.dataId).values,h=r.shape.length,d=l.data.get(i.dataId).values,p=i.shape.length,{batchSize:g,inHeight:y,inWidth:b,inChannels:x,outHeight:w,outWidth:C,padInfo:E,strideHeight:_,strideWidth:A,filterHeight:P,filterWidth:N,dilationHeight:R,dilationWidth:D,outShape:O}=R0(r.shape,i.shape,s,o,"NHWC",a),k=Se(O),F=O.length,L=Ln(r.dtype,k);for(let Y=0;Y<g;++Y)for(let W=0;W<w;++W){const H=W*_-E.top;for(let X=0;X<C;++X){const ee=X*A-E.left;for(let ce=0;ce<x;++ce){let j=Number.MIN_SAFE_INTEGER;for(let ie=0;ie<P;++ie){const me=H+ie*R;if(me>=0&&me<y)for(let ve=0;ve<N;++ve){const _e=ee+ve*D;if(_e>=0&&_e<b){const De=Ha([Y,me,_e,ce],h,Xe(r.shape)),Fe=Ha([ie,ve,ce],p,Xe(i.shape)),ue=u[De]+d[Fe];ue>j&&(j=ue)}}}const Q=Ha([Y,W,X,ce],F,Xe(O));L[Q]=j}}}return{dataId:l.write(Bf(L,r.dtype),O,r.dtype),shape:O,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oWe={kernelName:_N,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i,dy:s}=t,{strides:o,pad:a,dilations:l}=n,u=e,h=Qo(r.shape,u.data.get(r.dataId).values),d=Qo(i.shape,u.data.get(i.dataId).values),{batchSize:p,inHeight:g,inWidth:y,inChannels:b,outHeight:x,outWidth:w,padInfo:C,strideHeight:E,strideWidth:_,filterHeight:A,filterWidth:P,dilationHeight:N,dilationWidth:R,outShape:D}=R0(r.shape,i.shape,o,a,"NHWC",l);U(s.rank===D.length,()=>`Error in ${_N}, dy must have the same rank as output ${D.length}, but got ${s.rank}`);const O=Qo(D,u.data.get(s.dataId).values),k=hQ(i.shape,i.dtype);for(let L=0;L<p;++L)for(let q=0;q<x;++q){const Y=q*E-C.top;for(let W=0;W<w;++W){const H=W*_-C.left;for(let X=0;X<b;++X){let ee=Number.MIN_SAFE_INTEGER,ce=0,j=0;for(let Q=0;Q<A;++Q){const ie=Y+Q*N;if(ie>=0&&ie<g)for(let me=0;me<P;++me){const ve=H+me*R;if(ve>=0&&ve<y){const _e=h[L][ie][ve][X]+d[Q][me][X];_e>ee&&(ee=_e,ce=Q,j=me)}}}k[ce][j][X]+=O[L][q][W][X]}}}return{dataId:u.write(Bf(k,r.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aWe={kernelName:IN,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i,dy:s}=t,{strides:o,pad:a,dilations:l}=n,u=e,h=Qo(r.shape,u.data.get(r.dataId).values),d=Qo(i.shape,u.data.get(i.dataId).values),{batchSize:p,inHeight:g,inWidth:y,inChannels:b,outHeight:x,outWidth:w,padInfo:C,strideHeight:E,strideWidth:_,filterHeight:A,filterWidth:P,dilationHeight:N,dilationWidth:R,outShape:D}=R0(r.shape,i.shape,o,a,"NHWC",l);U(s.rank===D.length,()=>`Error in ${IN}, dy must have the same rank as output ${D.length}, but got ${s.rank}`);const O=Qo(D,u.data.get(s.dataId).values),k=hQ(r.shape,r.dtype);for(let L=0;L<p;++L)for(let q=0;q<x;++q){const Y=q*E-C.top;for(let W=0;W<w;++W){const H=W*_-C.left;for(let X=0;X<b;++X){let ee=Number.MIN_SAFE_INTEGER,ce=Y<0?0:Y,j=H<0?0:H;for(let Q=0;Q<A;++Q){const ie=Y+Q*N;if(ie>=0&&ie<g)for(let me=0;me<P;++me){const ve=H+me*R;if(ve>=0&&ve<y){const _e=h[L][ie][ve][X]+d[Q][me][X];_e>ee&&(ee=_e,ce=ie,j=ve)}}}k[L][ce][j][X]+=O[L][q][W][X]}}}return{dataId:u.write(Bf(k,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lWe(t){const{inputs:e,backend:n,attrs:r}=t,{image:i}=e,{canvas:s,options:o}=r,{contextOptions:a,imageOptions:l}=o||{},u=l?.alpha||1,h=a?.contextType||"2d";if(h!=="2d")throw new Error(`Context type ${a.contextType} is not supported by the CPU backend.`);const d=s.getContext(h,a?.contextAttributes||{});if(d==null)throw new Error(`Could not get the context with ${h} type.`);const[p,g]=i.shape.slice(0,2),y=i.shape.length===2?1:i.shape[2],b=n.data.get(i.dataId).values,x=i.dtype==="float32"?255:1,w=new Uint8ClampedArray(g*p*4);for(let E=0;E<p*g;++E){const _=[0,0,0,255*u];for(let P=0;P<y;P++){const N=b[E*y+P];if(i.dtype==="float32"){if(N<0||N>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${N}.`)}else if(i.dtype==="int32"&&(N<0||N>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${N}.`);y===1?(_[0]=N*x,_[1]=N*x,_[2]=N*x):_[P]=N*x}const A=E*4;w[A+0]=Math.round(_[0]),w[A+1]=Math.round(_[1]),w[A+2]=Math.round(_[2]),w[A+3]=Math.round(_[3])}s.width=g,s.height=p;const C=new ImageData(w,g,p);return d.putImageData(C,0,0),i}const uWe={kernelName:x$e,backendName:"cpu",kernelFunc:lWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q0(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r;We(i,"sum");let a;i.dtype==="bool"?a=Lc({inputs:{x:i},backend:n,attrs:{dtype:"int32"}}):a=al({inputs:{x:i},backend:n});const l=a.shape.length,u=wt(s,a.shape),h=Rn(u,l);let d=u,p=a;h!=null&&(p=Wi({inputs:{x:a},backend:n,attrs:{perm:h}}),d=Bn(d.length,l)),jr("sum",d,p.shape.length);const[g,y]=Rr(p.shape,d),b=fs(p.dtype,"int32");let x=mS(n,g,b);const w=Se(y),C=n.data.get(x.dataId).values,E=n.data.get(p.dataId).values;for(let _=0;_<C.length;++_){const A=_*w;let P=0;for(let N=0;N<w;++N)P+=E[A+N];C[_]=P}if(o){const _=Qn(x.shape,u),A=x;x=mn({inputs:{x},backend:n,attrs:{shape:_}}),n.disposeIntermediateTensorInfo(A)}return n.disposeIntermediateTensorInfo(a),h!=null&&n.disposeIntermediateTensorInfo(p),x}const cWe={kernelName:TC,backendName:"cpu",kernelFunc:q0};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hWe(t){const{inputs:e,backend:n,attrs:r}=t,{equation:i}=r,s=e,{allDims:o,summedDims:a,idDims:l}=iM(i,s.length);oM(o.length,l,s);const{path:u,steps:h}=aM(a,l),d=h.length;let p=null,g=o.length;const y=[];for(let b=0;b<d;++b){for(const x of h[b]){const{permutationIndices:w,expandDims:C}=sM(g,l[x]);let E;lM(w)?E=s[x]:(E=Wi({inputs:{x:s[x]},backend:n,attrs:{perm:w}}),y.push(E));const _=E.shape.slice();for(let A=0;A<C.length;++A)_.splice(C[A],0,1);Wt(E.shape,_)||(E=mn({inputs:{x:E},backend:n,attrs:{shape:_}}),y.push(E)),p===null?p=E:(p=ZC({inputs:{a:E,b:p},backend:n}),y.push(p))}b<d-1&&(u[b]>=0&&(p=q0({inputs:{x:p},backend:n,attrs:{axis:u[b]-(o.length-g),keepDims:!1}}),y.push(p)),g--)}for(const b of y)b!==p&&n.disposeIntermediateTensorInfo(b);return p}const fWe={kernelName:MO,backendName:"cpu",kernelFunc:hWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dWe(t){const{inputs:e,backend:n}=t,{dy:r,y:i}=e;We([r,i],"eluGrad");const s=new Float32Array(Se(i.shape)),o=n.data.get(i.dataId).values,a=n.data.get(r.dataId).values;for(let l=0;l<o.length;++l){const u=o[l];u>=0?s[l]=a[l]:s[l]=a[l]*(u+1)}return n.makeTensorInfo(i.shape,"float32",s)}const pWe={kernelName:LO,backendName:"cpu",kernelFunc:dWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mWe=QP,gWe=ZP,yWe=JP,vWe=eM,bWe=tM,xWe=nM,wWe=Yt(Kv,t=>{const e=Math.sign(t),n=Math.abs(t),r=1/(1+mWe*n);return e*(1-((((xWe*r+bWe)*r+vWe)*r+yWe)*r+gWe)*r*Math.exp(-n*n))}),SWe={kernelName:Kv,backendName:"cpu",kernelFunc:wWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vS(t){const{inputs:e,backend:n,attrs:r}=t,{input:i}=e,{dim:s}=r,o=i.shape.length,a=i.shape.slice();let l=s;return s<0&&(U(-(o+1)<=s,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+s+1),a.splice(l,0,1),mn({inputs:{x:i},backend:n,attrs:{shape:a}})}const TWe={kernelName:HT,backendName:"cpu",kernelFunc:vS};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CWe=Un((t,e)=>t/e),BM=yr(Hv,CWe),eR={kernelName:Hv,backendName:"cpu",kernelFunc:BM};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gne(t,e,n){const r=t.shape,i=r[0],s=r[1],o=n.data.get(t.dataId),a=o.complexTensorInfos.real,l=o.complexTensorInfos.imag,u=[i,s],h=Se(u),d=li("float32",h),p=li("float32",h);for(let x=0;x<i;x++){const w=kf({inputs:{x:a},backend:n,attrs:{begin:[x,0],size:[1,s]}}),C=kf({inputs:{x:l},backend:n,attrs:{begin:[x,0],size:[1,s]}}),E=os({inputs:{real:w,imag:C},backend:n}),{real:_,imag:A}=EWe(E,e,n),P=iu(_,A);for(let N=0;N<s;N++){const R=rM(P,N);d[x*s+N]=R.real,p[x*s+N]=R.imag}n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(C),n.disposeIntermediateTensorInfo(E)}const g=n.makeTensorInfo(u,"float32",d),y=n.makeTensorInfo(u,"float32",p),b=os({inputs:{real:g,imag:y},backend:n});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),b}function EWe(t,e,n){const r=Se(t.shape),i=n.data.get(t.dataId),s=n.data.get(i.complexTensorInfos.real.dataId).values,o=n.data.get(i.complexTensorInfos.imag.dataId).values;if(IWe(r)){const a=tR(s,o,r,e,n),l=[t.shape[0],t.shape[1]];if(e){const u=n.makeTensorInfo(l,"float32",a.real),h=n.makeTensorInfo(l,"float32",a.imag),d=n.makeTensorInfo([],"float32",jc(r,"float32")),p=al({inputs:{x:d},backend:n}),g=eR.kernelFunc({inputs:{a:u,b:d},backend:n}),y=eR.kernelFunc({inputs:{a:h,b:p},backend:n}),b=n.data.get(g.dataId).values,x=n.data.get(y.dataId).values;return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),{real:b,imag:x}}return a}else{const a=iu(s,o),l=_We(a,r,e);return iJ(l)}}function IWe(t){return(t&t-1)===0}function tR(t,e,n,r,i){if(n===1)return{real:t,imag:e};const s=iu(t,e),o=n/2,a=sJ(s),l=a.real,u=a.imag,h=[l.length],d=i.makeTensorInfo(h,"float32",l),p=i.makeTensorInfo(h,"float32",u),g=os({inputs:{real:d,imag:p},backend:i}),y=oJ(s),b=y.real,x=y.imag,w=[b.length],C=i.makeTensorInfo(w,"float32",b),E=i.makeTensorInfo(w,"float32",x),_=os({inputs:{real:C,imag:E},backend:i}),A=tR(l,u,o,r,i),P=A.real,N=A.imag,R=[P.length],D=i.makeTensorInfo(R,"float32",P),O=i.makeTensorInfo(R,"float32",N),k=os({inputs:{real:D,imag:O},backend:i}),F=tR(b,x,o,r,i),L=F.real,q=F.imag,Y=[L.length],W=i.makeTensorInfo(Y,"float32",L),H=i.makeTensorInfo(Y,"float32",q),X=os({inputs:{real:W,imag:H},backend:i}),ee=lJ(n,r),ce=[ee.real.length],j=i.makeTensorInfo(ce,"float32",ee.real),Q=i.makeTensorInfo(ce,"float32",ee.imag),ie=os({inputs:{real:j,imag:Q},backend:i}),me=ZC({inputs:{a:ie,b:X},backend:i}),ve=Wp({inputs:{a:k,b:me},backend:i}),_e=FM({inputs:{a:k,b:me},backend:i}),De=Af({inputs:{input:ve},backend:i}),Fe=Af({inputs:{input:_e},backend:i}),ue=Gp({inputs:{input:ve},backend:i}),Oe=Gp({inputs:{input:_e},backend:i}),Me=Hp({inputs:[De,Fe],backend:i,attrs:{axis:0}}),Ce=Hp({inputs:[ue,Oe],backend:i,attrs:{axis:0}}),ot=i.data.get(Me.dataId).values,He=i.data.get(Ce.dataId).values;return i.disposeIntermediateTensorInfo(d),i.disposeIntermediateTensorInfo(p),i.disposeIntermediateTensorInfo(g),i.disposeIntermediateTensorInfo(C),i.disposeIntermediateTensorInfo(E),i.disposeIntermediateTensorInfo(_),i.disposeIntermediateTensorInfo(D),i.disposeIntermediateTensorInfo(O),i.disposeIntermediateTensorInfo(k),i.disposeIntermediateTensorInfo(W),i.disposeIntermediateTensorInfo(H),i.disposeIntermediateTensorInfo(X),i.disposeIntermediateTensorInfo(j),i.disposeIntermediateTensorInfo(Q),i.disposeIntermediateTensorInfo(ie),i.disposeIntermediateTensorInfo(me),i.disposeIntermediateTensorInfo(ve),i.disposeIntermediateTensorInfo(_e),i.disposeIntermediateTensorInfo(De),i.disposeIntermediateTensorInfo(ue),i.disposeIntermediateTensorInfo(Fe),i.disposeIntermediateTensorInfo(Oe),i.disposeIntermediateTensorInfo(Me),i.disposeIntermediateTensorInfo(Ce),{real:ot,imag:He}}function _We(t,e,n){const r=new Float32Array(e*2);for(let i=0;i<e;i++){let s=0,o=0;for(let a=0;a<e;a++){const l=uJ(i*a,e,n),u=rM(t,a);s+=u.real*l.real-u.imag*l.imag,o+=u.real*l.imag+u.imag*l.real}n&&(s/=e,o/=e),aJ(r,s,o,i)}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AWe(t){const{inputs:e,backend:n}=t,{input:r}=e,i=Se(r.shape),s=r.shape[r.shape.length-1],o=i/s,a=mn({inputs:{x:r},backend:n,attrs:{shape:[o,s]}}),l=Gne(a,!1,n),u=mn({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),u}const kWe={kernelName:FO,backendName:"cpu",kernelFunc:AWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zM(t){const{backend:e,attrs:n}=t,{shape:r,value:i,dtype:s}=n,o=s||gm(i),a=Ln(o,Se(r));return RWe(a,i,o),e.makeTensorInfo(r,o,a)}const NWe={kernelName:VO,backendName:"cpu",kernelFunc:zM};function RWe(t,e,n){t.fill(e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DWe={kernelName:BO,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,i=n,s=li(r.dtype,Se(r.shape)),[o,a,l,u]=r.shape,h=i.data.get(r.dataId).values;for(let p=0;p<o;p++){const g=p*l*a*u;for(let y=0;y<a;y++){const b=y*(l*u);for(let x=0;x<l;x++){const w=x*u;for(let C=0;C<u;C++){const E=Math.round(l-x-1),_=g+b+w+C;let A=h[_];if(E>=0&&E<l){const P=E*u,N=g+b+P+C;A=h[N]}s[_]=A}}}}return{dataId:i.write(s,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $We(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s,bias:o,preluActivationWeights:a}=e,{strides:l,pad:u,dataFormat:h,dilations:d,dimRoundingMode:p,activation:g,leakyreluAlpha:y}=r;let b=jne({inputs:{x:i,filter:s},backend:n,attrs:{strides:l,pad:u,dataFormat:h,dilations:d,dimRoundingMode:p}});if(o){const x=b;if(h==="NCHW"&&o.shape.length===1&&o.shape[0]!==1){const w=mn({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});b=Wp({inputs:{a:b,b:w},backend:n}),n.disposeIntermediateTensorInfo(w)}else b=Wp({inputs:{a:b,b:o},backend:n});n.disposeIntermediateTensorInfo(x)}if(g){const x=b;if(h==="NCHW"&&g==="prelu"&&a.shape.length===1&&a.shape[0]!==1){const w=mn({inputs:{x:a},backend:n,attrs:{shape:[a.shape[0],1,1]}});b=yS(n,b,g,w,y),n.disposeIntermediateTensorInfo(w)}else b=yS(n,b,g,a,y);n.disposeIntermediateTensorInfo(x)}return b}const OWe={kernelName:Yw,backendName:"cpu",kernelFunc:$We};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s,bias:o,preluActivationWeights:a}=e,{strides:l,pad:u,dataFormat:h,dilations:d,dimRoundingMode:p,activation:g,leakyreluAlpha:y}=r;let b=Wne({inputs:{x:i,filter:s},backend:n,attrs:{strides:l,pad:u,dataFormat:h,dilations:d,dimRoundingMode:p}});if(o){const x=b;b=Wp({inputs:{a:b,b:o},backend:n}),n.disposeIntermediateTensorInfo(x)}if(g){const x=b;b=yS(n,b,g,a,y),n.disposeIntermediateTensorInfo(x)}return b}const MWe={kernelName:OQ,backendName:"cpu",kernelFunc:PWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LWe(t){const{inputs:e,backend:n}=t,{params:r,indices:i}=e,s=Se(r.shape),o=i.shape,a=o[o.length-1],[l,u,h,d]=BP(r,i);if(u===0)return n.makeTensorInfo(l,r.dtype,[]);const p=n.data.get(i.dataId).values,g=n.bufferSync(r),y=tne(p,g,r.dtype,u,a,h,d,r.shape,s);return n.makeTensorInfo(l,r.dtype,y.values)}const FWe={kernelName:gQ,backendName:"cpu",kernelFunc:LWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,indices:s}=e,{axis:o,batchDims:a}=r;We([i,s],"gatherV2");const l=wt(o,i.shape)[0],u=n.data.get(s.dataId).values,h=i.shape[l];for(let _=0;_<u.length;++_){const A=u[_];U(A<=h-1&&A>=0,()=>`GatherV2: the index value ${A} is not in [0, ${h-1}]`)}let d=a;a==null&&(d=0);const p=Se(s.shape),g=cM(i,s,l,d),y=mn({inputs:{x:i},backend:n,attrs:{shape:[g.batchSize,g.outerSize,g.dimSize,g.sliceSize]}}),b=mn({inputs:{x:s},backend:n,attrs:{shape:[g.batchSize,p/g.batchSize]}}),x=[g.batchSize,g.outerSize,p/g.batchSize,g.sliceSize],w=n.bufferSync(b),C=n.bufferSync(y),E=nne(C,w,x);return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),n.makeTensorInfo(g.outputShape,E.dtype,E.values)}const BWe={kernelName:KT,backendName:"cpu",kernelFunc:VWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zWe(t){const{inputs:e,backend:n}=t,{input:r}=e,i=Se(r.shape),s=r.shape[r.shape.length-1],o=i/s,a=mn({inputs:{x:r},backend:n,attrs:{shape:[o,s]}}),l=Gne(a,!0,n),u=mn({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),u}const UWe={kernelName:zO,backendName:"cpu",kernelFunc:zWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jWe=Yt(t0,t=>Number.isFinite(t)?1:0,"bool"),WWe={kernelName:t0,backendName:"cpu",kernelFunc:jWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GWe=Yt(n0,t=>Math.abs(t)===1/0?1:0,"bool"),HWe={kernelName:n0,backendName:"cpu",kernelFunc:GWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qWe=Yt(r0,t=>Number.isNaN(t)?1:0,"bool"),KWe={kernelName:r0,backendName:"cpu",kernelFunc:qWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XWe(t){const{backend:e,attrs:n}=t,{start:r,stop:i,num:s}=n,o=ane(r,i,s);return e.makeTensorInfo([o.length],"float32",o)}const YWe={kernelName:yQ,backendName:"cpu",kernelFunc:XWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QWe=Yt(s0,t=>Math.log1p(t)),ZWe={kernelName:s0,backendName:"cpu",kernelFunc:QWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JWe=Un((t,e)=>t&&e),eGe=yr(JT,JWe,null,"bool"),tGe={kernelName:JT,backendName:"cpu",kernelFunc:eGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nGe=Yt(eC,t=>t?0:1,"bool"),rGe={kernelName:eC,backendName:"cpu",kernelFunc:nGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iGe=Un((t,e)=>t||e),sGe=yr(tC,iGe,null,"bool"),oGe={kernelName:tC,backendName:"cpu",kernelFunc:sGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{depthRadius:s,bias:o,alpha:a,beta:l}=r;We(i,"LRN");const u=i.shape[3],h=u-1,d=n.data.get(i.dataId).values,p=Se(i.shape),g=new Float32Array(p);function y(b){const x=b%u;let w=b-x+Math.max(0,x-s);const C=b-x+Math.min(x+s,h);let E=0;for(;w<=C;w++){const _=d[w];E+=_*_}return E}for(let b=0;b<p;b++){const x=y(b),w=d[b]*Math.pow(o+a*x,-l);g[b]=w}return n.makeTensorInfo(i.shape,i.dtype,g)}const lGe={kernelName:nC,backendName:"cpu",kernelFunc:aGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,y:s,dy:o}=e,{depthRadius:a,bias:l,alpha:u,beta:h}=r;We(o,"LRNGrad");const d=Se(o.shape),p=o.shape[3],g=n.data.get(o.dataId).values,y=n.data.get(i.dataId).values,b=n.data.get(s.dataId).values,x=new Float32Array(d),w=d;for(let C=0;C<w;C++){const E=C%p,_=C-E+Math.max(0,E-a),A=C-E+Math.min(p,E+a+1);let P=0;for(let N=_;N<A;N++)P+=Math.pow(y[N],2);P=u*P+l;for(let N=_;N<A;N++){let R=-2*u*h*y[N]*b[C]/P;C===N&&(R+=Math.pow(P,-h)),R*=g[C],x[N]+=R}}return n.makeTensorInfo(o.shape,i.dtype,x)}const cGe={kernelName:jO,backendName:"cpu",kernelFunc:uGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hne(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reductionIndices:s,keepDims:o}=r,a=n;let l=i.shape;const u=l.length,h=wt(s,l);let d=h;const p=Rn(d,u);let g=a.data.get(i.dataId).values;if(p!=null){const _=new Array(u);for(let A=0;A<_.length;A++)_[A]=l[p[A]];g=MM(g,l,i.dtype,p,_),d=Bn(d.length,u),l=_}We(i,"max"),jr("max",d,u);const[y,b]=Rr(l,d),x=Se(b),w=une(g,x,y,i.dtype),C=a.write(w,y,i.dtype);let E=y;return o&&(E=Qn(y,h)),{dataId:C,shape:E,dtype:i.dtype}}const hGe={kernelName:rC,backendName:"cpu",kernelFunc:Hne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;We(i,"maxPool");const{filterSize:s,strides:o,pad:a,dimRoundingMode:l}=r,u=1;U(hi(o,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const h=Io(i.shape,s,o,u,a,l);let d;if(h.filterWidth===1&&h.filterHeight===1&&Wt(h.inShape,h.outShape))d=al({inputs:{x:i},backend:n});else{const p=n.data.get(i.dataId).values,g=Xe(i.shape),y=VM(p,i.shape,i.dtype,g,h,"max");d=n.makeTensorInfo(h.outShape,i.dtype,y.values)}return d}const dGe={kernelName:iC,backendName:"cpu",kernelFunc:fGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:s,strides:o,pad:a,dimRoundingMode:l,dataFormat:u}=r;We(i,"maxPool3d");const h=du(i.shape,s,o,1,a,l,u),d=n.data.get(i.dataId).values,p=Une(d,i.shape,i.dtype,Xe(i.shape),h,"max");return n.makeTensorInfo(p.shape,"float32",p.values)}const mGe={kernelName:sC,backendName:"cpu",kernelFunc:pGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gGe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,{filterSize:o,strides:a,pad:l,dimRoundingMode:u}=r;We([i,s],"maxPool3DGrad");const h=du(s.shape,o,a,1,l,u),d=n.bufferSync(s),p=i6e(d,h),g=h.strideDepth,y=h.strideHeight,b=h.strideWidth,x=h.dilationDepth,w=h.dilationHeight,C=h.dilationWidth,E=h.effectiveFilterDepth,_=h.effectiveFilterHeight,A=h.effectiveFilterWidth,P=E-1-h.padInfo.front,N=A-1-h.padInfo.left,R=_-1-h.padInfo.top,D=xt(s.shape,"float32"),O=n.bufferSync(i);for(let k=0;k<h.batchSize;++k)for(let F=0;F<h.inChannels;++F)for(let L=0;L<h.inDepth;++L)for(let q=0;q<h.inHeight;++q)for(let Y=0;Y<h.inWidth;++Y){const W=L-P,H=q-R,X=Y-N;let ee=0;for(let ce=0;ce<E;ce+=x){const j=(W+ce)/g;if(!(j<0||j>=h.outDepth||Math.floor(j)!==j))for(let Q=0;Q<_;Q+=w){const ie=(H+Q)/y;if(!(ie<0||ie>=h.outHeight||Math.floor(ie)!==ie))for(let me=0;me<A;me+=C){const ve=(X+me)/b;if(ve<0||ve>=h.outWidth||Math.floor(ve)!==ve)continue;const _e=E*_*A-1-p.get(k,j,ie,ve,F),De=ce*_*A+Q*A+me,Fe=_e===De?1:0;if(Fe===0)continue;const ue=O.get(k,j,ie,ve,F);ee+=ue*Fe}}}D.set(ee,k,L,q,Y,F)}return n.makeTensorInfo(D.shape,D.dtype,D.values)}const yGe={kernelName:GO,backendName:"cpu",kernelFunc:gGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vGe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s,output:o}=e,a=s;We([s,o],"maxPoolGrad");const{filterSize:l,strides:u,pad:h,dimRoundingMode:d}=r,p=Io(a.shape,l,u,1,h,d),g=n.data.get(a.dataId).values,y=xt(p.outShape,a.dtype,zne(g,a.shape,a.dtype,p).values),b=p.strideHeight,x=p.strideWidth,w=p.dilationHeight,C=p.dilationWidth,E=p.effectiveFilterHeight,_=p.effectiveFilterWidth,A=_-1-p.padInfo.left,P=E-1-p.padInfo.top,N=xt(a.shape,"float32"),R=n.data.get(i.dataId).values,D=xt(i.shape,"float32",R);for(let O=0;O<p.batchSize;++O)for(let k=0;k<p.inChannels;++k)for(let F=0;F<p.inHeight;++F)for(let L=0;L<p.inWidth;++L){const q=F-P,Y=L-A;let W=0;for(let H=0;H<E;H+=w){const X=(q+H)/b;if(!(X<0||X>=p.outHeight||Math.floor(X)!==X))for(let ee=0;ee<_;ee+=C){const ce=(Y+ee)/x;if(ce<0||ce>=p.outWidth||Math.floor(ce)!==ce)continue;const j=E*_-1-y.get(O,X,ce,k),Q=H*_+ee,ie=j===Q?1:0;if(ie===0)continue;const me=D.get(O,X,ce,k);W+=me*ie}}N.set(W,O,F,L,k)}return n.makeTensorInfo(N.shape,N.dtype,N.values)}const bGe={kernelName:WO,backendName:"cpu",kernelFunc:vGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xGe(t,e,n,r,i){const s=Xe(e),o=VM(t,e,n,s,i,"max"),a=zne(t,e,n,i,!0,r);return[o.values,a.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wGe={kernelName:vQ,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:i,strides:s,pad:o,includeBatchInIndex:a}=e,l=n;We(r,"MaxPoolWithArgmax");const u=l.data.get(r.dataId).values,h=Io(r.shape,i,s,[1,1],o),[d,p]=xGe(u,r.shape,r.dtype,a,h),g=l.write(d,h.outShape,r.dtype),y=l.write(p,h.outShape,r.dtype);return[{dataId:g,shape:h.outShape,dtype:r.dtype},{dataId:y,shape:h.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r,a=wt(s,i.shape),u=Rr(i.shape,a)[1],h=Se(u),d=[],p=n.makeTensorInfo([],"float32",new Float32Array([h]));d.push(p);const g=Lc({inputs:{x:i},backend:n,attrs:{dtype:"float32"}});d.push(g);const y=BM({inputs:{a:g,b:p},backend:n});d.push(y);const b=q0({inputs:{x:y},backend:n,attrs:{axis:s,keepDims:o}});return d.forEach(x=>n.disposeIntermediateTensorInfo(x)),b}const TGe={kernelName:oC,backendName:"cpu",kernelFunc:SGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r;We(i,"min");const a=wt(s,i.shape);let l=a;const u=Rn(l,i.shape.length);let h=i;u!=null&&(h=Wi({inputs:{x:i},backend:n,attrs:{perm:u}}),l=Bn(l.length,i.shape.length)),jr("min",l,h.shape.length);const[d,p]=Rr(h.shape,l),g=Se(p),y=ui(Se(d),h.dtype),b=n.data.get(h.dataId).values;for(let w=0;w<y.length;++w){const C=w*g;let E=b[C];for(let _=0;_<g;++_){const A=b[C+_];(Number.isNaN(A)||A<E)&&(E=A)}y[w]=E}u!=null&&n.disposeIntermediateTensorInfo(h);const x=n.makeTensorInfo(d,h.dtype,y);if(o){const w=Qn(d,a),C=mn({inputs:{x},backend:n,attrs:{shape:w}});return n.disposeIntermediateTensorInfo(x),C}return x}const EGe={kernelName:aC,backendName:"cpu",kernelFunc:CGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{paddings:s,mode:o}=r;We(i,"mirrorPad");const a=s.map((E,_)=>E[0]+i.shape[_]+E[1]),l=s.map(E=>E[0]),u=s.map((E,_)=>E[0]+i.shape[_]),h=o==="reflect"?0:1,d=n.data.get(i.dataId).values,p=i.shape.length,g=Xe(i.shape),y=Se(a),b=a.length,x=Xe(a),w=li(i.dtype,y);for(let E=0;E<y;E++){let _=ym(E,b,x);for(let P=0;P<b;P++)_[P]<l[P]?_[P]=l[P]*2-_[P]-h:_[P]>=u[P]&&(_[P]=(u[P]-1)*2-_[P]+h);_=_.map((P,N)=>P-l[N]);const A=Ha(_,p,g);w[E]=d[A]}return{dataId:n.write(w,a,i.dtype),shape:a,dtype:i.dtype}}const _Ge={kernelName:lC,backendName:"cpu",kernelFunc:IGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AGe=Un(((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e})),kGe=yr(l0,AGe),NGe={kernelName:l0,backendName:"cpu",kernelFunc:kGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qne(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{dim:s}=r,o=i.shape.length;let a=s;if(a===-1&&(a=o-1),a!==o-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${o} and dim was ${a}`);const l=wt([a],i.shape),u=Hne({inputs:{x:i},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),h=Qn(u.shape,l),d=mn({inputs:{x:u},backend:n,attrs:{shape:h}}),p=FM({inputs:{a:i,b:d},backend:n}),g=Qte({inputs:{x:p},backend:n}),y=q0({inputs:{x:g},backend:n,attrs:{axis:l,keepDims:!1}}),b=mn({inputs:{x:y},backend:n,attrs:{shape:h}}),x=BM({inputs:{a:g,b},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),x}const RGe={kernelName:IC,backendName:"cpu",kernelFunc:qne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DGe(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{numSamples:s,seed:o,normalized:a}=r;We(i,"multinomial");const l=a?i:qne({inputs:{logits:i},backend:n,attrs:{dim:-1}}),u=l.shape[0],h=l.shape[1],d=n.data.get(l.dataId).values,p=[u,s],g=ui(Se(p),"int32");for(let y=0;y<u;++y){const b=y*h,x=new Float32Array(h-1);x[0]=d[b];for(let E=1;E<x.length;++E)x[E]=x[E-1]+d[b+E];const w=EP.alea(o.toString()),C=y*s;for(let E=0;E<s;++E){const _=w();g[C+E]=x.length;for(let A=0;A<x.length;A++)if(_<x[A]){g[C+E]=A;break}}}return a||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(p,"int32",g)}const $Ge={kernelName:bQ,backendName:"cpu",kernelFunc:DGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OGe=OP;function PGe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l}=r;We(i,"NonMaxSuppression");const u=n.data.get(i.dataId).values,h=n.data.get(s.dataId).values,{selectedIndices:d}=OGe(u,h,o,a,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const MGe={kernelName:HO,backendName:"cpu",kernelFunc:PGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LGe=PP;function FGe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:u}=r;We(i,"NonMaxSuppressionPadded");const h=n.data.get(i.dataId).values,d=n.data.get(s.dataId).values,{selectedIndices:p,validOutputs:g}=LGe(h,d,o,a,l,u);return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([g]))]}const VGe={kernelName:qO,backendName:"cpu",kernelFunc:FGe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BGe=MP;function zGe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,softNmsSigma:u}=r;We(i,"NonMaxSuppressionWithScore");const h=n.data.get(i.dataId).values,d=n.data.get(s.dataId).values,p=o,g=a,y=l,b=u,{selectedIndices:x,selectedScores:w}=BGe(h,d,p,g,y,b);return[n.makeTensorInfo([x.length],"int32",new Int32Array(x)),n.makeTensorInfo([w.length],"float32",new Float32Array(w))]}const UGe={kernelName:KO,backendName:"cpu",kernelFunc:zGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jGe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:i}=e,{dtype:s,depth:o,onValue:a,offValue:l}=r;We(i,"oneHot");const u=Se(i.shape),h=new Float32Array(u*o);h.fill(l);const d=n.data.get(i.dataId).values;for(let p=0;p<u;++p)d[p]>=0&&d[p]<o&&(h[p*o+d[p]]=a);return n.makeTensorInfo([...i.shape,o],s,h)}const WGe={kernelName:fC,backendName:"cpu",kernelFunc:jGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bS(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const i=Af({inputs:{input:r},backend:n}),s=bS({inputs:{x:i},backend:n}),o=Gp({inputs:{input:r},backend:n}),a=bS({inputs:{x:o},backend:n}),l=os({inputs:{real:s,imag:a},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return zM({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const GGe={kernelName:kC,backendName:"cpu",kernelFunc:bS};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kne(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const i=Af({inputs:{input:r},backend:n}),s=Kne({inputs:{x:i},backend:n}),o=Gp({inputs:{input:r},backend:n}),a=bS({inputs:{x:o},backend:n}),l=os({inputs:{real:s,imag:a},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return zM({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const HGe={kernelName:hC,backendName:"cpu",kernelFunc:Kne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xne(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r;if(e.length===1)return vS({inputs:{input:e[0]},backend:n,attrs:{dim:i}});const s=e[0].shape,o=e[0].dtype;e.forEach(h=>{pO(s,h.shape,"All tensors passed to stack must have matching shapes"),U(o===h.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=e.map(h=>{const d=vS({inputs:{input:h},backend:n,attrs:{dim:i}});return a.push(d),d}),u=Hp({inputs:l,backend:n,attrs:{axis:i}});return a.forEach(h=>n.disposeIntermediateTensorInfo(h)),u}const qGe={kernelName:dC,backendName:"cpu",kernelFunc:Xne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{paddings:s,constantValue:o}=r;We(i,"pad");const a=s.map((C,E)=>C[0]+i.shape[E]+C[1]),l=s.map(C=>C[0]),u=n.data.get(i.dataId).values,h=Se(i.shape),d=i.shape.length,p=Xe(i.shape),g=Se(a),y=a.length,b=Xe(a),x=li(i.dtype,g);o!==0&&x.fill(o);for(let C=0;C<h;C++){const _=ym(C,d,p).map((P,N)=>P+l[N]),A=Ha(_,y,b);x[A]=u[C]}return{dataId:n.write(x,a,i.dtype),shape:a,dtype:i.dtype}}const Yne={kernelName:pC,backendName:"cpu",kernelFunc:KGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XGe=Un((t,e)=>Math.pow(t,e)),YGe=yr(c0,XGe),QGe={kernelName:c0,backendName:"cpu",kernelFunc:YGe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZGe(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:i,paramsDenseValues:s,indices:o}=e,{outputRaggedRank:a}=r,l=i.map(w=>n.data.get(w.dataId).values),u=i.map(w=>w.shape),h=n.data.get(s.dataId).values,d=n.data.get(o.dataId).values,[p,g,y]=mne(l,u,h,s.shape,s.dtype,d,o.shape),b=p.map(w=>n.makeTensorInfo([w.length],"int32",w)),x=n.makeTensorInfo(y,s.dtype,g);return b.concat([x])}const JGe={kernelName:xQ,backendName:"cpu",kernelFunc:ZGe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e5e(t){const{inputs:e,backend:n}=t,{starts:r,limits:i,deltas:s}=e,o=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,[u,h]=gne(o,r.shape,r.dtype,a,i.shape,l,s.shape),d=n.makeTensorInfo([u.length],"int32",u),p=n.makeTensorInfo([h.length],r.dtype,h);return[d,p]}const t5e={kernelName:wQ,backendName:"cpu",kernelFunc:e5e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n5e(t){const{inputs:e,backend:n,attrs:r}=t,{shape:i,values:s,defaultValue:o,rowPartitionTensors:a}=e,{rowPartitionTypes:l}=r,u=n.data.get(i.dataId).values,h=n.data.get(s.dataId).values,d=n.data.get(o.dataId).values,p=a.map(x=>n.data.get(x.dataId).values),g=a.map(x=>x.shape),[y,b]=yne(u,i.shape,h,s.shape,s.dtype,d,o.shape,p,g,l);return n.makeTensorInfo(y,s.dtype,b)}const r5e={kernelName:SQ,backendName:"cpu",kernelFunc:n5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i5e(t){const{backend:e,attrs:n}=t,{start:r,stop:i,dtype:s,step:o}=n,a=vne(r,i,o,s);return e.makeTensorInfo([a.length],s,a)}const s5e={kernelName:XO,backendName:"cpu",kernelFunc:i5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o5e=Yt(h0,t=>1/t),a5e={kernelName:h0,backendName:"cpu",kernelFunc:o5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l5e(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:s,halfPixelCenters:o,size:a}=r;We(i,"resizeBilinear");const l=Xe(i.shape),[u,h]=a,[d,p,g,y]=i.shape,b=n.data.get(i.dataId).values,x=new Float32Array(Se([d,u,h,y])),w=[s&&u>1?p-1:p,s&&h>1?g-1:g],C=[s&&u>1?u-1:u,s&&h>1?h-1:h];let E=0;const _=w[0]/C[0],A=w[1]/C[1];for(let P=0;P<d;P++)for(let N=0;N<u;N++){let R;o?R=_*(N+.5)-.5:R=_*N;const D=Math.max(0,Math.floor(R)),O=R-D,k=Math.min(p-1,Math.ceil(R)),F=P*l[0]+D*l[1],L=P*l[0]+k*l[1];for(let q=0;q<h;q++){let Y;o?Y=A*(q+.5)-.5:Y=A*q;const W=Math.max(0,Math.floor(Y)),H=Y-W,X=Math.min(g-1,Math.ceil(Y)),ee=F+W*l[2],ce=L+W*l[2],j=F+X*l[2],Q=L+X*l[2];for(let ie=0;ie<y;ie++){const me=b[ee+ie],ve=b[ce+ie],_e=b[j+ie],De=b[Q+ie],Fe=me+(_e-me)*H,ue=ve+(De-ve)*H,Oe=Fe+(ue-Fe)*O;x[E++]=Oe}}}return n.makeTensorInfo([d,u,h,y],"float32",x)}const u5e={kernelName:bC,backendName:"cpu",kernelFunc:l5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c5e(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:s}=e,{alignCorners:o}=r;We([s,i],"resizeBilinearGrad");const a=Xe(i.shape),[l,u,h,d]=i.shape,[,p,g]=s.shape,y=new Float32Array(l*u*h*d),b=[o&&p>1?u-1:u,o&&g>1?h-1:h],x=[o&&p>1?p-1:p,o&&g>1?g-1:g],w=b[0]/x[0],C=b[1]/x[1],E=n.data.get(s.dataId).values;let _=0;for(let A=0;A<l;A++){const P=A*a[0];for(let N=0;N<p;N++){const R=N*w,D=Math.floor(R),O=Math.min(Math.ceil(R),u-1),k=P+D*a[1],F=P+O*a[1],L=R-D,q=1-L;for(let Y=0;Y<g;Y++){const W=Y*C,H=Math.floor(W),X=Math.min(Math.ceil(W),h-1),ee=W-H,ce=1-ee,j=k+H*a[2],Q=k+X*a[2],ie=F+H*a[2],me=F+X*a[2],ve=q*ce,_e=q*ee,De=L*ce,Fe=L*ee;for(let ue=0;ue<d;ue++){const Oe=E[_++];y[j+ue]+=Oe*ve,y[Q+ue]+=Oe*_e,y[ie+ue]+=Oe*De,y[me+ue]+=Oe*Fe}}}}return n.makeTensorInfo([l,h,u,d],"float32",y)}const h5e={kernelName:ZO,backendName:"cpu",kernelFunc:c5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f5e(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:s,halfPixelCenters:o,size:a}=r;We(i,"resizeNearestNeighbor");const l=Xe(i.shape),[u,h]=a,[d,p,g,y]=i.shape,b=n.data.get(i.dataId).values,x=new Float32Array(d*u*h*y),w=[s&&u>1?p-1:p,s&&h>1?g-1:g],C=[s&&u>1?u-1:u,s&&h>1?h-1:h],E=w[0]/C[0],_=w[1]/C[1];let A=0;for(let P=0;P<d;P++){const N=P*l[0];for(let R=0;R<u;R++){const D=o?E*(R+.5):E*R;let O=Math.min(p-1,s?Math.round(D):Math.floor(D));o&&(O=Math.max(0,O));const k=N+O*l[1];for(let F=0;F<h;F++){const L=o?_*(F+.5):_*F;let q=Math.min(g-1,s?Math.round(L):Math.floor(L));o&&(q=Math.max(0,q));const Y=k+q*l[2];for(let W=0;W<y;W++){const H=b[Y+W];x[A++]=H}}}}return n.makeTensorInfo([d,u,h,y],i.dtype,x)}const d5e={kernelName:vC,backendName:"cpu",kernelFunc:f5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p5e(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:s}=e,{alignCorners:o}=r;We([s,i],"resizeNearestNeighborGrad");const a=Xe(i.shape),l=Xe(s.shape),[u,h,d,p]=i.shape,[,g,y]=s.shape,b=new Float32Array(u*h*d*p),x=n.data.get(s.dataId).values,w=[o&&g>1?h-1:h,o&&y>1?d-1:d],C=[o&&g>1?g-1:g,o&&y>1?y-1:y],E=w[0]/C[0],_=w[1]/C[1],A=1/E,P=1/_,N=Math.ceil(A)*2+2,R=Math.ceil(P)*2+2;for(let D=0;D<u;D++){const O=D*a[0];for(let k=0;k<h;k++){const F=O+k*a[1],L=Math.floor(k*A),q=Math.floor(L-N/2);for(let Y=0;Y<d;Y++){const W=F+Y*a[2],H=Math.floor(Y*P),X=Math.floor(H-R/2);for(let ee=0;ee<p;ee++){let ce=0;for(let j=0;j<N;j++){const Q=j+q;if(Q<0||Q>=g)continue;const ie=O+Q*l[1],me=Q*E,ve=Math.min(h-1,o?Math.round(me):Math.floor(me));if(k===ve)for(let _e=0;_e<R;_e++){const De=_e+X;if(De<0||De>=y)continue;const Fe=ie+De*l[2],ue=De*_,Oe=Math.min(d-1,o?Math.round(ue):Math.floor(ue));Y===Oe&&(ce+=x[Fe+ee])}}b[W+ee]=ce}}}}return n.makeTensorInfo(i.shape,i.dtype,b)}const m5e={kernelName:QO,backendName:"cpu",kernelFunc:p5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dims:s}=r;We(i,"reverse");const o=i.shape.length,a=wt(s,i.shape);if(o===0)return al({inputs:{x:i},backend:n});const l=new Fr(i.shape,i.dtype),u=n.bufferSync(i);for(let h=0;h<l.size;h++){const d=l.indexToLoc(h),p=d.slice();a.forEach(g=>p[g]=i.shape[g]-1-p[g]),l.set(u.get(...p),...d)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}const y5e={kernelName:xC,backendName:"cpu",kernelFunc:g5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v5e={kernelName:sP,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:i,fillValue:s,center:o}=e,a=n,l=li(r.dtype,Se(r.shape)),[u,h,d,p]=r.shape,[g,y]=KP(o,h,d),b=255,x=Math.sin(i),w=Math.cos(i),C=a.data.get(r.dataId).values;for(let _=0;_<u;_++){const A=_*d*h*p;for(let P=0;P<h;P++){const N=P*(d*p);for(let R=0;R<d;R++){const D=R*p;for(let O=0;O<p;O++){const k=[u,P,R,O],F=k[2],L=k[1];let q=(F-g)*w-(L-y)*x,Y=(F-g)*x+(L-y)*w;q=Math.round(q+g),Y=Math.round(Y+y);let W=s;if(typeof s!="number"&&(O===3?W=b:W=s[O]),q>=0&&q<d&&Y>=0&&Y<h){const X=Y*(d*p),ee=q*p,ce=A+X+ee+O;W=C[ce]}const H=A+N+D+O;l[H]=W}}}}return{dataId:a.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b5e=Yt(p0,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),x5e={kernelName:p0,backendName:"cpu",kernelFunc:b5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w5e(t){const{inputs:e,backend:n,attrs:r}=t,{indices:i,updates:s}=e,{shape:o}=r,{sliceRank:a,numUpdates:l,sliceSize:u,strides:h,outputSize:d}=jf(s,i,o),p=!0,g=n.bufferSync(i),y=n.bufferSync(s),b=Kh(g,y,o,d,u,l,a,h,0,p);return n.makeTensorInfo(o,b.dtype,b.values)}const S5e={kernelName:TQ,backendName:"cpu",kernelFunc:w5e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T5e(t,e){let n=0,r=t.length,i=0;for(;n<r;)i=Math.floor((n+r)/2),t[i]<e?n=i+1:r=i;return r}function C5e(t,e){let n=0,r=t.length,i=0;for(;n<r;)i=Math.floor((n+r)/2),t[i]<=e?n=i+1:r=i;return r}function E5e(t,e,n,r,i,s){const o=Ln("int32",n*i);for(let a=0;a<n;++a){const l=t.slice(a*r,(a+1)*r),u=a*i;for(let h=0;h<i;++h)o[u+h]=s==="left"?T5e(l,e[h+u]):C5e(l,e[h+u])}return o}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I5e(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:i,values:s}=e,{side:o}=r,a=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,u=E5e(a,l,i.shape[0],i.shape[1],s.shape[1],o);return n.makeTensorInfo(s.shape,"int32",u)}const _5e={kernelName:EQ,backendName:"cpu",kernelFunc:I5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A5e(t){const{inputs:e,backend:n}=t,{condition:r,t:i,e:s}=e;We([r,i,s],"select");const o=r.shape.length,a=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values,h=fs(i.dtype,s.dtype),d=ui(Se(i.shape),h);let p=0;const g=o===0||o>1||i.shape.length===1?1:Se(i.shape.slice(1));for(let y=0;y<a.length;y++)for(let b=0;b<g;b++)a[y]===1?d[p++]=l[y]:d[p++]=u[y];return n.makeTensorInfo(i.shape,h,d)}const k5e={kernelName:wC,backendName:"cpu",kernelFunc:A5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N5e=VC,R5e=BC,D5e=Yt(g0,t=>t>=0?R5e*t:N5e*(Math.exp(t)-1)),$5e={kernelName:g0,backendName:"cpu",kernelFunc:D5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O5e=Yt(b0,t=>t<0?-1:t>0?1:0),P5e={kernelName:b0,backendName:"cpu",kernelFunc:O5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M5e=Yt(y0,t=>Math.sin(t)),L5e={kernelName:y0,backendName:"cpu",kernelFunc:M5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F5e=Yt(v0,t=>Math.sinh(t)),V5e={kernelName:v0,backendName:"cpu",kernelFunc:F5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B5e=11920928955078125e-23,AG=Math.log(B5e)+2,z5e=Yt(w0,t=>{const e=t>-AG,n=t<AG,r=Math.exp(t);let i;return n?i=r:e?i=t:i=Math.log(1+r),i}),U5e={kernelName:w0,backendName:"cpu",kernelFunc:z5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:s,paddings:o}=r;We([i],"spaceToBatchND");const a=Se(s),l=[[0,0]];l.push(...o);for(let P=1+s.length;P<i.shape.length;++P)l.push([0,0]);const u=Yne.kernelFunc({inputs:{x:i},backend:n,attrs:{paddings:l,constantValue:0}}),h=M0(u.shape,s,a,!1),d=L0(h.length,s.length,!1),p=F0(u.shape,s,a,!1),b=mn({inputs:{x:u},backend:n,attrs:{shape:h}}),C=Wi({inputs:{x:b},backend:n,attrs:{perm:d}}),A=mn({inputs:{x:C},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(C),A}const W5e={kernelName:CC,backendName:"cpu",kernelFunc:j5e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G5e(t){const{inputs:e,backend:n}=t,{indices:r,values:i,denseShape:s,defaultValue:o}=e;if(s.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${s.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(i.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${i.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const a=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values,h=n.data.get(o.dataId).values[0],[d,p,g,y,b]=Sne(a,r.shape,r.dtype,l,i.dtype,u,h);return[n.makeTensorInfo(p,r.dtype,d),n.makeTensorInfo([p[0]],i.dtype,g),n.makeTensorInfo([y.length],"bool",new Uint8Array(y.map(x=>Number(x)))),n.makeTensorInfo([b.length],r.dtype,new Int32Array(b))]}const H5e={kernelName:IQ,backendName:"cpu",kernelFunc:G5e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q5e(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:i,newShape:s}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(i.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${i.shape}`);if(s.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);const o=Array.from(n.data.get(i.dataId).values),a=n.data.get(r.dataId).values,l=Array.from(n.data.get(s.dataId).values),[u,h,d]=Tne(a,r.shape,r.dtype,o,l);return[n.makeTensorInfo(h,r.dtype,u),n.makeTensorInfo([d.length],s.dtype,new Int32Array(d))]}const K5e={kernelName:_Q,backendName:"cpu",kernelFunc:q5e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X5e(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${s.shape}`);if(i.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,[u,h]=LM(o,r.shape,r.dtype,a,l,!0);return n.makeTensorInfo(h,r.dtype,u)}const Y5e={kernelName:AQ,backendName:"cpu",kernelFunc:X5e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q5e(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${s.shape}`);if(i.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,[u,h]=LM(o,r.shape,r.dtype,a,l);return n.makeTensorInfo(h,r.dtype,u)}const Z5e={kernelName:kQ,backendName:"cpu",kernelFunc:Q5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J5e(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:i,sparseValues:s,defaultValue:o}=e,{outputShape:a}=r,{sliceRank:l,numUpdates:u,sliceSize:h,strides:d,outputSize:p}=jf(s,i,a),g=!1,y=n.bufferSync(i);let b;switch(s.dtype){case"bool":{const x=n.bufferSync(s),w=!!n.data.get(o.dataId).values[0];b=Kh(y,x,a,p,h,u,l,d,w,g);break}case"float32":{const x=n.bufferSync(s),w=n.data.get(o.dataId).values[0];b=Kh(y,x,a,p,h,u,l,d,w,g);break}case"int32":{const x=n.bufferSync(s),w=n.data.get(o.dataId).values[0];b=Kh(y,x,a,p,h,u,l,d,w,g);break}case"string":{const x=n.bufferSync(s),w=Dc(n.data.get(o.dataId).values[0]);b=Kh(y,x,a,p,h,u,l,d,w,g);break}default:throw new Error(`Unsupported type ${s.dtype}`)}return n.makeTensorInfo(a,b.dtype,b.values)}const eHe={kernelName:NQ,backendName:"cpu",kernelFunc:J5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{numOrSizeSplits:s,axis:o}=r,a=wt(o,i.shape)[0],l=uM(i,s,a),u=new Array(i.shape.length).fill(0),h=i.shape.slice();return l.map(d=>{const p=[...h];p[a]=d;const g=kf({inputs:{x:i},backend:n,attrs:{begin:u,size:p}});return u[a]+=d,g})}const nHe={kernelName:EC,backendName:"cpu",kernelFunc:tHe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rHe={kernelName:JO,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e;We(n,"square");const i=r.data.get(n.dataId).values,s=new Float32Array(i.length);for(let a=0;a<i.length;++a){const l=i[a];s[a]=l*l}return{dataId:r.write(s,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iHe=Yt(A0,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),sHe={kernelName:A0,backendName:"cpu",kernelFunc:iHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:s,end:o,strides:a,beginMask:l,endMask:u,ellipsisMask:h,newAxisMask:d,shrinkAxisMask:p}=r;We(i,"stridedSlice");const{finalShapeSparse:g,finalShape:y,isIdentity:b,sliceDim0:x,isSimpleSlice:w,begin:C,end:E,strides:_}=GP(i.shape,s,o,a,l,u,h,d,p);let A;if(b)A=mn({inputs:{x:i},backend:n,attrs:{shape:y}});else if(x||w){U(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);const P=UP(C,E,_),N=kf({inputs:{x:i},backend:n,attrs:{begin:C,size:P}});A=mn({inputs:{x:N},backend:n,attrs:{shape:y}}),n.disposeIntermediateTensorInfo(N)}else{const P=n.bufferSync(i),N=Ine(g,P,_,C);A=n.makeTensorInfo(y,N.dtype,N.values)}return A}const aHe={kernelName:tP,backendName:"cpu",kernelFunc:oHe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lHe(t){const{inputs:e,backend:n,attrs:r}=t,{separator:i,nGramWidths:s,leftPad:o,rightPad:a,padWidth:l,preserveShortSequences:u}=r,{data:h,dataSplits:d}=e,p=n.data.get(h.dataId).values,g=n.data.get(d.dataId).values,[y,b]=_ne(p,g,i,s,o,a,l,u);return[n.makeTensorInfo([y.length],"string",y),n.makeTensorInfo(d.shape,"int32",b)]}const uHe={kernelName:RQ,backendName:"cpu",kernelFunc:lHe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cHe(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:i}=r,{input:s,delimiter:o}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(s.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const a=n.data.get(s.dataId).values,l=n.data.get(o.dataId).values[0],[u,h,d]=Ane(a,l,i),p=h.length;return[n.makeTensorInfo([p,2],"int32",u),n.makeTensorInfo([p],"string",h),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const hHe={kernelName:DQ,backendName:"cpu",kernelFunc:cHe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fHe(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:i}=r,{input:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const o=n.data.get(s.dataId).values,a=kne(o,i);return n.makeTensorInfo(s.shape,"int32",a)}const dHe={kernelName:$Q,backendName:"cpu",kernelFunc:fHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pHe=Yt(E0,t=>Math.tan(t)),mHe={kernelName:E0,backendName:"cpu",kernelFunc:pHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gHe=Yt(I0,t=>Math.tanh(t)),yHe={kernelName:I0,backendName:"cpu",kernelFunc:gHe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vHe(t){const{inputs:e,backend:n}=t,{tensor:r,indices:i,updates:s}=e,{sliceRank:o,numUpdates:a,sliceSize:l,strides:u,outputSize:h}=jf(s,i,r.shape),d=!1,p=n.bufferSync(i),g=n.bufferSync(s),y=n.bufferSync(r),b=Kh(p,g,r.shape,h,l,a,o,u,y,d);return n.makeTensorInfo(r.shape,b.dtype,b.values)}const bHe={kernelName:CQ,backendName:"cpu",kernelFunc:vHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reps:s}=r;We(i,"tile");const o=Rne(n.bufferSync(i),s);return n.makeTensorInfo(o.shape,o.dtype,o.values)}const wHe={kernelName:_0,backendName:"cpu",kernelFunc:xHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{k:s,sorted:o}=r;We(i,"topk");const a=n.data.get(i.dataId).values,[l,u]=$ne(a,i.shape,i.dtype,s,o);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(u.shape,u.dtype,u.values)]}const THe={kernelName:nP,backendName:"cpu",kernelFunc:SHe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CHe(t){const{inputs:e,attrs:n,backend:r}=t,{image:i,transforms:s}=e,{interpolation:o,fillMode:a,fillValue:l,outputShape:u}=n,[h,d,p,g]=i.shape,[y,b]=u??[d,p],x=[h,y,b,g],w=Xe(i.shape),C=w[0],E=w[1],_=w[2],A=Xe(x),P=A[0],N=A[1],R=A[2],D=li(i.dtype,Se(x));D.fill(l);const O=r.data.get(i.dataId).values,k=r.data.get(s.dataId).values;for(let L=0;L<h;++L){const q=s.shape[0]===1?k:k.subarray(L*8,L*8+8);for(let Y=0;Y<y;++Y)for(let W=0;W<b;++W)for(let H=0;H<g;++H){let X;const ee=q[6]*W+q[7]*Y+1;if(ee===0)continue;const ce=(q[0]*W+q[1]*Y+q[2])/ee,j=(q[3]*W+q[4]*Y+q[5])/ee,Q=kG(ce,p,a),ie=kG(j,d,a);switch(o){case"nearest":X=NHe(O,d,p,C,E,_,L,ie,Q,H,l);break;case"bilinear":X=RHe(O,d,p,C,E,_,L,ie,Q,H,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${o}`)}const me=L*P+Y*N+W*R+H;D[me]=X}return r.makeTensorInfo(x,i.dtype,D)}return{dataId:r.write(D,x,i.dtype),shape:i.shape,dtype:i.dtype}}const EHe={kernelName:rP,backendName:"cpu",kernelFunc:CHe};function kG(t,e,n){switch(n){case"reflect":return IHe(t,e);case"wrap":return _He(t,e);case"nearest":return kHe(t,e);case"constant":default:return AHe(t)}}function IHe(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=2*e;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-e?n+r:-n-1}else if(n>e-1)if(e<=1)n=0;else{const r=2*e;n-=r*Math.trunc(n/r),n>=e&&(n=r-n-1)}return gf(0,n,e-1)}function _He(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=e-1;n+=e*(Math.trunc(-n/r)+1)}else if(n>e-1)if(e<=1)n=0;else{const r=e-1;n-=e*Math.trunc(n/r)}return gf(0,n,e-1)}function AHe(t,e){return t}function kHe(t,e){return gf(0,t,e-1)}function ny(t,e,n,r,i,s,o,a,l,u,h){const d=o*r+a*i+l*s+u;return 0<=a&&a<e&&0<=l&&l<n?t[d]:h}function NHe(t,e,n,r,i,s,o,a,l,u,h){const d=Math.round(a),p=Math.round(l);return ny(t,e,n,r,i,s,o,d,p,u,h)}function RHe(t,e,n,r,i,s,o,a,l,u,h){const d=Math.floor(a),p=Math.floor(l),g=d+1,y=p+1,b=(y-l)*ny(t,e,n,r,i,s,o,d,p,u,h)+(l-p)*ny(t,e,n,r,i,s,o,d,y,u,h),x=(y-l)*ny(t,e,n,r,i,s,o,g,p,u,h)+(l-p)*ny(t,e,n,r,i,s,o,g,y,u,h);return(g-a)*b+(a-d)*x}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DHe(t){const{inputs:e,attrs:n,backend:r}=t,{axis:i}=n,{x:s}=e;We(s,"unique");const o=r.data.get(s.dataId).values,{outputValues:a,outputShape:l,indices:u}=One(o,i,s.shape,s.dtype);return[r.makeTensorInfo(l,s.dtype,a),r.makeTensorInfo([u.length],"int32",u)]}const $He={kernelName:iP,backendName:"cpu",kernelFunc:DHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OHe(t){const{inputs:e,backend:n,attrs:r}=t,{value:i}=e;let{axis:s}=r;s<0&&(s+=i.shape.length);const o=i.shape.length,a=i.shape[s],l=new Array(o-1);let u=0;for(let g=0;g<o;g++)g!==s&&(l[u++]=i.shape[g]);const h=new Array(o).fill(0),d=i.shape.slice();d[s]=1;const p=new Array(a);for(let g=0;g<p.length;g++){h[s]=g;const y=kf({inputs:{x:i},backend:n,attrs:{begin:h,size:d}});p[g]=mn({inputs:{x:y},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(y)}return p}const PHe={kernelName:_C,backendName:"cpu",kernelFunc:OHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,segmentIds:s}=e,{numSegments:o}=r;We(i,"unsortedSegmentSum");const a=i.shape.length,l=s.shape.length,u=[],h=[],d=a-l;let p=s;for(let y=0;y<d;++y){const b=vS({inputs:{input:p},backend:n,attrs:{dim:y+1}});p=b,h.push(b)}for(let y=0;y<o;++y){const b=jc(y,"int32"),x=n.makeTensorInfo([],"int32",b),w=Xte({inputs:{a:x,b:p},backend:n}),C=Lc({inputs:{x:w},backend:n,attrs:{dtype:"float32"}}),E=ZC({inputs:{a:C,b:i},backend:n}),_=q0({inputs:{x:E},backend:n,attrs:{axis:0,keepDims:!1}});u.push(_),h.push(x),h.push(w),h.push(C),h.push(E),h.push(_)}const g=Xne({inputs:u,backend:n,attrs:{axis:0}});return h.forEach(y=>n.disposeIntermediateTensorInfo(y)),g}const LHe={kernelName:AC,backendName:"cpu",kernelFunc:MHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FHe=[Dje,fUe,Oje,Mje,vUe,Fje,Bje,Uje,Wje,Hje,Kje,Yje,Zje,t6e,r6e,o6e,l6e,c6e,f6e,Nje,p6e,g6e,v6e,xUe,x6e,gUe,SUe,S6e,dUe,C6e,I6e,_6e,k6e,R6e,$6e,P6e,L6e,V6e,z6e,j6e,G6e,q6e,X6e,Q6e,Z6e,eWe,nWe,iWe,sWe,oWe,aWe,uWe,fWe,Tje,pWe,TUe,SWe,CUe,TWe,IUe,kWe,NWe,DWe,AUe,NUe,OWe,MWe,FWe,BWe,DUe,OUe,pUe,UWe,E6e,WWe,HWe,KWe,Cje,MUe,FUe,YWe,BUe,ZWe,tGe,rGe,oGe,lGe,cGe,hGe,UUe,dGe,mGe,yGe,bGe,wGe,TGe,EGe,WUe,_Ge,NGe,$Ge,HUe,KUe,MGe,VGe,UGe,YUe,WGe,HGe,qGe,Yne,QGe,Ije,JUe,JGe,t5e,r5e,s5e,mUe,eR,a5e,_je,Aje,kje,u5e,h5e,d5e,m5e,y5e,v5e,x5e,aje,S5e,_5e,k5e,$5e,uje,P5e,L5e,V5e,cje,RGe,U5e,W5e,H5e,K5e,Y5e,Z5e,eHe,nHe,dje,rHe,mje,yje,sHe,aHe,uHe,hHe,dHe,wje,cWe,mHe,yHe,bHe,wHe,THe,EHe,QUe,$He,PHe,LHe,GGe];for(const t of FHe)PQ(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vh={},t1={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function VHe(t,e){Vh[t]=e}function ia(t,e){if(!(t in Vh)||e!=null){const r=zHe(t,e);if(r!==null)Vh[t]=r;else return console.log("Could not get context for WebGL version",t),null}const n=Vh[t];return n==null||n.isContextLost()?(delete Vh[t],ia(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),Vh[t])}function BHe(t){if(!ge().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function zHe(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e??BHe(t);return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete Vh[t]},!1),ge().getBool("SOFTWARE_WEBGL_ENABLED")&&(t1.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",t1)||n.getContext("experimental-webgl",t1):n.getContext("webgl2",t1)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var ev;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(ev||(ev={}));var ks;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(ks||(ks={}));var Lr;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(Lr||(Lr={}));function K0(t,e){return[e,t]}function UHe(t,e){return t*e}function n1(t){const e=Se(t),n=Math.ceil(e/4);return SN(n)}function Cm(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function jHe(t,e){const[n,r]=Cm(t,e);return n*r*4}function UM(t,e){const n=t;let r,i,s,o,a,l,u,h,d,p;return ge().getNumber("WEBGL_VERSION")===2?(r=n.R32F,i=n.R16F,s=n.RGBA16F,o=n.RGBA32F,a=n.RED,u=4,h=1,d=n.HALF_FLOAT,p=n.FLOAT,l=n.RGBA8):(r=t.RGBA,i=t.RGBA,s=t.RGBA,o=n.RGBA,a=t.RGBA,u=4,h=4,d=e!=null?e.HALF_FLOAT_OES:null,p=t.FLOAT,l=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:i,internalFormatPackedHalfFloat:s,internalFormatPackedFloat:o,textureFormatFloat:a,downloadTextureFormat:l,downloadUnpackNumChannels:u,defaultNumChannels:h,textureTypeHalfFloat:d,textureTypeFloat:p}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ve(t,e){const n=e();return ge().getBool("DEBUG")&&WHe(t),n}function WHe(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+KHe(t,e))}const GHe=596e-10,HHe=65504;function qHe(t){return!!(ge().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||GHe<Math.abs(t)&&Math.abs(t)<HHe)}function KHe(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function r1(t,e){return mu(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function XHe(t,e){const n=mu(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(Ve(t,()=>t.shaderSource(n,e)),Ve(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function YHe(t,e){const n=mu(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(Ve(t,()=>t.shaderSource(n,e)),Ve(t,()=>t.compileShader(n)),ge().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw Qne(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const QHe=/ERROR: [0-9]+:([0-9]+):/g;function Qne(t,e){const n=QHe.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const r=+n[1],i=t.split(`
`),s=i.length.toString().length+2,o=i.map((d,p)=>dp((p+1).toString(),s)+d);let a=0;for(let d=0;d<o.length;d++)a=Math.max(o[d].length,a);const l=o.slice(0,r-1),u=o.slice(r-1,r),h=o.slice(r);console.log(l.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${dp(u[0],a)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(h.join(`
`))}function ZHe(t){return mu(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function JHe(t,e){if(Ve(t,()=>t.linkProgram(e)),!ge().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function Ik(t,e){if(Ve(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function eqe(t,e){const n=mu(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Ve(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),Ve(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function tqe(t,e){const n=mu(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Ve(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),Ve(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function nqe(t){return mu(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function rqe(t,e){const n=ge().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const r=`[${t}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n){const r=`[${t}x${e}]`,i=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+i+".")}}function iqe(t){return mu(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function NG(t,e,n,r,i,s,o){const a=t.getAttribLocation(e,n);return a===-1?!1:(Ve(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),Ve(t,()=>t.vertexAttribPointer(a,i,t.FLOAT,!1,s,o)),Ve(t,()=>t.enableVertexAttribArray(a)),!0)}function sqe(t,e,n){cqe(t,n),Ve(t,()=>t.activeTexture(t.TEXTURE0+n)),Ve(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function oqe(t,e,n){return mu(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function aqe(t,e,n){return t.getUniformLocation(e,n)}function lqe(t,e,n,r){Ve(t,()=>sqe(t,e,r)),Ve(t,()=>t.uniform1i(n,r))}function _k(t,e,n){Ve(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),Ve(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function RG(t,e){Ve(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),Ve(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function i1(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+uqe(t,e))}function uqe(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function mu(t,e,n){const r=Ve(t,()=>e());if(r==null)throw new Error(n);return r}function cqe(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){const i=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${i}.`)}}function qp(t,e=2){return Se(t.slice(0,t.length-e))}function Kp(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function s1(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[qp(t),...Kp(t)]),e}function hqe(t,e=!1){let n=ge().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=ge().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&ge().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),e&&(n=n*2,r=r*2,t=t.map((a,l)=>l>=t.length-2?dO(t[l]):t[l]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=Uc(t).newShape);let i=Se(t),s=null;t.length<=1&&i<=n?s=[1,i]:t.length===2&&t[0]<=n&&t[1]<=n?s=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?s=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?s=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?s=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(s=[t[0],t[1]*t[2]*t[3]]);const o=s!=null&&Math.max(...s)>r&&Math.min(...s)<=(e?2:1)&&Math.min(...s)>0;if(s==null||o)if(e){const a=qp(t);let l=2,u=2;t.length&&([l,u]=Kp(t)),i=a*(l/2)*(u/2),s=SN(i).map(h=>h*2)}else s=SN(i);return s}function o1(t){return t%2===0}function xS(t,e){if(t=t.slice(-2),e=e.slice(-2),Wt(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t[t.length-1],r=e[e.length-1];if(n===r||o1(n)&&o1(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&o1(t[0])&&o1(e[0])}let Ak,kk;function fqe(t){if(Ak==null){const e=ia(t);Ak=e.getParameter(e.MAX_TEXTURE_SIZE)}return Ak}function dqe(t){if(kk==null){const e=ia(t);kk=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,kk)}function pqe(t){if(t===0)return 0;let e;const n=ia(t);return mo(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:mo(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function mo(t,e){return t.getExtension(e)!=null}function DG(t){try{if(ia(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function mqe(t){if(t===0)return!1;const e=ia(t);if(t===1){if(!mo(e,"OES_texture_float"))return!1}else if(!mo(e,"EXT_color_buffer_float"))return!1;return nR(e)}function gqe(t){if(t===0)return!1;const e=ia(t);if(t===1){if(!mo(e,"OES_texture_float")||!mo(e,"WEBGL_color_buffer_float"))return!1}else{if(mo(e,"EXT_color_buffer_float"))return nR(e);const r="EXT_color_buffer_half_float";if(mo(e,r)){const i=e.getExtension(r);return yqe(e,i)}return!1}return nR(e)}function nR(t){const e=UM(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const s=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,s),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(s),o}function yqe(t,e){const n=UM(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(o),a}function vqe(t){return t!==2?!1:ia(t).fenceSync!=null}function X0(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&U(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ge=ge();Ge.registerFlag("HAS_WEBGL",()=>Ge.getNumber("WEBGL_VERSION")>0);Ge.registerFlag("WEBGL_VERSION",()=>DG(2)?2:DG(1)?1:0);Ge.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);Ge.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>Ge.get("WEBGL_VERSION")===2);Ge.registerFlag("WEBGL_CPU_FORWARD",()=>!0);Ge.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);Ge.registerFlag("WEBGL_PACK",()=>Ge.getBool("HAS_WEBGL"));Ge.registerFlag("WEBGL_PACK_NORMALIZATION",()=>Ge.getBool("WEBGL_PACK"));Ge.registerFlag("WEBGL_PACK_CLIP",()=>Ge.getBool("WEBGL_PACK"));Ge.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>Ge.getBool("WEBGL_PACK"));Ge.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>Ge.getBool("WEBGL_PACK"));Ge.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>Ge.getBool("WEBGL_PACK"));Ge.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>Ge.getBool("WEBGL_PACK"));Ge.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>Ge.getBool("WEBGL_PACK"));Ge.registerFlag("WEBGL_PACK_REDUCE",()=>Ge.getBool("WEBGL_PACK"));Ge.registerFlag("WEBGL_LAZILY_UNPACK",()=>Ge.getBool("WEBGL_PACK"));Ge.registerFlag("WEBGL_CONV_IM2COL",()=>Ge.getBool("WEBGL_PACK"));Ge.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>Ge.getBool("WEBGL_PACK"));Ge.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>fqe(Ge.getNumber("WEBGL_VERSION")));Ge.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>dqe(Ge.getNumber("WEBGL_VERSION")));Ge.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=Ge.getNumber("WEBGL_VERSION");return t===0?0:pqe(t)});Ge.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>Ge.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!KQ());Ge.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>mqe(Ge.getNumber("WEBGL_VERSION")));Ge.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>Ge.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:Ge.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));Ge.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>gqe(Ge.getNumber("WEBGL_VERSION")));Ge.registerFlag("WEBGL_FENCE_API_ENABLED",()=>vqe(Ge.getNumber("WEBGL_VERSION")));Ge.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>Ge.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);Ge.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});Ge.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>KQ()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});Ge.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);Ge.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);Ge.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);Ge.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);Ge.registerFlag("WEBGL_EXP_CONV",()=>!1);Ge.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>Ge.getBool("IS_TEST"));Ge.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);Ge.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);Ge.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);Ge.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ki(){let t,e,n,r,i,s,o,a,l,u;return ge().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",i="texture",s="outputColor",o="out vec4 outputColor;",a=ge().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",u=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",i="texture2D",s="gl_FragColor",o="",a=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,u=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:i,output:s,defineOutput:o,defineSpecialNaN:a,defineSpecialInf:l,defineRound:u}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hf(t,e,n="index"){const r=Xe(e);return r.map((i,s)=>{const o=`int ${t[s]} = ${n} / ${i}`,a=s===r.length-1?`int ${t[s+1]} = ${n} - ${t[s]} * ${i}`:`index -= ${t[s]} * ${i}`;return`${o}; ${a};`}).join("")}function JC(t,e,n="index"){const r=Xe(e);return r.map((i,s)=>{const o=`int ${t[s]} = ${n} / outShapeStrides[${s}]`,a=s===r.length-1?`int ${t[s+1]} = ${n} - ${t[s]} * outShapeStrides[${s}]`:`index -= ${t[s]} * outShapeStrides[${s}]`;return`${o}; ${a};`}).join("")}function bqe(t,e){const n=t.length,r=t.map(s=>`${e}[${s}]`),i=new Array(n-1);i[n-2]=r[n-1];for(let s=n-3;s>=0;--s)i[s]=`(${i[s+1]} * ${r[s+1]})`;return i}function xqe(t,e,n="index"){const r=t.map((s,o)=>o),i=bqe(r,e);return i.map((s,o)=>{const a=`int ${t[o]} = ${n} / ${i[o]}`,l=o===i.length-1?`int ${t[o+1]} = ${n} - ${t[o]} * ${i[o]}`:`index -= ${t[o]} * ${i[o]}`;return`${a}; ${l};`}).join("")}function jM(t){const e=Xe(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function WM(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const Zne=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:Jne}=aVe;function wqe(t,e,n){const r=[];if(t.forEach(g=>{const y=Se(g.shapeInfo.logicalShape);if(g.shapeInfo.isUniform?r.push(`uniform float ${g.name}${y>1?`[${y}]`:""};`):(r.push(`uniform sampler2D ${g.name};`),r.push(`uniform int offset${g.name};`)),n.enableShapeUniforms){const{uniformShape:b}=GM(n.packedInputs,g.shapeInfo.logicalShape,g.shapeInfo.texShape);switch(b.length){case 1:r.push(`uniform int ${g.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${g.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${g.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${g.name}Shape;`);break}r.push(`uniform ivec2 ${g.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(g=>{r.push(`uniform ${g.type} ${g.name}${g.arrayIndex?`[${g.arrayIndex}]`:""};`)});const i=r.join(`
`),s=t.map(g=>Sqe(g,e,n.packedInputs,n.enableShapeUniforms)).join(`
`),o=e.texShape,a=ki(),l=Eqe(a);let u,h,d=Aqe(a);return e.isPacked?(u=Tqe(e.logicalShape,o,n.enableShapeUniforms),h=_qe(a)):(u=Cqe(e.logicalShape,o,n.enableShapeUniforms),h=Iqe(a)),n.packedInputs&&(d+=Dqe),[d,l,h,i,u,s,n.userCode].join(`
`)}function Em(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return Wqe(t,e);case 1:return Hqe(t,e);case 2:return Kqe(t,e);case 3:return Yqe(t,e);case 4:return Zqe(t,e);case 5:return Jqe(t);case 6:return e9e(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function ere(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return jqe(t);case 1:return Gqe(t,e);case 2:return qqe(t,e);case 3:return Xqe(t,e);default:return Qqe(t,e)}}function Sqe(t,e,n=!1,r){let i="";n?i+=ere(t,r):i+=Em(t,r);const s=t.shapeInfo.logicalShape,o=e.logicalShape;return s.length<=o.length&&(n?i+=t9e(t,e):i+=n9e(t,e)),i}function Tqe(t,e,n){switch(t.length){case 0:return tre();case 1:return $qe(t,e,n);case 2:return zqe(t,e,n);case 3:return Pqe(t,e,n);default:return Lqe(t,e,n)}}function Cqe(t,e,n){switch(t.length){case 0:return tre();case 1:return Oqe(t,e,n);case 2:return Uqe(t,e,n);case 3:return Mqe(t,e,n);case 4:return Fqe(t,e,n);case 5:return Vqe(t,e);case 6:return Bqe(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function Eqe(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function Iqe(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function _qe(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function Aqe(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${kqe}
    ${Nqe}
    ${Rqe}
  `}const kqe=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Nqe=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Rqe=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Dqe=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function tre(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function $qe(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function Oqe(t,e,n){return e[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function Pqe(t,e,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],i=Math.ceil(t[2]/2),s=i*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${s};
      index -= b * ${s};

      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec3(b, r, c);
    }
  `}function Mqe(t,e,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${JC(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;const r=Hf(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function Lqe(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],i=Math.ceil(t[t.length-1]/2),s=i*Math.ceil(t[t.length-2]/2);let o=s,a="",l="b, r, c";for(let u=2;u<t.length-1;u++)o*=t[t.length-u-1],a=`
      int b${u} = index / ${o};
      index -= b${u} * ${o};
    `+a,l=`b${u}, `+l;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${a}

      int b = index / ${s};
      index -= b * ${s};

      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec${t.length}(${l});
    }
  `}function Fqe(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${JC(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;const r=Hf(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function Vqe(t,e){const n=Hf(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function Bqe(t,e){const n=Hf(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function zqe(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(Wt(t,e))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const i=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec2(r, c);
    }
  `}function Uqe(t,e,n){return Wt(t,e)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function qf(t){return`offset${t}`}function jqe(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=ki();return`
    vec4 ${n}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function Wqe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[i,s]=t.shapeInfo.texShape;if(i===1&&s===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const o=qf(n);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${o});
      return sampleTexture(${n}, uv);
    }
  `;const[a,l]=t.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${a}, ${l}, ${o});
      return sampleTexture(${n}, uv);
    }
  `}function Gqe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t.shapeInfo.texShape,s=ki();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${s.texture2D}(${n}, uv);
    }
  `;const o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${o[0]}, ${o[1]}, index);
      return ${s.texture2D}(${n}, uv);
    }
  `}function Hqe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${Im(t)}
      }
    `;const i=t.shapeInfo.texShape,s=i[0],o=i[1];if(o===1&&s===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const a=qf(n);return o===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / ${s}.0);
        return sampleTexture(${n}, uv);
      }
    `:s===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / ${o}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${a});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${s}, ${o}, index + ${a});
      return sampleTexture(${n}, uv);
    }
  `}function qqe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t.shapeInfo.texShape,o=s[0],a=s[1],l=ki();if(s!=null&&Wt(n,s))return e?`
      vec4 ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${l.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}.0, ${o}.0);

        return ${l.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${i}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `;const u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],h=Math.ceil(n[1]/2);return`
    vec4 ${i}(int row, int col) {
      vec2 uv = packedUVfrom2D(${h}, ${u[0]}, ${u[1]}, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `}function Kqe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t.shapeInfo.texShape;if(s!=null&&Wt(n,s)){if(e)return`
      float ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const p=s[0],g=s[1];return`
    float ${i}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${g}.0, ${p}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:o,keptDims:a}=Uc(n),l=o;if(l.length<n.length){const p=_m(t,l),g=["row","col"];return`
      ${Em(p,e)}
      float ${i}(int row, int col) {
        return ${i}(${Am(g,a)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${Im(t)}
      }
    `;const u=s[0],h=s[1],d=qf(r);return h===1?e?`
      float ${i}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${u}.0);
      return sampleTexture(${r}, uv);
    }
  `:u===1?e?`
      float ${i}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${h}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${i}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${d};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${i}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${d};
    vec2 uv = uvFromFlat(${u}, ${h}, index);
    return sampleTexture(${r}, uv);
  }
`}function Xqe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t.shapeInfo.texShape,o=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];if(n[0]===1){const p=n.slice(1),g=[1,2],y=_m(t,p),b=["b","row","col"];return`
        ${ere(y,e)}
        vec4 ${i}(int b, int row, int col) {
          return ${i}(${Am(b,g)});
        }
      `}const a=ki();if(e)return`
    vec4 ${i}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `;const l=o[0],u=o[1],h=Math.ceil(n[2]/2),d=h*Math.ceil(n[1]/2);return`
    vec4 ${i}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${u}, ${d}, ${h}, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `}function Yqe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=n[1]*n[2],o=n[2],{newShape:a,keptDims:l}=Uc(n),u=a;if(u.length<n.length){const b=_m(t,u),x=["row","col","depth"];return`
        ${Em(b,e)}
        float ${i}(int row, int col, int depth) {
          return ${i}(${Am(x,l)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${s}, ${o}, 1)));
        ${Im(t)}
      }
    `;const h=t.shapeInfo.texShape,d=h[0],p=h[1],g=t.shapeInfo.flatOffset;if(p===s&&g==null)return e?`
      float ${i}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${i}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${o}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${p}.0, ${d}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(p===o&&g==null)return e?`
      float ${i}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${p}.0, ${d}.0);
      return sampleTexture(${r}, uv);
    }
  `;const y=qf(r);return e?`
    float ${i}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${y};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${i}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${s} + col * ${o} + depth + ${y};
        vec2 uv = uvFromFlat(${d}, ${p}, index);
        return sampleTexture(${r}, uv);
      }
  `}function Qqe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=ki();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${i.texture2D}(${n}, uv);
    }
  `;const s=t.shapeInfo.logicalShape,o=s.length,a=t.shapeInfo.texShape,l=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],u=l[0],h=l[1],d=Math.ceil(s[o-1]/2);let p=d*Math.ceil(s[o-2]/2),g="int b, int row, int col",y=`b * ${p} + (row / 2) * ${d} + (col / 2)`;for(let b=2;b<o-1;b++)g=`int b${b}, `+g,p*=s[o-b-1],y=`b${b} * ${p} + `+y;return`
    vec4 ${r}(${g}) {
      int index = ${y};
      int texR = index / ${h};
      int texC = index - texR * ${h};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${h}, ${u});
      return ${i.texture2D}(${n}, uv);
    }
  `}function Zqe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=n[3],o=n[2]*s,a=n[1]*o,{newShape:l,keptDims:u}=Uc(n);if(l.length<n.length){const C=_m(t,l),E=["row","col","depth","depth2"];return`
      ${Em(C,e)}
      float ${i}(int row, int col, int depth, int depth2) {
        return ${i}(${Am(E,u)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${a}, ${o}, ${s}, 1)));
        ${Im(t)}
      }
    `;const h=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,p=d[0],g=d[1],y=`int stride2 = ${r}Shape[3];`,b=`int stride1 = ${r}Shape[2] * stride2;`,x=`int stride0 = ${r}Shape[1] * stride1;`;if(g===a&&h==null)return e?`
      float ${i}(int row, int col, int depth, int depth2) {
        ${y}
        ${b}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${o}, ${s}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${g}.0, ${p}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(g===s&&h==null)return e?`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${g}.0, ${p}.0);
        return sampleTexture(${r}, uv);
      }
    `;const w=qf(r);return e?`
    float ${i}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${y}
      ${b}
      ${x}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${w});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${i}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${o} +
          depth * ${s} + depth2;
      vec2 uv = uvFromFlat(${p}, ${g}, index + ${w});
      return sampleTexture(${r}, uv);
    }
  `}function Jqe(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e[4],s=e[3]*i,o=e[2]*s,a=e[1]*o,{newShape:l,keptDims:u}=Uc(e);if(l.length<e.length){const b=_m(t,l),x=["row","col","depth","depth2","depth3"];return`
      ${Em(b)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${Am(x,u)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${a}, ${o}, ${s}, ${i})) +
          depth3;
        ${Im(t)}
      }
    `;const h=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,p=d[0],g=d[1];if(g===a&&h==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${o}, ${s}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${g}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(g===i&&h==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${g}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;const y=qf(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${o} + depth * ${s} +
          depth2 * ${i} + depth3 + ${y};
      vec2 uv = uvFromFlat(${p}, ${g}, index);
      return sampleTexture(${n}, uv);
    }
  `}function e9e(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:i,keptDims:s}=Uc(e);if(i.length<e.length){const x=_m(t,i),w=["row","col","depth","depth2","depth3","depth4"];return`
      ${Em(x)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${Am(w,s)});
      }
    `}const o=e[5],a=e[4]*o,l=e[3]*a,u=e[2]*l,h=e[1]*u;if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${h}, ${u}, ${l}, ${a})) +
          dot(
            vec2(depth3, depth4),
            vec2(${o}, 1)));
        ${Im(t)}
      }
    `;const d=t.shapeInfo.flatOffset,p=t.shapeInfo.texShape,g=p[0],y=p[1];if(y===h&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${u}, ${l}, ${a}, ${o})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${y}.0, ${g}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(y===o&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${y}.0, ${g}.0);
        return sampleTexture(${n}, uv);
      }
    `;const b=qf(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${h} + col * ${u} + depth * ${l} +
          depth2 * ${a} + depth3 * ${o} + depth4 + ${b};
      vec2 uv = uvFromFlat(${g}, ${y}, index);
      return sampleTexture(${n}, uv);
    }
  `}function Im(t){const e=t.name,n=Se(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function t9e(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",s=t.shapeInfo.logicalShape.length,o=e.logicalShape.length,a=Jne(t.shapeInfo.logicalShape,e.logicalShape),l=tn(o),u=o-s;let h;const d=["x","y","z","w","u","v"];s===0?h="":o<2&&a.length>=1?h="coords = 0;":h=a.map(C=>`coords.${d[C+u]} = 0;`).join(`
`);let p="";o<2&&s>0?p="coords":p=t.shapeInfo.logicalShape.map((C,E)=>`coords.${d[E+u]}`).join(", ");let g="return outputValue;";const b=Se(t.shapeInfo.logicalShape)===1,w=Se(e.logicalShape)===1;if(s===1&&!b&&!w)g=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(b&&!w)o===1?g=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:g=`
        return vec4(outputValue.x);
      `;else if(a.length){const C=s-2,E=s-1;a.indexOf(C)>-1&&a.indexOf(E)>-1?g="return vec4(outputValue.x);":a.indexOf(C)>-1?g="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":a.indexOf(E)>-1&&(g="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${i}() {
      ${l} coords = getOutputCoords();
      ${h}
      vec4 outputValue = get${r}(${p});
      ${g}
    }
  `}function n9e(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",s=e.texShape,o=t.shapeInfo.texShape,a=t.shapeInfo.logicalShape.length,l=e.logicalShape.length;if(!t.shapeInfo.isUniform&&a===l&&t.shapeInfo.flatOffset==null&&Wt(o,s))return`
      float ${i}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const u=tn(l),h=Jne(t.shapeInfo.logicalShape,e.logicalShape),d=l-a;let p;const g=["x","y","z","w","u","v"];a===0?p="":l<2&&h.length>=1?p="coords = 0;":p=h.map(b=>`coords.${g[b+d]} = 0;`).join(`
`);let y="";return l<2&&a>0?y="coords":y=t.shapeInfo.logicalShape.map((b,x)=>`coords.${g[x+d]}`).join(", "),`
    float ${i}() {
      ${u} coords = getOutputCoords();
      ${p}
      return get${r}(${y});
    }
  `}function tn(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function GM(t,e,n){const{newShape:r,keptDims:i}=Uc(e),s=e.length,o=t&&s===3&&e[0]===1,a=o?e.slice(1):r,l=!t&&s>1&&!Wt(e,n)&&r.length<s||o;return{useSqueezeShape:l,uniformShape:l?a:e,keptDims:i}}function _m(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function Am(t,e){return e.map(n=>t[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r9e(t,e,n,r){const i=n.map((h,d)=>{const p={logicalShape:h.shape,texShape:h.isUniform?null:h.texData.texShape,isUniform:h.isUniform,isPacked:h.isUniform?!1:h.texData.isPacked,flatOffset:null};return h.texData!=null&&h.texData.slice!=null&&h.texData.slice.flatOffset>0&&(p.flatOffset=h.texData.slice.flatOffset),{name:e.variableNames[d],shapeInfo:p}}),s=i.map(h=>h.shapeInfo),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},a=wqe(i,o,e),l=YHe(t.gl,a),u=t.createProgram(l);return ge().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:l,source:a,webGLProgram:u,inShapeInfos:s,outShapeInfo:o,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(u),Object.assign({program:e,fragmentShader:l,source:a,webGLProgram:u,inShapeInfos:s,outShapeInfo:o},nre(t,e,u)))}function nre(t,e,n){const r=[],i=[];let s,o,a,l=null,u=null;u=t.getUniformLocation(n,"NAN",!1),ge().getNumber("WEBGL_VERSION")===1&&(l=t.getUniformLocation(n,"INFINITY",!1));const h=!1;for(const d of e.variableNames){const p={name:d,uniform:t.getUniformLocation(n,d,h),offset:t.getUniformLocation(n,`offset${d}`,h)};e.enableShapeUniforms&&(p.shape=t.getUniformLocation(n,`${d}Shape`,h),p.texShape=t.getUniformLocation(n,`${d}TexShape`,h)),r.push(p)}if(e.enableShapeUniforms&&(s=t.getUniformLocation(n,"outShape",h),a=t.getUniformLocation(n,"outShapeStrides",h),o=t.getUniformLocation(n,"outTexShape",h)),e.customUniforms)for(const d of e.customUniforms)i.push(t.getUniformLocation(n,d.name,h));return{variablesLocations:r,customUniformLocations:i,infLoc:l,nanLoc:u,outShapeLocation:s,outShapeStridesLocation:a,outTexShapeLocation:o}}function $G(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,r)=>{const i=n.logicalShape,s=e[r],o=s.shape;if(!Wt(i,o))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${i} and ${o} must match`);if(n.isUniform&&s.isUniform)return;const a=n.texShape,l=s.isUniform?null:s.texData.texShape;if(!Wt(a,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${l} must match`)})}function i9e(t,e,n,r,i){e.program.enableShapeUniforms||($G(e.inShapeInfos,n),$G([e.outShapeInfo],[r]));const s=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(s.texture,o[0],o[1]):t.setOutputMatrixTexture(s.texture,o[0],o[1]),t.setProgram(e.webGLProgram),t.bindVertexArray(e.webGLProgram.vao),ge().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN);for(let l=0;l<n.length;++l){const u=n[l],{uniform:h,offset:d,shape:p,texShape:g}=e.variablesLocations[l];if(p){const{uniformShape:y}=GM(e.program.packedInputs,u.shape,u.texData.texShape);switch(y.length){case 1:t.gl.uniform1iv(p,new Int32Array(y));break;case 2:t.gl.uniform2iv(p,new Int32Array(y));break;case 3:t.gl.uniform3iv(p,new Int32Array(y));break;case 4:t.gl.uniform4iv(p,new Int32Array(y));break}}if(g&&t.gl.uniform2i(g,u.texData.texShape[0],u.texData.texShape[1]),h!=null){if(u.isUniform){if(Se(u.shape)<2)t.gl.uniform1f(h,u.uniformValues[0]);else{let y=u.uniformValues;y instanceof Float32Array||(y=new Float32Array(y)),t.gl.uniform1fv(h,y)}continue}u.texData.slice!=null&&d!=null&&t.gl.uniform1i(d,u.texData.slice.flatOffset),t.setInputMatrixTexture(u.texData.texture.texture,h,l)}}const a=e.outShapeLocation;if(a)switch(r.shape.length){case 1:t.gl.uniform1iv(a,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(a,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(a,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(a,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const l=Xe(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(l));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(l));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(l));break}}if(e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&i)for(let l=0;l<e.program.customUniforms.length;++l){const u=e.program.customUniforms[l],h=e.customUniformLocations[l],d=i[l];if(u.type==="float")t.gl.uniform1fv(h,d);else if(u.type==="vec2")t.gl.uniform2fv(h,d);else if(u.type==="vec3")t.gl.uniform3fv(h,d);else if(u.type==="vec4")t.gl.uniform4fv(h,d);else if(u.type==="int")t.gl.uniform1iv(h,d);else if(u.type==="ivec2")t.gl.uniform2iv(h,d);else if(u.type==="ivec3")t.gl.uniform3iv(h,d);else if(u.type==="ivec4")t.gl.uniform4iv(h,d);else throw Error(`uniform type ${u.type} is not supported yet.`)}t.executeProgram()}function s9e(t,e,n){let r="";e.concat(n).forEach(o=>{const a=o.texData!=null&&o.texData.slice!=null&&o.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!o.isUniform){const l=o.texData.texShape,{useSqueezeShape:u,uniformShape:h,keptDims:d}=GM(t.packedInputs,o.shape,l);let p="",g="",y="";if(h.length===1&&t.packedInputs){const A=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];p=`${A[0]>1}_${A[1]>1}`}else if(h.length===2&&!t.packedInputs)g=`${h[0]>1}_${h[1]>1}`;else if(h.length>2&&!t.packedInputs){const A=Xe(h);y=`${A[0]===l[1]}_${A[A.length-1]===l[1]}`}const b=o.shape.length,x=h.length===2&&Wt(o.shape,l),w=Se(o.shape)===1,C=zp(o.shape,n.shape),E=!t.packedInputs&&b===n.shape.length&&Wt(l,n.texData.texShape),_=t.packedInputs||h.length>2?"":`${l[0]>1}_${l[1]>1}`;r+=`${b}_${E}_${u?d:""}_${h.length}_${w}_${C}_${x}_${p}_${g}_${y}_${_}_${a}`}else{const l=o.isUniform?"uniform":o.texData.texShape;r+=`${o.shape}_${l}_${a}`}});const i=t.userCode;let s=t.constructor.name;return s+="_"+r+"_"+i+`${ge().getNumber("WEBGL_VERSION")}`,s}function di(t){return ge().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class o9e{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=ev.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=ki();this.outputShape=e,this.enableShapeUniforms=di(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?JC(["r","c","d"],e):Hf(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class a9e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=ev.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=ki();this.outputShape=e,this.enableShapeUniforms=di(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?JC(["r","c","d"],e):Hf(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class l9e{constructor(e){this.variableNames=["A"],this.outTexUsage=ks.DOWNLOAD;const n=ki();this.outputShape=e,this.userCode=`
      ${Zne}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class u9e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=ks.DOWNLOAD;const n=ki();this.outputShape=e,this.userCode=`
      ${Zne}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c9e={R:0,G:1,B:2,A:3};class OG{constructor(e,n=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const i=ki();this.outputShape=e,this.enableShapeUniforms=di(this.outputShape.length);let s="result";n&&(s="floor(result * 255. + 0.5)");let o="";for(let a=0;a<r.length;a++){const l=r[a];o+=`
          if(offset == ${a}) {
            result = values[${c9e[l]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?WM():jM(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${i.texture2D}(A, uv);
          ${o}
        }
        ${i.output} = vec4(${s}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class h9e{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=ki();this.outputShape=e,this.enableShapeUniforms=di(this.outputShape.length);let i="",s="result";n&&(s="floor(result * 255. + 0.5)");for(let o=0;o<=1;o++)for(let a=0;a<=1;a++){const l=o*2+a;i+=`
          localCoords = coords;
          if(localCoords[2] + ${a} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${a};
          if (localCoords[1] + ${o} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${o};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?WM():jM(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${i}

          ${r.output} = ${s};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f9e(t){const e=ki(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return XHe(t,n)}function d9e(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return eqe(t,e)}function p9e(t){const e=new Uint16Array([0,1,2,2,1,3]);return tqe(t,e)}function Y0(t,e,n,r,i,s){rqe(e,n);const o=nqe(t),a=t.TEXTURE_2D;return Ve(t,()=>t.bindTexture(a,o)),Ve(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),Ve(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),Ve(t,()=>t.texParameteri(a,t.TEXTURE_MIN_FILTER,t.NEAREST)),Ve(t,()=>t.texParameteri(a,t.TEXTURE_MAG_FILTER,t.NEAREST)),ge().getNumber("WEBGL_VERSION")===1?Ve(t,()=>t.texImage2D(a,0,r,e,n,0,i,s,null)):Ve(t,()=>t.texStorage2D(a,1,r,e,n)),Ve(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:o,texShape:[n,e]}}function rre(t){return t.internalFormatFloat}function m9e(t,e,n,r){const[i,s]=K0(e,n);return Y0(t,i,s,rre(r),r.textureFormatFloat,t.FLOAT)}function ire(t){return t.internalFormatHalfFloat}function g9e(t,e,n,r){const[i,s]=K0(e,n);return Y0(t,i,s,ire(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function sre(t){return t.downloadTextureFormat}function y9e(t,e,n,r){const[i,s]=K0(e,n);return Y0(t,i,s,sre(r),t.RGBA,t.UNSIGNED_BYTE)}function ore(t){return t.internalFormatPackedFloat}function v9e(t,e,n,r){const[i,s]=Cm(e,n);return Y0(t,i,s,ore(r),t.RGBA,t.FLOAT)}function are(t){return t.internalFormatPackedHalfFloat}function b9e(t,e,n,r){const[i,s]=Cm(e,n);return Y0(t,i,s,are(r),t.RGBA,r.textureTypeHalfFloat)}function x9e(t,e,n){return Ve(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),NG(t,e,"clipSpacePos",n,3,20,0)&&NG(t,e,"uv",n,2,20,12)}function w9e(t,e,n,r,i,s){Ve(t,()=>t.bindTexture(t.TEXTURE_2D,e));let o,a,l;i instanceof Uint8Array?(o=new Uint8Array(n*r*4),a=t.UNSIGNED_BYTE,l=t.RGBA):(o=new Float32Array(n*r*4),a=t.FLOAT,l=s.internalFormatPackedFloat),o.set(i),ge().getNumber("WEBGL_VERSION")===2?Ve(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,t.RGBA,a,o)):Ve(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,n,r,0,t.RGBA,a,o)),Ve(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function S9e(t,e,n){Ve(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?ge().getNumber("WEBGL_VERSION")===2?Ve(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):Ve(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):ge().getNumber("WEBGL_VERSION")===2?Ve(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):Ve(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),Ve(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function T9e(t,e,n,r){const i=t.createBuffer();Ve(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,i));const a=4*4*e*n;return Ve(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,a,t.STREAM_READ)),Ve(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),Ve(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),i}function C9e(t,e,n){const r=t,i=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}function E9e(t,e,n,r){const[i,s]=K0(e,n),o=4,a=new Uint8Array(UHe(e*n,o));return Ve(t,()=>t.readPixels(0,0,i,s,r.downloadTextureFormat,t.UNSIGNED_BYTE,a)),new Float32Array(a.buffer)}function I9e(t,e,n,r,i,s,o,a){const l=t,u=new Float32Array(jHe(s,o));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,u),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),u}function _9e(t,e,n){const r=new Float32Array(e*n*4);return Ve(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Nk{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const n=ge().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,VHe(n,e)):this.gl=ia(n),e=this.gl,ge().getNumber("WEBGL_VERSION")===2){const s=e;this.createVertexArray=()=>Ve(s,()=>s.createVertexArray()),this.bindVertexArray=o=>Ve(s,()=>s.bindVertexArray(o)),this.deleteVertexArray=o=>Ve(s,()=>s.deleteVertexArray(o)),this.getVertexArray=()=>Ve(s,()=>s.getParameter(s.VERTEX_ARRAY_BINDING))}else if(e!=null){const s=e.getExtension("OES_vertex_array_object");if(s==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>Ve(e,()=>s.createVertexArrayOES()),this.bindVertexArray=o=>Ve(e,()=>s.bindVertexArrayOES(o)),this.deleteVertexArray=o=>Ve(e,()=>s.deleteVertexArrayOES(o)),this.getVertexArray=()=>Ve(e,()=>e.getParameter(s.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float";const i="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),ge().getNumber("WEBGL_VERSION")===1){const s="OES_texture_float",o="OES_texture_half_float";if(this.textureFloatExtension=r1(this.gl,s),mo(this.gl,o))this.textureHalfFloatExtension=r1(this.gl,o);else if(ge().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),mo(this.gl,i))this.colorBufferHalfFloatExtension=r1(this.gl,i);else if(ge().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",mo(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(mo(this.gl,i))this.colorBufferHalfFloatExtension=this.gl.getExtension(i);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=d9e(this.gl),this.indexBuffer=p9e(this.gl),this.framebuffer=iqe(this.gl),this.textureConfig=UM(this.gl,this.textureHalfFloatExtension)}get debug(){return ge().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;Ve(e,()=>e.finish()),Ve(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),Ve(e,()=>e.deleteFramebuffer(this.framebuffer)),Ve(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),Ve(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),Ve(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),m9e(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),g9e(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),y9e(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),S9e(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,r,i){this.throwIfDisposed(),w9e(this.gl,e,n,r,i,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),b9e(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),v9e(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(RG(this.gl,this.framebuffer),this.outputTexture=null),Ve(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,r){return this.downloadMatrixDriver(e,()=>E9e(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,r,i,s,o){return I9e(this.gl,e,n,r,i,s,o,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return C9e(this.gl,e,n)}createBufferFromTexture(e,n,r){this.bindTextureToFrameBuffer(e);const i=T9e(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),i}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,r;if(ge().getBool("WEBGL_FENCE_API_ENABLED")){const i=e,s=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const o=i.clientWaitSync(s,0,0);return o===i.ALREADY_SIGNALED||o===i.CONDITION_SATISFIED},n=s}else ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(e,n,r){return this.downloadMatrixDriver(e,()=>_9e(this.gl,n,r))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=f9e(n));const r=ZHe(n);Ve(n,()=>n.attachShader(r,this.vertexShader)),Ve(n,()=>n.attachShader(r,e)),JHe(n,r);const i=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&Ik(n,i),i}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const n=this.gl;Ve(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),x9e(n,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(Ve(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&Ik(this.gl,this.program),Ve(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,r=!0){return this.throwIfDisposed(),r?oqe(this.gl,e,n):aqe(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),Ve(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),lqe(this.gl,e,n,r)}setOutputMatrixTexture(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)}setOutputPackedMatrixTexture(e,n,r){this.throwIfDisposed();const[i,s]=Cm(n,r);this.setOutputMatrixTextureDriver(e,i,s)}setOutputMatrixWriteRegion(e,n,r,i){this.setOutputMatrixWriteRegionDriver(r,e,i,n)}setOutputPackedMatrixWriteRegion(e,n,r,i){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&Ik(this.gl,this.program),i1(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}Ve(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Ve(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=r1(this.gl,ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,i=this.getQueryTimerExtensionWebGL2(),s=r.createQuery();return r.beginQuery(i.TIME_ELAPSED_EXT,s),s}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await mW(()=>this.disposed||this.isQueryAvailable(e,ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const r=this.gl,i=this.getQueryTimerExtensionWebGL2(),s=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),s&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),i=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),i&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=A9e(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in ge().platform&&(r=ge().platform.setTimeoutCustom.bind(ge().platform)),mW(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),_k(this.gl,e,this.framebuffer),this.debug&&i1(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(_k(this.gl,this.outputTexture,this.framebuffer),this.debug&&i1(this.gl)):RG(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,n,r){this.throwIfDisposed();const i=this.gl;_k(i,e,this.framebuffer),this.debug&&i1(i),this.outputTexture=e,Ve(i,()=>i.viewport(0,0,n,r)),Ve(i,()=>i.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(e,n,r,i){this.throwIfDisposed(),Ve(this.gl,()=>this.gl.scissor(e,n,r,i))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function A9e(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:k9e,bincountImpl:lre,bincountReduceImpl:N9e,bitwiseAndImpl:R9e,castImpl:D9e,ceilImpl:$9e,concatImpl:O9e,equalImpl:P9e,expImpl:M9e,expm1Impl:L9e,floorImpl:F9e,gatherNdImpl:V9e,gatherV2Impl:B9e,greaterImpl:z9e,greaterEqualImpl:U9e,lessImpl:j9e,lessEqualImpl:W9e,linSpaceImpl:G9e,logImpl:H9e,maxImpl:q9e,maximumImpl:K9e,minimumImpl:X9e,multiplyImpl:Y9e,negImpl:Q9e,notEqualImpl:Z9e,prodImpl:J9e,raggedGatherImpl:e8e,raggedRangeImpl:t8e,raggedTensorToTensorImpl:n8e,rangeImpl:r8e,rsqrtImpl:i8e,scatterImpl:s8e,sigmoidImpl:o8e,simpleAbsImpl:ure,sliceImpl:a8e,sparseFillEmptyRowsImpl:l8e,sparseReshapeImpl:u8e,sparseSegmentReductionImpl:cre,sqrtImpl:c8e,staticRegexReplaceImpl:h8e,stridedSliceImpl:f8e,stringNGramsImpl:d8e,stringSplitImpl:p8e,stringToHashBucketFastImpl:m8e,subImpl:g8e,tileImpl:y8e,topKImpl:v8e,transposeImpl:HM,uniqueImpl:b8e}=Sje;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hre(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function Ti(t,e){return e===1?[t]:hre(t,e)}function x8e(t,e){if(t===1)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class w8e{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=di(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=Ti("rc",this.rank),r=tn(this.rank),i=this.getOutOfBoundsCondition(n),s=this.getSetup(n),o=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${i}) {
            setOutput(vec4(0));
          } else {
            ${s}

            setOutput(vec4(${o}));
          }
        }
      `}}getSourceCoordsArr(e){const n=[];for(let r=0;r<=1;r++)for(let i=0;i<=1;i++){let s=`${r===0?"r":"rp1"}, ${i===0?"c":"cp1"}`;for(let o=2;o<this.rank;o++)s=`${e[e.length-1-o]},`+s;n.push(s)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],i=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${i};
    `}getOutput(e){const n=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fre{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=di(this.outputShape.length);let r="";for(let i=0;i<4;i++){let s="thisRC = rc;";i%2===1&&(s+="thisRC.z += 1;"),i>1&&(s+="thisRC.y += 1;"),r+=`
        ${s}
        ${i>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${i}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${i>0?"}":""}
      `}this.userCode=`
      ${S8e(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?WM():jM(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function S8e(t,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?xqe(["r","c","d"],"inputShape"):Hf(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class T8e{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,n,r){const i=MG(n,r),s=LG(e,i,r);s in this.freeTextures||(this.freeTextures[s]=[]),s in this.usedTextures||(this.usedTextures[s]=[]);const o=PG(e,i,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[s].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();const l=this.freeTextures[s].pop();return this.usedTextures[s].push(l),l}let a;return i===Lr.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):i===Lr.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):i===Lr.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):i===Lr.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):i===Lr.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[s].push(a),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),a}releaseTexture(e,n,r,i){if(this.freeTextures==null)return;const s=MG(r,i),o=LG(n,s,i);o in this.freeTextures||(this.freeTextures[o]=[]);const a=PG(n,s,this.gpgpu.gl,this.gpgpu.textureConfig,i),l=ge().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=a):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;const u=this.usedTextures[o],h=u&&u.indexOf(e);if(h==null||h<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u[h]=u[u.length-1],u.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function C8e(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function PG(t,e,n,r,i){const s=E8e(e,r);let o;if(i){const[l,u]=Cm(t[0],t[1]);o=l*u}else{const[l,u]=K0(t[0],t[1]);o=l*u}const a=C8e(n,s);return o*a}function E8e(t,e){switch(t){case Lr.PACKED_2X2_FLOAT32:return ore(e);case Lr.PACKED_2X2_FLOAT16:return are(e);case Lr.UNPACKED_FLOAT32:return rre(e);case Lr.UNPACKED_FLOAT16:return ire(e);case Lr.PACKED_4X1_UNSIGNED_BYTE:return sre(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function I8e(t){return ge().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?Lr.PACKED_2X2_FLOAT32:Lr.UNPACKED_FLOAT32:t?Lr.PACKED_2X2_FLOAT16:Lr.UNPACKED_FLOAT16}function MG(t,e){if(t===ks.UPLOAD)return Lr.PACKED_2X2_FLOAT32;if(t===ks.RENDER||t==null)return I8e(e);if(t===ks.DOWNLOAD||t===ks.PIXELS)return Lr.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function LG(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ma{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=di(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const Ao="if (isnan(x)) return x;",_8e="return x;",FG="return abs(x);",A8e="return (x >= 0.0) ? x : (exp(x) - 1.0);",k8e=Ao+`
  return (x < 0.0) ? 0.0 : x;
`,N8e=Ao+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Ju="return x;",R8e="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D8e="return x;",$8e=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,O8e=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,P8e=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,M8e="return 1.0 / (1.0 + exp(-1.0 * x));";class lc{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=di(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class L8e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=di(this.outputShape.length);const n=e.length,r=Ti("rc",n),i=tn(n),s=x8e(n,r),o=r.slice(-2),a=n<=1?"rc":`vec2(${o.join(",")})`;this.userCode=`
      void main() {
        ${i} rc = getOutputCoords();
        vec4 packedInput = getA(${s});

        setOutput(getChannel(packedInput, ${a}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F8e=OZ,V8e=1e-7,B8e=1e-4,a1={};function z8e(t){return t in a1||(a1[t]={}),a1[t]}const U8e=ge().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),j8e=600;function W8e(){return ge().global.screen==null?1024:ge().global.screen.height*ge().global.screen.width*window.devicePixelRatio*j8e/1024/1024}class eE extends fO{nextDataId(){return eE.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!ge().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof Nk)n=e;else{const r=ia(ge().getNumber("WEBGL_VERSION"),e);n=new Nk(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=ia(ge().getNumber("WEBGL_VERSION"));n=new Nk(r),this.binaryCache=z8e(ge().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new T8e(this.gpgpu),this.numMBBeforeWarning=W8e(),this.texData=new aQ(this,ka())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,n,r,i,s,o){const a=this.makeTensorInfo(n,r),l=this.texData.get(a.dataId);l.isPacked=!1,l.texture={texture:e,texShape:[i,s]},l.texShape=[i,s];const u=s1(n),h=new OG(u,!1,o),d=this.runWebGLProgram(h,[a],r,[[i,s]]);return d.shape=n,l.texture=null,this.disposeIntermediateTensorInfo(a),d.dataId}write(e,n,r){if((ge().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||ge().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const i={id:this.nextDataId()};return this.texData.set(i,{shape:n,dtype:r,values:e,usage:ks.UPLOAD,refCount:1}),i}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,r,i,s){if(ge().getBool("DEBUG")&&this.checkNumericalProblems(n),i==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:i,values:n,usage:ks.UPLOAD,refCount:s})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:r,dtype:i,complexTensorInfos:s,slice:o,shape:a,isPacked:l}=n;if(o!=null){let p;l?p=new lc(a,Ju):p=new Ma(a,Ju);const g=this.runWebGLProgram(p,[{dataId:e,shape:a,dtype:i}],i),y=this.readSync(g.dataId);return this.disposeIntermediateTensorInfo(g),y}if(r!=null)return this.convertAndCacheOnCPU(e);if(i==="string")return r;const u=this.activeTimers!=null;let h;u&&(h=Di());let d;if(i==="complex64"){const p=this.readSync(s.real.dataId),g=this.readSync(s.imag.dataId);d=iu(p,g)}else d=this.getValuesFromTexture(e);return u&&(this.downloadWaitMs+=Di()-h),this.convertAndCacheOnCPU(e,d)}async read(e){if(this.pendingRead.has(e)){const y=this.pendingRead.get(e);return new Promise(b=>y.push(b))}const n=this.texData.get(e),{values:r,shape:i,slice:s,dtype:o,complexTensorInfos:a,isPacked:l}=n;if(s!=null){let y;l?y=new lc(i,Ju):y=new Ma(i,Ju);const b=this.runWebGLProgram(y,[{dataId:e,shape:i,dtype:o}],o),x=this.read(b.dataId);return this.disposeIntermediateTensorInfo(b),x}if(r!=null)return this.convertAndCacheOnCPU(e);if(ge().getBool("DEBUG")&&!ge().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&ge().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let u=null,h;if(o!=="complex64"&&ge().get("WEBGL_BUFFER_SUPPORTED")){h=this.decode(e);const y=this.texData.get(h.dataId);u=this.gpgpu.createBufferFromTexture(y.texture.texture,...n1(i))}this.pendingRead.set(e,[]),o!=="complex64"&&await this.gpgpu.createAndWaitForFence();let d;if(o==="complex64"){const y=await Promise.all([this.read(a.real.dataId),this.read(a.imag.dataId)]),b=y[0],x=y[1];d=iu(b,x)}else if(u==null)d=this.getValuesFromTexture(e);else{const y=Se(i);d=this.gpgpu.downloadFloat32MatrixFromBuffer(u,y)}if(h!=null&&this.disposeIntermediateTensorInfo(h),u!=null){const y=this.gpgpu.gl;Ve(y,()=>y.deleteBuffer(u))}const p=this.convertAndCacheOnCPU(e,d),g=this.pendingRead.get(e);return this.pendingRead.delete(e),g.forEach(y=>y(p)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&ka().removeDataId(e,this),this.pendingDeletes--),p}readToGPU(e,n={}){const r=this.texData.get(e),{values:i,shape:s,slice:o,dtype:a,isPacked:l,texture:u}=r;if(a==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(o!=null){let g;l?g=new lc(s,Ju):g=new Ma(s,Ju);const y=this.runWebGLProgram(g,[{dataId:e,shape:s,dtype:a}],a),b=this.readToGPU(y,n);return this.disposeIntermediateTensorInfo(y),b}if(u==null)throw i!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const h=this.decode(e,n.customTexShape),d=ka().makeTensorFromTensorInfo(h),p=this.texData.get(h.dataId);return Object.assign({tensorRef:d},p.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(i=>Dc(i));return xt(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return xt(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const r=e[n];if(!qHe(r))throw ge().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:r,isPacked:i}=this.texData.get(e),s=Se(n);if(ge().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const p=this.decode(e),g=this.texData.get(p.dataId),y=this.gpgpu.downloadMatrixFromPackedTexture(g.texture.texture,...n1(n)).subarray(0,s);return this.disposeIntermediateTensorInfo(p),y}const o=ge().getBool("WEBGL_PACK")&&i===!0,a=o?s1(n):n,l=o?new u9e(a):new l9e(a),u=this.runWebGLProgram(l,[{shape:a,dtype:r,dataId:e}],"float32"),h=this.texData.get(u.dataId),d=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(h.texture.texture,h.texShape[0],h.texShape[1]).subarray(0,s);return this.disposeIntermediateTensorInfo(u),d}timerAvailable(){return ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,r=[];let i=!1;this.programTimersStack==null?(this.programTimersStack=r,i=!0):this.activeTimers.push(r),this.activeTimers=r,e();const s=yf(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),o=yf(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=n,i&&(this.programTimersStack=null);const a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(s);a.kernelMs=a$e(l),a.getExtraProfileInfo=()=>l.map((u,h)=>({name:o[h],ms:u})).map(u=>`${u.name}: ${u.ms}`).join(", ")}else a.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,a})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Di(),endMs:null}}endTimer(e){return ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Di(),e)}async getQueryTime(e){if(ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:r,texShape:i,usage:s,isPacked:o,slice:a}=this.texData.get(e),l=a&&a.origDataId||e,u=this.dataRefCount.get(l);u>1?this.dataRefCount.set(l,u-1):(this.dataRefCount.delete(l),n!=null&&(this.numBytesInGPU-=this.computeBytes(i,r),this.textureManager.releaseTexture(n,i,s,o)));const h=this.texData.get(e);h.texture=null,h.texShape=null,h.isPacked=!1,h.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=U8e){return ge().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&Se(r.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){As("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return F8e(e.shape,n)}packedUnaryOp(e,n,r){const i=new lc(e.shape,n),s=this.compileAndRun(i,[e],r);return ka().makeTensorFromTensorInfo(s)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const i=ure(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,i)}if(ge().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,FG,e.dtype);const n=new Ma(e.shape,FG),r=this.compileAndRun(n,[e]);return ka().makeTensorFromTensorInfo(r)}makeTensorInfo(e,n,r){let i;if(n==="string"&&r!=null&&r.length>0&&$v(r[0])){const s=r.map(o=>yc(o));i=this.write(s,e,n)}else i=this.write(r,e,n);return this.texData.get(i).usage=null,{dataId:i,shape:e,dtype:n}}makeOutput(e,n,r){return ka().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,r),this)}unpackTensor(e){const n=new L8e(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new w8e(e.shape);return this.runWebGLProgram(n,[e],e.dtype,null,!0)}packedReshape(e,n){const r=[qp(e.shape),...Kp(e.shape)],i={dtype:e.dtype,shape:r,dataId:e.dataId},s=[qp(n),...Kp(n)],o=new fre(s,r),a=!0,l=[r],u=this.runWebGLProgram(o,[i],e.dtype,l,a);return{dataId:u.dataId,shape:n,dtype:u.dtype}}decode(e,n){const r=this.texData.get(e),{isPacked:i,shape:s,dtype:o}=r;if(n!=null){const p=Se(s),g=n[0]*n[1]*4;U(p<=g,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const a=s1(s);let l;i?l=new a9e(a):l=new o9e(a);const u=!0,h=[n??n1(a)],d=this.runWebGLProgram(l,[{shape:a,dtype:o,dataId:e}],o,h,u,n);return{dtype:o,shape:s,dataId:d.dataId}}runWebGLProgram(e,n,r,i,s=!1,o){const a=this.makeTensorInfo(e.outputShape,r),l=this.texData.get(a.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===ev.DENSE){const w=o??n1(e.outputShape);l.texShape=w.map(C=>C*2)}if(e.outTexUsage!=null&&(l.usage=e.outTexUsage),Se(a.shape)===0)return l.values=li(a.dtype,0),a;const u=[],h=n.map(w=>{if(w.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let C=this.texData.get(w.dataId);if(C.texture==null){if(!e.packedInputs&&Se(w.shape)<=ge().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:w.shape,texData:null,isUniform:!0,uniformValues:C.values};e.packedInputs&&(C.isPacked=!0,C.shape=w.shape)}if(this.uploadToGPU(w.dataId),!!C.isPacked!=!!e.packedInputs)w=C.isPacked?this.unpackTensor(w):this.packTensor(w),u.push(w),C=this.texData.get(w.dataId);else if(C.isPacked&&!xS(C.shape,w.shape)){const E=w,_=w.shape;w.shape=C.shape,w=this.packedReshape(w,_),u.push(w),C=this.texData.get(w.dataId),E.shape=_}return{shape:w.shape,texData:C,isUniform:!1}});this.uploadToGPU(a.dataId);const d={shape:a.shape,texData:l,isUniform:!1},p=s9e(e,h,d),g=this.getAndSaveBinary(p,()=>r9e(this.gpgpu,e,h,d)),y=this.activeTimers!=null;let b;y&&(b=this.startTimer()),ge().get("ENGINE_COMPILE_ONLY")||i9e(this.gpgpu,g,h,d,i),u.forEach(w=>this.disposeIntermediateTensorInfo(w)),y&&(b=this.endTimer(b),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(b)}));const x=ge().getNumber("WEBGL_FLUSH_THRESHOLD");if(x>0){const w=Di();w-this.lastGlFlushTime>x&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=w)}if(!ge().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&s===!1){const w=this.unpackTensor(a);return this.disposeIntermediateTensorInfo(a),w}return a}compileAndRun(e,n,r,i,s=!1){return r=r||n[0].dtype,this.runWebGLProgram(e,n,r,i,s)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(ge().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=fe(()=>{if(!ge().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=ge().getBool("DEBUG");ge().set("DEBUG",!1);const n=this.abs(Ut(1e-8)).dataSync()[0];if(ge().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?V8e:B8e}uploadToGPU(e){const n=this.texData.get(e),{shape:r,dtype:i,values:s,texture:o,usage:a,isPacked:l}=n;if(o!=null)return;const u=this.activeTimers!=null;let h;u&&(h=Di());let d=n.texShape;if(d==null&&(d=hqe(r,l),n.texShape=d),s!=null){const p=s1(r);let g,y=d[1],b=d[0];const x=s instanceof Uint8Array||s instanceof Uint8ClampedArray;(l||!x)&&([y,b]=Cm(d[0],d[1])),l?g=new h9e(p,x):g=new OG(p,x);const w=x?[b,y]:d,C=this.makeTensorInfo(w,i),E=this.texData.get(C.dataId);x?E.usage=ks.PIXELS:E.usage=ks.UPLOAD,E.texShape=w,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(C.dataId),y,b,s);const _=[[b,y]],P=this.runWebGLProgram(g,[C],i,_,!0),N=this.texData.get(P.dataId);n.texShape=N.texShape,n.isPacked=N.isPacked,n.usage=N.usage,ge().get("ENGINE_COMPILE_ONLY")?this.disposeData(P.dataId):(n.texture=N.texture,n.values=null,this.texData.delete(P.dataId)),this.disposeIntermediateTensorInfo(C),u&&(this.uploadWaitMs+=Di()-h)}else{const p=this.acquireTexture(d,a,i,l);n.texture=p}}convertAndCacheOnCPU(e,n){const r=this.texData.get(e),{dtype:i}=r;return n!=null&&(r.values=G8e(n,i)),r.values}acquireTexture(e,n,r,i){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const s=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${s} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,i)}computeBytes(e,n){return e[0]*e[1]*Kw(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const r=new Promise(i=>{try{this.checkCompletion_(n),i(!0)}catch(s){throw s}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await JZ(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(Qne(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:n,customUniformLocations:r,infLoc:i,nanLoc:s,outShapeLocation:o,outShapeStridesLocation:a,outTexShapeLocation:l}=nre(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=n,e.customUniformLocations=r,e.infLoc=i,e.nanLoc=s,e.outShapeLocation=o,e.outShapeStridesLocation=a,e.outTexShapeLocation=l}}createTensorFromGPUData(e,n,r){e.channels=e.channels||"RGBA";const{texture:i,height:s,width:o,channels:a}=e,l=ka().backend;if(!l.gpgpu.gl.isTexture(i))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const u=l.writeTexture(i,n,r,s,o,a);return ka().makeTensorFromDataId(u,n,r,l)}}eE.nextDataId=0;function G8e(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}else throw new Error(`Unknown dtype ${e}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */XQ()&&ZQ("webgl",()=>new eE,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qM=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class Nf{constructor(e,n,r){this.variableNames=["A","B"],this.outputShape=dt(n,r),this.enableShapeUniforms=di(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kf=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class km{constructor(e,n,r,i=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=dt(n,r);const s=this.outputShape.length;this.enableShapeUniforms=di(s);let o="";if(i)if(s===0||Se(this.outputShape)===1)o=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(o=`
          ${tn(s)} coords = getOutputCoords();
        `,s===1)this.enableShapeUniforms?o+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:o+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const l=Ti("coords",s);this.enableShapeUniforms?o+=`
            bool nextRowOutOfBounds =
              (${l[s-2]} + 1) >= outShape[${s} - 2];
            bool nextColOutOfBounds =
              (${l[s-1]} + 1) >= outShape[${s} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:o+=`
            bool nextRowOutOfBounds =
              (${l[s-2]} + 1) >= ${this.outputShape[s-2]};
            bool nextColOutOfBounds =
              (${l[s-1]} + 1) >= ${this.outputShape[s-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${o}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ps(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const H8e={kernelName:e0,backendName:"webgl",kernelFunc:ps};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zc(t){const{inputs:e,backend:n}=t,{real:r,imag:i}=e,s=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(s.dataId),a=ps({inputs:{x:r},backend:n}),l=ps({inputs:{x:i},backend:n});return o.complexTensorInfos={real:a,imag:l},s}const q8e={kernelName:IO,backendName:"webgl",kernelFunc:Zc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dre="return (a < 0.) ? b * a : a;",pre=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function K8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{alpha:s}=r,o=n.makeTensorInfo([],"float32",jc(s,"float32")),a=ge().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new km(pre,i.shape,o.shape):new Nf(dre,i.shape,o.shape),l=n.runWebGLProgram(a,[i,o],"float32");return n.disposeIntermediateTensorInfo(o),l}const X8e={kernelName:YT,backendName:"webgl",kernelFunc:K8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mre="return (a < 0.) ? b * a : a;",gre=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function Y8e(t){const{inputs:e,backend:n}=t,{x:r,alpha:i}=e,s=ge().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new km(gre,r.shape,i.shape):new Nf(mre,r.shape,i.shape);return n.runWebGLProgram(s,[r,i],"float32")}const Q8e={kernelName:mC,backendName:"webgl",kernelFunc:Y8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nm="if (isnan(x)) return x;";function Pt({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:r}){return({inputs:i,backend:s})=>{const{x:o}=i,a=s,l=r||o.dtype;if(a.shouldExecuteOnCPU([o])&&n!=null){const d=a.texData.get(o.dataId),p=n(d.values,l);return a.makeTensorInfo(o.shape,l,p)}const u=ge().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let h;return u?h=new lc(o.shape,e):h=new Ma(o.shape,t),a.runWebGLProgram(h,[o],l)}}function Wr({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:i,dtype:s}){return({inputs:o,backend:a})=>{const{a:l,b:u}=o,h=a;if(r&&l.dtype==="complex64"){const y=h.texData.get(l.dataId),b=h.texData.get(u.dataId),[x,w]=[[y.complexTensorInfos.real,b.complexTensorInfos.real],[y.complexTensorInfos.imag,b.complexTensorInfos.imag]].map(E=>{const[_,A]=E,P={dataId:_.dataId,dtype:_.dtype,shape:l.shape},N={dataId:A.dataId,dtype:A.dtype,shape:u.shape},R=new Nf(t,l.shape,u.shape);return h.runWebGLProgram(R,[P,N],fs(_.dtype,A.dtype))}),C=Zc({inputs:{real:x,imag:w},backend:h});return h.disposeIntermediateTensorInfo(x),h.disposeIntermediateTensorInfo(w),C}const d=s||fs(l.dtype,u.dtype);if((l.dtype==="string"||u.dtype==="string"||h.shouldExecuteOnCPU([l,u]))&&i!=null){const y=h.texData.get(l.dataId).values,b=h.texData.get(u.dataId).values,x=l.dtype==="string"?su(y):y,w=l.dtype==="string"?su(b):b,[C,E]=i(l.shape,u.shape,x,w,d),_=h.makeTensorInfo(E,d),A=h.texData.get(_.dataId);return A.values=C,_}const p=ge().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let g;return p?g=new km(e,l.shape,u.shape,n):g=new Nf(t,l.shape,u.shape),h.runWebGLProgram(g,[l,u],d)}}function tv(t,e=!1){if(t==="linear")return e?D8e:_8e;if(t==="relu")return e?O8e:k8e;if(t==="elu")return e?$8e:A8e;if(t==="relu6")return e?P8e:N8e;if(t==="prelu")return e?gre:mre;if(t==="leakyrelu")return e?pre:dre;if(t==="sigmoid")return e?M8e:R8e;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yre{constructor(e,n,r,i=!1,s=!1,o=!1,a=null,l=!1,u=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=di(this.outputShape.length);const h=i?e[1]:e[2],d=Math.ceil(h/2),p=i?"i * 2, rc.y":"rc.y, i * 2",g=s?"rc.z, i * 2":"i * 2, rc.z",y=i?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],b=s?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let x="",w="";a&&(l?x=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${a}
        }`:u?x=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${a}
        }`:x=`vec4 activation(vec4 x) {
          ${a}
        }`,w="result = activation(result);");const C=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),u&&this.variableNames.push("leakyreluAlpha");let E="rc.x",_="rc.x";e[0]<n[0]?E=`imod(rc.x, ${e[0]})`:n[0]<e[0]&&(_=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${x}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${d}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${E};
        int batchB = ${_};
        for (int i = 0; i < ${d}; i++) {
          vec4 a = getMatrixA(batchA, ${p});
          vec4 b = getMatrixB(batchB, ${g});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${y[0]} * ${b[0]});
          result += (${y[1]} * ${b[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${C}

        ${w}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VG={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class BG{constructor(e,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=dt(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zG="return a * b;";function KM(t){const{inputs:e,backend:n}=t,{a:r,b:i}=e,s=fs(r.dtype,i.dtype);if(r.dtype==="complex64"){const a=n.texData.get(r.dataId),l=n.texData.get(i.dataId),u=new BG(VG.REAL,r.shape,i.shape),h=new BG(VG.IMAG,r.shape,i.shape),d=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:r.shape},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:i.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:i.shape}],p=n.runWebGLProgram(u,d,"float32"),g=n.runWebGLProgram(h,d,"float32"),y=Zc({inputs:{real:p,imag:g},backend:n});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),y}if(n.shouldExecuteOnCPU([r,i])){const a=n.texData.get(r.dataId),l=n.texData.get(i.dataId),[u,h]=Y9e(r.shape,i.shape,a.values,l.values,s),d=n.makeTensorInfo(h,s),p=n.texData.get(d.dataId);return p.values=u,d}let o;return ge().getBool("WEBGL_PACK_BINARY_OPERATIONS")?o=new km(zG,r.shape,i.shape):o=new Nf(zG,r.shape,i.shape),n.runWebGLProgram(o,[r,i],s)}const Z8e={kernelName:u0,backendName:"webgl",kernelFunc:KM};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J8e(t,e,n){const r=[qp(t.shape),...Kp(t.shape)],i={dtype:t.dtype,shape:r,dataId:t.dataId},s=[qp(e),...Kp(e)],o=new fre(s,r),a=!0,l=[r],u=n.runWebGLProgram(o,[i],t.dtype,l,a);return{dataId:u.dataId,shape:e,dtype:u.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Le(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{shape:s}=r,o=n,a=Se(i.shape),l=lQ(s,a),u=Se(l);U(a===u,()=>`The new shape (${l}) has ${u} elements and the old shape (${i.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`);const h=o.texData.get(i.dataId);return h.isPacked&&!xS(i.shape,l)&&!(h.texture!==null&&xS(h.shape,l))?J8e(i,l,o):(o.incRef(i.dataId),{dataId:i.dataId,shape:l,dtype:i.dtype})}const eKe={kernelName:yC,backendName:"webgl",kernelFunc:Le};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UG{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:i,inSize:s,outSize:o}=e;this.outputShape=[i,o];const a=Math.floor(r/4)*4,l=r%4;let u="sumValue += dot(values, ones);";if(n!=null){const d=1/n;u=`sumValue += dot(values * ${Fp(d)?d.toPrecision(2):d}, ones);`}let h="";s%r>0&&(h=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${h}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${a}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${u}
        }

        int inIdx = inOffset + ${a};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${u}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${u}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${u}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tKe{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:i,inSize:s,outSize:o}=e;this.outputShape=[i,o];let a="0.0",l="";n==="prod"?a="1.0":n==="min"?(a="1.0 / 1e-20",l="min"):n==="max"&&(a="-1.0 / 1e-20",l="max");let u=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?u="sumValue":n==="prod"?u="prodValue":n==="all"?u="allValue":n==="any"&&(u="anyValue");const h=Math.floor(r/4)*4,d=r%4;let p=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,g="vec4";n==="all"?(a="1.0",p=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,g="bvec4"):n==="any"&&(a="0.0",p=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,g="bvec4");let y="";s%r>0&&(y=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${a};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${y}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${a});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${h}; i += 4) {
          int inIdx = inOffset + i;
          ${g} values = ${g}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${p}
        }

        int inIdx = inOffset + ${h};
        if (${d===1}) {
          ${g} values = ${g}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${p}
        } else if (${d===2}) {
          ${g} values = ${g}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${p}
        } else if (${d===3}) {
          ${g} values = ${g}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${p}
        }
        setOutput(${u});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nKe(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],r=FC(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}function Xf(t,e,n,r){const i=nKe(t.shape);let s=t;for(let o=0;o<i.length;o++){const{inSize:a,windowSize:l,outSize:u}=i[o];let h,d;n==="mean"?h=o===0?new UG({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:u},a):new UG({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:u}):h=new tKe({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:u},n),d=s,s=r.runWebGLProgram(h,[s],e),d.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(d)}return s}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rKe{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[n[o]];this.outputShape=r,this.rank=r.length;const i=tn(this.rank),s=iKe(n);this.userCode=`
    void main() {
      ${i} resRC = getOutputCoords();
      setOutput(getA(${s}));
    }
    `}}function iKe(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let i=0;i<t.length;i++)r[t[i]]=n[i];return r.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sKe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let h=0;h<r.length;h++)r[h]=e[n[h]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const i=tn(this.rank),s=hre("rc",this.rank),o=new Array(this.rank);for(let h=0;h<n.length;h++)o[n[h]]=s[h];const a=`vec2(${o.slice(-2).join()})`,l=`++${s[this.rank-1]} < ${r[this.rank-1]}`,u=`getChannel(getA(${o.join()}), ${a})`;this.userCode=`
    void main() {
      ${i} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${u};
      if(${l}) {
        result[1] = ${u};
      }
      --${s[this.rank-1]};
      if(++${s[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${u};
        if(${l}) {
          result[3] = ${u};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tE(t,e,n){const r=ge().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new sKe(t.shape,e):new rKe(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oKe(t,e,n,r){const i=e,s=t.shape.length,o=wt(i,t.shape);let a=o;const l=Rn(a,s),u=l!=null;let h=t;u&&(h=tE(t,l,r),a=Bn(a.length,s)),jr("sum",a,s);const[d,p]=Rr(h.shape,a);let g=d;n&&(g=Qn(d,o));const y=Se(p),x=Se(t.shape)/y,w=Le({inputs:{x:h},attrs:{shape:[x,y]},backend:r}),C=oP(t.dtype),E=Xf(w,C,"sum",r),_=Le({inputs:{x:E},attrs:{shape:g},backend:r});return r.disposeIntermediateTensorInfo(w),r.disposeIntermediateTensorInfo(E),u&&r.disposeIntermediateTensorInfo(h),_}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nE(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r;return oKe(i,s,o,n)}const aKe={kernelName:TC,backendName:"webgl",kernelFunc:nE};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ai(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{perm:s}=r,o=n,a=i.shape.length,l=new Array(a);for(let h=0;h<l.length;h++)l[h]=i.shape[s[h]];let u;if(o.shouldExecuteOnCPU([i])){const d=o.texData.get(i.dataId).values,p=HM(d,i.shape,i.dtype,s,l);u=o.makeTensorInfo(l,i.dtype);const g=o.texData.get(u.dataId);g.values=p}else u=tE(i,s,o);return u}const lKe={kernelName:pp,backendName:"webgl",kernelFunc:Ai};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vre=1e3;function wS({a:t,b:e,transposeA:n,transposeB:r,backend:i,bias:s=null,preluActivationWeights:o=null,leakyreluAlpha:a=0,activation:l=null}){const u=t.shape.length,h=e.shape.length,d=n?t.shape[u-2]:t.shape[u-1],p=r?e.shape[h-1]:e.shape[h-2],g=n?t.shape[u-1]:t.shape[u-2],y=r?e.shape[h-2]:e.shape[h-1],b=t.shape.slice(0,-2),x=e.shape.slice(0,-2),w=Se(b),C=Se(x),_=dt(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([g,y]);U(d===p,()=>`Error in matMul: inner shapes (${d}) and (${p}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${r} must match.`);const A=n?[w,d,g]:[w,g,d],P=r?[C,y,p]:[C,p,y],N=Le({inputs:{x:t},backend:i,attrs:{shape:A}}),R=Le({inputs:{x:e},backend:i,attrs:{shape:P}}),D=[N,R],O=Math.max(w,C),k=n?N.shape[1]:N.shape[2],F=s!=null,L=o!=null,q=l==="leakyrelu",Y=l!=null?tv(l,!0):null,W=F||L||q||Y!=null;let H;if((g===1||y===1)&&k>vre&&W===!1){let ee=N,ce=R;n&&(ee=Ai({inputs:{x:N},backend:i,attrs:{perm:[0,2,1]}}),D.push(ee)),r&&(ce=Ai({inputs:{x:R},backend:i,attrs:{perm:[0,2,1]}}),D.push(ce));const j=y!==1,Q=y===1;let ie=ee;j&&(ie=Le({inputs:{x:ee},backend:i,attrs:{shape:[O,k,1]}}),D.push(ie));const me=y===1?2:1;let ve=ce;Q&&(ve=Le({inputs:{x:ce},backend:i,attrs:{shape:[O,1,k]}}),D.push(ve));const _e=KM({inputs:{a:ie,b:ve},backend:i});H=nE({inputs:{x:_e},backend:i,attrs:{axis:me,keepDims:!0}}),D.push(_e)}else{const ee=fs(t.dtype,e.dtype),ce=new yre(A,P,[O,g,y],n,r,F,Y,L,q),j=[N,R];if(s!=null&&j.push(s),L&&j.push(o),q){const Q=i.makeTensorInfo([],"float32",jc(a,"float32"));j.push(Q),D.push(Q)}H=i.runWebGLProgram(ce,j,ee)}const X=Le({inputs:{x:H},backend:i,attrs:{shape:_}});D.push(H);for(const ee of D)i.disposeIntermediateTensorInfo(ee);return X}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uKe(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:s,bias:o,preluActivationWeights:a}=e,{transposeA:l,transposeB:u,activation:h,leakyreluAlpha:d}=r;return wS({a:i,b:s,transposeA:l,transposeB:u,backend:n,bias:o,preluActivationWeights:a,leakyreluAlpha:d,activation:h})}const cKe={kernelName:Xw,backendName:"webgl",kernelFunc:uKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jG="return abs(x);";function hKe(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const s=n.texData.get(r.dataId),o=ure(s.values);return n.makeTensorInfo(r.shape,r.dtype,o)}let i;return ge().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new lc(r.shape,jG):i=new Ma(r.shape,jG),n.runWebGLProgram(i,[r],r.dtype)}const fKe={kernelName:NT,backendName:"webgl",kernelFunc:hKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dKe=Ao+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,pKe=Pt({opSnippet:dKe}),mKe={kernelName:Ov,backendName:"webgl",kernelFunc:pKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gKe=Ao+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,yKe=Pt({opSnippet:gKe}),vKe={kernelName:Pv,backendName:"webgl",kernelFunc:yKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WG="return a + b;",bKe=Wr({opSnippet:WG,packedOpSnippet:WG,supportsComplex:!0,cpuKernelImpl:k9e}),xKe={kernelName:vm,backendName:"webgl",kernelFunc:bKe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wKe{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((s,o)=>`T${o}`);const r=[];this.variableNames.forEach(s=>{r.push(`float v${s} = get${s}AtOutCoords();`)});const i=this.variableNames.map(s=>`v${s}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${i};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SKe{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((s,o)=>`T${o}`);const r=[];this.variableNames.forEach(s=>{r.push(`vec4 v${s} = get${s}AtOutCoords();`)});const i=this.variableNames.map(s=>`v${s}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${i};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O1(t){const{inputs:e,backend:n}=t,r=e;if(r.length===1)return ps({inputs:{x:r[0]},backend:n});if(r.length>ge().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(r.length/2),u=O1({inputs:r.slice(0,l),backend:n}),h=O1({inputs:r.slice(l),backend:n});return O1({inputs:[u,h],backend:n})}const i=r.map(l=>l.dtype).reduce((l,u)=>fs(l,u)),s=r.map(l=>l.shape),a=ge().getBool("WEBGL_PACK")?new SKe(r[0].shape,s):new wKe(r[0].shape,s);return n.runWebGLProgram(a,r,i)}const TKe={kernelName:bO,backendName:"webgl",kernelFunc:O1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CKe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r,a=i.shape.length,l=wt(s,i.shape);let u=l;const h=Rn(u,a);let d=i;h!=null&&(d=Ai({inputs:{x:i},backend:n,attrs:{perm:h}}),u=Bn(u.length,a)),jr("all",u,a);const[p,g]=Rr(d.shape,u),y=Se(g),b=Le({inputs:{x:d},backend:n,attrs:{shape:[-1,y]}}),x=Xf(b,b.dtype,"all",n);let w;if(o){const C=Qn(p,l);w=Le({inputs:{x},backend:n,attrs:{shape:C}})}else w=Le({inputs:{x},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(x),h!=null&&n.disposeIntermediateTensorInfo(d),w}const EKe={kernelName:xO,backendName:"webgl",kernelFunc:CKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IKe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r,a=i.shape.length,l=wt(s,i.shape);let u=l;const h=Rn(u,a);let d=i;h!=null&&(d=Ai({inputs:{x:i},backend:n,attrs:{perm:h}}),u=Bn(u.length,a)),jr("any",u,a);const[p,g]=Rr(d.shape,u),y=Se(g),b=Le({inputs:{x:d},backend:n,attrs:{shape:[-1,y]}}),x=Xf(b,b.dtype,"any",n);let w;if(o){const C=Qn(p,l);w=Le({inputs:{x},backend:n,attrs:{shape:C}})}else w=Le({inputs:{x},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(x),h!=null&&n.disposeIntermediateTensorInfo(d),w}const _Ke={kernelName:wO,backendName:"webgl",kernelFunc:IKe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AKe{constructor(e,n,r){this.variableNames=["A"];const{windowSize:i,batchSize:s,outSize:o}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[s,o];const a=n==="max"?">":"<",l=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${i};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${i}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${a} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kKe{constructor(e,n,r,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,U(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const s=e[e.length-1],o=Math.ceil(s/n);this.outputShape=e.slice(0,-1),o>1&&this.outputShape.push(o),i||this.variableNames.push("bestIndicesA");const a=this.outputShape,l=a.length,u=tn(l),h=Ti("coords",l);let d,p;if(o===1){p=l+1;const R=tn(p);d=`
        ${R} sourceLocR = ${R}(${h.join()}, 0);
        ++${h[l-1]};
        ${R} sourceLocG = ${R}(${h.join()}, 0);
        ++${h[l-2]};
        ${R} sourceLocA = ${R}(${h.join()}, 0);
        --${h[l-1]};
        ${R} sourceLocB = ${R}(${h.join()}, 0);
        --${h[l-2]};`}else p=l,d=`
        ${u} sourceLocR = coords;
        ++${h[l-1]};
        ${u} sourceLocG = coords;
        ++${h[l-2]};
        ${u} sourceLocA = coords;
        --${h[l-1]};
        ${u} sourceLocB = coords;
        --${h[l-2]};`;const g=["x","y","z","w","u","v"].slice(0,p),y="."+g[p-1],b=g.map(R=>"int "+R),x=Ti("sourceLocR",p-1).concat("inIdx.r"),w=Ti("sourceLocG",p-1).concat("inIdx.g"),C=Ti("sourceLocB",p-1).concat("inIdx.b"),E=Ti("sourceLocA",p-1).concat("inIdx.a"),_=r==="max"?"greaterThan":"lessThan",A=i?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${x.join()}),
                             getBestIndicesAChannel(${w.join()}),
                             getBestIndicesAChannel(${C.join()}),
                             getBestIndicesAChannel(${E.join()})));`,P=`vec4(
            getAChannel(${x.join()}),
            hasNextCol ? getAChannel(${w.join()}) : 0.,
            hasNextRow ? getAChannel(${C.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${E.join()}) : 0.)`,N=i?"":`
      float getBestIndicesAChannel(${b.join()}) {
        return getChannel(getBestIndicesA(${g.join()}),
                                          vec2(${g.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${b.join()}) {
        return getChannel(getA(${g.join()}),
                               vec2(${g.slice(-2).join()}));
      }
      ${N}
      void main() {
        ${u} coords = getOutputCoords();
        bool hasNextCol = ${h[l-1]} < ${a[l-1]-1};
        bool hasNextRow = ${h[l-2]} < ${a[l-2]-1};
        ${d}
        ivec4 srcIdx = ivec4(sourceLocR${y}, sourceLocG${y},
          sourceLocB${y}, sourceLocA${y}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${P};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${A}
          vec4 candidate = ${P};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${_}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bre(t,e,n,r=null){let i=e.shape[0],s=e.shape[1];r!=null&&(i=r.shape[0],s=r.shape[1]);const o=FC(s),a={windowSize:o,inSize:s,batchSize:i,outSize:Math.ceil(s/o)},l=new AKe(a,n,r==null),u=[e];r!=null&&u.push(r);const h=t.runWebGLProgram(l,u,"int32");if(h.shape[1]===1)return h;const d=bre(t,e,n,h);return t.disposeIntermediateTensorInfo(h),d}function xre(t,e,n,r=null){const i=r!=null?r.shape:e.shape,s=i[i.length-1],o=FC(s),a=new kKe(i,o,n,r==null),l=r==null?[e]:[e,r],u=t.runWebGLProgram(a,l,"int32");if(u.shape.length===e.shape.length){const h=xre(t,e,n,u);return t.disposeIntermediateTensorInfo(u),h}return u}function wre(t,e,n,r){const i=[n];if(jr("arg"+r.charAt(0).toUpperCase()+r.slice(1),i,e.shape.length),!ge().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const s=[],o=t.texData.get(e.dataId),a=o!==null&&o.isPacked;let l=e;a&&(l=t.unpackTensor(e),s.push(l));const[u,h]=Rr(l.shape,i),d=Se(h),p=Le({inputs:{x:l},backend:t,attrs:{shape:[-1,d]}});s.push(p);const g=bre(t,p,r);s.push(g);const y=Le({inputs:{x:g},backend:t,attrs:{shape:u}});return s.forEach(b=>t.disposeIntermediateTensorInfo(b)),y}return xre(t,e,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NKe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s}=r;let o=wt(s,i.shape);const a=Rn(o,i.shape.length);let l=i;const u=[];a!=null&&(l=Ai({inputs:{x:i},backend:n,attrs:{perm:a}}),u.push(l),o=Bn(o.length,l.shape.length)),jr("argMax",[o[0]],l.shape.length);const h=wre(n,l,o[0],"max");return u.forEach(d=>n.disposeIntermediateTensorInfo(d)),h}const RKe={kernelName:RT,backendName:"webgl",kernelFunc:NKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DKe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s}=r;let o=wt(s,i.shape);const a=Rn(o,i.shape.length);let l=i;const u=[];a!=null&&(l=Ai({inputs:{x:i},backend:n,attrs:{perm:a}}),u.push(l),o=Bn(o.length,l.shape.length)),jr("argMin",[o[0]],l.shape.length);const h=wre(n,l,o[0],"min");return u.forEach(d=>n.disposeIntermediateTensorInfo(d)),h}const $Ke={kernelName:DT,backendName:"webgl",kernelFunc:DKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OKe=Ao+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,PKe=Pt({opSnippet:OKe}),MKe={kernelName:Mv,backendName:"webgl",kernelFunc:PKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LKe=Ao+"return log(x + sqrt(x * x + 1.0));",FKe=Pt({opSnippet:LKe}),VKe={kernelName:Lv,backendName:"webgl",kernelFunc:FKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BKe=Ao+`
  return atan(x);
`,zKe=Pt({opSnippet:BKe}),UKe={kernelName:Fv,backendName:"webgl",kernelFunc:zKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jKe=qM+`
  return atan(a, b);
`,WKe=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Kf+`
  return result;
`,GKe=Wr({opSnippet:jKe,packedOpSnippet:WKe}),HKe={kernelName:Bv,backendName:"webgl",kernelFunc:GKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qKe=Ao+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,KKe=Pt({opSnippet:qKe}),XKe={kernelName:Vv,backendName:"webgl",kernelFunc:KKe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nv{constructor(e,n,r,i=!1,s=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,a=e.strideHeight,l=e.strideWidth,u=e.dilationHeight,h=e.dilationWidth,d=e.effectiveFilterHeight,p=e.effectiveFilterWidth,g=e.padInfo.top,y=e.padInfo.left;this.outputShape=e.outShape;const b=n==="avg",x=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,w=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let C="0.0";if(b||(C="-1.0 / 1e-20"),r){this.userCode=`
        const ivec2 strides = ivec2(${a}, ${l});
        const ivec2 pads = ivec2(${g}, ${y});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${d};
              wR += ${u}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${p};
                wC += ${h}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${i?s?x:w:`wR * ${p} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const E="max";let _=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(_="avgValue / max(count, 1.0)");const A=Math.floor(o/4)*4,P=o%4,N=`
      if (${b}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${E}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${l});
      const ivec2 pads = ivec2(${g}, ${y});
      const float initializationValue = ${C};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${C});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${d};
            wR += ${u}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${A}; wC += 4) {
            int xC = xCCorner + wC * ${h};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${h}, d),
              getValue(batch, xR, xC + 2 * ${h}, d),
              getValue(batch, xR, xC + 3 * ${h}, d)
            );

            ${N}
          }

          int xC = xCCorner + ${A};
          if (${P===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${N}
          } else if (${P===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${h}, d),
              initializationValue,
              initializationValue
            );

            ${N}
          } else if (${P===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${h}, d),
              getValue(batch, xR, xC + 2 * ${h}, d),
              initializationValue
            );

            ${N}
          }
        }
        setOutput(${_});
      }
    `}}class XM{constructor(e,n,r,i=!1,s=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,a=e.strideDepth,l=e.strideHeight,u=e.strideWidth,h=e.dilationDepth,d=e.dilationHeight,p=e.dilationWidth,g=e.effectiveFilterDepth,y=e.effectiveFilterHeight,b=e.effectiveFilterWidth,x=e.padInfo.front,w=e.padInfo.top,C=e.padInfo.left;this.outputShape=e.outShape;const E=n==="avg";let _="0.0";if(E||(_="-1.0 / 1e-20"),r){this.userCode=`
        const ivec3 strides =
            ivec3(${a}, ${l}, ${u});
        const ivec3 pads = ivec3(${x}, ${w}, ${C});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${g};
              wD += ${h}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${y};
                wR += ${d}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${b};
                  wC += ${p}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${i?s?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${y} * ${b} +
                      wR * ${b} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const A="max";let P=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(P="avgValue / max(count, 1.0)");const N=Math.floor(o/4)*4,R=o%4,D=`
      if (${E}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${A}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${a}, ${l}, ${u});
      const ivec3 pads = ivec3(${x}, ${w}, ${C});
      const float initializationValue = ${_};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${_});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${g};
            wD += ${h}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${y};
            wR += ${d}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${N}; wC += 4) {
              int xC = xCCorner + wC * ${p};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                getValue(batch, xD, xR, xC + 3 * ${p}, ch)
              );

              ${D}
            }

            int xC = xCCorner + ${N};
            if (${R===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${D}
            } else if (${R===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                initializationValue,
                initializationValue
              );

              ${D}
            } else if (${R===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                initializationValue
              );

              ${D}
            }
          }
        }
        setOutput(${P});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YKe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;X0(i,"avgPool");const{filterSize:s,strides:o,pad:a,dimRoundingMode:l}=r,u=1;U(hi(o,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const h=Io(i.shape,s,o,u,a,l);if(h.filterWidth===1&&h.filterHeight===1&&Wt(h.inShape,h.outShape))return ps({inputs:{x:i},backend:n});const d=new nv(h,"avg",!1);return n.runWebGLProgram(d,[i],"float32")}const QKe={kernelName:$T,backendName:"webgl",kernelFunc:YKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZKe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:s,strides:o,pad:a,dimRoundingMode:l,dataFormat:u}=r,h=[1,1,1],d=du(i.shape,s,o,h,a,l,u),p=new XM(d,"avg",!1);return n.runWebGLProgram(p,[i],"float32")}const JKe={kernelName:OT,backendName:"webgl",kernelFunc:ZKe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class e7e{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,i=e.strideHeight,s=e.strideWidth,o=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterHeight,u=e.effectiveFilterWidth,h=l-1-e.padInfo.top,d=u-1-e.padInfo.left,p=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${h}, ${d});
      const float avgMultiplier = float(${p});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${u};
            wC+= ${a}) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class t7e{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,i=e.filterWidth,s=e.strideDepth,o=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,u=e.dilationHeight,h=e.dilationWidth,d=e.effectiveFilterDepth,p=e.effectiveFilterHeight,g=e.effectiveFilterWidth,y=d-1-e.padInfo.front,b=p-1-e.padInfo.top,x=g-1-e.padInfo.left,w=1/(n*r*i);this.userCode=`
      const ivec3 pads = ivec3(${y}, ${b}, ${x});
      const float avgMultiplier = float(${w});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${s}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${p};
              wR += ${u}) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${g};
                wC += ${h}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n7e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,o=s,{filterSize:a,strides:l,pad:u,dimRoundingMode:h}=r,d=[1,1,1],p=du(o.shape,a,l,d,u,h),g=new t7e(p);return n.runWebGLProgram(g,[i],o.dtype)}const r7e={kernelName:TO,backendName:"webgl",kernelFunc:n7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i7e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,o=s;X0([i,s],"avgPoolGrad");const{filterSize:a,strides:l,pad:u}=r,h=Io(o.shape,a,l,1,u),d=new e7e(h);return n.runWebGLProgram(d,[i],o.dtype)}const s7e={kernelName:SO,backendName:"webgl",kernelFunc:i7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o7e(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:s}=e,{transposeA:o,transposeB:a}=r;return wS({a:i,b:s,transposeA:o,transposeB:a,backend:n})}const a7e={kernelName:PT,backendName:"webgl",kernelFunc:o7e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class l7e{constructor(e,n,r,i,s,o){this.outputShape=[],this.variableNames=["x","mean","variance"],dt(e,n),dt(e,r);let a="0.0";i!=null&&(dt(e,i),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="1.0";s!=null&&(dt(e,s),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${a};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${o}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class u7e{constructor(e,n,r,i,s,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],dt(e,n),dt(e,r);let a="vec4(0.0)";i!=null&&(dt(e,i),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="vec4(1.0)";s!=null&&(dt(e,s),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${a};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${o}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c7e=({inputs:t,backend:e,attrs:n})=>{const{x:r,mean:i,variance:s,offset:o,scale:a}=t;U(i.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),U(o==null||i.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),U(a==null||i.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);const u=[r,i,s];let h=null;o!=null&&(h=o.shape,u.push(o));let d=null;a!=null&&(d=a.shape,u.push(a));const p=ge().getBool("WEBGL_PACK_NORMALIZATION")?new u7e(r.shape,i.shape,s.shape,h,d,l):new l7e(r.shape,i.shape,s.shape,h,d,l);return e.runWebGLProgram(p,u,u[0].dtype)},h7e={kernelName:qT,backendName:"webgl",kernelFunc:c7e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class f7e{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=tn(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=d7e(this.rank);let i;const s=e.map((o,a)=>`sourceLoc.${rR[a]} = start[${a}] + coords.${rR[a]};`);i=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${s.join(`
`)}
      `,this.userCode=`
      void main() {
        ${i}
        setOutput(getSource(${r}));
      }
    `}}const rR=["x","y","z","w","u","v"];function d7e(t){if(t===1)return"sourceLoc";if(t<=6)return rR.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class p7e{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=tn(this.rank),r=Ti("coords",this.rank),i=Ti("sourceLoc",this.rank),s=this.rank===1?"sourceLoc":`vec2(${i.slice(-2).join()})`,o=`getChannel(getSource(${i.join()}), ${s})`,a=`
      result.x = ${o};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${i[this.rank-1]};
        result.y = ${o};
        --${i[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${i[this.rank-2]};
        result.z = ${o};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${i[this.rank-1]};
          result.w = ${o};
        }
      }
    `,u=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((h,d)=>`start[${d}]`).join()});`:e.map((h,d)=>`${i[d]} = ${r[d]} + start[${d}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${u}
        vec4 result = vec4(0.);
        ${a}
        ${l}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m7e(t,e,n,r){const i=r.texData.get(t.dataId),s=r.makeTensorInfo(n,t.dtype),o=r.texData.get(s.dataId);Object.assign(o,i),o.refCount=1,o.shape=n,o.dtype=t.dtype;let a=WP(e,Xe(t.shape));i.slice&&(a+=i.slice.flatOffset),o.slice={flatOffset:a,origDataId:i.slice&&i.slice.origDataId||t.dataId};const l=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,l+1),s}function Rm(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:s,size:o}=r,[a,l]=LC(i,s,o);if(zP(i,a,l),Se(l)===0)return n.makeTensorInfo(l,i.dtype,[]);if(n.shouldExecuteOnCPU([i])||i.dtype==="string"){const d=n.texData.get(i.dataId),p=a8e(d.values,a,l,i.shape,i.dtype);return n.makeTensorInfo(l,i.dtype,p)}const{isPacked:u}=n.texData.get(i.dataId),h=jP(i.shape,a,l);if(u||!h){const d=ge().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new p7e(l):new f7e(l),p=[a];return n.runWebGLProgram(d,[i],i.dtype,p)}return n.uploadToGPU(i.dataId),m7e(i,a,l,n)}const g7e={kernelName:SC,backendName:"webgl",kernelFunc:Rm};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y7e=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:s,crops:o}=r;U(i.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const a=s.reduce((C,E)=>C*E),l=M0(i.shape,s,a),u=L0(l.length,s.length),h=F0(i.shape,s,a),d=XP(o,s.length),p=YP(h,o,s.length),g=[],y=Le({inputs:{x:i},backend:n,attrs:{shape:l}}),b=Ai({inputs:{x:y},backend:n,attrs:{perm:u}}),x=Le({inputs:{x:b},backend:n,attrs:{shape:h}}),w=Rm({inputs:{x},backend:n,attrs:{begin:d,size:p}});return g.push(y),g.push(b),g.push(x),g.forEach(C=>n.disposeIntermediateTensorInfo(C)),w},v7e={kernelName:MT,backendName:"webgl",kernelFunc:y7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b7e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:s}=e,{size:o}=r,a=n.readSync(i.dataId),l=n.readSync(s.dataId),u=lre(a,l,s.dtype,s.shape,o);return n.makeTensorInfo([o],s.dtype,u)}const x7e={kernelName:CO,backendName:"webgl",kernelFunc:b7e};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w7e=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,S7e=`
  return float(int(a.r) & int(b.r));
`;function T7e(t){const{inputs:e,backend:n}=t,{a:r,b:i}=e,s=ge().getBool("WEBGL_PACK_BINARY_OPERATIONS"),o=ge().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,i])||o===1){const l=n.texData.get(r.dataId).values,u=n.texData.get(i.dataId).values,[h,d]=R9e(r.shape,i.shape,l,u,r.dtype),p=n.makeTensorInfo(d,r.dtype),g=n.texData.get(p.dataId);return g.values=h,p}let a;return s?a=new km(w7e,r.shape,i.shape,!1):a=new Nf(S7e,r.shape,i.shape),n.runWebGLProgram(a,[r,i],r.dtype)}const C7e={kernelName:EO,backendName:"webgl",kernelFunc:T7e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E7e(t){const{inputs:e,backend:n}=t,{s0:r,s1:i}=e,s=n.readSync(r.dataId),o=n.readSync(i.dataId),a=dt(Array.from(s),Array.from(o));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const I7e={kernelName:pQ,backendName:"webgl",kernelFunc:E7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _7e="return float(a != b);",Sre=Wr({opSnippet:_7e,cpuKernelImpl:Z9e,dtype:"bool"}),A7e={kernelName:cC,backendName:"webgl",kernelFunc:Sre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q0(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.texData.get(r.dataId);return ps({inputs:{x:i.complexTensorInfos.real},backend:n})}const k7e={kernelName:YO,backendName:"webgl",kernelFunc:Q0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N7e="return float(int(x));";function R7e(t,e){const n=new Ma(t.shape,N7e),r=e.runWebGLProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iR(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dtype:s}=r;if(s==="complex64"){if(i.dtype==="complex64")return ps({inputs:{x:i},backend:n});const o=Cr(i.shape),a=iR({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),l=Zc({inputs:{real:a,imag:o},backend:n});return o.dispose(),n.disposeIntermediateTensorInfo(a),l}if(i.dtype==="complex64"){const o=Q0({inputs:{input:i},backend:n}),a=iR({inputs:{x:o},backend:n,attrs:{dtype:s}});return n.disposeIntermediateTensorInfo(o),a}if(!uQ(i.dtype,s)){const o=ps({inputs:{x:i},backend:n});return{dataId:o.dataId,shape:o.shape,dtype:s}}if(n.shouldExecuteOnCPU([i])){const o=n.texData.get(i.dataId).values,[a,l,u]=D9e(o,i.shape,i.dtype,s);return n.makeTensorInfo(a,l,u)}if(s==="int32")return R7e(i,n);if(s==="bool"){const o=n.makeTensorInfo([],"bool",li("bool",1)),l=Sre({inputs:{a:i,b:o},backend:n});return n.disposeIntermediateTensorInfo(o),l}throw new Error(`Error in Cast: failed to cast ${i.dtype} to ${s}`)}const D7e={kernelName:zv,backendName:"webgl",kernelFunc:iR};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GG="return ceil(x);",$7e=Pt({opSnippet:GG,packedOpSnippet:GG,cpuKernelImpl:$9e}),O7e={kernelName:Uv,backendName:"webgl",kernelFunc:$7e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class P7e{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class M7e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L7e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{clipValueMin:s,clipValueMax:o}=r;let a;ge().getBool("WEBGL_PACK_CLIP")?a=new M7e(i.shape):a=new P7e(i.shape);const l=[[s],[o]];return n.runWebGLProgram(a,[i],i.dtype,l)}const F7e={kernelName:jv,backendName:"webgl",kernelFunc:L7e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class V7e{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HG(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function B7e(t){const{inputs:e,backend:n}=t,{x:r}=e,i=n.texData.get(r.dataId),s=new V7e(r.shape),o=[HG(r,i.complexTensorInfos.real),HG(r,i.complexTensorInfos.imag)];return n.runWebGLProgram(s,o,o[0].dtype)}const z7e={kernelName:LT,backendName:"webgl",kernelFunc:B7e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class U7e{constructor(e){this.outputShape=[],this.outputShape=Ka(e,1),this.variableNames=e.map((o,a)=>`T${a}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let o=1;o<n.length;o++)n[o]=n[o-1]+e[o][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let o=1;o<n.length;o++){const a=n[o-1];r.push(`else if (yC < ${n[o]}) setOutput(getT${o}(yR, yC-${a}));`)}const i=n.length,s=n[n.length-1];r.push(`else setOutput(getT${i}(yR, yC-${s}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class j7e{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Ka(e,n);const r=this.outputShape,i=r.length,s=tn(i),o=Ti("coords",i),a=["x","y","z","w","u","v"].slice(0,i);this.variableNames=e.map((b,x)=>`T${x}`);const l=new Array(e.length-1);l[0]=e[0][n];for(let b=1;b<l.length;b++)l[b]=l[b-1]+e[b][n];const u=a[n],h=a.slice(-2),d=a.join();let p=`if (${u} < ${l[0]}) {
        return getChannel(
            getT0(${d}), vec2(${h.join()}));
        }`;for(let b=1;b<l.length;b++){const x=l[b-1];p+=`
        if (${u} < ${l[b]}  && ${u} >= ${l[b-1]}) {
          return getChannel(
            getT${b}(${l1(a,u,x)}),
            vec2(${l1(h,u,x)}));
        }`}const g=l.length,y=l[l.length-1];p+=`
        return getChannel(
          getT${g}(${l1(a,u,y)}),
          vec2(${l1(h,u,y)}));`,this.userCode=`
      float getValue(${a.map(b=>"int "+b)}) {
        ${p}
      }

      void main() {
        ${s} coords = getOutputCoords();
        vec4 result = vec4(getValue(${o}), 0., 0., 0.);

        ${o[i-1]} = ${o[i-1]} + 1;
        if (${o[i-1]} < ${r[i-1]}) {
          result.g = getValue(${o});
        }

        ${o[i-2]} = ${o[i-2]} + 1;
        if (${o[i-2]} < ${r[i-2]}) {
          result.a = getValue(${o});
        }

        ${o[i-1]} = ${o[i-1]} - 1;
        if (${o[i-2]} < ${r[i-2]} &&
            ${o[i-1]} < ${r[i-1]}) {
          result.b = getValue(${o});
        }
        setOutput(result);
      }
    `}}function l1(t,e,n){const r=t.indexOf(e);return t.map((s,o)=>o===r?`${s} - ${n}`:s).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rE(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.texData.get(r.dataId);return ps({inputs:{x:i.complexTensorInfos.imag},backend:n})}const W7e={kernelName:UO,backendName:"webgl",kernelFunc:rE};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ry(t,e,n){const r=t[0].dtype;if(r==="complex64"){const g=t.map(C=>Q0({inputs:{input:C},backend:n})),y=t.map(C=>rE({inputs:{input:C},backend:n})),b=ry(g,e,n),x=ry(y,e,n),w=Zc({inputs:{real:b,imag:x},backend:n});return g.forEach(C=>n.disposeIntermediateTensorInfo(C)),y.forEach(C=>n.disposeIntermediateTensorInfo(C)),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(x),w}let i=n.shouldExecuteOnCPU(t);if(r==="string"&&(i=!0),i){const g=t.map(_=>{const P=[-1,Se(_.shape.slice(e))];return Le({inputs:{x:_},backend:n,attrs:{shape:P}})}),y=g.map(_=>({vals:n.readSync(_.dataId),shape:_.shape})),b=Ka(g.map(_=>_.shape),1),x=g[0].shape[0]===1,w=O9e(y,b,r,x),C=Ka(t.map(_=>_.shape),e),E=n.makeTensorInfo(C,r,w);return g.forEach(_=>n.disposeIntermediateTensorInfo(_)),E}const s=t.filter(g=>Se(g.shape)>0),o=ge().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&s[0].shape.length>1;if(s.length===1){const g=o?new Ma(t[0].shape,Ju):new lc(t[0].shape,Ju);return n.runWebGLProgram(g,t,r)}const a=ge().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(s.length>a){const g=[];for(let b=0;b<s.length;b+=a){const x=s.slice(b,b+a);g.push(ry(x,e,n))}const y=ry(g,e,n);for(const b of g)n.disposeIntermediateTensorInfo(b);return y}if(o){const g=new j7e(s.map(y=>y.shape),e);return n.runWebGLProgram(g,s,r)}const{tensors2D:l,outShape:u}=G7e(s,e,n),h=new U7e(l.map(g=>g.shape)),d=n.runWebGLProgram(h,l,r);l.forEach(g=>n.disposeIntermediateTensorInfo(g));const p=Le({inputs:{x:d},attrs:{shape:u},backend:n});return n.disposeIntermediateTensorInfo(d),p}function G7e(t,e,n){const r=Ka(t.map(s=>s.shape),e);return{tensors2D:t.map(s=>Le({inputs:{x:s},attrs:{shape:[-1,Se(s.shape.slice(e))]},backend:n})),outShape:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tre(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r,s=wt(i,e[0].shape)[0],o=e.map(u=>u.shape);HP(o,s);const a=Ka(e.map(u=>u.shape),s);if(Se(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const l=e.filter(u=>Se(u.shape)>0);return l.length===1?ps({inputs:{x:l[0]},backend:n}):ry(l,s,n)}const H7e={kernelName:FT,backendName:"webgl",kernelFunc:Tre};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Cre{constructor(e,n=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const o=e.padInfo.top,a=e.padInfo.left,l=e.strideHeight,u=e.strideWidth,h=e.dilationHeight,d=e.dilationWidth,p=e.filterHeight,g=e.filterWidth,y=Math.floor(e.inChannels/4)*4,b=e.inChannels%4,x=e.dataFormat==="channelsLast",w=x?1:2,C=x?2:3,E=x?3:1;let _="",A="";r&&(i?_=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?_=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:_=`
          float activation(float x) {
            ${r}
          }
        `,A="result = activation(result);");const P=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${_}

      const ivec2 strides = ivec2(${l}, ${u});
      const ivec2 pads = ivec2(${o}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${E}];

        ivec2 xRCCorner =
            ivec2(coords[${w}], coords[${C}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${p}; wR++) {
          int xR = xRCorner + wR * ${h};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${g}; wC++) {
            int xC = xCCorner + wC * ${d};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${y}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${x}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${b===1}) {

              if (${x}) {
                dotProd +=
                    getX(batch, xR, xC, ${y}) *
                    getW(wR, wC, ${y}, d2);
              } else {
                dotProd +=
                    getX(batch, ${y}, xR, xC) *
                    getW(wR, wC, ${y}, d2);
              }

            } else if (${b===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${y}, d2),
                getW(wR, wC, ${y} + 1, d2)
              );

              if (${x}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${y}),
                  getX(batch, xR, xC, ${y} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${y}, xR, xC),
                  getX(batch, ${y} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${b===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${y}, d2),
                getW(wR, wC, ${y} + 1, d2),
                getW(wR, wC, ${y} + 2, d2)
              );

              if (${x}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${y}),
                  getX(batch, xR, xC, ${y} + 1),
                  getX(batch, xR, xC, ${y} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${y}, xR, xC),
                  getX(batch, ${y} + 1, xR, xC),
                  getX(batch, ${y} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${P}
        ${A}
        setOutput(result);
      }
    `}}class q7e{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,r=e.padInfo.top,i=e.padInfo.left,s=e.strideDepth,o=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,u=e.dilationHeight,h=e.dilationWidth,d=e.filterDepth,p=e.filterHeight,g=e.filterWidth,y=Math.floor(e.inChannels/4)*4,b=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${s}, ${o}, ${a});
      const ivec3 pads = ivec3(${n}, ${r}, ${i});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${d}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p}; wR++) {
            int xR = xRCorner + wR * ${u};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${g}; wC++) {
              int xC = xCCorner + wC * ${h};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${y}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${b===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${y}) *
                  getW(wF, wR, wC, ${y}, d2);
              } else if (${b===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${y}),
                  getX(batch, xF, xR, xC, ${y} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${y}, d2),
                  getW(wF, wR, wC, ${y} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${b===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${y}),
                  getX(batch, xF, xR, xC, ${y} + 1),
                  getX(batch, xF, xR, xC, ${y} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${y}, d2),
                  getW(wF, wR, wC, ${y} + 1, d2),
                  getW(wF, wR, wC, ${y} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ere{constructor(e,n=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=di(this.outputShape.length);const o=e.padInfo.left,a=e.strideWidth,l=e.dilationWidth,u=e.filterHeight,h=e.filterWidth,d=h;let p=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let x=0;x<h;x++)p+=`
           vec4 xTexelC${x*2};
           int xTexelC${x*2}Ready;
           vec4 xTexelC${x*2+1};
           int xTexelC${x*2+1}Ready;
           vec4 xC${x};`;p+=`
     for (int r = 0; r < ${u}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let x=0;x<h;x++)p+=`
           xTexelC${x*2} = vec4(0.0);
           xTexelC${x*2}Ready = 0;
           xTexelC${x*2+1} = vec4(0.0);
           xTexelC${x*2+1}Ready = 0;
           xC${x} = vec4(0.0);`;p+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let x=0;x<(d+1)/2;x++){const w=x*2;if(p+=`
           xC = xCCorner + ${w*l};
           `,a===1){if(w<h&&(o%2===1?(p+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w}Ready == 0) {
                   xTexelC${w} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${w}.zw = vec2(0.0);
                   }
                   xTexelC${w}Ready = 1;
                 }
               `,l===1&&w>0?p+=`
                 xC${w} = vec4(xTexelC${w-2}.zw, xTexelC${w}.xy);
                 `:p+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${w} = vec4(previous.zw, xTexelC${w}.xy);
                   } else {
                     xC${w} = vec4(0.0, 0.0, xTexelC${w}.xy);
                   }
                   `):p+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${w}Ready == 0) {
                   xTexelC${w} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${w}.zw = vec2(0.0);
                   }
                   xTexelC${w}Ready = 1;
                 }

                 xC${w} = xTexelC${w};
                 `,w+1<h)){const C=o%2===0?dO(l):l;l%2===0&&o%2===1||l%2!==0&&o%2!==1?(p+=`
                   xCOffset = xC + imod(pads[1], 2) + ${C};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {
                     xTexelC${w+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${w+1}.zw = vec2(0.0);
                     }
                     xTexelC${w+1}Ready = 1;
                   }
                   `,l>1?p+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${w+1} = vec4(previous.zw, xTexelC${w+1}.xy);
                     } else {
                      xC${w+1} = vec4(0.0, 0.0, xTexelC${w+1}.xy);
                     }
                     `:p+=`
                     xC${w+1} = vec4(xTexelC${w}.zw, xTexelC${w+1}.xy);
                     `):C===1?p+=`
                     xC${w+1} = xTexelC${w};
                     `:p+=`
                     xCOffset = xC + ${C};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {
                       xTexelC${w+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${w+1}.zw = vec2(0.0);
                       }
                       xTexelC${w+1}Ready = 1;
                     }

                     xC${w+1} = xTexelC${w+1};
                     `}}else w<h&&(o%2===1?(p+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w}Ready == 0) {
                   xTexelC${w} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${w}.zw = vec2(0.0);
                   }
                   xTexelC${w}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${w+1}Ready == 0) {
                   xTexelC${w+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${w+1}.zw = vec2(0.0);
                   }
                   xTexelC${w+1}Ready = 1;
                 }

                 xC${w} = vec4(xTexelC${w}.zw, xTexelC${w+1}.zw);
               `,w+1<h&&(p+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${w+1} = vec4(xTexelC${w+1}.xy, final.xy);
                 `)):(p+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${w}Ready == 0) {
                   xTexelC${w} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${w}.zw = vec2(0.0);
                   }
                   xTexelC${w}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {
                   xTexelC${w+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${w+1}.zw = vec2(0.);
                   }
                   xTexelC${w+1}Ready = 1;
                 }

                 xC${w} = vec4(
                   xTexelC${w}.xy, xTexelC${w+1}.xy);
               `,w+1<h&&(p+=`
                   xC${w+1} = vec4(xTexelC${w}.zw, xTexelC${w+1}.zw);
                 `)));w<h&&(p+=`
             wTexel = getW(r, ${w}, d1, d2);
             dotProd += xC${w}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${w}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,w+1<h&&(p+=`
               wTexel = getW(r, ${w+1}, d1, d2);
               dotProd += xC${w+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${w+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}p+=`
     }
   `,p+=`
     }
   `,p+=`
     }
   `;let g="",y="";r&&(i?g=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:s?g=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:g=`vec4 activation(vec4 x) {
           ${r}
         }`,y="result = activation(result);");const b=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${g}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${p}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${b}
         ${y}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class K7e{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=di(this.outputShape.length);const{dataFormat:r}=n,i=ki(),s=r==="channelsLast",o=s?1:2,a=s?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let u="";for(let h=0;h<=1;h++)for(let d=0;d<=1;d++)u+=`
          blockIndex = rc.z + ${d};
          pos = rc.y + ${h};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${o}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${a}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${s}) {
                  innerDims = vec2(d1, ch);
                  result[${h*2+d}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${h*2+d}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${u}

        ${i.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SS(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function Ire({x:t,filter:e,convInfo:n,backend:r,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:o=0,activation:a=null}){const l=t.shape,u=r.texData.get(t.dataId),h=n.inChannels,d=l[0]*l[1]*l[2],p=n.outChannels,g=n.dataFormat==="channelsLast",y=!1,b=!1;let x;const w=[];if(s!=null){const _=SS(s.shape,g);_!=null&&(s=Le({inputs:{x:s},backend:r,attrs:{shape:_}}),w.push(s))}if(i!=null){const _=SS(i.shape,g);_!=null&&(i=Le({inputs:{x:i},backend:r,attrs:{shape:_}}),w.push(i))}if(!((d===1||p===1)&&h>vre)&&u.isPacked&&g&&u.texture!=null&&l[2]%2!==0&&Wt(u.shape.slice(-3),l.slice(-3))){const _=l[0]*l[1]*(l[2]+1),A={dataId:t.dataId,shape:[1,_,n.inChannels],dtype:t.dtype},P=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,U(xS(u.shape,A.shape),()=>`packed reshape ${u.shape} to ${A.shape} isn't free`);const N=Le({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});w.push(N);const R=wS({a:A,b:N,backend:r,transposeA:y,transposeB:b,bias:i,activation:a,preluActivationWeights:s,leakyreluAlpha:o}),D=r.texData.get(R.dataId);U(D.isPacked,()=>"batchMatMul result is expected to be packed"),u.shape=P,D.shape=n.outShape,x=ps({inputs:{x:R},backend:r}),x.shape=n.outShape,w.push(R)}else{const _=n.outHeight*n.outWidth,A=Le({inputs:{x:t},backend:r,attrs:{shape:g?[n.batchSize,_,n.inChannels]:[n.batchSize,n.inChannels,_]}}),P=Le({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),N=wS({a:g?A:P,b:g?P:A,transposeA:!g,transposeB:b,backend:r,bias:i,activation:a,preluActivationWeights:s,leakyreluAlpha:o});x=Le({inputs:{x:N},backend:r,attrs:{shape:n.outShape}}),w.push(A),w.push(P),w.push(N)}for(const _ of w)r.disposeIntermediateTensorInfo(_);return x}function _re({x:t,filter:e,convInfo:n,backend:r,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:o=0,activation:a=null}){const{filterWidth:l,filterHeight:u,inChannels:h,outWidth:d,outHeight:p,dataFormat:g}=n,y=g==="channelsLast",b=l*u*h,x=p*d,w=[n.batchSize,b,x],C=!0,E=!1,_=[];if(s!=null){const X=SS(s.shape,y);X!=null&&(s=Le({inputs:{x:s},backend:r,attrs:{shape:X}}),_.push(s))}if(i!=null){const X=SS(i.shape,y);X!=null&&(i=Le({inputs:{x:i},backend:r,attrs:{shape:X}}),_.push(i))}const A=Le({inputs:{x:e},backend:r,attrs:{shape:[1,b,Se(e.shape)/b]}});_.push(A);const P=new K7e(w,n),N=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],R=r.runWebGLProgram(P,[t],"float32",N),D=Le({inputs:{x:R},backend:r,attrs:{shape:w}});_.push(R),_.push(D);const O=i!=null,k=s!=null,F=a==="leakyrelu",L=a?tv(a,!0):null,q=new yre(y?D.shape:A.shape,y?A.shape:D.shape,y?[n.batchSize,x,n.outChannels]:[n.batchSize,n.outChannels,x],C,E,O,L,k,F),Y=y?[D,A]:[A,D];if(i&&Y.push(i),k&&Y.push(s),F){const X=r.makeTensorInfo([],"float32",jc(o,"float32"));Y.push(X),_.push(X)}const W=r.runWebGLProgram(q,Y,"float32"),H=Le({inputs:{x:W},backend:r,attrs:{shape:n.outShape}});_.push(W);for(const X of _)r.disposeIntermediateTensorInfo(X);return H}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X7e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:o,pad:a,dataFormat:l,dilations:u,dimRoundingMode:h}=r,d=pu(l),p=Ur(i.shape,s.shape,o,u,a,h,!1,d);let g;if(p.filterHeight===1&&p.filterWidth===1&&p.dilationHeight===1&&p.dilationWidth===1&&p.strideHeight===1&&p.strideWidth===1&&(p.padInfo.type==="SAME"||p.padInfo.type==="VALID"))g=Ire({x:i,filter:s,convInfo:p,backend:n});else if(p.strideWidth<=2&&d==="channelsLast"&&ge().getBool("WEBGL_EXP_CONV")){const b=new Ere(p),x=[[p.padInfo.top,p.padInfo.left],[p.strideHeight,p.strideWidth],[p.dilationHeight,p.dilationWidth],[p.inHeight,p.inWidth]];g=n.runWebGLProgram(b,[i,s],"float32",x)}else if(ge().getBool("WEBGL_CONV_IM2COL"))g=_re({x:i,filter:s,convInfo:p,backend:n});else{const b=new Cre(p);g=n.runWebGLProgram(b,[i,s],"float32")}const y=Le({inputs:{x:g},backend:n,attrs:{shape:p.outShape}});return n.disposeIntermediateTensorInfo(g),y}const Y7e={kernelName:VT,backendName:"webgl",kernelFunc:X7e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Q7e{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,i=e.padInfo.top,s=e.padInfo.left,o=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${i};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${s};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${o?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Z7e{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,i=e.strideHeight,s=e.strideWidth,o=e.dataFormat==="channelsLast",a=n-1-e.padInfo.top,l=r-1-e.padInfo.left,u=o?1:2,h=o?2:3,d=o?3:1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${d}];

        ivec2 dyCorner = ivec2(coords[${u}], coords[${h}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${o}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class J7e{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,r=e.strideHeight,i=e.strideWidth,s=e.padInfo.front,o=e.padInfo.top,a=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${s};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${o};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${i} - ${a};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class eXe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,i=e.filterWidth,s=e.strideDepth,o=e.strideHeight,a=e.strideWidth,l=n-1-e.padInfo.front,u=r-1-e.padInfo.top,h=i-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${u}, ${h});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${s}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${i}; wC++) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${i} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tXe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:o,pad:a,dataFormat:l,dimRoundingMode:u,filterShape:h}=r,d=pu(l),p=Ur(i.shape,h,o,1,a,u,!1,d),g=new Q7e(p);return n.runWebGLProgram(g,[i,s],"float32")}const nXe={kernelName:_O,backendName:"webgl",kernelFunc:tXe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rXe{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=di(this.outputShape.length);const n=e.filterHeight,r=e.filterWidth,i=n-1-e.padInfo.top,s=r-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${i}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iXe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{inputShape:o,strides:a,pad:l,dataFormat:u,dimRoundingMode:h}=r,d=pu(u),p=Ur(o,s.shape,a,1,l,h,!1,d);if(ge().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&d==="channelsLast"){const g=[[p.strideHeight,p.strideWidth]],y=new rXe(p);return n.runWebGLProgram(y,[i,s],"float32",g)}else{const g=new Z7e(p);return n.runWebGLProgram(g,[i,s],"float32")}}const sXe={kernelName:BT,backendName:"webgl",kernelFunc:iXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oXe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:o,pad:a,dilations:l}=r,u=Gc(i.shape,s.shape,o,l,a),h=new q7e(u);return n.runWebGLProgram(h,[i,s],"float32")}const aXe={kernelName:zT,backendName:"webgl",kernelFunc:oXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lXe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:o,pad:a,filterShape:l}=r,u=Gc(i.shape,l,o,1,a),h=new J7e(u);return n.runWebGLProgram(h,[i,s],"float32")}const uXe={kernelName:AO,backendName:"webgl",kernelFunc:lXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cXe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{pad:o,strides:a,inputShape:l}=r,u=Gc(l,s.shape,a,1,o),h=new eXe(u);return n.runWebGLProgram(h,[i,s],"float32")}const hXe={kernelName:kO,backendName:"webgl",kernelFunc:cXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fXe=Nm+`
  return cos(x);
`,dXe=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${Kf}
  return result;
`,pXe=Pt({opSnippet:fXe,packedOpSnippet:dXe}),mXe={kernelName:Wv,backendName:"webgl",kernelFunc:pXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gXe=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,yXe=Pt({opSnippet:gXe}),vXe={kernelName:Gv,backendName:"webgl",kernelFunc:yXe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bXe{constructor(e,n,r,i,s){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[o,a,l,u]=e,[h]=n,[d,p]=r;this.outputShape=[h,d,p,u];const g=i==="bilinear"?1:0,[y,b]=[`${a-1}.0`,`${l-1}.0`],[x,w,C]=d>1?[`${(a-1)/(d-1)}`,"(y2-y1) * height_ratio",`y1*${y} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${y}`],[E,_,A]=p>1?[`${(l-1)/(p-1)}`,"(x2-x1) * width_ratio",`x1*${b} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${b}`];this.userCode=`
      const float height_ratio = float(${x});
      const float width_ratio = float(${E});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${o}) {
          return;
        }

        float height_scale = ${w};
        float width_scale = ${_};

        float in_y = ${C};
        if( in_y < 0.0 || in_y > ${y} ) {
          setOutput(float(${s}));
          return;
        }
        float in_x = ${A};
        if( in_x < 0.0 || in_x > ${b} ) {
          setOutput(float(${s}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${g} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xXe=t=>{const{inputs:e,backend:n,attrs:r}=t,{image:i,boxes:s,boxInd:o}=e,{cropSize:a,method:l,extrapolationValue:u}=r,h=new bXe(i.shape,s.shape,a,l,u);return n.runWebGLProgram(h,[i,s,o],"float32")},wXe={kernelName:RO,backendName:"webgl",kernelFunc:xXe};var rv;(function(t){t.Prod="*",t.Sum="+"})(rv||(rv={}));class qG{constructor(e,n,r,i){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const s=this.outputShape.length,o=this.op===rv.Prod?"1.0":"0.0",a=r?o:`getX(${KG(s,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let u="",h="";r?(u=i?`end != ${l-1}`:"end != 0",h=i?"end + 1":"end - 1"):(u=i?`end + pow2 < ${l}`:"end >= pow2",h=i?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${tn(s)} coords = getOutputCoords();
        int end = ${XG(s,"coords",this.op)};
        float val = ${a};
        int pow2 = int(pow(2.0, index));
        if (${u}) {
          int idx = ${h};
          ${XG(s,"coords",this.op)} = idx;
          val ${this.op}= getX(${KG(s,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function KG(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function XG(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Are(t,e,n,r,i,s){const o=e.shape.length,a=Rn([r],o);let l=e;a!=null&&(l=Ai({inputs:{x:e},backend:n,attrs:{perm:a}}));const u=Bn(1,o)[0];if(u!==o-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const h=l.shape[u];let d=ps({inputs:{x:l},backend:n});for(let p=0;p<=Math.ceil(Math.log2(h))-1;p++){const g=new qG(t,l.shape,!1,s),y=[[p]],b=d;d=n.runWebGLProgram(g,[d],d.dtype,y),n.disposeIntermediateTensorInfo(b)}if(i){const p=new qG(t,l.shape,i,s),g=d;d=n.runWebGLProgram(p,[d],d.dtype),n.disposeIntermediateTensorInfo(g)}if(a!=null){const p=Hc(a),g=Ai({inputs:{x:d},backend:n,attrs:{perm:p}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(l),g}return d}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SXe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,exclusive:o,reverse:a}=r;return Are(rv.Prod,i,n,s,o,a)}const TXe={kernelName:NO,backendName:"webgl",kernelFunc:SXe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CXe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,exclusive:o,reverse:a}=r;return Are(rv.Sum,i,n,s,o,a)}const EXe={kernelName:UT,backendName:"webgl",kernelFunc:CXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IXe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:s}=e,{size:o,binaryOutput:a}=r;if(i.shape.length===1){const l=n.readSync(i.dataId),u=n.readSync(s.dataId),h=lre(l,u,s.dtype,s.shape,o);return n.makeTensorInfo([o],s.dtype,h)}else if(i.shape.length===2){const l=n.bufferSync(i),u=n.bufferSync(s),h=N9e(l,u,o,a);return n.makeTensorInfo(h.shape,s.dtype,h.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}const _Xe={kernelName:DO,backendName:"webgl",kernelFunc:IXe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AXe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kXe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockSize:s,dataFormat:o}=r,a=i.shape[0],l=o==="NHWC"?i.shape[1]:i.shape[2],u=o==="NHWC"?i.shape[2]:i.shape[3],h=o==="NHWC"?i.shape[3]:i.shape[1],d=l*s,p=u*s,g=h/(s*s),y=o==="NHWC"?[a,d,p,g]:[a,g,d,p],b=new AXe(y,s,o);return n.runWebGLProgram(b,[i],i.dtype)}const NXe={kernelName:$O,backendName:"webgl",kernelFunc:kXe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kre{constructor(e,n=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=di(this.outputShape.length);const o=e.filterHeight,a=e.filterWidth,l=e.outChannels/e.inChannels;let u="",h="";r&&(i?u=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?u=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:u=`
          float activation(float x) {
            ${r}
          }
        `,h="result = activation(result);");const d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${u}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${o}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${a}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${d}
        ${h}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Nre{constructor(e,n=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=di(this.outputShape.length);const o=e.outChannels/e.inChannels,a=e.padInfo.left,l=e.strideWidth,u=e.dilationWidth,h=e.filterHeight,d=e.filterWidth,p=d;let g=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let w=0;w<d;w++)g+=`
          vec4 xTexelC${w*2};
          int xTexelC${w*2}Ready;
          vec4 xTexelC${w*2+1};
          int xTexelC${w*2+1}Ready;
          vec4 xC${w};`;g+=`
    for (int r = 0; r < ${h}; r++) {
      `;for(let w=0;w<d;w++)g+=`
          xTexelC${w*2} = vec4(0.0);
          xTexelC${w*2}Ready = 0;
          xTexelC${w*2+1} = vec4(0.0);
          xTexelC${w*2+1}Ready = 0;
          xC${w} = vec4(0.0);`;g+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let w=0;w<(p+1)/2;w++){const C=w*2;if(g+=`
          xC = xCCorner + ${C*u};
          `,l===1){if(C<d&&(a%2===1?(g+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${C}Ready == 0) {
                  xTexelC${C} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${C}.zw = vec2(0.0);
                  }
                  xTexelC${C}Ready = 1;
                }
              `,u===1&&C>0?g+=`
                xC${C} = vec4(xTexelC${C-2}.zw, xTexelC${C}.xy);
                `:g+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${C} = vec4(previous.zw, xTexelC${C}.xy);
                  } else {
                    xC${C} = vec4(0.0, 0.0, xTexelC${C}.xy);
                  }
                  `):g+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${C}Ready == 0) {
                  xTexelC${C} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${C}.zw = vec2(0.0);
                  }
                  xTexelC${C}Ready = 1;
                }

                xC${C} = xTexelC${C};
                `,C+1<d)){const E=a%2===0?dO(u):u;u%2===0&&a%2===1||u%2!==0&&a%2!==1?(g+=`
                  xCOffset = xC + imod(pads[1], 2) + ${E};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${C+1}Ready == 0) {
                    xTexelC${C+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${C+1}.zw = vec2(0.0);
                    }
                    xTexelC${C+1}Ready = 1;
                  }
                  `,u>1?g+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${C+1} = vec4(previous.zw, xTexelC${C+1}.xy);
                    } else {
                     xC${C+1} = vec4(0.0, 0.0, xTexelC${C+1}.xy);
                    }
                    `:g+=`
                    xC${C+1} = vec4(xTexelC${C}.zw, xTexelC${C+1}.xy);
                    `):E===1?g+=`
                    xC${C+1} = xTexelC${C};
                    `:g+=`
                    xCOffset = xC + ${E};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${C+1}Ready == 0) {
                      xTexelC${C+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${C+1}.zw = vec2(0.0);
                      }
                      xTexelC${C+1}Ready = 1;
                    }

                    xC${C+1} = xTexelC${C+1};
                    `}}else C<d&&(a%2===1?(g+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${C}Ready == 0) {
                  xTexelC${C} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${C}.zw = vec2(0.0);
                  }
                  xTexelC${C}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${C+1}Ready == 0) {
                  xTexelC${C+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${C+1}.zw = vec2(0.0);
                  }
                  xTexelC${C+1}Ready = 1;
                }

                xC${C} = vec4(xTexelC${C}.zw, xTexelC${C+1}.zw);
              `,C+1<d&&(g+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${C+1} = vec4(xTexelC${C+1}.xy, final.xy);
                `)):(g+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${C}Ready == 0) {
                  xTexelC${C} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${C}.zw = vec2(0.0);
                  }
                  xTexelC${C}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${C+1}Ready == 0) {
                  xTexelC${C+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${C+1}.zw = vec2(0.);
                  }
                  xTexelC${C+1}Ready = 1;
                }

                xC${C} = vec4(
                  xTexelC${C}.xy, xTexelC${C+1}.xy);
              `,C+1<d&&(g+=`
                  xC${C+1} = vec4(xTexelC${C}.zw, xTexelC${C+1}.zw);
                `)));C<d&&(g+=`
            wTexel = getW(r, ${C}, d1, q);
            dotProd += xC${C} * vec4(wTexel.xz, wTexel.xz);
          `,C+1<d&&(g+=`
              wTexel = getW(r, ${C+1}, d1, q);
              dotProd += xC${C+1} * vec4(wTexel.xz, wTexel.xz);
            `))}g+=`
    }
  `,g+=`
      }
    `;let y="",b="";r&&(i?y=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?y=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:y=`vec4 activation(vec4 x) {
          ${r}
        }`,b="result = activation(result);");const x=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${y}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${o};
        int q = d2 - d1 * ${o};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${g}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${x}
        ${b}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RXe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:o,pad:a,dilations:l,dimRoundingMode:u}=r;let h=l;h==null&&(h=[1,1]),U(hi(o,h),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${h}'`);const d=Ur(i.shape,s.shape,o,h,a,u,!0);let p;ge().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?p=new Nre(d):p=new kre(d);const g=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(p,[i,s],"float32",g)}const DXe={kernelName:jT,backendName:"webgl",kernelFunc:RXe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $Xe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,i=e.padInfo.top,s=e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${o} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${i};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${s};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class OXe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,i=e.strideHeight,s=e.strideWidth,o=n-1-e.padInfo.top,a=r-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PXe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:u,filterShape:h}=r,d=Ur(i.shape,h,o,a,l,u,!0),p=new $Xe(d);return n.runWebGLProgram(p,[i,s],"float32")}const MXe={kernelName:OO,backendName:"webgl",kernelFunc:PXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LXe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:u,inputShape:h}=r,d=Ur(h,s.shape,o,a,l,u,!0),p=new OXe(d);return n.runWebGLProgram(p,[i,s],"float32")}const FXe={kernelName:PO,backendName:"webgl",kernelFunc:LXe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VXe{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BXe(t){const{inputs:e,backend:n}=t,{x:r}=e,i=[...r.shape,...r.shape],s=Se(r.shape),o=Le({inputs:{x:r},backend:n,attrs:{shape:[s]}}),a=new VXe(s),l=n.runWebGLProgram(a,[o],o.dtype),u=Le({inputs:{x:l},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),u}const zXe={kernelName:mQ,backendName:"webgl",kernelFunc:BXe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UXe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:r,padInfo:i,strideHeight:s,strideWidth:o,filterHeight:a,filterWidth:l,dilationHeight:u,dilationWidth:h}=e,{top:d,left:p}=i;this.userCode=`
      const ivec2 strides = ivec2(${s}, ${o});
      const ivec2 pads = ivec2(${d}, ${p});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${a}; h++) {
          int hIn = hBeg + h * ${u};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${h};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jXe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:o,pad:a,dilations:l}=r,u=R0(i.shape,s.shape,o,a,"NHWC",l);let h;const d=new UXe(u);h=n.runWebGLProgram(d,[i,s],"float32");const p=Le({inputs:{x:h},backend:n,attrs:{shape:u.outShape}});return n.disposeIntermediateTensorInfo(h),p}const WXe={kernelName:WT,backendName:"webgl",kernelFunc:jXe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GXe(t){const{inputs:e,backend:n,attrs:r}=t,{equation:i}=r,s=e,{allDims:o,summedDims:a,idDims:l}=iM(i,s.length);oM(o.length,l,s);const{path:u,steps:h}=aM(a,l),d=h.length;let p=null,g=o.length;const y=[];for(let b=0;b<d;++b){for(const x of h[b]){const{permutationIndices:w,expandDims:C}=sM(g,l[x]);let E;lM(w)?E=s[x]:(E=Ai({inputs:{x:s[x]},backend:n,attrs:{perm:w}}),y.push(E));const _=E.shape.slice();for(let A=0;A<C.length;++A)_.splice(C[A],0,1);Wt(E.shape,_)||(E=Le({inputs:{x:E},backend:n,attrs:{shape:_}}),y.push(E)),p===null?p=E:(p=KM({inputs:{a:E,b:p},backend:n}),y.push(p))}b<d-1&&(u[b]>=0&&(p=nE({inputs:{x:p},backend:n,attrs:{axis:u[b]-(o.length-g),keepDims:!1}}),y.push(p)),g--)}for(const b of y)b!==p&&n.disposeIntermediateTensorInfo(b);return p}const HXe={kernelName:MO,backendName:"webgl",kernelFunc:GXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qXe="return (x >= 0.0) ? x : (exp(x) - 1.0);",KXe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,XXe=Pt({opSnippet:qXe,packedOpSnippet:KXe}),YXe={kernelName:qv,backendName:"webgl",kernelFunc:XXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QXe="return (b >= 0.0) ? a : a * (b + 1.0);",ZXe=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,JXe=t=>{const{inputs:e,backend:n}=t,{dy:r,y:i}=e,s=ge().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new km(ZXe,r.shape,i.shape):new Nf(QXe,r.shape,i.shape);return n.runWebGLProgram(s,[r,i],r.dtype)},eYe={kernelName:LO,backendName:"webgl",kernelFunc:JXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tYe=`
  return vec4(equal(a, b));
`,nYe="return float(a == b);",rYe=Wr({opSnippet:nYe,packedOpSnippet:tYe,dtype:"bool",cpuKernelImpl:P9e}),iYe={kernelName:GT,backendName:"webgl",kernelFunc:rYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sYe=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${QP};
  float a1 = ${ZP};
  float a2 = ${JP};
  float a3 = ${eM};
  float a4 = ${tM};
  float a5 = ${nM};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,oYe=Pt({opSnippet:sYe}),aYe={kernelName:Kv,backendName:"webgl",kernelFunc:oYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lYe=Nm+`
  return exp(x);
`,uYe=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Rre=Pt({opSnippet:lYe,packedOpSnippet:uYe,cpuKernelImpl:M9e,dtype:"float32"}),cYe={kernelName:Xv,backendName:"webgl",kernelFunc:Rre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sR(t){const{inputs:e,attrs:n,backend:r}=t,{dim:i}=n,{input:s}=e,o=s.shape.length,a=s.shape.slice();let l=i;return i<0&&(U(-(o+1)<=i,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+i+1),a.splice(l,0,1),Le({inputs:{x:s},backend:r,attrs:{shape:a}})}const hYe={kernelName:HT,backendName:"webgl",kernelFunc:sR};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YG="return exp(x) - 1.0;",fYe=Pt({opSnippet:YG,packedOpSnippet:YG,cpuKernelImpl:L9e}),dYe={kernelName:Yv,backendName:"webgl",kernelFunc:fYe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class QG{constructor(e,n,r){this.variableNames=["real","imag"];const i=n[1];this.outputShape=n;const s=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,o=r?`${i}.0`:"1.0";let a;if(e==="real")a="return real * expR - imag * expI;";else if(e==="imag")a="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${s};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${a}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${i});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${i}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${o};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dre(t,e,n){const r=n.texData.get(t.dataId),i=Se(t.shape),s=t.shape[t.shape.length-1],o=i/s,a=Le({inputs:{x:t},backend:n,attrs:{shape:[o,s]}}),l=a.shape,u=new QG("real",l,e),h=new QG("imag",l,e),d=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],p=n.runWebGLProgram(u,d,"float32"),g=n.runWebGLProgram(h,d,"float32"),y=Zc({inputs:{real:p,imag:g},backend:n});n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g);const b=Le({inputs:{x:y},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(y),b}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pYe(t){const{inputs:e,backend:n}=t,{input:r}=e;return Dre(r,!1,n)}const mYe={kernelName:FO,backendName:"webgl",kernelFunc:pYe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gYe{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z0(t){const{backend:e,attrs:n}=t,{shape:r,value:i}=n;let{dtype:s}=n;if(s=s||gm(i),s==="string"){const o=Ln(s,Se(r));return o.fill(i),e.makeTensorInfo(r,s,o)}else{const o=new gYe(r,i),a=[[i]];return e.runWebGLProgram(o,[],s,a)}}const yYe={kernelName:VO,backendName:"webgl",kernelFunc:Z0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vYe{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bYe={kernelName:BO,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,i=new vYe(n.shape);return r.runWebGLProgram(i,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZG="return floor(x);",xYe=Pt({opSnippet:ZG,packedOpSnippet:ZG,cpuKernelImpl:F9e}),wYe={kernelName:Qv,backendName:"webgl",kernelFunc:xYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SYe=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,TYe=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,CYe=Wr({opSnippet:SYe,packedOpSnippet:TYe,dtype:"int32"}),EYe={kernelName:Zv,backendName:"webgl",kernelFunc:CYe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IYe{constructor(e){this.variableNames=["A"];const n=ki(),[r,i]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${i}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _Ye{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=ki(),[r,i]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${i}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AYe={kernelName:AN,backendName:"webgl",kernelFunc:kYe};let Ud,Rk=ge().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function kYe(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:i}=e;const{numChannels:s}=r,o=typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement,[l,u]=o?[i.videoWidth,i.videoHeight]:[i.width,i.height],h=[u,l],d=[u,l,s];if(a||o){const b=ge().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(Ud==null||b!==Rk)&&(Rk=b,Ud=document.createElement("canvas").getContext("2d",{willReadFrequently:Rk})),Ud.canvas.width=l,Ud.canvas.height=u,Ud.drawImage(i,0,0,l,u),i=Ud.canvas}const p=n.makeTensorInfo(h,"int32");n.texData.get(p.dataId).usage=ks.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(p.dataId),i);const g=ge().getBool("WEBGL_PACK")?new _Ye(d):new IYe(d),y=n.runWebGLProgram(g,[p],"int32");return n.disposeData(p.dataId),y}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NYe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s,bias:o,preluActivationWeights:a}=e,{strides:l,pad:u,dataFormat:h,dilations:d,dimRoundingMode:p,activation:g,leakyreluAlpha:y}=r,b=pu(h),x=Ur(i.shape,s.shape,l,d,u,p,!1,b);let w;const C=[],E=o!=null,_=a!=null,A=g==="leakyrelu",P=()=>{const R=[i,s],D=(O,k)=>{if(k==="NCHW"&&O.shape.length===1&&O.shape[0]!==1){const F=Le({inputs:{x:O},backend:n,attrs:{shape:[O.shape[0],1,1]}});return C.push(F),F}return O};if(E&&R.push(D(o,h)),_&&R.push(D(a,h)),A){const O=n.makeTensorInfo([],"float32",jc(y,"float32"));R.push(O),C.push(O)}return R};if(x.filterHeight===1&&x.filterWidth===1&&x.dilationHeight===1&&x.dilationWidth===1&&x.strideHeight===1&&x.strideWidth===1&&(x.padInfo.type==="SAME"||x.padInfo.type==="VALID"))w=Ire({x:i,filter:s,convInfo:x,backend:n,bias:o,activation:g,preluActivationWeights:a,leakyreluAlpha:y});else if(x.strideWidth<=2&&b==="channelsLast"&&ge().getBool("WEBGL_EXP_CONV")){const R=g?tv(g,!0):null,D=new Ere(x,E,R,_,A),O=[[x.padInfo.top,x.padInfo.left],[x.strideHeight,x.strideWidth],[x.dilationHeight,x.dilationWidth],[x.inHeight,x.inWidth]],k=P();w=n.runWebGLProgram(D,k,"float32",O)}else if(ge().getBool("WEBGL_CONV_IM2COL"))w=_re({x:i,filter:s,convInfo:x,backend:n,bias:o,activation:g,preluActivationWeights:a,leakyreluAlpha:y});else{const R=g?tv(g,!1):null,D=new Cre(x,E,R,_,A),O=P();w=n.runWebGLProgram(D,O,"float32")}const N=Le({inputs:{x:w},backend:n,attrs:{shape:x.outShape}});return C.push(w),C.forEach(R=>n.disposeIntermediateTensorInfo(R)),N}const RYe={kernelName:Yw,backendName:"webgl",kernelFunc:NYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DYe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s,bias:o,preluActivationWeights:a}=e,{strides:l,pad:u,dilations:h,dimRoundingMode:d,activation:p,leakyreluAlpha:g}=r,y=[];let b=h;b==null&&(b=[1,1]),U(hi(l,b),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${b}'`);const x=Ur(i.shape,s.shape,l,b,u,d,!0),w=ge().getBool("WEBGL_PACK_DEPTHWISECONV")&&x.strideWidth<=2&&x.outChannels/x.inChannels===1,C=p?tv(p,w):null,E=[i,s],_=o!=null,A=a!=null,P=p==="leakyrelu";if(_&&E.push(o),A&&E.push(a),P){const O=n.makeTensorInfo([],"float32",jc(g,"float32"));E.push(O),y.push(O)}let N;w?N=new Nre(x,_,C,A,P):N=new kre(x,_,C,A,P);const R=[[x.padInfo.top,x.padInfo.left],[x.strideHeight,x.strideWidth],[x.dilationHeight,x.dilationWidth],[x.inHeight,x.inWidth]],D=n.runWebGLProgram(N,E,"float32",R);return y.forEach(O=>n.disposeIntermediateTensorInfo(O)),D}const $Ye={kernelName:OQ,backendName:"webgl",kernelFunc:DYe};class OYe{constructor(e,n,r,i){this.sliceDim=e,this.strides=n,this.paramsShape=i,this.variableNames=["x","indices"],this.outputShape=r;const s=tn(r.length);let o=`
    int index;`;for(let a=0;a<this.sliceDim;a++)o+=`
          index = round(getIndices(coords[0], ${a}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[a]};
          flattenIndex += index * ${this.strides[a]};`;this.userCode=`
         void main() {
          ${s} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${o}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PYe(t){const{inputs:e,backend:n}=t,{params:r,indices:i}=e,s=i.shape,o=s[s.length-1],a=Se(r.shape),[l,u,h,d]=BP(r,i),p=Le({inputs:{x:i},backend:n,attrs:{shape:[u,o]}}),g=Le({inputs:{x:r},backend:n,attrs:{shape:[Se(r.shape)/h,h]}});if(n.shouldExecuteOnCPU([r,i])||r.dtype==="string"){const w=n.readSync(i.dataId),C=n.bufferSync(r),E=V9e(w,C,r.dtype,u,o,h,d,r.shape,a);return n.makeTensorInfo(l,r.dtype,E.values)}const y=new OYe(o,d,[u,h],r.shape),b=n.runWebGLProgram(y,[g,p],g.dtype),x=Le({inputs:{x:b},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(b),x}const MYe={kernelName:gQ,backendName:"webgl",kernelFunc:PYe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LYe{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const r=tn(this.rank),i=FYe(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${i}));
      }
    `}}function FYe(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let i=0;i<t.length;i++)i===2?r.push("index"):r.push(`${n[i]}`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $re(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,indices:s}=e,{axis:o,batchDims:a}=r,l=wt(o,i.shape)[0];if(ge().get("DEBUG")){const C=n.readSync(s.dataId),E=i.shape[l];for(let _=0;_<C.length;++_){const A=C[_];U(A<=E-1&&A>=0,()=>`GatherV2: the index value ${A} is not in [0, ${E-1}]`)}}const u=cM(i,s,l,a),h=Se(s.shape),d=[],p=Le({inputs:{x:i},backend:n,attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]}}),g=Le({inputs:{x:s},backend:n,attrs:{shape:[u.batchSize,h/u.batchSize]}});d.push(p),d.push(g);const y=[u.batchSize,u.outerSize,h/u.batchSize,u.sliceSize];if(n.shouldExecuteOnCPU([i,s])||i.dtype==="string"){const C=n.bufferSync(g),E=n.bufferSync(p),_=B9e(E,C,y);return d.forEach(A=>n.disposeIntermediateTensorInfo(A)),n.makeTensorInfo(u.outputShape,_.dtype,_.values)}const b=new LYe(p.shape,y),x=n.runWebGLProgram(b,[p,g],p.dtype);d.push(x);const w=Le({inputs:{x},backend:n,attrs:{shape:u.outputShape}});return d.forEach(C=>n.disposeIntermediateTensorInfo(C)),w}const VYe={kernelName:KT,backendName:"webgl",kernelFunc:$re};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BYe="return float(a > b);",zYe=`
  return vec4(greaterThan(a, b));
`,UYe=Wr({opSnippet:BYe,packedOpSnippet:zYe,cpuKernelImpl:z9e,dtype:"bool"}),jYe={kernelName:XT,backendName:"webgl",kernelFunc:UYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WYe="return float(a >= b);",GYe=`
  return vec4(greaterThanEqual(a, b));
`,HYe=Wr({opSnippet:WYe,packedOpSnippet:GYe,dtype:"bool",cpuKernelImpl:U9e}),qYe={kernelName:Jv,backendName:"webgl",kernelFunc:HYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KYe(t){const{inputs:e,backend:n}=t,{input:r}=e;return Dre(r,!0,n)}const XYe={kernelName:zO,backendName:"webgl",kernelFunc:KYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YYe="return float(!isnan(x) && !isinf(x));",QYe=Pt({opSnippet:YYe,dtype:"bool"}),ZYe={kernelName:t0,backendName:"webgl",kernelFunc:QYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JYe="return float(isinf(x));",eQe=Pt({opSnippet:JYe,dtype:"bool"}),tQe={kernelName:n0,backendName:"webgl",kernelFunc:eQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nQe="return float(isnan(x));",rQe=Pt({opSnippet:nQe,dtype:"bool"}),iQe={kernelName:r0,backendName:"webgl",kernelFunc:rQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sQe="return float(a < b);",oQe=`
  return vec4(lessThan(a, b));
`,aQe=Wr({opSnippet:sQe,packedOpSnippet:oQe,cpuKernelImpl:j9e,dtype:"bool"}),lQe={kernelName:QT,backendName:"webgl",kernelFunc:aQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uQe="return float(a <= b);",cQe=`
  return vec4(lessThanEqual(a, b));
`,hQe=Wr({opSnippet:uQe,packedOpSnippet:cQe,cpuKernelImpl:W9e,dtype:"bool"}),fQe={kernelName:ZT,backendName:"webgl",kernelFunc:hQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dQe(t){const{backend:e,attrs:n}=t,{start:r,stop:i,num:s}=n,o=G9e(r,i,s);return e.makeTensorInfo([o.length],"float32",o)}const pQe={kernelName:yQ,backendName:"webgl",kernelFunc:dQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mQe=Nm+`
  return x < 0.0 ? 0./0. : log(x);
`,gQe=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,yQe=Pt({opSnippet:mQe,packedOpSnippet:gQe,cpuKernelImpl:H9e}),vQe={kernelName:i0,backendName:"webgl",kernelFunc:yQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bQe=Nm+`
  return log(1.0 + x);
`,xQe=Pt({opSnippet:bQe}),wQe={kernelName:s0,backendName:"webgl",kernelFunc:xQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SQe="return float(a >= 1.0 && b >= 1.0);",TQe=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,CQe=Wr({opSnippet:SQe,packedOpSnippet:TQe,dtype:"bool"}),EQe={kernelName:JT,backendName:"webgl",kernelFunc:CQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IQe="return float(!(x >= 1.0));",_Qe=Pt({opSnippet:IQe}),AQe={kernelName:eC,backendName:"webgl",kernelFunc:_Qe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kQe="return float(a >= 1.0 || b >= 1.0);",NQe=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,RQe=Wr({opSnippet:kQe,packedOpSnippet:NQe,dtype:"bool"}),DQe={kernelName:tC,backendName:"webgl",kernelFunc:RQe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $Qe{constructor(e,n,r,i,s){this.variableNames=["x"],this.outputShape=[];const o=n,a=e[3]-1;this.outputShape=e;let l;const u=`float(${r}) + float(${i}) * sum`;s===.5?l=`inversesqrt(${u})`:s===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${s}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${o}; j <= ${o}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${a}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OQe{constructor(e,n,r,i,s){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const o=n,a=e[3]-1;this.outputShape=e;let l;const u=`float(${r}) + float(${i}) * sum`;s===.5?l=`inversesqrt(${u})`:s===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${s}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${o};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${o}; j <= ${o}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${a}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PQe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{depthRadius:s,bias:o,alpha:a,beta:l}=r,u=ge().getBool("WEBGL_PACK_NORMALIZATION")?new OQe(i.shape,s,o,a,l):new $Qe(i.shape,s,o,a,l);return n.runWebGLProgram(u,[i],i.dtype)},MQe={kernelName:nC,backendName:"webgl",kernelFunc:PQe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LQe{constructor(e,n,r,i,s){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=r,this.alpha=i,this.beta=s,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${i}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${i})
                * float(${s})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${s});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FQe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i,y:s,dy:o}=e,{depthRadius:a,bias:l,alpha:u,beta:h}=r,d=new LQe(i.shape,a,l,u,h);return n.runWebGLProgram(d,[i,s,o],i.dtype)},VQe={kernelName:jO,backendName:"webgl",kernelFunc:FQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BQe(t,e,n,r){const i=Se(e),o=Se(t.shape)/i,a=Le({inputs:{x:t},attrs:{shape:[o,i]},backend:r}),l=Xf(a,t.dtype,"max",r),u=Le({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ore(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reductionIndices:s,keepDims:o}=r,a=i.shape.length,l=wt(s,i.shape);let u=l;const h=Rn(u,a),d=h!=null,p=n.shouldExecuteOnCPU([i]);let g=i;if(d){if(p){const E=n.texData.get(g.dataId).values,_=new Array(a);for(let N=0;N<_.length;N++)_[N]=i.shape[h[N]];const A=HM(E,i.shape,i.dtype,h,_);g=n.makeTensorInfo(_,i.dtype);const P=n.texData.get(g.dataId);P.values=A}else g=tE(i,h,n);u=Bn(u.length,a)}jr("max",u,a);const[y,b]=Rr(g.shape,u);let x=y;o&&(x=Qn(y,l));let w;if(p){const E=n.texData.get(g.dataId).values,_=q9e(E,Se(b),x,i.dtype);w=n.makeTensorInfo(x,i.dtype);const A=n.texData.get(w.dataId);A.values=_}else w=BQe(g,b,x,n);return d&&n.disposeIntermediateTensorInfo(g),w}const zQe={kernelName:rC,backendName:"webgl",kernelFunc:Ore};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UQe=qM+`
  return max(a, b);
`,jQe=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Kf+`
  return result;
`,WQe=Wr({opSnippet:UQe,packedOpSnippet:jQe,cpuKernelImpl:K9e}),GQe={kernelName:o0,backendName:"webgl",kernelFunc:WQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HQe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;X0(i,"maxPool");const{filterSize:s,strides:o,pad:a,dimRoundingMode:l}=r,u=1;U(hi(o,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const h=Io(i.shape,s,o,u,a,l);if(h.filterWidth===1&&h.filterHeight===1&&Wt(h.inShape,h.outShape))return ps({inputs:{x:i},backend:n});const d=new nv(h,"max",!1);return n.runWebGLProgram(d,[i],i.dtype)}const qQe={kernelName:iC,backendName:"webgl",kernelFunc:HQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KQe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:s,strides:o,pad:a,dataFormat:l,dimRoundingMode:u}=r,h=[1,1,1],d=du(i.shape,s,o,h,a,u,l),p=new XM(d,"max",!1);return n.runWebGLProgram(p,[i],i.dtype)}const XQe={kernelName:sC,backendName:"webgl",kernelFunc:KQe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class YQe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,r=e.strideWidth,i=e.dilationHeight,s=e.effectiveFilterHeight,o=e.effectiveFilterWidth,a=s-1-e.padInfo.top,l=o-1-e.padInfo.left,u=s*o-1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${s};
          wR += ${i}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${o}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${u} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${o} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class QQe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,r=e.strideHeight,i=e.strideWidth,s=e.dilationDepth,o=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterDepth,u=e.effectiveFilterHeight,h=e.effectiveFilterWidth,d=l-1-e.padInfo.front,p=u-1-e.padInfo.top,g=h-1-e.padInfo.left,y=l*u*h-1;this.userCode=`
      const ivec3 pads = ivec3(${d}, ${p}, ${g});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${s}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${u};
              wR += ${o}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${h};
                wC += ${a}) {
              float dyC = float(dyCCorner + wC) / ${i}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${y} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${u} * ${h} +
                  wR * ${h} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZQe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,o=s,{filterSize:a,strides:l,pad:u,dimRoundingMode:h}=r,d=[1,1,1],p=du(o.shape,a,l,d,u,h),g=new XM(p,"max",!0),y=n.runWebGLProgram(g,[o],o.dtype),b=new QQe(p),x=n.runWebGLProgram(b,[i,y],o.dtype);return n.disposeIntermediateTensorInfo(y),x}const JQe={kernelName:GO,backendName:"webgl",kernelFunc:ZQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eZe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s,output:o}=e,a=s;X0([s,o],"maxPoolGrad");const{filterSize:l,strides:u,pad:h,dimRoundingMode:d}=r,p=Io(a.shape,l,u,1,h,d),g=!0,y=new nv(p,"max",g),b=n.runWebGLProgram(y,[a],a.dtype),x=new YQe(p),w=n.runWebGLProgram(x,[i,b],a.dtype);return n.disposeIntermediateTensorInfo(b),w}const tZe={kernelName:WO,backendName:"webgl",kernelFunc:eZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nZe(t,e,n,r){let i=new nv(n,"max",!1);const s=r.runWebGLProgram(i,[t],"float32");i=new nv(n,"max",!0,!0,e);const o=r.runWebGLProgram(i,[t],"float32");return[s,o]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rZe={kernelName:vQ,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:i,strides:s,pad:o,includeBatchInIndex:a}=e,l=n;U(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const u=[1,1];U(hi(s,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${u}'`);const h=Io(r.shape,i,s,u,o),[d,p]=nZe(r,a,h,l);return[d,p]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iZe(t,e,n,r){const i=Se(e),o=Se(t.shape)/i,a=Le({inputs:{x:t},attrs:{shape:[o,i]},backend:r}),l=Xf(a,"float32","mean",r),u=Le({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sZe={kernelName:oC,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{keepDims:i,axis:s}=e,o=n,a=r.shape.length,l=wt(s,r.shape);let u=l;const h=Rn(u,a),d=h!=null,p=o.shouldExecuteOnCPU([r]),g=[];let y=r;if(d){if(p){const _=o.texData.get(y.dataId).values,A=new Array(a);for(let R=0;R<A.length;R++)A[R]=r.shape[h[R]];const P=HM(_,r.shape,r.dtype,h,A);y=o.makeTensorInfo(A,r.dtype);const N=o.texData.get(y.dataId);N.values=P}else y=tE(r,h,o);g.push(y),u=Bn(u.length,a)}jr("sum",u,a);const[b,x]=Rr(y.shape,u);let w=b;i&&(w=Qn(b,l));const C=iZe(y,x,w,o);for(const E of g)o.disposeIntermediateTensorInfo(E);return C}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oZe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r,a=i.shape.length,l=wt(s,i.shape);let u=l;const h=Rn(u,a);let d=i;h!=null&&(d=Ai({inputs:{x:i},backend:n,attrs:{perm:h}}),u=Bn(u.length,i.shape.length)),jr("min",u,a);const[p,g]=Rr(d.shape,u),y=Se(g),b=Le({inputs:{x:d},backend:n,attrs:{shape:[-1,y]}}),x=Xf(b,b.dtype,"min",n);let w;if(o){const C=Qn(p,l);w=Le({inputs:{x},backend:n,attrs:{shape:C}})}else w=Le({inputs:{x},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(x),h!=null&&n.disposeIntermediateTensorInfo(d),w}const aZe={kernelName:aC,backendName:"webgl",kernelFunc:oZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lZe=qM+`
  return min(a, b);
`,uZe=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Kf+`
  return result;
`,cZe=Wr({opSnippet:lZe,packedOpSnippet:uZe,cpuKernelImpl:X9e}),hZe={kernelName:a0,backendName:"webgl",kernelFunc:cZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fZe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=n.map((h,d)=>h[0]+e[d]+h[1]);const i=e.length,s=tn(i),o=n.map(h=>h[0]).join(","),a=n.map((h,d)=>h[0]+e[d]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i),u=r==="reflect"?0:1;if(i===1){this.userCode=`
        int start = ${o};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${u};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${u};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${s} start = ${s}(${o});
      ${s} end = ${s}(${a});

      void main() {
        ${s} outC = getOutputCoords();
        for (int i = 0; i < ${i}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${u};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${u};
          }
        }
        ${s} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dZe{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((y,b)=>y[0]+e[b]+y[1]);const i=e.length,s=tn(i),o=n.map(y=>y[0]).join(","),a=n.map((y,b)=>y[0]+e[b]).join(","),l=Ti("rc",i),u=Ti("source",i),h=`${l[i-1]} < ${this.outputShape[i-1]}`,d=i===1?"source":`vec2(${u.slice(-2).join()})`,p=r==="reflect"?0:1;let g="";if(i===1){const y=`
        ${s} source = rc;
        if (source < start) {
          source = start * 2 - source - ${p};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${p};
        }
        source -= start;
      `;g=`
        ${s} rc = outputLoc;
        ${y}
        result[0] = getChannel(getX(${u.join()}), ${d});
        ${l[i-1]} += 1;
        if(${h}) {
          ${y}
          result[1] = getChannel(getX(${u.join()}), ${d});
        }
      `}else{const y=`
        ${s} source = rc;
        ${s} lt = ${s}(lessThan(source, start));
        ${s} gte = ${s}(greaterThanEqual(source, end));
        ${s} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${p}) +
                gte * ((end - 1) * 2 - source + ${p});
        source -= start;
      `;g=`
        ${s} rc = outputLoc;
        ${y}
        result[0] = getChannel(getX(${u.join()}), ${d});
        ${l[i-1]} += 1;
        if(${h}) {
          ${y}
          result[1] = getChannel(getX(${u.join()}), ${d});
        }
        rc = outputLoc;
        ${l[i-2]} += 1;
        if(${l[i-2]} < ${this.outputShape[i-2]}) {
          ${y}
          result[2] = getChannel(getX(${u.join()}), ${d});
          ${l[i-1]} += 1;
          if(${h}) {
            ${y}
            result[3] = getChannel(getX(${u.join()}), ${d});
          }
        }
      `}this.userCode=`
      const ${s} start = ${s}(${o});
      const ${s} end = ${s}(${a});

      void main() {
        ${s} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${g}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pZe=({inputs:t,backend:e,attrs:n})=>{const{x:r}=t,{paddings:i,mode:s}=n,o=ge().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new dZe(r.shape,i,s):new fZe(r.shape,i,s);return e.runWebGLProgram(o,[r],r.dtype)},mZe={kernelName:lC,backendName:"webgl",kernelFunc:pZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gZe=`if (b == 0.0) return NAN;
  return mod(a, b);`,yZe=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+Kf+`
  return result;
`,vZe=Wr({opSnippet:gZe,packedOpSnippet:yZe}),bZe={kernelName:l0,backendName:"webgl",kernelFunc:vZe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xZe{constructor(e,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wZe=`
if (a == b) {
  return 1.0;
};
return a / b;`,SZe=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,Pre=Wr({opSnippet:wZe,packedOpSnippet:SZe,checkOutOfBounds:!0}),TZe={kernelName:Hv,backendName:"webgl",kernelFunc:Pre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JG="return a - b;",Mre=Wr({opSnippet:JG,packedOpSnippet:JG,supportsComplex:!0,cpuKernelImpl:g8e}),CZe={kernelName:C0,backendName:"webgl",kernelFunc:Mre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lre(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{dim:s}=r,o=wt([s],i.shape),a=Ore({inputs:{x:i},backend:n,attrs:{reductionIndices:o,keepDims:!1}}),l=Qn(a.shape,o),u=Le({inputs:{x:a},backend:n,attrs:{shape:l}}),h=Mre({inputs:{a:i,b:u},backend:n}),d=Rre({inputs:{x:h},backend:n}),p=nE({inputs:{x:d},backend:n,attrs:{axis:o,keepDims:!1}}),g=Le({inputs:{x:p},backend:n,attrs:{shape:l}}),y=Pre({inputs:{a:d,b:g},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),y}const EZe={kernelName:IC,backendName:"webgl",kernelFunc:Lre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IZe(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{numSamples:s,seed:o,normalized:a}=r,l=a?i:Lre({inputs:{logits:i},backend:n,attrs:{dim:i.shape.length-1}}),u=l.shape[0],h=l.shape[1],d=new xZe(u,h,s),p=[[o]],g=n.runWebGLProgram(d,[l],"int32",p);return a||n.disposeIntermediateTensorInfo(l),g}const _Ze={kernelName:bQ,backendName:"webgl",kernelFunc:IZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AZe=Ao+`
  return -x;
`,kZe=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function NZe(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const s=n.texData.get(r.dataId),[o,a]=Q9e(s.values,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,o)}let i;return ge().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new lc(r.shape,kZe):i=new Ma(r.shape,AZe),n.runWebGLProgram(i,[r],r.dtype)}const RZe={kernelName:uC,backendName:"webgl",kernelFunc:NZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DZe=OP;function $Ze(t){As("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l}=r,u=n.readSync(i.dataId),h=n.readSync(s.dataId),{selectedIndices:d}=DZe(u,h,o,a,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const OZe={kernelName:HO,backendName:"webgl",kernelFunc:$Ze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PZe=PP;function MZe(t){As("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:u}=r,h=n.readSync(i.dataId),d=n.readSync(s.dataId),{selectedIndices:p,validOutputs:g}=PZe(h,d,o,a,l,u);return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([g]))]}const LZe={kernelName:qO,backendName:"webgl",kernelFunc:MZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FZe=MP;function VZe(t){As("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,softNmsSigma:u}=r,h=n.readSync(i.dataId),d=n.readSync(s.dataId),p=o,g=a,y=l,b=u,{selectedIndices:x,selectedScores:w}=FZe(h,d,p,g,y,b);return[n.makeTensorInfo([x.length],"int32",new Int32Array(x)),n.makeTensorInfo([w.length],"float32",new Float32Array(w))]}const BZe={kernelName:KO,backendName:"webgl",kernelFunc:VZe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zZe{constructor(e,n,r,i){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${i}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UZe=t=>{const{inputs:e,backend:n,attrs:r}=t,{indices:i}=e,{dtype:s,depth:o,onValue:a,offValue:l}=r,u=Se(i.shape),h=new zZe(u,o,a,l),d=Le({inputs:{x:i},backend:n,attrs:{shape:[u]}}),p=n.runWebGLProgram(h,[d],s);n.disposeIntermediateTensorInfo(d);const g=[...i.shape,o],y=Le({inputs:{x:p},backend:n,attrs:{shape:g}});return n.disposeIntermediateTensorInfo(p),y},jZe={kernelName:fC,backendName:"webgl",kernelFunc:UZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TS(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="complex64"){const i=Q0({inputs:{input:r},backend:n}),s=TS({inputs:{x:i},backend:n}),o=rE({inputs:{input:r},backend:n}),a=TS({inputs:{x:o},backend:n}),l=Zc({inputs:{real:s,imag:a},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return Z0({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const WZe={kernelName:kC,backendName:"webgl",kernelFunc:TS};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fre(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const i=Q0({inputs:{input:r},backend:n}),s=Fre({inputs:{x:i},backend:n}),o=rE({inputs:{input:r},backend:n}),a=TS({inputs:{x:o},backend:n}),l=Zc({inputs:{real:s,imag:a},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return Z0({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const GZe={kernelName:hC,backendName:"webgl",kernelFunc:Fre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HZe(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r;if(e.length===1)return sR({inputs:{input:e[0]},backend:n,attrs:{dim:i}});const s=e[0].shape,o=e[0].dtype;e.forEach(h=>{pO(s,h.shape,"All tensors passed to stack must have matching shapes"),U(o===h.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=e.map(h=>{const d=sR({inputs:{input:h},backend:n,attrs:{dim:i}});return a.push(d),d}),u=Tre({inputs:l,backend:n,attrs:{axis:i}});return a.forEach(h=>n.disposeIntermediateTensorInfo(h)),u}const qZe={kernelName:dC,backendName:"webgl",kernelFunc:HZe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KZe{constructor(e,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((u,h)=>u[0]+e[h]+u[1]);const i=e.length,s=tn(i),o=n.map(u=>u[0]).join(","),a=n.map((u,h)=>u[0]+e[h]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i);if(i===1){this.userCode=`
        int start = ${o};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${s} start = ${s}(${o});
      ${s} end = ${s}(${a});

      void main() {
        ${s} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${s} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XZe{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((b,x)=>b[0]+e[x]+b[1]);const i=e.length,s=tn(i),o=n.map(b=>b[0]).join(","),a=n.map((b,x)=>b[0]+e[x]).join(","),l=Ti("rc",i),u=Ti("source",i),h=`${l[i-1]} < ${this.outputShape[i-1]}`,d=i===1?"source":`vec2(${u.slice(-2).join()})`,p=[`${s} rc = outputLoc;`,`${l[i-1]} += 1;
       if(${h}) {
      `,i===1?"":`}
       rc = outputLoc;
       ${l[i-2]} += 1;
       if(${l[i-2]} < ${this.outputShape[i-2]}) {`,i===1?"":`  ${l[i-1]} += 1;
         if(${h}) {`],g=i===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let y="";for(let b=0,x=i===1?2:4;b<x;b++)y+=`
        ${p[b]}
        if (${g}) {
          result[${b}] = float(value);
        } else {
          ${s} source = rc - start;
          result[${b}] = getChannel(getX(${u.join()}), ${d});
        }
      `;y+=i===1?"} ":"}}",this.userCode=`
      const ${s} start = ${s}(${o});
      const ${s} end = ${s}(${a});

      void main() {
        ${s} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${y}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vre=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{paddings:s,constantValue:o}=r;if(Se(i.shape)===0){const u=s.map((h,d)=>h[0]+i.shape[d]+h[1]);return Z0({backend:n,attrs:{shape:u,value:o,dtype:i.dtype}})}const a=ge().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new XZe(i.shape,s,o):new KZe(i.shape,s,o),l=[[o]];return n.runWebGLProgram(a,[i],i.dtype,l)},YZe={kernelName:pC,backendName:"webgl",kernelFunc:Vre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QZe=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,ZZe=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+Kf+`
  return result;
`,JZe=Wr({opSnippet:QZe,packedOpSnippet:ZZe}),eJe={kernelName:c0,backendName:"webgl",kernelFunc:JZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tJe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r,a=i.shape.length,l=[],u=wt(s,i.shape);let h=u;const d=Rn(h,a);let p=i;d!=null&&(p=Ai({inputs:{x:i},backend:n,attrs:{perm:d}}),h=Bn(h.length,a),l.push(p)),jr("prod",h,a);let g;if(n.shouldExecuteOnCPU([p])){const y=n.texData.get(p.dataId).values,{outVals:b,outShape:x,outDtype:w}=J9e(p.shape,p.dtype,y,h);g=n.makeTensorInfo(x,w,b)}else{const[y,b]=Rr(p.shape,h),x=Se(b),w=Le({inputs:{x:p},backend:n,attrs:{shape:[-1,x]}}),C=oP(i.dtype),E=Xf(w,C,"prod",n);g=Le({inputs:{x:E},backend:n,attrs:{shape:y}}),l.push(w),l.push(E)}if(o){l.push(g);const y=Qn(g.shape,u);g=Le({inputs:{x:g},backend:n,attrs:{shape:y}})}return l.forEach(y=>n.disposeIntermediateTensorInfo(y)),g}const nJe={kernelName:gC,backendName:"webgl",kernelFunc:tJe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rJe(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:i,paramsDenseValues:s,indices:o}=e,{outputRaggedRank:a}=r,l=i.map(w=>n.readSync(w.dataId)),u=i.map(w=>w.shape),h=n.readSync(s.dataId),d=n.readSync(o.dataId),[p,g,y]=e8e(l,u,h,s.shape,s.dtype,d,o.shape,a),b=p.map(w=>n.makeTensorInfo([w.length],"int32",w)),x=n.makeTensorInfo(y,s.dtype,g);return b.concat([x])}const iJe={kernelName:xQ,backendName:"webgl",kernelFunc:rJe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sJe(t){const{inputs:e,backend:n}=t,{starts:r,limits:i,deltas:s}=e,o=n.readSync(r.dataId),a=n.readSync(i.dataId),l=n.readSync(s.dataId),[u,h]=t8e(o,r.shape,r.dtype,a,i.shape,l,s.shape),d=n.makeTensorInfo([u.length],"int32",u),p=n.makeTensorInfo([h.length],r.dtype,h);return[d,p]}const oJe={kernelName:wQ,backendName:"webgl",kernelFunc:sJe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aJe(t){const{inputs:e,backend:n,attrs:r}=t,{shape:i,values:s,defaultValue:o,rowPartitionTensors:a}=e,{rowPartitionTypes:l}=r,u=n.readSync(i.dataId),h=n.readSync(s.dataId),d=n.readSync(o.dataId),p=a.map(x=>n.readSync(x.dataId)),g=a.map(x=>x.shape),[y,b]=n8e(u,i.shape,h,s.shape,s.dtype,d,o.shape,p,g,l);return n.makeTensorInfo(y,s.dtype,b)}const lJe={kernelName:SQ,backendName:"webgl",kernelFunc:aJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bre=t=>{const{backend:e,attrs:n}=t,{start:r,stop:i,step:s,dtype:o}=n,a=r8e(r,i,s,o);return e.makeTensorInfo([a.length],o,a)},uJe={kernelName:XO,backendName:"webgl",kernelFunc:Bre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cJe="return 1.0 / x;",hJe=Pt({opSnippet:cJe}),fJe={kernelName:h0,backendName:"webgl",kernelFunc:hJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dJe=Ao+`
  return (x < 0.0) ? 0.0 : x;
`,pJe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,mJe=Pt({opSnippet:dJe,packedOpSnippet:pJe}),gJe={kernelName:f0,backendName:"webgl",kernelFunc:mJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yJe=Ao+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,vJe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,bJe=Pt({opSnippet:yJe,packedOpSnippet:vJe}),xJe={kernelName:d0,backendName:"webgl",kernelFunc:bJe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wJe{constructor(e,n,r,i,s){this.variableNames=["A"],this.outputShape=[];const[o,a,l,u]=e;this.outputShape=[o,n,r,u];const h=[i&&n>1?a-1:a,i&&r>1?l-1:l],d=[i&&n>1?n-1:n,i&&r>1?r-1:r];let p;s?p="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":p="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${h[0]/d[0]},
          ${h[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${p};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SJe{constructor(e,n,r,i,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,l,u]=e;this.outputShape=[o,n,r,u];const h=[i&&n>1?a-1:a,i&&r>1?l-1:l],d=[i&&n>1?n-1:n,i&&r>1?r-1:r];let p;s?p="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":p="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${h[0]/d[0]},
          ${h[1]/d[1]},
          ${h[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${p};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TJe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:s,halfPixelCenters:o,size:a}=r,[l,u]=a,h=ge().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new SJe(i.shape,l,u,s,o):new wJe(i.shape,l,u,s,o);return n.runWebGLProgram(h,[i],"float32")}const CJe={kernelName:bC,backendName:"webgl",kernelFunc:TJe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EJe{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,i,s]=n,[,o,a]=e,l=[r&&o>1?i-1:i,r&&a>1?s-1:s],u=[r&&o>1?o-1:o,r&&a>1?a-1:a],h=l[0]/u[0],d=l[1]/u[1],p=1/h,g=1/d,y=Math.ceil(p)*2+2,b=Math.ceil(g)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${h});
        const float widthScale = float(${d});

        const float invHeightScale = float(${p});
        const float invWidthScale = float(${g});

        const int winHeight = int(${y});
        const int winWidth = int(${b});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${i-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${s-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IJe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:s}=e,{alignCorners:o}=r,a=new EJe(s.shape,i.shape,o);return n.runWebGLProgram(a,[s],s.dtype)}const _Je={kernelName:ZO,backendName:"webgl",kernelFunc:IJe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AJe{constructor(e,n,r,i,s){this.variableNames=["A"],this.outputShape=[];const[o,a,l,u]=e;this.outputShape=[o,n,r,u];const h=[i&&n>1?a-1:a,i&&r>1?l-1:l],d=[i&&n>1?n-1:n,i&&r>1?r-1:r],p=i?"0.5":"0.0";let g;s?g="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":g="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${h[0]/d[0]},
          ${h[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${g};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kJe{constructor(e,n,r,i,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,l,u]=e;this.outputShape=[o,n,r,u];const h=[i&&n>1?a-1:a,i&&r>1?l-1:l],d=[i&&n>1?n-1:n,i&&r>1?r-1:r],p=i?"0.5":"0.0";let g;s?g="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":g="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${h[0]/d[0]},
          ${h[1]/d[1]},
          ${h[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${g};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NJe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:s,halfPixelCenters:o,size:a}=r,[l,u]=a,h=ge().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new kJe(i.shape,l,u,s,o):new AJe(i.shape,l,u,s,o);return n.runWebGLProgram(h,[i],i.dtype)}const RJe={kernelName:vC,backendName:"webgl",kernelFunc:NJe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DJe{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,i,s]=n,[,o,a]=e,l=[r&&o>1?i-1:i,r&&a>1?s-1:s],u=[r&&o>1?o-1:o,r&&a>1?a-1:a],h=l[0]/u[0],d=l[1]/u[1],p=1/h,g=1/d,y=Math.ceil(p)*2+2,b=Math.ceil(g)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${h});
        const float widthScale = float(${d});

        const float invHeightScale = float(${p});
        const float invWidthScale = float(${g});

        const int winHeight = int(${y});
        const int winWidth = int(${b});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${u[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${u[1]}));

            int sourceNearestRow = int(min(
                float(int(${i}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${s}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Je(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:s}=e,{alignCorners:o}=r,a=new DJe(s.shape,i.shape,o);return n.runWebGLProgram(a,[s],s.dtype)}const OJe={kernelName:QO,backendName:"webgl",kernelFunc:$Je};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PJe{constructor(e,n){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const i=a=>n.indexOf(a)!==-1&&e[a]!==1?`${e[a]} - coords[${a}] - 1`:`coords[${a}]`,s=e.map((a,l)=>i(l)).join(","),o=tn(r);this.userCode=`
      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${s}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MJe{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const i=Ti("rc",r),s=`${i[r-1]} + 1 < ${this.outputShape[r-1]}`,o=`${i[r-2]} + 1 < ${this.outputShape[r-2]}`,a=tn(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${s}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${a} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(i.slice())};
          if(${s}){
            result.g = ${u(i.slice())};
          }
          if(${o}) {
            result.b = ${h(i.slice())};
            if(${s}) {
              result.a = ${d(i.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(y){return p(y)}function u(y){return y[r-1]="("+y[r-1]+" + 1)",p(y)}function h(y){return y[r-2]="("+y[r-2]+" + 1)",p(y)}function d(y){return y[r-1]="("+y[r-1]+" + 1)",y[r-2]="("+y[r-2]+" + 1)",p(y)}function p(y){const b=e.map((C,E)=>g(E,y)),x=b.join(","),w=b.slice(-2).join(",");return`getChannel(getX(${x}), vec2(${w}))`}function g(y,b){return n.indexOf(y)!==-1&&e[y]!==1?`${e[y]} - ${b[y]} - 1`:`${b[y]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LJe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dims:s}=r,o=i.shape.length,a=wt(s,i.shape);if(o===0)return ps({inputs:{x:i},backend:n});const l=ge().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new MJe(i.shape,a):new PJe(i.shape,a);return n.runWebGLProgram(l,[i],i.dtype)}const FJe={kernelName:xC,backendName:"webgl",kernelFunc:LJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VJe{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],i=e[2];this.outputShape=e;let s="";typeof n=="number"?s=`float outputValue = ${n.toFixed(2)};`:s=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${s}
          if(coordX >= 0 && coordX < ${i} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BJe={kernelName:sP,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:i,fillValue:s,center:o}=e,a=n,l=new VJe(r.shape,s),[u,h]=KP(o,r.shape[1],r.shape[2]),d=[[u,h,Math.sin(i),Math.cos(i)]];return a.runWebGLProgram(l,[r],r.dtype,d)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zJe=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,UJe=Pt({opSnippet:zJe}),jJe={kernelName:p0,backendName:"webgl",kernelFunc:UJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WJe="return inversesqrt(x);",GJe=Pt({opSnippet:WJe,cpuKernelImpl:i8e}),HJe={kernelName:m0,backendName:"webgl",kernelFunc:GJe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class YM{constructor(e,n,r,i,s,o,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;const u=tn(s.length),h=tn(o.length);let d="";r===1?d="i":r===2&&(d="i, j");const p=`getIndices(${d})`;let g="";i===1?g="i":i===2&&(g="i, coords[1]");const y=`getUpdates(${g})`;let b="";l&&(b="coords[0], coords[1]");const x=`getDefaultValue(${b})`,w=n>1?"strides[j]":"strides";this.userCode=`
        ${u} strides = ${u}(${s});

        void main() {
          ${h} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${p});
              flattenedIndex += index * ${w};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${y};
              found = true;
            }
          }
          setOutput(mix(${x}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qJe{constructor(e,n,r,i,s,o,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o;const u=tn(s.length),h=tn(o.length);let d="";r===1?d="i":r===2&&(d="i, j");const p=`getIndices(${d})`;let g="";i===1?g="i":i===2&&(g="i, coords[1]");const y=`getUpdates(${g})`;let b="";l&&(b="coords[0], coords[1]");const x=`getDefaultValue(${b})`,w=n>1?"strides[j]":"strides",C=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${u} strides = ${u}(${s});

        void main() {
          ${h} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${p});
              flattenedIndex += index.xz * ${w};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${C};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${y};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${x}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KJe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:i,updates:s}=e,{shape:o}=r,{sliceRank:a,numUpdates:l,sliceSize:u,strides:h,outputSize:d}=jf(s,i,o),p=[d/u,u];if(d===0)return n.makeTensorInfo(o,i.dtype);const g=Le({inputs:{x:i},backend:n,attrs:{shape:[l,a]}}),y=Le({inputs:{x:s},backend:n,attrs:{shape:[l,u]}}),b=n.makeTensorInfo([],"float32",new Float32Array([0]));let x;ge().getBool("WEBGL_PACK")?x=new qJe(l,a,g.shape.length,y.shape.length,h,p):x=new YM(l,a,g.shape.length,y.shape.length,h,p);const w=n.runWebGLProgram(x,[y,g,b],y.dtype),C=Le({inputs:{x:w},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(b),C}const XJe={kernelName:TQ,backendName:"webgl",kernelFunc:KJe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class YJe{constructor(e,n,r,i){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const s="while (left < right) {",o=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,a=ge().getNumber("WEBGL_VERSION")===2?s:o,l=i==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${a}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QJe(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:i,values:s}=e,{side:o}=r,a=new YJe(i.shape[0],i.shape[1],s.shape[1],o),l=[[i.shape[1]]];return n.runWebGLProgram(a,[i,s],"int32",l)}const ZJe={kernelName:EQ,backendName:"webgl",kernelFunc:QJe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JJe{constructor(e,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let i,s;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)s="resRC",i="resRC";else{const a=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],u=[];for(let h=0;h<n.length;h++)u.push(`${a[h]}`),h<e&&l.push(`${a[h]}`);i=l.join(),s=u.join()}const o=tn(r);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        float cVal = getC(${i});
        if (cVal >= 1.0) {
          setOutput(getA(${s}));
        } else {
          setOutput(getB(${s}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eet(t){const{inputs:e,backend:n}=t,{condition:r,t:i,e:s}=e,o=new JJe(r.shape.length,i.shape,i.shape.length);return n.runWebGLProgram(o,[r,i,s],fs(i.dtype,s.dtype))}const tet={kernelName:wC,backendName:"webgl",kernelFunc:eet};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const net=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${VC};
  float scale = ${BC};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,ret=Pt({opSnippet:net}),iet={kernelName:g0,backendName:"webgl",kernelFunc:ret};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const set=Nm+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,oet=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,aet=Pt({opSnippet:set,packedOpSnippet:oet,cpuKernelImpl:o8e}),uet={kernelName:x0,backendName:"webgl",kernelFunc:aet};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cet=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,het=Pt({opSnippet:cet}),fet={kernelName:b0,backendName:"webgl",kernelFunc:het};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const det=Nm+`
  return sin(x);
`,pet=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${Kf}
  return result;
`,met=Pt({opSnippet:det,packedOpSnippet:pet}),get={kernelName:y0,backendName:"webgl",kernelFunc:met};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yet=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,vet=Pt({opSnippet:yet}),bet={kernelName:v0,backendName:"webgl",kernelFunc:vet};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xet=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,wet=Pt({opSnippet:xet}),Tet={kernelName:w0,backendName:"webgl",kernelFunc:wet};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cet=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:s,paddings:o}=r;U(i.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const a=s.reduce((w,C)=>w*C),l=[[0,0]];l.push(...o);for(let w=1+s.length;w<i.shape.length;++w)l.push([0,0]);const u=[],h=Vre({inputs:{x:i},backend:n,attrs:{paddings:l,constantValue:0}}),d=M0(h.shape,s,a,!1),p=L0(d.length,s.length,!1),g=F0(h.shape,s,a,!1),y=Le({inputs:{x:h},backend:n,attrs:{shape:d}}),b=Ai({inputs:{x:y},backend:n,attrs:{perm:p}}),x=Le({inputs:{x:b},backend:n,attrs:{shape:g}});return u.push(h),u.push(y),u.push(b),u.forEach(w=>n.disposeIntermediateTensorInfo(w)),x},Eet={kernelName:CC,backendName:"webgl",kernelFunc:Cet};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iet(t){const{inputs:e,backend:n}=t,{indices:r,values:i,denseShape:s,defaultValue:o}=e;if(s.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${s.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(i.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${i.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const a=n.readSync(r.dataId),l=n.readSync(i.dataId),u=n.readSync(s.dataId),h=n.readSync(o.dataId)[0],[d,p,g,y,b]=l8e(a,r.shape,r.dtype,l,i.dtype,u,h);return[n.makeTensorInfo(p,r.dtype,d),n.makeTensorInfo([p[0]],i.dtype,g),n.makeTensorInfo([y.length],"bool",new Uint8Array(y.map(x=>Number(x)))),n.makeTensorInfo([b.length],r.dtype,new Int32Array(b))]}const _et={kernelName:IQ,backendName:"webgl",kernelFunc:Iet};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aet(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:i,newShape:s}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(i.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${i.shape}`);if(s.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);const o=Array.from(n.readSync(i.dataId)),a=n.readSync(r.dataId),l=Array.from(n.readSync(s.dataId)),[u,h,d]=u8e(a,r.shape,r.dtype,o,l);return[n.makeTensorInfo(h,r.dtype,u),n.makeTensorInfo([d.length],s.dtype,new Int32Array(d))]}const ket={kernelName:_Q,backendName:"webgl",kernelFunc:Aet};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Net(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${s.shape}`);const o=n.readSync(r.dataId),a=n.readSync(i.dataId),l=n.readSync(s.dataId),[u,h]=cre(o,r.shape,r.dtype,a,l,!0);return n.makeTensorInfo(h,r.dtype,u)}const Ret={kernelName:AQ,backendName:"webgl",kernelFunc:Net};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Det(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${s.shape}`);const o=n.readSync(r.dataId),a=n.readSync(i.dataId),l=n.readSync(s.dataId),[u,h]=cre(o,r.shape,r.dtype,a,l);return n.makeTensorInfo(h,r.dtype,u)}const $et={kernelName:kQ,backendName:"webgl",kernelFunc:Det};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oet(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:i,sparseValues:s,defaultValue:o}=e,{outputShape:a}=r,{sliceRank:l,numUpdates:u,sliceSize:h,strides:d,outputSize:p}=jf(s,i,a),g=!1;if(s.dtype==="string"){const w=n.bufferSync(i),C=n.bufferSync(s),E=Dc(n.readSync(o.dataId)[0]),_=s8e(w,C,a,p,h,u,l,d,E,g);return n.makeTensorInfo(a,_.dtype,_.values)}const y=new YM(u,l,i.shape.length,s.shape.length,d,[p,1],g),b=n.runWebGLProgram(y,[s,i,o],s.dtype),x=Le({inputs:{x:b},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(b),x}const Pet={kernelName:NQ,backendName:"webgl",kernelFunc:Oet};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Met(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{numOrSizeSplits:s,axis:o}=r,a=wt(o,i.shape)[0],l=uM(i,s,a),u=i.shape.length,h=new Array(u).fill(0),d=i.shape.slice();return l.map(p=>{const g=[...d];g[a]=p;const y=Rm({inputs:{x:i},backend:n,attrs:{begin:h,size:g}});return h[a]+=p,y})}const Let={kernelName:EC,backendName:"webgl",kernelFunc:Met};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e5="return sqrt(x);",Fet=Pt({opSnippet:e5,packedOpSnippet:e5,cpuKernelImpl:c8e}),Vet={kernelName:S0,backendName:"webgl",kernelFunc:Fet};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bet="return x * x;",zet=Pt({opSnippet:Bet}),Uet={kernelName:JO,backendName:"webgl",kernelFunc:zet};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t5="return (a - b) * (a - b);",jet=Wr({opSnippet:t5,packedOpSnippet:t5}),Wet={kernelName:T0,backendName:"webgl",kernelFunc:jet};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Get(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");const s=n.readSync(i.dataId),o=su(s),a=h8e(o,"string",r);return n.makeTensorInfo(i.shape,"string",a)}const Het={kernelName:eP,backendName:"webgl",kernelFunc:Get};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qet({inputs:t,attrs:e,backend:n}){const{x:r}=t,i=Ao+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,s=new Ma(r.shape,i);return n.runWebGLProgram(s,[r],r.dtype)}const Ket={kernelName:A0,backendName:"webgl",kernelFunc:qet};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Xet{constructor(e,n,r){this.variableNames=["x"],this.outputShape=r;const i=r.length,s=tn(r.length),o=tn(r.length);let a="";if(i===1)a="coords * strides + begin";else{let l=0;a=r.map((u,h)=>(l++,r.length===1?`coords * strides[${h}] + begin[${h}]`:`coords[${l-1}] * strides[${h}] + begin[${h}]`)).join(",")}this.userCode=`
      ${s} begin = ${s}(${e});
      ${s} strides = ${s}(${n});

      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yet(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:s,end:o,strides:a,beginMask:l,endMask:u,ellipsisMask:h,newAxisMask:d,shrinkAxisMask:p}=r,{finalShapeSparse:g,finalShape:y,isIdentity:b,sliceDim0:x,isSimpleSlice:w,begin:C,end:E,strides:_}=GP(i.shape,s,o,a,l,u,h,d,p);let A;if(b)A=Le({inputs:{x:i},backend:n,attrs:{shape:y}});else if(x||w){U(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);const N=UP(C,E,_),R=Rm({inputs:{x:i},backend:n,attrs:{begin:C,size:N}});A=Le({inputs:{x:R},backend:n,attrs:{shape:y}}),n.disposeIntermediateTensorInfo(R)}else if(n.shouldExecuteOnCPU([i])){const R=n.readSync(i.dataId),D=xt(i.shape,i.dtype,R),O=f8e(g,D,_,C);A=n.makeTensorInfo(y,i.dtype,O.values)}else{const R=new Xet(C,_,g);A=n.runWebGLProgram(R,[i],i.dtype)}const P=Le({inputs:{x:A},backend:n,attrs:{shape:y}});return n.disposeIntermediateTensorInfo(A),P}const Qet={kernelName:tP,backendName:"webgl",kernelFunc:Yet};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zet(t){const{inputs:e,backend:n,attrs:r}=t,{separator:i,nGramWidths:s,leftPad:o,rightPad:a,padWidth:l,preserveShortSequences:u}=r,{data:h,dataSplits:d}=e,p=n.readSync(h.dataId),g=n.readSync(d.dataId),[y,b]=d8e(p,g,i,s,o,a,l,u);return[n.makeTensorInfo([y.length],"string",y),n.makeTensorInfo(d.shape,"int32",b)]}const Jet={kernelName:RQ,backendName:"webgl",kernelFunc:Zet};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ett(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:i}=r,{input:s,delimiter:o}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(s.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const a=n.readSync(s.dataId),l=n.readSync(o.dataId)[0],[u,h,d]=p8e(a,l,i),p=h.length;return[n.makeTensorInfo([p,2],"int32",u),n.makeTensorInfo([p],"string",h),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const ttt={kernelName:DQ,backendName:"webgl",kernelFunc:ett};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ntt(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:i}=r,{input:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const o=n.readSync(s.dataId),a=m8e(o,i);return n.makeTensorInfo(s.shape,"int32",a)}const rtt={kernelName:$Q,backendName:"webgl",kernelFunc:ntt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const itt="return tan(x);",stt=Pt({opSnippet:itt}),ott={kernelName:E0,backendName:"webgl",kernelFunc:stt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const att=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,ltt=Pt({opSnippet:att}),utt={kernelName:I0,backendName:"webgl",kernelFunc:ltt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ctt(t){const{inputs:e,backend:n,attrs:r}=t,{tensor:i,indices:s,updates:o}=e,{sliceRank:a,numUpdates:l,sliceSize:u,strides:h,outputSize:d}=jf(o,s,i.shape),p=[d/u,u];if(d===0)return n.makeTensorInfo(i.shape,s.dtype);const g=Le({inputs:{x:s},backend:n,attrs:{shape:[l,a]}}),y=Le({inputs:{x:o},backend:n,attrs:{shape:[l,u]}}),b=Le({inputs:{x:i},backend:n,attrs:{shape:p}}),x=new YM(l,a,g.shape.length,y.shape.length,h,p,!1,!0),w=n.runWebGLProgram(x,[y,g,b],b.dtype),C=Le({inputs:{x:w},backend:n,attrs:{shape:i.shape}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(w),C}const htt={kernelName:CQ,backendName:"webgl",kernelFunc:ctt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ftt{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[o]*n[o];this.outputShape=r,this.rank=r.length;const i=tn(this.rank),s=dtt(e);this.userCode=`
      void main() {
        ${i} resRC = getOutputCoords();
        setOutput(getA(${s}));
      }
    `}}function dtt(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let i=0;i<t.length;i++)r.push(`imod(${n[i]}, ${t[i]})`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zre(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reps:s}=r;if(i.dtype==="string"||i.shape.length>5){const l=n.readSync(i.dataId),u=i.dtype==="string"?l.map(p=>Dc(p)):l,h=xt(i.shape,i.dtype,u),d=y8e(h,s);return n.makeTensorInfo(d.shape,d.dtype,d.values)}const o=new ftt(i.shape,s);return n.runWebGLProgram(o,[i],i.dtype)}const ptt={kernelName:_0,backendName:"webgl",kernelFunc:zre};class mtt{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class gtt{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nh(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function n5(t){let e=1;for(;e<t;)e*=2;return e}function ytt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{k:s,sorted:o}=r,a=ge().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=ge().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),u=i.shape,h=u[u.length-1];if(n.shouldExecuteOnCPU([i])||h<a||s>l){const O=n.readSync(i.dataId),[k,F]=v8e(O,u,i.dtype,s,o);return[n.makeTensorInfo(k.shape,k.dtype,k.values),n.makeTensorInfo(F.shape,F.dtype,F.values)]}if(s===0)return u[u.length-1]=0,[n.makeTensorInfo(u,i.dtype,[]),n.makeTensorInfo(u,"int32",[])];if(h===1)return[i,Z0({attrs:{shape:u,dtype:"int32",value:0},backend:n})];const d=n.texData.get(i.dataId),p=d!==null&&d.isPacked,g=p?n.unpackTensor(i):i,b=Se(u)/h,x=Le({inputs:{x:g},attrs:{shape:[b,h]},backend:n});p&&Nh(n,g);const w=n5(s),C=n5(h);let E=null;const _=()=>E===null?[x,x]:[x,E],A=(O,k,F)=>{const L=_(),q=new mtt(F),W=[[h],[E===null?1:0],[Number.NEGATIVE_INFINITY],[O],[k]],H=E;E=n.runWebGLProgram(q,L,"int32",W),Nh(n,H)};for(let O=1;O<w;O*=2){const k=O*2;for(let F=O;F>=1;F/=2)A(k,F,[b,C])}for(let O=C;O>w;O/=2){const k=_(),F=new gtt([b,O/2]),q=[[h],[E===null?1:0],[w]],Y=E;E=n.runWebGLProgram(F,k,"int32",q),Nh(n,Y);const W=w/2,H=W*2;for(let X=W;X>=1;X/=2)A(H,X,E.shape)}let P=E;E=Rm({inputs:{x:E},backend:n,attrs:{begin:0,size:[b,s]}}),Nh(n,P);let N=$re({inputs:{x,indices:E},backend:n,attrs:{axis:1,batchDims:1}});Nh(n,x);const R=u.slice(0,-1);R.push(s),P=E,E=Le({inputs:{x:E},attrs:{shape:R},backend:n}),Nh(n,P);const D=N;return N=Le({inputs:{x:N},attrs:{shape:R},backend:n}),Nh(n,D),[N,E]}const vtt={kernelName:nP,backendName:"webgl",kernelFunc:ytt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class btt{constructor(e,n,r,i,s,o){this.variableNames=["Image","Transforms"],this.outputShape=o;const a=r==="nearest"?1:2;let l;switch(i){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${s});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${s});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${e}));

                if (${a} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xtt(t){const{inputs:e,backend:n,attrs:r}=t,{image:i,transforms:s}=e,{interpolation:o,fillMode:a,fillValue:l,outputShape:u}=r,[h,d,p,g]=i.shape,[y,b]=u??[d,p],x=[h,y,b,g],w=new btt(d,p,o,a,l,x);return n.runWebGLProgram(w,[i,s],"float32")}const wtt={kernelName:rP,backendName:"webgl",kernelFunc:xtt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Stt(t){const{inputs:e,attrs:n,backend:r}=t,{axis:i}=n,{x:s}=e;X0(s,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const o=r.readSync(s.dataId),{outputValues:a,outputShape:l,indices:u}=b8e(o,i,s.shape,s.dtype);return[r.makeTensorInfo(l,s.dtype,a),r.makeTensorInfo([u.length],"int32",u)]}const Ttt={kernelName:iP,backendName:"webgl",kernelFunc:Stt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ctt(t){const{inputs:e,backend:n,attrs:r}=t,{value:i}=e;let{axis:s}=r;s<0&&(s+=i.shape.length);const o=i,a=o.shape.length,l=i.shape[s],u=new Array(a-1);let h=0;for(let b=0;b<a;b++)b!==s&&(u[h++]=o.shape[b]);const d=[],p=new Array(a).fill(0),g=o.shape.slice();g[s]=1;const y=new Array(l);for(let b=0;b<y.length;b++){p[s]=b;const x=Rm({inputs:{x:o},backend:n,attrs:{begin:p,size:g}}),w=Le({inputs:{x},backend:n,attrs:{shape:u}});y[b]=w,d.push(x)}return d.forEach(b=>n.disposeIntermediateTensorInfo(b)),y}const Ett={kernelName:_C,backendName:"webgl",kernelFunc:Ctt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Itt{constructor(e,n){this.variableNames=["x","segmentIds"];const r=e.windowSize,i=e.batchSize,s=e.inSize,o=e.numSegments,a=o*Math.ceil(s/r);this.outputShape=[i,a];const l="0.0",u="sumValue",h=Math.floor(r/4)*4,d=r%4,p=`
        sumValue += dot(values, segFilter);
    `;let g="";s%r>0&&(g=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return initializationValue;
        }
      `);let y="";s%r>0&&(y=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${g}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${y}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${o})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${o})));

        float sumValue = 0.0;

        for (int i = 0; i < ${h}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${p}
        }

        int inIdx = inOffset + ${h};
        if (${d===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${p}
        } else if (${d===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${p}
        } else if (${d===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${p}
        }
        setOutput(${u});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _tt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,segmentIds:s}=e,{numSegments:o}=r,a=i.shape.length,l=[];let u=0;const h=Rn([u],a);let d=i;h!=null&&(d=Ai({inputs:{x:i},backend:n,attrs:{perm:h}}),l.push(d),u=Bn(1,a)[0]);const p=SJ(d.shape,u,o),g=Se([d.shape[u]]),y=Le({inputs:{x:d},backend:n,attrs:{shape:[-1,g]}});l.push(y);const b=oP(i.dtype),x=(_,A,P,N,R)=>{const D=_.shape[0],O=_.shape[1],k=wJ(O,R),F={windowSize:k,inSize:O,batchSize:D,numSegments:R},L=new Itt(F,A),q=n.compileAndRun(L,[_,P],N);if(l.push(q),q.shape[1]===R)return q;const Y=Bre({backend:n,attrs:{start:0,stop:R,step:1,dtype:"float32"}}),W=zre({inputs:{x:Y},backend:n,attrs:{reps:[O/k]}});return l.push(Y),l.push(W),x(q,A,W,N,R)},w=x(y,"unsortedSegmentSum",s,b,o),C=Le({inputs:{x:w},backend:n,attrs:{shape:p}});let E=C;if(h!=null){l.push(C);const _=Hc(h);E=Ai({inputs:{x:E},backend:n,attrs:{perm:_}})}return l.forEach(_=>n.disposeIntermediateTensorInfo(_)),E}const Att={kernelName:AC,backendName:"webgl",kernelFunc:_tt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ktt=[cKe,fKe,mKe,vKe,xKe,TKe,EKe,_Ke,RKe,$Ke,MKe,VKe,UKe,HKe,XKe,QKe,JKe,r7e,s7e,a7e,h7e,v7e,x7e,C7e,I7e,D7e,O7e,F7e,q8e,z7e,H7e,Y7e,nXe,sXe,aXe,uXe,hXe,mXe,vXe,wXe,TXe,EXe,_Xe,NXe,DXe,MXe,FXe,zXe,WXe,HXe,YXe,eYe,iYe,aYe,cYe,hYe,dYe,mYe,yYe,bYe,wYe,EYe,AYe,RYe,$Ye,MYe,VYe,jYe,qYe,H8e,XYe,W7e,ZYe,tQe,iQe,X8e,lQe,fQe,pQe,vQe,wQe,EQe,AQe,DQe,MQe,VQe,zQe,GQe,qQe,XQe,JQe,tZe,rZe,sZe,aZe,hZe,mZe,bZe,_Ze,Z8e,RZe,OZe,LZe,BZe,A7e,jZe,GZe,qZe,YZe,eJe,Q8e,nJe,iJe,oJe,lJe,uJe,k7e,TZe,fJe,gJe,xJe,eKe,CJe,_Je,RJe,OJe,FJe,BJe,jJe,HJe,XJe,ZJe,tet,iet,uet,fet,get,bet,g7e,EZe,Tet,Eet,_et,ket,Ret,$et,Pet,Let,Vet,Uet,Wet,Het,Ket,Qet,Jet,ttt,rtt,CZe,aKe,ott,utt,htt,ptt,vtt,wtt,lKe,Ttt,Ett,Att,WZe];for(const t of ktt)PQ(t);const Ntt=["Aluminio","Carton","Vidrio","Otros"],Rtt={Aluminio:"Aluminio",Carton:"Cartn",Vidrio:"Vidrio",Otros:"Otro / No reciclable",desconocido:"No reconocido"};function Dtt({onMaterialDetectado:t}){const[e,n]=B.useState(null),[r,i]=B.useState(!1),[s,o]=B.useState(null),[a,l]=B.useState(""),[u,h]=B.useState(null),[d,p]=B.useState(!0),g=B.useRef(null);B.useEffect(()=>{async function x(){try{const C="/la-reserva/modelo-materiales/model.json";console.log("Intentando cargar modelo desde:",C);const E=await jze(C);h(E),console.log(" Modelo cargado correctamente:",E)}catch(w){console.error("Error cargando modelo:",w),l("No se pudo cargar el modelo de IA. Revis la ruta del model.json (mir consola).")}finally{p(!1)}}x()},[]);function y(x){const w=x.target.files[0];w&&(n(URL.createObjectURL(w)),o(null),l(""))}async function b(){if(!e)return alert("Sub una imagen primero");if(!u)return alert("El modelo de IA no est listo todava.");i(!0),o(null),l("");try{await new Promise(F=>setTimeout(F,50));const x=g.current;if(!x)throw new Error("No se encontr el elemento de imagen");const w=224,C=fe(()=>Y3e(x).resizeBilinear([w,w]).toFloat().div(255).expandDims(0)),E=u.predict(C),_=await E.data();vt([C,E]),console.log(" Predicciones crudas:",_);let A=0,P=_[0];for(let F=1;F<_.length;F++)_[F]>P&&(P=_[F],A=F);let N=Ntt[A]||"desconocido";const R=Math.round(P*100);R<80&&(N="desconocido");const O={materialId:N,nombre:Rtt[N]||N,confianza:R};o(O),t&&["Aluminio","Carton","Vidrio"].includes(N)&&t(O)}catch(x){console.error("Error al procesar imagen:",x),l("Ocurri un error al analizar la imagen.")}finally{i(!1)}}return se.jsxs("section",{className:"py-10",children:[se.jsx("h2",{className:"text-xl font-bold mb-3",children:"Procesamiento de imgenes con IA"}),se.jsxs("p",{className:"text-sm text-slate-600 mb-5",children:["Sub una foto de un material. El modelo trata de distinguir entre"," ",se.jsx("strong",{children:"Aluminio"}),", ",se.jsx("strong",{children:"Cartn"}),", ",se.jsx("strong",{children:"Vidrio"})," ","u ",se.jsx("strong",{children:"Otros"}),". Pods corregir el resultado en el formulario."]}),se.jsxs("div",{className:"rounded-2xl border bg-white p-5 flex flex-col items-center gap-4",children:[se.jsxs("label",{className:"flex flex-col items-center cursor-pointer border rounded-xl px-4 py-6 bg-emerald-50 hover:bg-emerald-100",children:[se.jsx(h0e,{className:"w-6 h-6 mb-2 text-emerald-700"}),se.jsx("span",{className:"text-sm font-medium text-emerald-800",children:"Seleccionar imagen"}),se.jsx("input",{type:"file",accept:"image/*",onChange:y,className:"hidden"})]}),e&&se.jsx("div",{className:"w-full md:w-1/2",children:se.jsx("img",{ref:g,src:e,alt:"Preview",className:"rounded-xl border shadow-sm w-full object-contain max-h-64"})}),se.jsxs("button",{onClick:b,disabled:!e||r||d,className:"px-4 py-2 rounded-xl bg-emerald-600 text-white flex items-center gap-2 disabled:opacity-50",children:[r?se.jsx(s0e,{className:"animate-spin w-4 h-4"}):se.jsx(r0e,{className:"w-4 h-4"}),d?"Cargando modelo...":"Procesar imagen"]}),a&&se.jsx("div",{className:"mt-3 text-sm text-red-600",children:a}),s&&se.jsxs("div",{className:"mt-6 w-full md:w-2/3 rounded-2xl border bg-white p-4 text-sm text-slate-700",children:[se.jsx("div",{className:"font-semibold mb-1",children:"Resultado del modelo:"}),se.jsxs("p",{children:["Material detectado:"," ",se.jsx("span",{className:"font-semibold",children:s.nombre})]}),se.jsxs("p",{children:["Confianza: ",s.confianza,"%"]}),se.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Este resultado es una ayuda automtica. Revis y correg si no coincide con el material real."})]})]})]})}const Ure=[{id:"aluminio",nombre:"Aluminio",tipo:"metal"},{id:"carton",nombre:"Cartn",tipo:"papel"},{id:"papel",nombre:"Papel",tipo:"papel"},{id:"chatarra",nombre:"Chatarra / Hojalata",tipo:"metal"},{id:"nylon",nombre:"Nylon",tipo:"plastico"},{id:"plasticos",nombre:"Plsticos",tipo:"plastico"},{id:"telgopor",nombre:"Telgopor",tipo:"plastico"},{id:"tetra",nombre:"Tetra",tipo:"compuesto"},{id:"vidrio",nombre:"Vidrio",tipo:"vidrio"}],$tt={aluminio:["Enjuagar latas para remover restos.","Aplastar para reducir volumen."],carton:["Evitar que est hmedo o con grasa.","Doblar/compactar cajas."],papel:["No incluir papel sanitario ni servilletas sucias.","Quitar clips/espirales si es posible."],chatarra:["Elementos pequeos y limpios.","Evitar puntas cortantes sueltas: proteger en bolsa."],nylon:["Lavar y secar.","Evitar mezclar con films muy sucios."],plasticos:["Enjuagar envases.","Tapas y etiquetas pueden ir (si estn limpias)."],telgopor:["Limpio y seco.","No romper en migas: embolsar."],tetra:["Enjuagar, escurrir, aplastar.","Dejar la tapa colocada."],vidrio:["Enjuagar frascos y botellas.","No incluir vidrios rotos sueltos (proteger)."]},iv={aportes:"lareserva_aportes",recordatorios:"lareserva_recordatorios",reportes:"lareserva_reportes"};function Ott(...t){return t.filter(Boolean).join(" ")}function jre(t){return new Date(t).toLocaleString()}function Wre(t,e){localStorage.setItem(t,JSON.stringify(e))}function QM(t,e){try{const n=localStorage.getItem(t);return n?JSON.parse(n):e}catch{return e}}function Ptt(){B.useEffect(()=>{Gve()},[]);const[t,e]=B.useState("inicio");return se.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-emerald-50 to-white text-slate-800",children:[se.jsx(Mtt,{onChangeTab:e,tab:t}),se.jsxs("main",{className:"mx-auto max-w-6xl px-4 pb-24",children:[t==="inicio"&&se.jsx(Ftt,{}),t==="guia"&&se.jsx(Vtt,{}),t==="aportes"&&se.jsx(n$e,{}),t==="recordatorios"&&se.jsx(Btt,{}),t==="comunidad"&&se.jsx(ztt,{}),t==="procesamiento"&&se.jsx(Dtt,{}),t==="reportes"&&se.jsx(Utt,{}),t==="admin"&&se.jsx(r$e,{})]}),se.jsx(Ltt,{})]})}function Mtt({tab:t,onChangeTab:e}){const n=[{key:"inicio",label:"Inicio",icon:se.jsx(bz,{className:"w-4 h-4"})},{key:"guia",label:"Gua",icon:se.jsx(k8,{className:"w-4 h-4"})},{key:"aportes",label:"Aportes",icon:se.jsx(E2,{className:"w-4 h-4"})},{key:"recordatorios",label:"Recordatorios",icon:se.jsx(Jve,{className:"w-4 h-4"})},{key:"comunidad",label:"Comunidad",icon:se.jsx(d0e,{className:"w-4 h-4"})},{key:"reportes",label:"Reportes",icon:se.jsx(N8,{className:"w-4 h-4"})},{key:"procesamiento",label:"Procesamiento",icon:se.jsx(E2,{className:"w-4 h-4"})},{key:"admin",label:"Admin",icon:se.jsx(u0e,{className:"w-4 h-4"})}];return se.jsx("div",{className:"sticky top-0 z-50 bg-white/80 backdrop-blur border-b",children:se.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-3 flex items-center gap-3 justify-between",children:[se.jsxs("div",{className:"flex items-center gap-3",children:[se.jsx(bz,{className:"w-6 h-6 text-emerald-600"}),se.jsx("span",{className:"font-semibold",children:"Proyecto La Reserva"})]}),se.jsx("nav",{className:"flex flex-wrap items-center gap-2",children:n.map(({key:r,label:i,icon:s})=>se.jsx("button",{onClick:()=>e(r),className:Ott("px-3 py-1.5 rounded-full text-sm border transition",t===r?"bg-emerald-600 text-white border-emerald-600 shadow":"bg-white hover:bg-emerald-50 border-slate-200"),children:se.jsxs("span",{className:"inline-flex items-center gap-2",children:[s,i]})},r))})]})})}function Ltt(){return se.jsx("div",{className:"border-t py-6 text-center text-xs text-slate-500",children:"Taller UNO  Educacin ambiental y economa circular  App demo comunitaria"})}function Ftt(){return se.jsxs("section",{className:"py-10",children:[se.jsxs(hce.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:[se.jsx("h1",{className:"text-2xl md:text-3xl font-bold mb-2",children:"Bienvenidos/as"}),se.jsx("p",{className:"text-slate-600 max-w-2xl",children:"Esta app comunitaria acompaa la separacin en origen, enva recordatorios de recoleccin, brinda recomendaciones educativas y genera reportes semanales agregados a nivel barrio. Los datos son comunitarios, no individuales."})]}),se.jsxs("div",{className:"grid md:grid-cols-3 gap-4 mt-8",children:[se.jsx(Dk,{title:"Gua de separacin",desc:"Consejos por material",icon:se.jsx(k8,{className:"w-5 h-5"})}),se.jsx(Dk,{title:"Cargar aporte",desc:"Indic qu residuos generaste",icon:se.jsx(E2,{className:"w-5 h-5"})}),se.jsx(Dk,{title:"Ver evolucin",desc:"Dashboard comunitario",icon:se.jsx(N8,{className:"w-5 h-5"})})]})]})}function Dk({title:t,desc:e,icon:n}){return se.jsxs("div",{className:"rounded-2xl border bg-white p-5 shadow-sm",children:[se.jsxs("div",{className:"flex items-center gap-3 mb-2 text-emerald-700",children:[n,se.jsx("h3",{className:"font-semibold",children:t})]}),se.jsx("p",{className:"text-sm text-slate-600",children:e})]})}function Vtt(){const t=B.useMemo(()=>{const e={};for(const n of Ure)e[n.tipo]=e[n.tipo]||[],e[n.tipo].push(n);return e},[]);return se.jsxs("section",{className:"py-10",children:[se.jsx("h2",{className:"text-xl font-bold mb-4",children:"Gua por material"}),se.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:Object.entries(t).map(([e,n])=>se.jsxs("div",{className:"rounded-2xl border bg-white p-4",children:[se.jsx("h3",{className:"font-semibold capitalize mb-3",children:e}),se.jsx("ul",{className:"space-y-3",children:n.map(r=>se.jsxs("li",{className:"border rounded-xl p-3",children:[se.jsx("div",{className:"font-medium",children:r.nombre}),se.jsx("ul",{className:"list-disc list-inside text-sm text-slate-600",children:$tt[r.id].map((i,s)=>se.jsx("li",{children:i},s))})]},r.id))})]},e))})]})}function Btt(){const[t,e]=B.useState(""),[n,r]=B.useState(""),[i,s]=B.useState("Sale recoleccin! Prepar tus reciclables limpios y secos."),[o,a]=B.useState(QM(iv.recordatorios,null));function l(){if(!t||!n){alert("Complet fecha y hora");return}const h={proximaFechaISO:new Date(`${t}T${n}`).toISOString(),mensaje:i};Wre(iv.recordatorios,h),a(h),e(""),r(""),alert("Recordatorio programado (local, demostracin)")}return se.jsxs("section",{className:"py-10",children:[se.jsx("h2",{className:"text-xl font-bold mb-2",children:"Recordatorios de recoleccin"}),se.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Configur un recordatorio local (simulado). En produccin real se conectara a un servicio de mensajera."}),se.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[se.jsxs("div",{className:"rounded-2xl border bg-white p-4",children:[se.jsx("label",{className:"text-sm font-medium",children:"Fecha"}),se.jsx("input",{type:"date",value:t,onChange:u=>e(u.target.value),className:"mt-1 w-full rounded-lg border px-3 py-2"})]}),se.jsxs("div",{className:"rounded-2xl border bg-white p-4",children:[se.jsx("label",{className:"text-sm font-medium",children:"Hora"}),se.jsx("input",{type:"time",value:n,onChange:u=>r(u.target.value),className:"mt-1 w-full rounded-lg border px-3 py-2"})]}),se.jsxs("div",{className:"rounded-2xl border bg-white p-4",children:[se.jsx("label",{className:"text-sm font-medium",children:"Mensaje"}),se.jsx("input",{value:i,onChange:u=>s(u.target.value),className:"mt-1 w-full rounded-lg border px-3 py-2"})]})]}),se.jsx("div",{className:"flex gap-3 mt-5",children:se.jsx("button",{onClick:l,className:"px-4 py-2 rounded-xl bg-emerald-600 text-white",children:"Guardar recordatorio"})}),o&&se.jsxs("div",{className:"mt-6 rounded-2xl border bg-white p-4",children:[se.jsx("div",{className:"text-sm text-slate-600",children:"Prximo recordatorio"}),se.jsx("div",{className:"font-medium",children:jre(o.proximaFechaISO)}),se.jsx("div",{className:"text-sm",children:o.mensaje})]})]})}function ztt(){const t=QM(iv.aportes,[]),e=B.useMemo(()=>{const r={};for(const i of t)for(const s of i.items)r[s.materialId]=(r[s.materialId]||0)+(s.cantidad||0);return Object.entries(r).map(([i,s])=>({material:Ure.find(o=>o.id===i)?.nombre||i,total:s}))},[t]),n=B.useMemo(()=>{const r={};for(const i of t){const s=new Date(i.fecha).toISOString().slice(0,10),o=i.items.reduce((a,l)=>a+(l.cantidad||0),0);r[s]=(r[s]||0)+o}return Object.entries(r).map(([i,s])=>({fecha:i,total:s})).sort((i,s)=>i.fecha.localeCompare(s.fecha))},[t]);return se.jsxs("section",{className:"py-10",children:[se.jsx("h2",{className:"text-xl font-bold mb-2",children:"Evolucin comunitaria"}),se.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Totales agregados a nivel barrio (demo, datos locales)."}),se.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[se.jsxs("div",{className:"rounded-2xl border bg-white p-4 h-[360px]",children:[se.jsx("div",{className:"font-medium mb-2",children:"Aportes por material"}),se.jsx(XU,{width:"100%",height:"90%",children:se.jsxs(pW,{data:e,children:[se.jsx(mN,{strokeDasharray:"3 3"}),se.jsx(yN,{dataKey:"material",interval:0,angle:-15,textAnchor:"end",height:60}),se.jsx(bN,{}),se.jsx(C6,{}),se.jsx(Ly,{}),se.jsx(dN,{dataKey:"total",name:"Total"})]})})]}),se.jsxs("div",{className:"rounded-2xl border bg-white p-4 h-[360px]",children:[se.jsx("div",{className:"font-medium mb-2",children:"Serie temporal (kg/unid por da)"}),se.jsx(XU,{width:"100%",height:"90%",children:se.jsxs(pW,{data:n,children:[se.jsx(mN,{strokeDasharray:"3 3"}),se.jsx(yN,{dataKey:"fecha"}),se.jsx(bN,{}),se.jsx(C6,{}),se.jsx(Ly,{}),se.jsx(dN,{dataKey:"total",name:"Total diario"})]})})]})]})]})}function Utt(){const[t,e]=B.useState(""),[n,r]=B.useState(""),i=QM(iv.reportes,[]);function s(){const o=Number(t.replace(",","."));if(isNaN(o)||o<0||o>100){alert("Ingres un porcentaje vlido entre 0 y 100");return}const l=[{id:crypto.randomUUID(),fecha:new Date().toISOString(),porcentajeNoReciclable:o,observaciones:n||void 0},...i];Wre(iv.reportes,l),e(""),r("")}return se.jsxs("section",{className:"py-10",children:[se.jsx("h2",{className:"text-xl font-bold mb-2",children:"Reporte semanal (difusin comunitaria)"}),se.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Aproximadamente una semana despus de cada recoleccin, public el % de material no reciclable detectado en planta."}),se.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[se.jsxs("div",{className:"rounded-2xl border bg-white p-4",children:[se.jsx("label",{className:"text-sm font-medium",children:"% no reciclable"}),se.jsx("input",{value:t,onChange:o=>e(o.target.value),className:"mt-1 w-full rounded-lg border px-3 py-2",placeholder:"Ej: 7.5"})]}),se.jsxs("div",{className:"md:col-span-2 rounded-2xl border bg-white p-4",children:[se.jsx("label",{className:"text-sm font-medium",children:"Observaciones"}),se.jsx("input",{value:n,onChange:o=>r(o.target.value),className:"mt-1 w-full rounded-lg border px-3 py-2",placeholder:"Errores comunes, recomendaciones, prximos pasos"})]})]}),se.jsx("div",{className:"flex gap-3 mt-5",children:se.jsx("button",{onClick:s,className:"px-4 py-2 rounded-xl bg-emerald-600 text-white",children:"Publicar reporte"})}),se.jsx("div",{className:"mt-8 grid md:grid-cols-2 gap-4",children:i.map(o=>se.jsxs("div",{className:"rounded-2xl border bg-white p-4",children:[se.jsx("div",{className:"text-xs text-slate-500",children:jre(o.fecha)}),se.jsxs("div",{className:"font-semibold text-lg",children:["No reciclable: ",o.porcentajeNoReciclable.toFixed(2),"%"]}),o.observaciones&&se.jsx("div",{className:"text-sm mt-1",children:o.observaciones}),se.jsx("div",{className:"text-sm text-emerald-700 mt-2",children:jtt(o.porcentajeNoReciclable)})]},o.id))})]})}function jtt(t){return t<5?"Excelente! El barrio est separando muy bien. Sigamos as.":t<12?"Muy bien. Podemos mejorar en plsticos limpios y cartones secos.":t<20?"Bien, pero hay oportunidades: revisar humedad en cartones y restos en envases.":"Atencin: necesitamos reforzar la separacin. Le la gua y prepar tus reciclables limpios y secos."}Dse.createRoot(document.getElementById("root")).render(se.jsx(B.StrictMode,{children:se.jsx(Ptt,{})}));
